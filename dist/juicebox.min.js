!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).hic=e()}(this,(function(){"use strict";
/*!
   * jQuery JavaScript Library v3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector
   * https://jquery.com/
   *
   * Includes Sizzle.js
   * https://sizzlejs.com/
   *
   * Copyright JS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2018-01-20T17:24Z
   */var t=[],e=window.document,n=Object.getPrototypeOf,r=t.slice,i=t.concat,o=t.push,a=t.indexOf,s={},c=s.toString,h=s.hasOwnProperty,l=h.toString,u=l.call(Object),f={},p=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},d=function(t){return null!=t&&t===t.window},g={type:!0,src:!0,noModule:!0};function m(t,n,r){var i,o=(n=n||e).createElement("script");if(o.text=t,r)for(i in g)r[i]&&(o[i]=r[i]);n.head.appendChild(o).parentNode.removeChild(o)}function v(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?s[c.call(t)]||"object":typeof t}var y="3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",w=function(t,e){return new w.fn.init(t,e)},b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function x(t){var e=!!t&&"length"in t&&t.length,n=v(t);return!p(t)&&!d(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}w.fn=w.prototype={jquery:y,constructor:w,length:0,toArray:function(){return r.call(this)},get:function(t){return null==t?r.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:t.sort,splice:t.splice},w.extend=w.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||p(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(r=t[e])&&(h&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[e]=w.extend(h,o,r)):void 0!==r&&(a[e]=r));return a},w.extend({expando:"jQuery"+(y+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,r;return!(!t||"[object Object]"!==c.call(t))&&(!(e=n(t))||"function"==typeof(r=h.call(e,"constructor")&&e.constructor)&&l.call(r)===u)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){m(t)},each:function(t,e){var n,r=0;if(x(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(b,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(x(Object(t))?w.merge(n,"string"==typeof t?[t]:t):o.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:a.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,o,a=0,s=[];if(x(t))for(r=t.length;a<r;a++)null!=(o=e(t[a],a,n))&&s.push(o);else for(a in t)null!=(o=e(t[a],a,n))&&s.push(o);return i.apply([],s)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=t[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){s["[object "+e+"]"]=e.toLowerCase()}));var k=
/*!
   * Sizzle CSS Selector Engine v2.3.3
   * https://sizzlejs.com/
   *
   * Copyright jQuery Foundation and other contributors
   * Released under the MIT license
   * http://jquery.org/license
   *
   * Date: 2016-08-08
   */
function(t){var e,n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b="sizzle"+1*new Date,x=t.document,k=0,S=0,C=at(),_=at(),R=at(),T=function(t,e){return t===e&&(u=!0),0},E={}.hasOwnProperty,A=[],L=A.pop,I=A.push,M=A.push,D=A.slice,B=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",O="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",P="\\["+N+"*("+O+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+N+"*\\]",z=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",$=new RegExp(N+"+","g"),U=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),H=new RegExp("^"+N+"*,"+N+"*"),j=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),V=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),q=new RegExp(z),G=new RegExp("^"+O+"$"),W={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){f()},it=yt((function(t){return!0===t.disabled&&("form"in t||"label"in t)}),{dir:"parentNode",next:"legend"});try{M.apply(A=D.call(x.childNodes),x.childNodes),A[x.childNodes.length].nodeType}catch(t){M={apply:A.length?function(t,e){I.apply(t,D.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,s,h,l,u,d,v,y=e&&e.ownerDocument,k=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==k&&9!==k&&11!==k)return r;if(!i&&((e?e.ownerDocument||e:x)!==p&&f(e),e=e||p,g)){if(11!==k&&(u=Y.exec(t)))if(o=u[1]){if(9===k){if(!(h=e.getElementById(o)))return r;if(h.id===o)return r.push(h),r}else if(y&&(h=y.getElementById(o))&&w(e,h)&&h.id===o)return r.push(h),r}else{if(u[2])return M.apply(r,e.getElementsByTagName(t)),r;if((o=u[3])&&n.getElementsByClassName&&e.getElementsByClassName)return M.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!R[t+" "]&&(!m||!m.test(t))){if(1!==k)y=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(et,nt):e.setAttribute("id",l=b),s=(d=a(t)).length;s--;)d[s]="#"+l+" "+vt(d[s]);v=d.join(","),y=Q.test(t)&&gt(e.parentNode)||e}if(v)try{return M.apply(r,y.querySelectorAll(v)),r}catch(t){}finally{l===b&&e.removeAttribute("id")}}}return c(t.replace(U,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[b]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ut(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function pt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function dt(t){return st((function(e){return e=+e,st((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:x;return a!==p&&9===a.nodeType&&a.documentElement?(d=(p=a).documentElement,g=!o(p),x!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=X.test(p.getElementsByClassName),n.getById=ct((function(t){return d.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(J,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(J,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=X.test(p.querySelectorAll))&&(ct((function(t){d.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+N+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+N+"*(?:value|"+F+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+N+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=X.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",z)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=X.test(d.compareDocumentPosition),w=e||X.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return u=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===p||t.ownerDocument===x&&w(x,t)?-1:e===p||e.ownerDocument===x&&w(x,e)?1:l?B(l,t)-B(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===p?-1:e===p?1:i?-1:o?1:l?B(l,t)-B(l,e):0;if(i===o)return lt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?lt(a[r],s[r]):a[r]===x?-1:s[r]===x?1:0},p):p},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&f(t),e=e.replace(V,"='$1']"),n.matchesSelector&&g&&!R[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,p,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==p&&f(t),w(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==p&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&E.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(u=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(T),u){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:st,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(J,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(J,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(J,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&C(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,c){var h,l,u,f,p,d,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!c&&!s,w=!1;if(m){if(o){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&y){for(w=(p=(h=(l=(u=(f=m)[b]||(f[b]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]||[])[0]===k&&h[1])&&h[2],f=p&&m.childNodes[p];f=++p&&f&&f[g]||(w=p=0)||d.pop();)if(1===f.nodeType&&++w&&f===e){l[t]=[k,p,w];break}}else if(y&&(w=p=(h=(l=(u=(f=e)[b]||(f[b]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]||[])[0]===k&&h[1]),!1===w)for(;(f=++p&&f&&f[g]||(w=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++w||(y&&((l=(u=f[b]||(f[b]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]=[k,w]),f!==e)););return(w-=i)===r||w%r==0&&w/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st((function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=B(t,o[a])]=!(n[r]=o[a])})):function(t){return i(t,0,n)}):i}},pseudos:{not:st((function(t){var e=[],n=[],r=s(t.replace(U,"$1"));return r[b]?st((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:st((function(t){return function(e){return ot(t,e).length>0}})),contains:st((function(t){return t=t.replace(J,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}})),lang:st((function(t){return G.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(J,tt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:pt(!1),disabled:pt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:dt((function(){return[0]})),last:dt((function(t,e){return[e-1]})),eq:dt((function(t,e,n){return[n<0?n+e:n]})),even:dt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:dt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:dt((function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t})),gt:dt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ut(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ft(e);function mt(){}function vt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function yt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=S++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,c){var h,l,u,f=[k,s];if(c){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,c))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(l=(u=e[b]||(e[b]={}))[e.uniqueID]||(u[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((h=l[o])&&h[0]===k&&h[1]===s)return f[2]=h[2];if(l[o]=f,f[2]=t(e,n,c))return!0}return!1}}function wt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function bt(t,e,n,r,i){for(var o,a=[],s=0,c=t.length,h=null!=e;s<c;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),h&&e.push(s)));return a}function xt(t,e,n,r,i,o){return r&&!r[b]&&(r=xt(r)),i&&!i[b]&&(i=xt(i,o)),st((function(o,a,s,c){var h,l,u,f=[],p=[],d=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?g:bt(g,f,t,s,c),v=n?i||(o?t:d||r)?[]:a:m;if(n&&n(m,v,s,c),r)for(h=bt(v,p),r(h,[],s,c),l=h.length;l--;)(u=h[l])&&(v[p[l]]=!(m[p[l]]=u));if(o){if(i||t){if(i){for(h=[],l=v.length;l--;)(u=v[l])&&h.push(m[l]=u);i(null,v=[],h,c)}for(l=v.length;l--;)(u=v[l])&&(h=i?B(o,u):f[l])>-1&&(o[h]=!(a[h]=u))}}else v=bt(v===a?v.splice(d,v.length):v),i?i(null,a,v,c):M.apply(a,v)}))}function kt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],c=a?1:0,l=yt((function(t){return t===e}),s,!0),u=yt((function(t){return B(e,t)>-1}),s,!0),f=[function(t,n,r){var i=!a&&(r||n!==h)||((e=n).nodeType?l(t,n,r):u(t,n,r));return e=null,i}];c<o;c++)if(n=r.relative[t[c].type])f=[yt(wt(f),n)];else{if((n=r.filter[t[c].type].apply(null,t[c].matches))[b]){for(i=++c;i<o&&!r.relative[t[i].type];i++);return xt(c>1&&wt(f),c>1&&vt(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(U,"$1"),n,c<i&&kt(t.slice(c,i)),i<o&&kt(t=t.slice(i)),i<o&&vt(t))}f.push(n)}return wt(f)}return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,a=ot.tokenize=function(t,e){var n,i,o,a,s,c,h,l=_[t+" "];if(l)return e?0:l.slice(0);for(s=t,c=[],h=r.preFilter;s;){for(a in n&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(o=[])),n=!1,(i=j.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(i=W[a].exec(s))||h[a]&&!(i=h[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):_(t,c).slice(0)},s=ot.compile=function(t,e){var n,i=[],o=[],s=R[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=kt(e[n]))[b]?i.push(s):o.push(s);(s=R(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,c,l){var u,d,m,v=0,y="0",w=o&&[],b=[],x=h,S=o||i&&r.find.TAG("*",l),C=k+=null==x?1:Math.random()||.1,_=S.length;for(l&&(h=a===p||a||l);y!==_&&null!=(u=S[y]);y++){if(i&&u){for(d=0,a||u.ownerDocument===p||(f(u),s=!g);m=t[d++];)if(m(u,a||p,s)){c.push(u);break}l&&(k=C)}n&&((u=!m&&u)&&v--,o&&w.push(u))}if(v+=y,n&&y!==v){for(d=0;m=e[d++];)m(w,b,a,s);if(o){if(v>0)for(;y--;)w[y]||b[y]||(b[y]=L.call(c));b=bt(b)}M.apply(c,b),l&&!o&&b.length>0&&v+e.length>1&&ot.uniqueSort(c)}return l&&(k=C,h=x),w};return n?st(o):o}(o,i))).selector=t}return s},c=ot.select=function(t,e,n,i){var o,c,h,l,u,f="function"==typeof t&&t,p=!i&&a(t=f.selector||t);if(n=n||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(h=c[0]).type&&9===e.nodeType&&g&&r.relative[c[1].type]){if(!(e=(r.find.ID(h.matches[0].replace(J,tt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(o=W.needsContext.test(t)?0:c.length;o--&&(h=c[o],!r.relative[l=h.type]);)if((u=r.find[l])&&(i=u(h.matches[0].replace(J,tt),Q.test(c[0].type)&&gt(e.parentNode)||e))){if(c.splice(o,1),!(t=i.length&&vt(c)))return M.apply(n,i),n;break}}return(f||s(t,p))(i,e,!g,n,!e||Q.test(t)&&gt(e.parentNode)||e),n},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!u,f(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||ht(F,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),ot}(window);w.find=k,w.expr=k.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=k.uniqueSort,w.text=k.getText,w.isXMLDoc=k.isXML,w.contains=k.contains,w.escapeSelector=k.escape;var S=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&w(t).is(n))break;r.push(t)}return r},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},_=w.expr.match.needsContext;function R(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function E(t,e,n){return p(e)?w.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?w.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?w.grep(t,(function(t){return a.call(e,t)>-1!==n})):w.filter(e,t,n)}w.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?w.find.matchesSelector(r,t)?[r]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<r;e++)if(w.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)w.find(t,i[e],n);return r>1?w.uniqueSort(n):n},filter:function(t){return this.pushStack(E(this,t||[],!1))},not:function(t){return this.pushStack(E(this,t||[],!0))},is:function(t){return!!E(this,"string"==typeof t&&_.test(t)?w(t):t||[],!1).length}});var A,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,n,r){var i,o;if(!t)return this;if(r=r||A,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!i[1]&&n)return!n||n.jquery?(n||r).find(t):this.constructor(n).find(t);if(i[1]){if(n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:e,!0)),T.test(i[1])&&w.isPlainObject(n))for(i in n)p(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}return(o=e.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):p(t)?void 0!==r.ready?r.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,A=w(e);var I=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function D(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&w(t);if(!_.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?a.call(w(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,n){return S(t,"parentNode",n)},next:function(t){return D(t,"nextSibling")},prev:function(t){return D(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,n){return S(t,"nextSibling",n)},prevUntil:function(t,e,n){return S(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return R(t,"iframe")?t.contentDocument:(R(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(n,r){var i=w.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(M[t]||w.uniqueSort(i),I.test(t)&&i.reverse()),this.pushStack(i)}}));var B=/[^\x20\t\r\n\f]+/g;function F(t){return t}function N(t){throw t}function O(t,e,n,r){var i;try{t&&p(i=t.promise)?i.call(t).done(e).fail(n):t&&p(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}w.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return w.each(t.match(B)||[],(function(t,n){e[n]=!0})),e}(t):w.extend({},t);var e,n,r,i,o=[],a=[],s=-1,c=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},h={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){w.each(n,(function(n,r){p(r)?t.unique&&h.has(r)||o.push(r):r&&r.length&&"string"!==v(r)&&e(r)}))}(arguments),n&&!e&&c()),this},remove:function(){return w.each(arguments,(function(t,e){for(var n;(n=w.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(t){return t?w.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},w.extend({Deferred:function(t){var e=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(n){w.each(e,(function(e,r){var o=p(t[r[4]])&&t[r[4]];i[r[1]]((function(){var t=o&&o.apply(this,arguments);t&&p(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,r){var i=0;function o(t,e,n,r){return function(){var a=this,s=arguments,c=function(){var c,h;if(!(t<i)){if((c=n.apply(a,s))===e.promise())throw new TypeError("Thenable self-resolution");h=c&&("object"==typeof c||"function"==typeof c)&&c.then,p(h)?r?h.call(c,o(i,e,F,r),o(i,e,N,r)):(i++,h.call(c,o(i,e,F,r),o(i,e,N,r),o(i,e,F,e.notifyWith))):(n!==F&&(a=void 0,s=[c]),(r||e.resolveWith)(a,s))}},h=r?c:function(){try{c()}catch(r){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(r,h.stackTrace),t+1>=i&&(n!==N&&(a=void 0,s=[r]),e.rejectWith(a,s))}};t?h():(w.Deferred.getStackHook&&(h.stackTrace=w.Deferred.getStackHook()),window.setTimeout(h))}}return w.Deferred((function(i){e[0][3].add(o(0,i,p(r)?r:F,i.notifyWith)),e[1][3].add(o(0,i,p(t)?t:F)),e[2][3].add(o(0,i,p(n)?n:N))})).promise()},promise:function(t){return null!=t?w.extend(t,r):r}},i={};return w.each(e,(function(t,o){var a=o[2],s=o[5];r[o[1]]=a.add,s&&a.add((function(){n=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(o[3].fire),i[o[0]]=function(){return i[o[0]+"With"](this===i?void 0:this,arguments),this},i[o[0]+"With"]=a.fireWith})),r.promise(i),t&&t.call(i,i),i},when:function(t){var e=arguments.length,n=e,i=Array(n),o=r.call(arguments),a=w.Deferred(),s=function(t){return function(n){i[t]=this,o[t]=arguments.length>1?r.call(arguments):n,--e||a.resolveWith(i,o)}};if(e<=1&&(O(t,a.done(s(n)).resolve,a.reject,!e),"pending"===a.state()||p(o[n]&&o[n].then)))return a.then();for(;n--;)O(o[n],s(n),a.reject);return a.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,e){window.console&&window.console.warn&&t&&P.test(t.name)&&window.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},w.readyException=function(t){window.setTimeout((function(){throw t}))};var z=w.Deferred();function $(){e.removeEventListener("DOMContentLoaded",$),window.removeEventListener("load",$),w.ready()}w.fn.ready=function(t){return z.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==t&&--w.readyWait>0||z.resolveWith(e,[w]))}}),w.ready.then=z.then,"complete"===e.readyState||"loading"!==e.readyState&&!e.documentElement.doScroll?window.setTimeout(w.ready):(e.addEventListener("DOMContentLoaded",$),window.addEventListener("load",$));var U=function(t,e,n,r,i,o,a){var s=0,c=t.length,h=null==n;if("object"===v(n))for(s in i=!0,n)U(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,p(r)||(a=!0),h&&(a?(e.call(t,r),e=null):(h=e,e=function(t,e,n){return h.call(w(t),n)})),e))for(;s<c;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:h?e.call(t):c?e(t[0],n):o},H=/^-ms-/,j=/-([a-z])/g;function V(t,e){return e.toUpperCase()}function q(t){return t.replace(H,"ms-").replace(j,V)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function W(){this.expando=w.expando+W.uid++}W.uid=1,W.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[q(e)]=n;else for(r in e)i[q(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][q(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(q):(e=q(e))in r?[e]:e.match(B)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||w.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var Z=new W,K=new W,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Q(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Y,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:X.test(t)?JSON.parse(t):t)}(n)}catch(t){}K.set(t,e,n)}else n=void 0;return n}w.extend({hasData:function(t){return K.hasData(t)||Z.hasData(t)},data:function(t,e,n){return K.access(t,e,n)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,n){return Z.access(t,e,n)},_removeData:function(t,e){Z.remove(t,e)}}),w.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=K.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=q(r.slice(5)),Q(o,r,i[r]));Z.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){K.set(this,t)})):U(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=K.get(o,t))?n:void 0!==(n=Q(o,t))?n:void 0;this.each((function(){K.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){K.remove(this,t)}))}}),w.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Z.get(t,e),n&&(!r||Array.isArray(n)?r=Z.access(t,e,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=w.queue(t,e),r=n.length,i=n.shift(),o=w._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){w.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Z.get(t,n)||Z.access(t,n,{empty:w.Callbacks("once memory").add((function(){Z.remove(t,[e+"queue",n])}))})}}),w.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?w.queue(this[0],t):void 0===e?this:this.each((function(){var n=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Z.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tt=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),et=["Top","Right","Bottom","Left"],nt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&w.contains(t.ownerDocument,t)&&"none"===w.css(t,"display")},rt=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};var it={};function ot(t){var e,n=t.ownerDocument,r=t.nodeName,i=it[r];return i||(e=n.body.appendChild(n.createElement(r)),i=w.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),it[r]=i,i)}function at(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=Z.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&nt(r)&&(i[o]=ot(r))):"none"!==n&&(i[o]="none",Z.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}w.fn.extend({show:function(){return at(this,!0)},hide:function(){return at(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){nt(this)?w(this).show():w(this).hide()}))}});var st=/^(?:checkbox|radio)$/i,ct=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ht=/^$|^module$|\/(?:java|ecma)script/i,lt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ut(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&R(t,e)?w.merge([t],n):n}function ft(t,e){for(var n=0,r=t.length;n<r;n++)Z.set(t[n],"globalEval",!e||Z.get(e[n],"globalEval"))}lt.optgroup=lt.option,lt.tbody=lt.tfoot=lt.colgroup=lt.caption=lt.thead,lt.th=lt.td;var pt=/<|&#?\w+;/;function dt(t,e,n,r,i){for(var o,a,s,c,h,l,u=e.createDocumentFragment(),f=[],p=0,d=t.length;p<d;p++)if((o=t[p])||0===o)if("object"===v(o))w.merge(f,o.nodeType?[o]:o);else if(pt.test(o)){for(a=a||u.appendChild(e.createElement("div")),s=(ct.exec(o)||["",""])[1].toLowerCase(),c=lt[s]||lt._default,a.innerHTML=c[1]+w.htmlPrefilter(o)+c[2],l=c[0];l--;)a=a.lastChild;w.merge(f,a.childNodes),(a=u.firstChild).textContent=""}else f.push(e.createTextNode(o));for(u.textContent="",p=0;o=f[p++];)if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(h=w.contains(o.ownerDocument,o),a=ut(u.appendChild(o),"script"),h&&ft(a),n)for(l=0;o=a[l++];)ht.test(o.type||"")&&n.push(o);return u}!function(){var t=e.createDocumentFragment().appendChild(e.createElement("div")),n=e.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),f.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var gt=e.documentElement,mt=/^key/,vt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,yt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function bt(){return!1}function xt(){try{return e.activeElement}catch(t){}}function kt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)kt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=bt;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return w().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),t.each((function(){w.event.add(this,e,i,r,n)}))}w.event={global:{},add:function(t,e,n,r,i){var o,a,s,c,h,l,u,f,p,d,g,m=Z.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(gt,i),n.guid||(n.guid=w.guid++),(c=m.events)||(c=m.events={}),(a=m.handle)||(a=m.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(B)||[""]).length;h--;)p=g=(s=yt.exec(e[h])||[])[1],d=(s[2]||"").split(".").sort(),p&&(u=w.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,u=w.event.special[p]||{},l=w.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=c[p])||((f=c[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,r,d,a)||t.addEventListener&&t.addEventListener(p,a)),u.add&&(u.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),w.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,a,s,c,h,l,u,f,p,d,g,m=Z.hasData(t)&&Z.get(t);if(m&&(c=m.events)){for(h=(e=(e||"").match(B)||[""]).length;h--;)if(p=g=(s=yt.exec(e[h])||[])[1],d=(s[2]||"").split(".").sort(),p){for(u=w.event.special[p]||{},f=c[p=(r?u.delegateType:u.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,u.remove&&u.remove.call(t,l));a&&!f.length&&(u.teardown&&!1!==u.teardown.call(t,d,m.handle)||w.removeEvent(t,p,m.handle),delete c[p])}else for(p in c)w.event.remove(t,p+e[h],n,r,!0);w.isEmptyObject(c)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=w.event.fix(t),c=new Array(arguments.length),h=(Z.get(this,"events")||{})[s.type]||[],l=w.event.special[s.type]||{};for(c[0]=s,e=1;e<arguments.length;e++)c[e]=arguments[e];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=w.event.handlers.call(this,s,h),e=0;(i=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,c))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,r,i,o,a,s=[],c=e.delegateCount,h=t.target;if(c&&h.nodeType&&!("click"===t.type&&t.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],a={},n=0;n<c;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(h)>-1:w.find(i,this,null,[h]).length),a[i]&&o.push(r);o.length&&s.push({elem:h,handlers:o})}return h=this,c<e.length&&s.push({elem:h,handlers:e.slice(c)}),s},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:p(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&R(this,"input"))return this.click(),!1},_default:function(t){return R(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:bt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:bt,isPropagationStopped:bt,isImmediatePropagationStopped:bt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&mt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&vt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||w.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),w.fn.extend({on:function(t,e,n,r){return kt(this,t,e,n,r)},one:function(t,e,n,r){return kt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,w(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=bt),this.each((function(){w.event.remove(this,t,n,e)}))}});var St=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ct=/<script|<style|<link/i,_t=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Tt(t,e){return R(t,"table")&&R(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Et(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function At(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Lt(t,e){var n,r,i,o,a,s,c,h;if(1===e.nodeType){if(Z.hasData(t)&&(o=Z.access(t),a=Z.set(e,o),h=o.events))for(i in delete a.handle,a.events={},h)for(n=0,r=h[i].length;n<r;n++)w.event.add(e,i,h[i][n]);K.hasData(t)&&(s=K.access(t),c=w.extend({},s),K.set(e,c))}}function It(t,e){var n=e.nodeName.toLowerCase();"input"===n&&st.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Mt(t,e,n,r){e=i.apply([],e);var o,a,s,c,h,l,u=0,d=t.length,g=d-1,v=e[0],y=p(v);if(y||d>1&&"string"==typeof v&&!f.checkClone&&_t.test(v))return t.each((function(i){var o=t.eq(i);y&&(e[0]=v.call(this,i,o.html())),Mt(o,e,n,r)}));if(d&&(a=(o=dt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===o.childNodes.length&&(o=a),a||r)){for(c=(s=w.map(ut(o,"script"),Et)).length;u<d;u++)h=o,u!==g&&(h=w.clone(h,!0,!0),c&&w.merge(s,ut(h,"script"))),n.call(t[u],h,u);if(c)for(l=s[s.length-1].ownerDocument,w.map(s,At),u=0;u<c;u++)h=s[u],ht.test(h.type||"")&&!Z.access(h,"globalEval")&&w.contains(l,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(h.src):m(h.textContent.replace(Rt,""),l,h))}return t}function Dt(t,e,n){for(var r,i=e?w.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ut(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ft(ut(r,"script")),r.parentNode.removeChild(r));return t}w.extend({htmlPrefilter:function(t){return t.replace(St,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),c=w.contains(t.ownerDocument,t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(a=ut(s),r=0,i=(o=ut(t)).length;r<i;r++)It(o[r],a[r]);if(e)if(n)for(o=o||ut(t),a=a||ut(s),r=0,i=o.length;r<i;r++)Lt(o[r],a[r]);else Lt(t,s);return(a=ut(s,"script")).length>0&&ft(a,!c&&ut(t,"script")),s},cleanData:function(t){for(var e,n,r,i=w.event.special,o=0;void 0!==(n=t[o]);o++)if(G(n)){if(e=n[Z.expando]){if(e.events)for(r in e.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,e.handle);n[Z.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Dt(this,t,!0)},remove:function(t){return Dt(this,t)},text:function(t){return U(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Mt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Tt(this,t).appendChild(t)}))},prepend:function(){return Mt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Tt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Mt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Mt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(ut(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return U(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ct.test(t)&&!lt[(ct.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(w.cleanData(ut(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Mt(this,arguments,(function(e){var n=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(ut(this)),n&&n.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var n,r=[],i=w(t),a=i.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),w(i[s])[e](n),o.apply(r,n.get());return this.pushStack(r)}}));var Bt=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),Ft=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)},Nt=new RegExp(et.join("|"),"i");function Ot(t,e,n){var r,i,o,a,s=t.style;return(n=n||Ft(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||w.contains(t.ownerDocument,t)||(a=w.style(t,e)),!f.pixelBoxStyles()&&Bt.test(a)&&Nt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Pt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gt.appendChild(c).appendChild(h);var t=window.getComputedStyle(h);r="1%"!==t.top,s=12===n(t.marginLeft),h.style.right="60%",a=36===n(t.right),i=36===n(t.width),h.style.position="absolute",o=36===h.offsetWidth||"absolute",gt.removeChild(c),h=null}}function n(t){return Math.round(parseFloat(t))}var r,i,o,a,s,c=e.createElement("div"),h=e.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===h.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),o}}))}();var zt,$t,Ut=/^(none|table(?!-c[ea]).+)/,Ht=/^--/,jt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:"0",fontWeight:"400"},qt=["Webkit","Moz","ms"],Gt=e.createElement("div").style;function Wt(t){var e=w.cssProps[t];return e||(e=w.cssProps[t]=function(t){if(t in Gt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=qt.length;n--;)if((t=qt[n]+e)in Gt)return t}(t)||t),e}function Zt(t,e,n){var r=tt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Kt(t,e,n,r,i,o){var a="width"===e?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=w.css(t,n+et[a],!0,i)),r?("content"===n&&(c-=w.css(t,"padding"+et[a],!0,i)),"margin"!==n&&(c-=w.css(t,"border"+et[a]+"Width",!0,i))):(c+=w.css(t,"padding"+et[a],!0,i),"padding"!==n?c+=w.css(t,"border"+et[a]+"Width",!0,i):s+=w.css(t,"border"+et[a]+"Width",!0,i));return!r&&o>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-c-s-.5))),c}function Xt(t,e,n){var r=Ft(t),i=Ot(t,e,r),o="border-box"===w.css(t,"boxSizing",!1,r),a=o;if(Bt.test(i)){if(!n)return i;i="auto"}return a=a&&(f.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===w.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+Kt(t,e,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ot(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=q(e),c=Ht.test(e),h=t.style;if(c||(e=Wt(s)),a=w.cssHooks[e]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:h[e];"string"===(o=typeof n)&&(i=tt.exec(n))&&i[1]&&(n=function(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(t,e,"")},c=s(),h=n&&n[3]||(w.cssNumber[e]?"":"px"),l=(w.cssNumber[e]||"px"!==h&&+c)&&tt.exec(w.css(t,e));if(l&&l[3]!==h){for(c/=2,h=h||l[3],l=+c||1;a--;)w.style(t,e,l+h),(1-o)*(1-(o=s()/c||.5))<=0&&(a=0),l/=o;l*=2,w.style(t,e,l+h),n=n||[]}return n&&(l=+l||+c||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=h,r.start=l,r.end=i)),i}(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==n||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(c?h.setProperty(e,n):h[e]=n))}},css:function(t,e,n,r){var i,o,a,s=q(e);return Ht.test(e)||(e=Wt(s)),(a=w.cssHooks[e]||w.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Ot(t,e,r)),"normal"===i&&e in Vt&&(i=Vt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,n,r){if(n)return!Ut.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Xt(t,e,r):rt(t,jt,(function(){return Xt(t,e,r)}))},set:function(t,n,r){var i,o=Ft(t),a="border-box"===w.css(t,"boxSizing",!1,o),s=r&&Kt(t,e,r,a,o);return a&&f.scrollboxSize()===o.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Kt(t,e,"border",!1,o)-.5)),s&&(i=tt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=w.css(t,e)),Zt(0,n,s)}}})),w.cssHooks.marginLeft=Pt(f.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Ot(t,"marginLeft"))||t.getBoundingClientRect().left-rt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+et[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(w.cssHooks[t+e].set=Zt)})),w.fn.extend({css:function(t,e){return U(this,(function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Ft(t),i=e.length;a<i;a++)o[e[a]]=w.css(t,e[a],!1,r);return o}return void 0!==n?w.style(t,e,n):w.css(t,e)}),t,e,arguments.length>1)}}),w.fn.delay=function(t,e){return t=w.fx&&w.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=window.setTimeout(e,t);n.stop=function(){window.clearTimeout(r)}}))},zt=e.createElement("input"),$t=e.createElement("select").appendChild(e.createElement("option")),zt.type="checkbox",f.checkOn=""!==zt.value,f.optSelected=$t.selected,(zt=e.createElement("input")).value="t",zt.type="radio",f.radioValue="t"===zt.value;var Yt,Qt=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return U(this,w.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?w.prop(t,e,n):(1===o&&w.isXMLDoc(t)||(i=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?Yt:void 0)),void 0!==n?null===n?void w.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=w.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&R(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(B);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),Yt={set:function(t,e,n){return!1===e?w.removeAttr(t,n):t.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=Qt[e]||w.find.attr;Qt[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=Qt[a],Qt[a]=i,i=null!=n(t,e,r)?a:null,Qt[a]=o),i}}));var Jt=/^(?:input|select|textarea|button)$/i,te=/^(?:a|area)$/i;function ee(t){return(t.match(B)||[]).join(" ")}function ne(t){return t.getAttribute&&t.getAttribute("class")||""}function re(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(B)||[]}w.fn.extend({prop:function(t,e){return U(this,w.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(t)||(e=w.propFix[e]||e,i=w.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):Jt.test(t.nodeName)||te.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,c=0;if(p(t))return this.each((function(e){w(this).addClass(t.call(this,e,ne(this)))}));if((e=re(t)).length)for(;n=this[c++];)if(i=ne(n),r=1===n.nodeType&&" "+ee(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ee(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,c=0;if(p(t))return this.each((function(e){w(this).removeClass(t.call(this,e,ne(this)))}));if(!arguments.length)return this.attr("class","");if((e=re(t)).length)for(;n=this[c++];)if(i=ne(n),r=1===n.nodeType&&" "+ee(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=ee(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):p(t)?this.each((function(n){w(this).toggleClass(t.call(this,n,ne(this),e),e)})):this.each((function(){var e,i,o,a;if(r)for(i=0,o=w(this),a=re(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ne(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Z.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+ee(ne(n))+" ").indexOf(e)>-1)return!0;return!1}});var ie=/\r/g;w.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=p(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,w(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ie,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ee(w.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],c=a?o+1:i.length;for(r=o<0?c:a?o:0;r<c;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!R(n.parentNode,"optgroup"))){if(e=w(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=w.makeArray(e),a=i.length;a--;)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=w.inArray(w(t).val(),e)>-1}},f.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),f.focusin="onfocusin"in window;var oe=/^(?:focusinfocus|focusoutblur)$/,ae=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,i){var o,a,s,c,l,u,f,g,m=[r||e],v=h.call(t,"type")?t.type:t,y=h.call(t,"namespace")?t.namespace.split("."):[];if(a=g=s=r=r||e,3!==r.nodeType&&8!==r.nodeType&&!oe.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(y=v.split("."),v=y.shift(),y.sort()),l=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),f=w.event.special[v]||{},i||!f.trigger||!1!==f.trigger.apply(r,n))){if(!i&&!f.noBubble&&!d(r)){for(c=f.delegateType||v,oe.test(c+v)||(a=a.parentNode);a;a=a.parentNode)m.push(a),s=a;s===(r.ownerDocument||e)&&m.push(s.defaultView||s.parentWindow||window)}for(o=0;(a=m[o++])&&!t.isPropagationStopped();)g=a,t.type=o>1?c:f.bindType||v,(u=(Z.get(a,"events")||{})[t.type]&&Z.get(a,"handle"))&&u.apply(a,n),(u=l&&a[l])&&u.apply&&G(a)&&(t.result=u.apply(a,n),!1===t.result&&t.preventDefault());return t.type=v,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),n)||!G(r)||l&&p(r[v])&&!d(r)&&((s=r[l])&&(r[l]=null),w.event.triggered=v,t.isPropagationStopped()&&g.addEventListener(v,ae),r[v](),t.isPropagationStopped()&&g.removeEventListener(v,ae),w.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(t,e,n){var r=w.extend(new w.Event,n,{type:t,isSimulated:!0});w.event.trigger(r,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return w.event.trigger(t,e,n,!0)}}),f.focusin||w.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=Z.access(r,e);i||r.addEventListener(t,n,!0),Z.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Z.access(r,e)-1;i?Z.access(r,e,i):(r.removeEventListener(t,n,!0),Z.remove(r,e))}}}));var se,ce=/\[\]$/,he=/\r?\n/g,le=/^(?:submit|button|image|reset|file)$/i,ue=/^(?:input|select|textarea|keygen)/i;function fe(t,e,n,r){var i;if(Array.isArray(e))w.each(e,(function(e,i){n||ce.test(t)?r(t,i):fe(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==v(e))r(t,e);else for(i in e)fe(t+"["+i+"]",e[i],n,r)}w.param=function(t,e){var n,r=[],i=function(t,e){var n=p(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){i(this.name,this.value)}));else for(n in t)fe(n,t[n],e,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&ue.test(this.nodeName)&&!le.test(t)&&(this.checked||!st.test(t))})).map((function(t,e){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,(function(t){return{name:e.name,value:t.replace(he,"\r\n")}})):{name:e.name,value:n.replace(he,"\r\n")}})).get()}}),w.fn.extend({wrapAll:function(t){var e;return this[0]&&(p(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return p(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=p(t);return this.each((function(n){w(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},f.createHTMLDocument=((se=e.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===se.childNodes.length),w.parseHTML=function(t,n,r){return"string"!=typeof t?[]:("boolean"==typeof n&&(r=n,n=!1),n||(f.createHTMLDocument?((i=(n=e.implementation.createHTMLDocument("")).createElement("base")).href=e.location.href,n.head.appendChild(i)):n=e),a=!r&&[],(o=T.exec(t))?[n.createElement(o[1])]:(o=dt([t],n,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes)));var i,o,a},w.offset={setOffset:function(t,e,n){var r,i,o,a,s,c,h=w.css(t,"position"),l=w(t),u={};"static"===h&&(t.style.position="relative"),s=l.offset(),o=w.css(t,"top"),c=w.css(t,"left"),("absolute"===h||"fixed"===h)&&(o+c).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(c)||0),p(e)&&(e=e.call(t,n,w.extend({},s))),null!=e.top&&(u.top=e.top-s.top+a),null!=e.left&&(u.left=e.left-s.left+i),"using"in e?e.using.call(t,u):l.css(u)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),i.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-w.css(r,"marginTop",!0),left:e.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||gt}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;w.fn[t]=function(r){return U(this,(function(t,r,i){var o;if(d(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=Pt(f.pixelPosition,(function(t,n){if(n)return n=Ot(t,e),Bt.test(n)?w(t).position()[e]+"px":n}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return U(this,(function(e,n,i){var o;return d(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?w.css(e,n,s):w.style(e,n,i,s)}),e,a?i:void 0,a)}}))})),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),w.proxy=function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),p(t))return i=r.call(arguments,2),(o=function(){return t.apply(e||this,i.concat(r.call(arguments)))}).guid=t.guid=t.guid||w.guid++,o},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=R,w.isFunction=p,w.isWindow=d,w.camelCase=q,w.type=v,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))};const pe=w;
/*!!
   *  Canvas 2 Svg v1.0.19
   *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
   *
   *  Licensed under the MIT license:
   *  http://www.opensource.org/licenses/mit-license.php
   *
   *  Author:
   *  Kerry Liu
   *
   *  Copyright (c) 2014 Gliffy Inc.
   */var de,ge,me,ve,ye;function we(t,e){var n,r=Object.keys(e);for(n=0;n<r.length;n++)t=t.replace(new RegExp("\\{"+r[n]+"\\}","gi"),e[r[n]]);return t}function be(t){var e,n,r;if(!t)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do{for(n="",r=0;r<12;r++)n+=e[Math.floor(Math.random()*e.length)]}while(t[n]);return n}function xe(t){var e={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return e[t]||e.alphabetic}ye=function(t,e){var n,r,i,o={};for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)r="&"+t[n+1]+";",i=parseInt(t[n],e),o[r]="&#"+i+";";return o["\\xa0"]="&#160;",o}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),de={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(me=function(t,e){this.__root=t,this.__ctx=e}).prototype.addColorStop=function(t,e){var n,r=this.__ctx.__createElement("stop");r.setAttribute("offset",t),e&&-1!==e.indexOf("rgba")?(n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(e),r.setAttribute("stop-color",we("rgb({r},{g},{b})",{r:n[1],g:n[2],b:n[3]})),r.setAttribute("stop-opacity",n[4])):r.setAttribute("stop-color",e),this.__root.appendChild(r)},ve=function(t,e){this.__root=t,this.__ctx=e},(ge=function(t){if(!(this instanceof ge))return new ge(t);if(this.config=t,this.width=t.width,this.height=t.height,this.enableMirroring=t.enableMirroring||!1,this.canvas=this,this.__document=document,t.ctx?this.__ctx=t.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.isSVG=!0,this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__createElement("svg"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__root.setAttribute("overflow","visible"),t.viewbox){const e=t.viewbox.x+" "+t.viewbox.y+" "+t.viewbox.width+" "+t.viewbox.height;this.__root.setAttribute("viewBox",e),this.viewbox=t.viewbox}this.__ids={},this.__defs=this.__createElement("defs"),this.__root.appendChild(this.__defs),this.multiLocusGap=t.multiLocusGap;let e={id:"svg_output_backdrop",width:"100%",height:"100%",fill:t.backdropColor||"white"},n=this.__createElement("rect",e);this.__root.appendChild(n),this.__rootGroup=this.__createElement("g",{id:"root-group"}),this.__root.appendChild(this.__rootGroup),this.__currentElement=this.__rootGroup}).prototype.setWidth=function(t){this.width=t,this.__root.setAttribute("width",this.width);const e=this.config.viewbox.x+" "+this.config.viewbox.y+" "+t+" "+this.config.viewbox.height;this.__root.setAttribute("viewBox",e)},ge.prototype.setHeight=function(t){this.height=t,this.__root.setAttribute("height",this.height);const e=this.config.viewbox.x+" "+this.config.viewbox.y+" "+this.config.viewbox.width+" "+t;this.__root.setAttribute("viewBox",e)},ge.prototype.__createElement=function(t,e,n){void 0===e&&(e={});let r=this.__document.createElementNS("http://www.w3.org/2000/svg",t);n&&(r.setAttribute("fill","none"),r.setAttribute("stroke","none"));for(let t of Object.keys(e))r.setAttribute(t,e[t]);return r},ge.prototype.__setDefaultStyles=function(){var t,e,n=Object.keys(de);for(t=0;t<n.length;t++)this[e=n[t]]=de[e].canvas},ge.prototype.__applyStyleState=function(t){var e,n,r=Object.keys(t);for(e=0;e<r.length;e++)this[n=r[e]]=t[n]},ge.prototype.__getStyleState=function(){var t,e,n={},r=Object.keys(de);for(t=0;t<r.length;t++)n[e=r[t]]=this[e];return n},ge.prototype.__applyStyleToCurrentElement=function(t){var e=this.__currentElement,n=this.__currentElementsToStyle;n&&(e.setAttribute(t,""),e=n.element,n.children.forEach((function(e){e.setAttribute(t,"")})));var r,i,o,a,s,c=Object.keys(de);for(r=0;r<c.length;r++)if(i=de[c[r]],o=this[c[r]],i.apply)if(o instanceof ve){if(o.__ctx)for(;o.__ctx.__defs.childNodes.length;)a=o.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[a]=a,this.__defs.appendChild(o.__ctx.__defs.childNodes[0]);e.setAttribute(i.apply,we("url(#{id})",{id:o.__root.getAttribute("id")}))}else if(o instanceof me)e.setAttribute(i.apply,we("url(#{id})",{id:o.__root.getAttribute("id")}));else if(i&&-1!==i.apply.indexOf(t)&&i.svg!==o)if("stroke"!==i.svgAttr&&"fill"!==i.svgAttr||!o||-1===o.indexOf("rgba")){var h=i.svgAttr;if("globalAlpha"===c[r]&&(h=t+"-"+i.svgAttr,e.getAttribute(h)))continue;e.setAttribute(h,o)}else{s=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(o),e.setAttribute(i.svgAttr,we("rgb({r},{g},{b})",{r:s[1],g:s[2],b:s[3]}));var l=s[4],u=this.globalAlpha;null!=u&&(l*=u),e.setAttribute(i.svgAttr+"-opacity",l)}},ge.prototype.__closestGroupOrSvg=function(t){return"g"===(t=t||this.__currentElement).nodeName||"svg"===t.nodeName?t:this.__closestGroupOrSvg(t.parentNode)},ge.prototype.getSerializedSvg=function(t){var e,n,r,i,o,a=(new XMLSerializer).serializeToString(this.__root);if(t)for(e=Object.keys(ye),n=0;n<e.length;n++)r=e[n],i=ye[r],(o=new RegExp(r,"gi")).test(a)&&(a=a.replace(o,i));return a},ge.prototype.getSvg=function(){return this.__root},ge.prototype.save=function(){var t=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(t),this.__currentElement=t,this.__stack.push(this.__getStyleState())},ge.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var t=this.__stack.pop();this.__applyStyleState(t)},ge.prototype.__addTransform=function(t){var e=this.__closestGroupOrSvg();if(e.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:e,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");e.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=t,this.__currentElement.setAttribute("transform",r)},ge.prototype.addTrackGroupWithTranslationAndClipRect=function(t,e,n,r,i,o){const a=t+"_clip_rect";let s=this.__createElement("clipPath",{id:a});this.__defs.appendChild(s),s.appendChild(this.__createElement("rect",{x:"0",y:o.toString(),width:r.toString(),height:i.toString()}));let c=this.__createElement("g");this.__rootGroup.appendChild(c),c.setAttribute("transform",we("translate({x},{y})",{x:e,y:n})),c.setAttribute("id",t+"_group"),c.setAttribute("clip-path",we("url(#{id})",{id:a})),this.__currentElement=c},ge.prototype.scale=function(t,e){void 0===e&&(e=t),this.__addTransform(we("scale({x},{y})",{x:t,y:e}))},ge.prototype.rotate=function(t){var e=180*t/Math.PI;this.__addTransform(we("rotate({angle},{cx},{cy})",{angle:e,cx:0,cy:0}))},ge.prototype.translate=function(t,e){this.__addTransform(we("translate({x},{y})",{x:t,y:e}))},ge.prototype.transform=function(t,e,n,r,i,o){this.__addTransform(we("matrix({a},{b},{c},{d},{e},{f})",{a:t,b:e,c:n,d:r,e:i,f:o}))},ge.prototype.beginPath=function(){var t;this.__currentDefaultPath="",this.__currentPosition={},t=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(t),this.__currentElement=t},ge.prototype.__applyCurrentDefaultPath=function(){var t=this.__currentElement;"path"===t.nodeName?t.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",t.nodeName)},ge.prototype.__addPathCommand=function(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t},ge.prototype.moveTo=function(t,e){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:t,y:e},this.__addPathCommand(we("M {x} {y}",{x:t,y:e}))},ge.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},ge.prototype.lineTo=function(t,e){this.__currentPosition={x:t,y:e},this.__currentDefaultPath&&this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(we("L {x} {y}",{x:t,y:e})):this.__addPathCommand(we("M {x} {y}",{x:t,y:e}))},ge.prototype.bezierCurveTo=function(t,e,n,r,i,o){this.__currentPosition={x:i,y:o},this.__addPathCommand(we("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:t,cp1y:e,cp2x:n,cp2y:r,x:i,y:o}))},ge.prototype.quadraticCurveTo=function(t,e,n,r){this.__currentPosition={x:n,y:r},this.__addPathCommand(we("Q {cpx} {cpy} {x} {y}",{cpx:t,cpy:e,x:n,y:r}))};var ke=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]};ge.prototype.arcTo=function(t,e,n,r,i){var o=this.__currentPosition&&this.__currentPosition.x,a=this.__currentPosition&&this.__currentPosition.y;if(void 0!==o&&void 0!==a){if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");if(o===t&&a===e||t===n&&e===r||0===i)this.lineTo(t,e);else{var s=ke([o-t,a-e]),c=ke([n-t,r-e]);if(s[0]*c[1]!=s[1]*c[0]){var h=s[0]*c[0]+s[1]*c[1],l=Math.acos(Math.abs(h)),u=ke([s[0]+c[0],s[1]+c[1]]),f=i/Math.sin(l/2),p=t+f*u[0],d=e+f*u[1],g=[-s[1],s[0]],m=[c[1],-c[0]],v=function(t){var e=t[0];return t[1]>=0?Math.acos(e):-Math.acos(e)},y=v(g),w=v(m);this.lineTo(p+g[0]*i,d+g[1]*i),this.arc(p,d,i,y,w)}else this.lineTo(t,e)}}},ge.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},ge.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},ge.prototype.rect=function(t,e,n,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.closePath()},ge.prototype.fillRect=function(t,e,n,r){var i,o,a,s={x:t,y:e,width:n,height:r};(!this.viewbox||(i=this.viewbox,o=s,i.x<o.x+o.width&&i.x+i.width>o.x&&i.y<o.y+o.height&&i.y+i.height>o.y))&&(a=this.__createElement("rect",s,!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("fill"))},ge.prototype.strokeRect=function(t,e,n,r){var i;i=this.__createElement("rect",{x:t,y:e,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("stroke")},ge.prototype.__clearCanvas=function(){for(var t=this.__closestGroupOrSvg().getAttribute("transform"),e=this.__root.childNodes[1],n=e.childNodes,r=n.length-1;r>=0;r--)n[r]&&e.removeChild(n[r]);this.__currentElement=e,this.__groupStack=[],t&&this.__addTransform(t)},ge.prototype.clearRect=function(t,e,n,r){if(0!==t||0!==e||n!==this.width||r!==this.height){var i,o=this.__closestGroupOrSvg();i=this.__createElement("rect",{x:t,y:e,width:n,height:r,fill:"#FFFFFF"},!0),o.appendChild(i)}else this.__clearCanvas()},ge.prototype.createLinearGradient=function(t,e,n,r){var i=this.__createElement("linearGradient",{id:be(this.__ids),x1:t+"px",x2:n+"px",y1:e+"px",y2:r+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(i),new me(i,this)},ge.prototype.createRadialGradient=function(t,e,n,r,i,o){var a=this.__createElement("radialGradient",{id:be(this.__ids),cx:r+"px",cy:i+"px",r:o+"px",fx:t+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new me(a,this)},ge.prototype.__parseFont=function(){var t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),e={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(e.decoration="underline"),this.__fontHref&&(e.href=this.__fontHref),e},ge.prototype.__wrapTextLink=function(t,e){if(t.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),n.appendChild(e),n}return e},ge.prototype.__applyText=function(t,e,n,r){var i,o,a=this.__parseFont(),s=this.__closestGroupOrSvg(),c=this.__createElement("text",{"font-family":a.family,"font-size":a.size,"font-style":a.style,"font-weight":a.weight,"text-decoration":a.decoration,x:e,y:n,"text-anchor":(i=this.textAlign,o={left:"start",right:"end",center:"middle",start:"start",end:"end"},o[i]||o.start),"dominant-baseline":xe(this.textBaseline)},!0);c.appendChild(this.__document.createTextNode(t)),this.__currentElement=c,this.__applyStyleToCurrentElement(r),s.appendChild(this.__wrapTextLink(a,c))},ge.prototype.fillText=function(t,e,n){this.__applyText(t,e,n,"fill")},ge.prototype.strokeText=function(t,e,n){this.__applyText(t,e,n,"stroke")},ge.prototype.measureText=function(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)},ge.prototype.arc=function(t,e,n,r,i,o){if(r!==i){(r%=2*Math.PI)===(i%=2*Math.PI)&&(i=(i+2*Math.PI-.001*(o?-1:1))%(2*Math.PI));var a=t+n*Math.cos(i),s=e+n*Math.sin(i),c=t+n*Math.cos(r),h=e+n*Math.sin(r),l=o?0:1,u=0,f=i-r;f<0&&(f+=2*Math.PI),u=o?f>Math.PI?0:1:f>Math.PI?1:0,this.lineTo(c,h),this.__addPathCommand(we("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:u,sweepFlag:l,endX:a,endY:s})),this.__currentPosition={x:a,y:s}}},ge.prototype.clip=function(){var t=this.__closestGroupOrSvg(),e=this.__createElement("clipPath"),n=be(this.__ids),r=this.__createElement("g");this.__applyCurrentDefaultPath(),t.removeChild(this.__currentElement),e.setAttribute("id",n),e.appendChild(this.__currentElement),this.__defs.appendChild(e),t.setAttribute("clip-path",we("url(#{id})",{id:n})),t.appendChild(r),this.__currentElement=r},ge.prototype.drawImage=function(){var t,e,n,r,i,o,a,s,c,h,l,u,f,p=Array.prototype.slice.call(arguments),d=p[0],g=0,m=0;if(3===p.length)t=p[1],e=p[2],n=i=d.width,r=o=d.height;else if(5===p.length)t=p[1],e=p[2],n=p[3],r=p[4],i=d.width,o=d.height;else{if(9!==p.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);g=p[1],m=p[2],i=p[3],o=p[4],t=p[5],e=p[6],n=p[7],r=p[8]}a=this.__closestGroupOrSvg(),this.__currentElement;var v="translate("+t+", "+e+")";if(d instanceof ge){if((s=d.getSvg().cloneNode(!0)).childNodes&&s.childNodes.length>1){for(c=s.childNodes[0];c.childNodes.length;)f=c.childNodes[0].getAttribute("id"),this.__ids[f]=f,this.__defs.appendChild(c.childNodes[0]);if(h=s.childNodes[1]){var y,w=h.getAttribute("transform");y=w?w+" "+v:v,h.setAttribute("transform",y),a.appendChild(h)}}}else"CANVAS"!==d.nodeName&&"IMG"!==d.nodeName||((l=this.__createElement("image")).setAttribute("width",n),l.setAttribute("height",r),l.setAttribute("preserveAspectRatio","none"),(g||m||i!==d.width||o!==d.height)&&((u=this.__document.createElement("canvas")).width=n,u.height=r,u.getContext("2d").drawImage(d,g,m,i,o,0,0,n,r),d=u),l.setAttribute("transform",v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===d.nodeName?d.toDataURL():d.getAttribute("src")),a.appendChild(l))},ge.prototype.createPattern=function(t,e){let n,r=this.__document.__createElement("pattern"),i=be(this.__ids);return r.setAttribute("id",i),r.setAttribute("width",t.width),r.setAttribute("height",t.height),"CANVAS"===t.nodeName||"IMG"===t.nodeName?(n=this.__createElement("image"),n.setAttribute("width",t.width),n.setAttribute("height",t.height),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===t.nodeName?t.toDataURL():t.getAttribute("src")),r.appendChild(n),this.__defs.appendChild(r)):t instanceof ge&&(r.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(r)),new ve(r,this)},ge.prototype.setLineDash=function(t){t&&t.length>0?this.lineDash=t.join(","):this.lineDash=null},ge.prototype.drawFocusRing=function(){},ge.prototype.createImageData=function(){},ge.prototype.getImageData=function(){},ge.prototype.putImageData=function(){},ge.prototype.globalCompositeOperation=function(){},ge.prototype.setTransform=function(){};var Se=ge;let Ce;function _e(t,e){pe(e).on("mousedown.igv_drag",Re.bind(t))}function Re(t){t.stopPropagation(),t.preventDefault();const e=Math.round(parseFloat(this.style.left.replace("px",""))),n=Math.round(parseFloat(this.style.top.replace("px",""))),r=Te.bind(this),i=Ee.bind(this);Ce={dragFunction:r,dragEndFunction:i,dx:e-t.screenX,dy:n-t.screenY},pe(document).on("mousemove.igv_drag",r),pe(document).on("mouseup.igv_drag",i),pe(document).on("mouseleave.igv_drag",i),pe(document).on("mouseexit.igv_drag",i)}function Te(t){if(!Ce)return;t.stopPropagation(),t.preventDefault();const e=Ce.dx+t.screenX,n=Ce.dy+t.screenY;this.style.left=e+"px",this.style.top=n+"px"}function Ee(t){if(!Ce)return;t.stopPropagation(),t.preventDefault();const e=Ce.dx+t.screenX,n=Ce.dy+t.screenY;this.style.left=e+"px",this.style.top=n+"px",pe(document).off(".igv_drag"),Ce=void 0}const Ae={trackMenuItemList:function(t){const e=new Set(["alignment","annotation","variant","eqtl","snp"]),n=t.track.config&&void 0!==t.track.config.visibilityWindow;let r=[];var i;return"sequence"!==t.track.config.type&&(r.push(function(t){var e;return(e=pe("<div>")).text("Set track name"),{object:e,click:function(){var e;e=function(){var e;e=""===(e=t.browser.inputDialog.$input.val().trim())||void 0===e?"untitled":e,t.browser.setTrackLabelName(t,e)},t.browser.inputDialog.configure({label:"Track Name",input:Le(t.track)||"unnamed",click:e}),t.browser.inputDialog.present(pe(t.trackDiv))}}}(t)),r.push(function(t){var e;return(e=pe("<div>")).text("Set track height"),{object:e,click:function(){var e;e=function(){var e;void 0!==(e=parseFloat(t.browser.inputDialog.$input.val(),10))&&(void 0!==t.track.minHeight&&t.track.minHeight>e&&(t.track.minHeight=e),void 0!==t.track.maxHeight&&t.track.maxHeight<e&&(t.track.minHeight=e),t.setTrackHeight(e,!0,!0),t.track.autoHeight=!1)},t.browser.inputDialog.configure({label:"Track Height",input:t.trackDiv.clientHeight,click:e}),t.browser.inputDialog.present(pe(t.trackDiv))}}}(t))),("alignment"===(i=t.track).type||"annotation"===i.type||"variant"===i.type||"wig"===i.type)&&r.push(function(t){var e;return(e=pe("<div>")).text("Set track color"),{object:e,click:function(){t.presentColorPicker()}}}(t)),t.track.menuItemList&&(r=r.concat(t.track.menuItemList())),(n||e.has(t.track.config.type))&&(r.push("<hr/>"),r.push(function(t){const e=function(){t.browser.inputDialog.configure({label:"Visibility Window",input:t.track.visibilityWindow,click:function(){let e=t.browser.inputDialog.$input.val().trim();""!==e&&void 0!==e||(e=-1),e=Number.parseInt(e),t.track.visibilityWindow=e,t.track.config.visibilityWindow=e,t.updateViews()}}),t.browser.inputDialog.present(pe(t.trackDiv))},n=pe("<div>");return n.text("Set visibility window"),{object:n,click:e}}(t))),!1!==t.track.removable&&(r.push("<hr/>"),r.push(function(t){var e;return(e=pe("<div>")).text("Remove track"),{object:e,click:function(){t.browser.removeTrack(t.track)}}}(t))),r},dataRangeMenuItem:function(t){var e;return(e=pe("<div>")).text("Set data range"),{object:e,click:function(){t.browser.dataRangeDialog.configure({trackView:t}),t.browser.dataRangeDialog.present(pe(t.trackDiv))}}},trackMenuItemListHelper:function(t,e){var n=[];return t.length>0&&(n=t.map((function(t,n){var r;if(t.name?(r=pe("<div>")).text(t.name):t.object?r=t.object:"string"==typeof t.label?(r=pe("<div>")).html(t.label):"string"==typeof t&&(r=t.startsWith("<")?pe(t):pe("<div>"+t+"</div>")),0===n&&r.addClass("igv-track-menu-border-top"),t.click){function i(n){t.click(n),e.hide(),n.preventDefault(),n.stopPropagation()}r.on("click",i),r.on("touchend",(function(t){i(t)})),r.on("mouseup",(function(t){t.preventDefault(),t.stopPropagation()}))}return{object:r,init:t.init||void 0}}))),n}};function Le(t){return t.trackView.viewports[0].$trackLabel.text()}function Ie(t,e){let n=pe("<div>",{class:"igv-trackgear-popover-check-container"}),r=pe("<div>");n.append(r);let i=De("check",!0===e?"#444":"transparent");r.append(i);let o=pe("<div>");return o.text(t),n.append(o),n}function Me(t,e){return pe(De(t,e))}function De(t,e){e=e||"currentColor";let n=Be[t];n||(console.error(`No icon named: ${t}`),n=Be.question);let r='<svg viewBox="0 0 '+n[0]+" "+n[1]+'">';return r+='<path fill="'+e+'" d="'+n[4]+'"></path>',r+="</svg>",r}const Be={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]},Fe={licorice:"#000000",lead:"#1e1e1e",tungsten:"#3a3a3a",iron:"#545453",steel:"#6e6e6e",tin:"#878687",nickel:"#888787",aluminum:"#a09fa0",magnesium:"#b8b8b8",silver:"#d0d0d0",mercury:"#e8e8e8",snow:"white",cayenne:"#891100",mocha:"#894800",aspargus:"#888501",fern:"#458401",clover:"#028401",moss:"#018448",teal:"#008688",ocean:"#004a88",midnight:"#001888",eggplant:"#491a88",plum:"#891e88",maroon:"#891648",maraschino:"#ff2101",tangerine:"#ff8802",lemon:"#fffa03",lime:"#83f902",spring:"#05f802",seam_foam:"#03f987",turquoise:"#00fdff",aqua:"#008cff",blueberry:"#002eff",grape:"#8931ff",magenta:"#ff39ff",strawberry:"#ff2987",salmon:"#ff726e",cantaloupe:"#ffce6e",banana:"#fffb6d",honeydew:"#cefa6e",flora:"#68f96e",spindrift:"#68fbd0",ice:"#68fdff",sky:"#6acfff",orchid:"#6e76ff",lavender:"#d278ff",bubblegum:"#ff7aff",carnation:"#ff7fd3"},Ne={A:[0,200,0],C:[0,0,200],T:[255,0,0],G:[209,113,5],a:[0,200,0],c:[0,0,200],t:[255,0,0],g:[209,113,5],N:[80,80,80]},Oe={A:"rgb(  0, 200,   0)",C:"rgb(  0,   0, 200)",T:"rgb(255,   0,   0)",G:"rgb(209, 113,   5)",a:"rgb(  0, 200,   0)",c:"rgb(  0,   0, 200)",t:"rgb(255,   0,   0)",g:"rgb(209, 113,   5)",N:"rgb(80, 80, 80)"},Pe={Set1:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(166,86,40)","rgb(152,78,163)","rgb(255,127,0)","rgb(247,129,191)","rgb(153,153,153)","rgb(255,255,51)"],Dark2:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],Set2:["rgb(102, 194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],Set3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],Pastel1:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],Pastel2:["rgb(173,226,207)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(243,225,206)"],Accent:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"]};function ze(t){this.colors=Pe[t],Array.isArray(this.colors)||(this.colors=[]),this.colorTable={},this.nextIdx=0,this.colorGenerator=new $e}function $e(){this.hue=Math.random(),this.goldenRatio=.618033988749895,this.hexwidth=2}ze.prototype.getColor=function(t){return this.colorTable.hasOwnProperty(t)||(this.nextIdx<this.colors.length?this.colorTable[t]=this.colors[this.nextIdx]:this.colorTable[t]=this.colorGenerator.get(),this.nextIdx++),this.colorTable[t]},$e.prototype.hsvToRgb=function(t,e,n){var r=Math.floor(6*t),i=6*t-r,o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),c=255,h=255,l=255;switch(r){case 0:c=n,h=s,l=o;break;case 1:c=a,h=n,l=o;break;case 2:c=o,h=n,l=s;break;case 3:c=o,h=a,l=n;break;case 4:c=s,h=o,l=n;break;case 5:c=n,h=o,l=a}return[Math.floor(256*c),Math.floor(256*h),Math.floor(256*l)]},$e.prototype.padHex=function(t){return t.length>this.hexwidth?t:new Array(this.hexwidth-t.length+1).join("0")+t},$e.prototype.get=function(t,e){this.hue+=this.goldenRatio,this.hue%=1,"number"!=typeof t&&(t=.5),"number"!=typeof e&&(e=.95);var n=this.hsvToRgb(this.hue,t,e);return"#"+this.padHex(n[0].toString(16))+this.padHex(n[1].toString(16))+this.padHex(n[2].toString(16))};const Ue=function(t,e){if(0!==t.length){var n=Math.floor(t.length*((100-e)/100));return 0===n?(t.sort((function(t,e){return e-t})),t[n]):function(t,e){var n,r=new Ve;for(n=0;n<t.length;n++){var i=t[n];if(r.content.length<e||i>r.content[0]){if(r.content.length===e)r.pop();r.push(i)}}return r.content[0]}(t,n)}},He=function(t,e,n){return Math.min(Math.max(t,e),n)},je=function(t){return Math.log(t)/Math.LN2};function Ve(){this.content=[]}Ve.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]===t){var r=this.content.pop();if(n===e-1)break;this.content[n]=r,this.bubbleUp(n),this.sinkDown(n);break}},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t],n=e;t>0;){var r=Math.floor((t+1)/2)-1,i=this.content[r];if(n>=i)break;this.content[r]=e,this.content[t]=i,t=r}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=n;;){var i=2*(t+1),o=i-1,a=null;if(o<e){var s=this.content[o],c=s;s<r&&(a=o)}if(i<e)this.content[i]<(null==a?r:c)&&(a=i);if(null==a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var qe={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};qe.Zip.CompressionMethod={STORE:0,DEFLATE:8},qe.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},qe.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},qe.Zip.FileHeaderSignature=[80,75,1,2],qe.Zip.LocalFileHeaderSignature=[80,75,3,4],qe.Zip.CentralDirectorySignature=[80,75,5,6],qe.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var n,r=t.length,i=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof e.compressionMethod&&(e.compressionMethod=qe.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case qe.Zip.CompressionMethod.STORE:break;case qe.Zip.CompressionMethod.DEFLATE:i=qe.CRC32.calc(t),t=this.deflateWithOption(t,e),n=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:n,encrypted:!1,size:r,crc32:i})},qe.Zip.prototype.setPassword=function(t){this.password=t},qe.Zip.prototype.compress=function(){var t,e,n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b,x,k,S,C,_,R=this.files,T=0,E=0;for(k=0,S=R.length;k<S;++k){if(p=(t=R[k]).option.filename?t.option.filename.length:0,d=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=qe.CRC32.calc(t.buffer),t.option.compressionMethod){case qe.Zip.CompressionMethod.STORE:break;case qe.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(x=this.createEncryptionKey(t.option.password||this.password),w=t.buffer,(b=new Uint8Array(w.length+12)).set(w,12),w=b,C=0;C<12;++C)w[C]=this.encode(x,11===k?255&t.crc32:256*Math.random()|0);for(_=w.length;C<_;++C)w[C]=this.encode(x,w[C]);t.buffer=w}T+=30+p+t.buffer.length,E+=46+p+g}for(o=22+(this.comment?this.comment.length:0),e=new Uint8Array(T+E+o),n=0,i=(r=T)+E,k=0,S=R.length;k<S;++k)p=(t=R[k]).option.filename?t.option.filename.length:0,d=0,g=t.option.comment?t.option.comment.length:0,a=n,e[n++]=qe.Zip.LocalFileHeaderSignature[0],e[n++]=qe.Zip.LocalFileHeaderSignature[1],e[n++]=qe.Zip.LocalFileHeaderSignature[2],e[n++]=qe.Zip.LocalFileHeaderSignature[3],e[r++]=qe.Zip.FileHeaderSignature[0],e[r++]=qe.Zip.FileHeaderSignature[1],e[r++]=qe.Zip.FileHeaderSignature[2],e[r++]=qe.Zip.FileHeaderSignature[3],20,e[r++]=20,e[r++]=t.option.os||qe.Zip.OperatingSystem.MSDOS,e[n++]=e[r++]=20,e[n++]=e[r++]=0,s=0,(t.option.password||this.password)&&(s|=qe.Zip.Flags.ENCRYPT),e[n++]=e[r++]=255&s,e[n++]=e[r++]=s>>8&255,c=t.option.compressionMethod,e[n++]=e[r++]=255&c,e[n++]=e[r++]=c>>8&255,h=t.option.date||new Date,e[n++]=e[r++]=(7&h.getMinutes())<<5|h.getSeconds()/2|0,e[n++]=e[r++]=h.getHours()<<3|h.getMinutes()>>3,e[n++]=e[r++]=(h.getMonth()+1&7)<<5|h.getDate(),e[n++]=e[r++]=(h.getFullYear()-1980&127)<<1|h.getMonth()+1>>3,l=t.crc32,e[n++]=e[r++]=255&l,e[n++]=e[r++]=l>>8&255,e[n++]=e[r++]=l>>16&255,e[n++]=e[r++]=l>>24&255,u=t.buffer.length,e[n++]=e[r++]=255&u,e[n++]=e[r++]=u>>8&255,e[n++]=e[r++]=u>>16&255,e[n++]=e[r++]=u>>24&255,f=t.size,e[n++]=e[r++]=255&f,e[n++]=e[r++]=f>>8&255,e[n++]=e[r++]=f>>16&255,e[n++]=e[r++]=f>>24&255,e[n++]=e[r++]=255&p,e[n++]=e[r++]=p>>8&255,e[n++]=e[r++]=255&d,e[n++]=e[r++]=d>>8&255,e[r++]=255&g,e[r++]=g>>8&255,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,(m=t.option.filename)&&(e.set(m,n),e.set(m,r),n+=p,r+=p),(v=t.option.extraField)&&(e.set(v,n),e.set(v,r),n+=d,r+=d),(y=t.option.comment)&&(e.set(y,r),r+=g),e.set(t.buffer,n),n+=t.buffer.length;return e[i++]=qe.Zip.CentralDirectorySignature[0],e[i++]=qe.Zip.CentralDirectorySignature[1],e[i++]=qe.Zip.CentralDirectorySignature[2],e[i++]=qe.Zip.CentralDirectorySignature[3],e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&S,e[i++]=S>>8&255,e[i++]=255&S,e[i++]=S>>8&255,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=E>>16&255,e[i++]=E>>24&255,e[i++]=255&T,e[i++]=T>>8&255,e[i++]=T>>16&255,e[i++]=T>>24&255,g=this.comment?this.comment.length:0,e[i++]=255&g,e[i++]=g>>8&255,this.comment&&(e.set(this.comment,i),i+=g),e},qe.Zip.prototype.deflateWithOption=function(t,e){return new qe.RawDeflate(t,e.deflateOption).compress()},qe.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},qe.Zip.prototype.encode=function(t,e){var n=this.getByte(t);return this.updateKeys(t,e),n^e},qe.Zip.prototype.updateKeys=function(t,e){t[0]=qe.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=qe.CRC32.single(t[2],t[1]>>>24)},qe.Zip.prototype.createEncryptionKey=function(t){var e,n,r=[305419896,591751049,878082192];for(r=new Uint32Array(r),e=0,n=t.length;e<n;++e)this.updateKeys(r,255&t[e]);return r},qe.Huffman.buildHuffmanTable=function(t){var e,n,r,i,o,a,s,c,h,l,u,f=t.length,p=0,d=Number.POSITIVE_INFINITY;for(c=0,h=f;c<h;++c)t[c]>p&&(p=t[c]),t[c]<d&&(d=t[c]);for(e=1<<p,n=new Uint32Array(e),r=1,i=0,o=2;r<=p;){for(c=0;c<f;++c)if(t[c]===r){for(a=0,s=i,l=0;l<r;++l)a=a<<1|1&s,s>>=1;for(u=r<<16|c,l=a;l<e;l+=o)n[l]=u;++i}++r,i<<=1,o<<=1}return[n,p,d]};var Ge=qe.Huffman.buildHuffmanTable;qe.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=qe.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case qe.RawInflate.BufferType.BLOCK:this.op=qe.RawInflate.MaxBackwardLength,this.output=new Uint8Array(qe.RawInflate.MaxBackwardLength+this.bufferSize+qe.RawInflate.MaxCopyLength);break;case qe.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},qe.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},qe.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case qe.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case qe.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},qe.RawInflate.MaxBackwardLength=32768,qe.RawInflate.MaxCopyLength=258,qe.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qe.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),qe.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),qe.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),qe.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),qe.RawInflate.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return Ge(n)}(),qe.RawInflate.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return Ge(n)}(),qe.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},qe.RawInflate.prototype.readBits=function(t){var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,o=this.ip;if(o+(t-r+7>>3)>=i.length)throw new Error("input buffer is broken");for(;r<t;)n|=i[o++]<<r,r+=8;return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=o,e},qe.RawInflate.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,o=this.input,a=this.ip,s=o.length,c=t[0],h=t[1];i<h&&!(a>=s);)r|=o[a++]<<i,i+=8;if((n=(e=c[r&(1<<h)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=a,65535&e},qe.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,n=this.input,r=this.ip,i=this.output,o=this.op,a=n.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,r+1>=a)throw new Error("invalid uncompressed block header: LEN");if(t=n[r++]|n[r++]<<8,r+1>=a)throw new Error("invalid uncompressed block header: NLEN");if(t===~(n[r++]|n[r++]<<8))throw new Error("invalid uncompressed block header: length verify");if(r+t>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case qe.RawInflate.BufferType.BLOCK:for(;o+t>i.length;)t-=e=s-o,i.set(n.subarray(r,r+e),o),o+=e,r+=e,this.op=o,i=this.expandBufferBlock(),o=this.op;break;case qe.RawInflate.BufferType.ADAPTIVE:for(;o+t>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(n.subarray(r,r+t),o),o+=t,r+=t,this.ip=r,this.op=o,this.output=i},qe.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case qe.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(qe.RawInflate.FixedLiteralLengthTable,qe.RawInflate.FixedDistanceTable);break;case qe.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(qe.RawInflate.FixedLiteralLengthTable,qe.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},qe.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i,o,a,s,c,h=this.readBits(5)+257,l=this.readBits(5)+1,u=this.readBits(4)+4,f=new Uint8Array(qe.RawInflate.Order.length);for(s=0;s<u;++s)f[qe.RawInflate.Order[s]]=this.readBits(3);for(t=Ge(f),r=new Uint8Array(h+l),s=0,c=h+l;s<c;)switch(i=this.readCodeByTable(t)){case 16:for(a=3+this.readBits(2);a--;)r[s++]=o;break;case 17:for(a=3+this.readBits(3);a--;)r[s++]=0;o=0;break;case 18:for(a=11+this.readBits(7);a--;)r[s++]=0;o=0;break;default:r[s++]=i,o=i}switch(e=Ge(r.subarray(0,h)),n=Ge(r.subarray(h)),this.bufferType){case qe.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,n);break;case qe.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,n);break;default:throw new Error("invalid inflate mode")}},qe.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,o,a,s,c=n.length-qe.RawInflate.MaxCopyLength,h=qe.RawInflate.LengthCodeTable,l=qe.RawInflate.LengthExtraTable,u=qe.RawInflate.DistCodeTable,f=qe.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=c&&(this.op=r,n=this.expandBufferBlock(),r=this.op),n[r++]=i;else for(s=h[o=i-257],l[o]>0&&(s+=this.readBits(l[o])),a=u[i=this.readCodeByTable(e)],f[i]>0&&(a+=this.readBits(f[i])),r>=c&&(this.op=r,n=this.expandBufferBlock(),r=this.op);s--;)n[r]=n[r++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},qe.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,o,a,s,c=n.length,h=qe.RawInflate.LengthCodeTable,l=qe.RawInflate.LengthExtraTable,u=qe.RawInflate.DistCodeTable,f=qe.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=c&&(c=(n=this.expandBufferAdaptive()).length),n[r++]=i;else for(s=h[o=i-257],l[o]>0&&(s+=this.readBits(l[o])),a=u[i=this.readCodeByTable(e)],f[i]>0&&(a+=this.readBits(f[i])),r+s>c&&(c=(n=this.expandBufferAdaptive()).length);s--;)n[r]=n[r++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},qe.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-qe.RawInflate.MaxBackwardLength),n=this.op-qe.RawInflate.MaxBackwardLength,r=this.output;return e.set(r.subarray(qe.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,r.set(r.subarray(n,n+qe.RawInflate.MaxBackwardLength)),this.op=qe.RawInflate.MaxBackwardLength,r},qe.RawInflate.prototype.expandBufferAdaptive=function(t){var e,n,r,i=this.input.length/this.ip+1|0,o=this.input,a=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(o.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<a.length?a.length+r:a.length<<1:a.length*i,(e=new Uint8Array(n)).set(a),this.output=e,this.output},qe.RawInflate.prototype.concatBufferBlock=function(){var t,e,n,r,i,o=0,a=this.totalpos+(this.op-qe.RawInflate.MaxBackwardLength),s=this.output,c=this.blocks,h=new Uint8Array(a);if(0===c.length)return this.output.subarray(qe.RawInflate.MaxBackwardLength,this.op);for(e=0,n=c.length;e<n;++e)for(r=0,i=(t=c[e]).length;r<i;++r)h[o++]=t[r];for(e=qe.RawInflate.MaxBackwardLength,n=this.op;e<n;++e)h[o++]=s[e];return this.blocks=[],this.buffer=h,this.buffer},qe.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};Ge=qe.Huffman.buildHuffmanTable;function We(t){return"string"==typeof t||t instanceof String}function Ze(t){var e=String(t).split(/[.,]/);return e[0].split("").reverse().reduce((function(t,e,n){return n%3==0?t+","+e:t+e})).split("").reverse().join("")+(e[1]?"."+e[1]:"")}qe.RawInflateStream=function(t,e,n){this.blocks=[],this.bufferSize=n||65e3,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=qe.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},qe.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},qe.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},qe.RawInflateStream.prototype.decompress=function(t,e){var n=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!n;)switch(this.status){case qe.RawInflateStream.Status.INITIALIZED:case qe.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(n=!0);break;case qe.RawInflateStream.Status.BLOCK_HEADER_END:case qe.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case qe.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(n=!0);break;case qe.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(n=!0);break;case qe.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(n=!0)}break;case qe.RawInflateStream.Status.BLOCK_BODY_END:case qe.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case qe.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(n=!0);break;case qe.RawInflateStream.BlockType.FIXED:case qe.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(n=!0)}break;case qe.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?n=!0:this.status=qe.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},qe.RawInflateStream.MaxBackwardLength=32768,qe.RawInflateStream.MaxCopyLength=258,qe.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qe.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),qe.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),qe.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),qe.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),qe.RawInflateStream.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return Ge(n)}(),qe.RawInflateStream.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return Ge(n)}(),qe.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=qe.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=qe.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=qe.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=qe.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=qe.RawInflateStream.Status.BLOCK_HEADER_END},qe.RawInflateStream.prototype.readBits=function(t){for(var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,o=this.ip;r<t;){if(i.length<=o)return-1;n|=(e=i[o++])<<r,r+=8}return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=o,e},qe.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,o=this.input,a=this.ip,s=t[0],c=t[1];i<c;){if(o.length<=a)return-1;r|=o[a++]<<i,i+=8}if((n=(e=s[r&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=a,65535&e},qe.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,n=this.ip;if(this.status=qe.RawInflateStream.Status.BLOCK_BODY_START,n+4>=e.length)return-1;if((t=e[n++]|e[n++]<<8)===~(e[n++]|e[n++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=n,this.blockLength=t,this.status=qe.RawInflateStream.Status.BLOCK_BODY_END},qe.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,n=this.output,r=this.op,i=this.blockLength;for(this.status=qe.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(r===n.length&&(n=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=r,this.blockLength=i+1,-1;n[r++]=t[e++]}return i<0&&(this.status=qe.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=r,0},qe.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=qe.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=qe.RawInflateStream.FixedLiteralLengthTable,this.distTable=qe.RawInflateStream.FixedDistanceTable,this.status=qe.RawInflateStream.Status.BLOCK_BODY_END,0},qe.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},qe.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},qe.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i=new Uint8Array(qe.RawInflateStream.Order.length);if(this.status=qe.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,n=this.readBits(4)+4,t<0||e<0||n<0)return this.restore_(),-1;try{(function(){var o,a,s,c,h,l,u=0;for(h=0;h<n;++h){if((o=this.readBits(3))<0)throw new Error("not enough input");i[qe.RawInflateStream.Order[h]]=o}for(r=Ge(i),c=new Uint8Array(t+e),h=0,l=t+e;h<l;){if((a=this.readCodeByTable(r))<0)throw new Error("not enough input");switch(a){case 16:if((o=this.readBits(2))<0)throw new Error("not enough input");for(s=3+o;s--;)c[h++]=u;break;case 17:if((o=this.readBits(3))<0)throw new Error("not enough input");for(s=3+o;s--;)c[h++]=0;u=0;break;case 18:if((o=this.readBits(7))<0)throw new Error("not enough input");for(s=11+o;s--;)c[h++]=0;u=0;break;default:c[h++]=a,u=a}}this.litlenTable=Ge(c.subarray(0,t)),this.distTable=Ge(c.subarray(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=qe.RawInflateStream.Status.BLOCK_BODY_END,0},qe.RawInflateStream.prototype.decodeHuffman=function(){var t,e,n,r,i,o=this.output,a=this.op,s=this.litlenTable,c=this.distTable,h=o.length;for(this.status=qe.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(s))<0)return this.op=a,this.restore_(),-1;if(256===t)break;if(t<256)a===h&&(h=(o=this.expandBuffer()).length),o[a++]=t;else{if(e=t-257,r=qe.RawInflateStream.LengthCodeTable[e],qe.RawInflateStream.LengthExtraTable[e]>0){if((i=this.readBits(qe.RawInflateStream.LengthExtraTable[e]))<0)return this.op=a,this.restore_(),-1;r+=i}if((t=this.readCodeByTable(c))<0)return this.op=a,this.restore_(),-1;if(n=qe.RawInflateStream.DistCodeTable[t],qe.RawInflateStream.DistExtraTable[t]>0){if((i=this.readBits(qe.RawInflateStream.DistExtraTable[t]))<0)return this.op=a,this.restore_(),-1;n+=i}for(a+r>=h&&(h=(o=this.expandBuffer()).length);r--;)o[a]=o[a++-n];if(this.ip===this.input.length)return this.op=a,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=a,this.status=qe.RawInflateStream.Status.DECODE_BLOCK_END},qe.RawInflateStream.prototype.expandBuffer=function(t){var e,n,r,i=this.input.length/this.ip+1|0,o=this.input,a=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(o.length-this.ip)/this.litlenTable[2]/2*258|0)<a.length?a.length+r:a.length<<1:a.length*i,(e=new Uint8Array(n)).set(a),this.output=e,this.output},qe.RawInflateStream.prototype.concatBuffer=function(){var t,e,n=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,n)):this.output.subarray(this.sp,n),this.sp=n,n>qe.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=qe.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+qe.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(n-qe.RawInflateStream.MaxBackwardLength,n))),t},qe.Inflate=function(t,e){var n,r;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),n=t[this.ip++],r=t[this.ip++],15&n){case qe.CompressionMethod.DEFLATE:this.method=qe.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.rawinflate=new qe.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},qe.Inflate.BufferType=qe.RawInflate.BufferType,qe.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==qe.Adler32(t))throw new Error("invalid adler-32 checksum");return t},qe.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new qe.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},qe.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var n=new Uint8Array(this.input.length+t.length);n.set(this.input,0),n.set(t,this.input.length),this.input=n}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},qe.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,n=e[t++],r=e[t++];if(void 0===n||void 0===r)return-1;switch(15&n){case qe.CompressionMethod.DEFLATE:this.method=qe.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.ip=t},qe.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},qe.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},qe.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},qe.Gunzip.prototype.decodeMember=function(){var t,e,n,r,i,o,a,s,c,h=new qe.GunzipMember,l=this.input,u=this.ip;if(h.id1=l[u++],h.id2=l[u++],31!==h.id1||139!==h.id2)throw new Error("invalid file signature:"+h.id1+","+h.id2);switch(h.cm=l[u++],h.cm){case 8:break;default:throw new Error("unknown compression method: "+h.cm)}if(h.flg=l[u++],s=l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24,h.mtime=new Date(1e3*s),h.xfl=l[u++],h.os=l[u++],(h.flg&qe.Gzip.FlagsMask.FEXTRA)>0&&(h.xlen=l[u++]|l[u++]<<8,u=this.decodeSubField(u,h.xlen)),(h.flg&qe.Gzip.FlagsMask.FNAME)>0){for(a=[],o=0;(i=l[u++])>0;)a[o++]=String.fromCharCode(i);h.name=a.join("")}if((h.flg&qe.Gzip.FlagsMask.FCOMMENT)>0){for(a=[],o=0;(i=l[u++])>0;)a[o++]=String.fromCharCode(i);h.comment=a.join("")}if((h.flg&qe.Gzip.FlagsMask.FHCRC)>0&&(h.crc16=65535&qe.CRC32.calc(l,0,u),h.crc16!==(l[u++]|l[u++]<<8)))throw new Error("invalid header crc16");if(t=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24,l.length-u-4-4<512*t&&(r=t),e=new qe.RawInflate(l,{index:u,bufferSize:r}),h.data=n=e.decompress(),u=e.ip,h.crc32=c=(l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24)>>>0,qe.CRC32.calc(n)!==c)throw new Error("invalid CRC-32 checksum: 0x"+qe.CRC32.calc(n).toString(16)+" / 0x"+c.toString(16));if(h.isize=t=(l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24)>>>0,(4294967295&n.length)!==t)throw new Error("invalid input size: "+(4294967295&n.length)+" / "+t);this.member.push(h),this.ip=u},qe.Gunzip.prototype.decodeSubField=function(t,e){return t+e},qe.Gunzip.prototype.concatMember=function(){var t,e,n,r=this.member,i=0,o=0;for(t=0,e=r.length;t<e;++t)o+=r[t].data.length;for(n=new Uint8Array(o),t=0;t<e;++t)n.set(r[t].data,i),i+=r[t].data.length;return n},qe.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},qe.GunzipMember.prototype.getName=function(){return this.name},qe.GunzipMember.prototype.getData=function(){return this.data},qe.GunzipMember.prototype.getMtime=function(){return this.mtime},qe.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},qe.Gzip.DefaultBufferSize=32768,qe.Gzip.prototype.compress=function(){var t,e,n,r,i,o,a,s,c=new Uint8Array(qe.Gzip.DefaultBufferSize),h=0,l=this.input,u=this.ip,f=this.filename,p=this.comment;if(c[h++]=31,c[h++]=139,c[h++]=8,t=0,this.flags.fname&&(t|=qe.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=qe.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=qe.Gzip.FlagsMask.FHCRC),c[h++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,c[h++]=255&e,c[h++]=e>>>8&255,c[h++]=e>>>16&255,c[h++]=e>>>24&255,c[h++]=0,c[h++]=qe.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(a=0,s=f.length;a<s;++a)(o=f.charCodeAt(a))>255&&(c[h++]=o>>>8&255),c[h++]=255&o;c[h++]=0}if(this.flags.comment){for(a=0,s=p.length;a<s;++a)(o=p.charCodeAt(a))>255&&(c[h++]=o>>>8&255),c[h++]=255&o;c[h++]=0}return this.flags.fhcrc&&(n=65535&qe.CRC32.calc(c,0,h),c[h++]=255&n,c[h++]=n>>>8&255),this.deflateOptions.outputBuffer=c,this.deflateOptions.outputIndex=h,c=(i=new qe.RawDeflate(l,this.deflateOptions)).compress(),(h=i.op)+8>c.buffer.byteLength?(this.output=new Uint8Array(h+8),this.output.set(new Uint8Array(c.buffer)),c=this.output):c=new Uint8Array(c.buffer),r=qe.CRC32.calc(l),c[h++]=255&r,c[h++]=r>>>8&255,c[h++]=r>>>16&255,c[h++]=r>>>24&255,s=l.length,c[h++]=255&s,c[h++]=s>>>8&255,c[h++]=s>>>16&255,c[h++]=s>>>24&255,this.ip=u,h<c.length&&(this.output=c=c.subarray(0,h)),c},qe.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},qe.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},qe.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},qe.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},qe.Heap.prototype.getChild=function(t){return 2*t+2},qe.Heap.prototype.push=function(t,e){var n,r,i,o=this.buffer;for(n=this.length,o[this.length++]=e,o[this.length++]=t;n>0&&(r=this.getParent(n),o[n]>o[r]);)i=o[n],o[n]=o[r],o[r]=i,i=o[n+1],o[n+1]=o[r+1],o[r+1]=i,n=r;return this.length},qe.Heap.prototype.pop=function(){var t,e,n,r,i,o=this.buffer;for(e=o[0],t=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],i=0;!((r=this.getChild(i))>=this.length)&&(r+2<this.length&&o[r+2]>o[r]&&(r+=2),o[r]>o[i]);)n=o[i],o[i]=o[r],o[r]=n,n=o[i+1],o[i+1]=o[r+1],o[r+1]=n,i=r;return{index:t,value:e,length:this.length}},qe.RawDeflate=function(t,e){this.compressionType=qe.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},qe.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},qe.RawDeflate.Lz77MinLength=3,qe.RawDeflate.Lz77MaxLength=258,qe.RawDeflate.WindowSize=32768,qe.RawDeflate.MaxCodeLength=16,qe.RawDeflate.HUFMAX=286,qe.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),qe.RawDeflate.prototype.compress=function(){var t,e,n,r=this.input;switch(this.compressionType){case qe.RawDeflate.CompressionType.NONE:for(e=0,n=r.length;e<n;)e+=(t=r.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===n);break;case qe.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(r,!0),this.op=this.output.length;break;case qe.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(r,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},qe.RawDeflate.prototype.makeNocompressBlock=function(t,e){var n,r,i,o,a=this.output,s=this.op;for(a=new Uint8Array(this.output.buffer);a.length<=s+t.length+5;)a=new Uint8Array(a.length<<1);return a.set(this.output),n=e?1:0,r=qe.RawDeflate.CompressionType.NONE,a[s++]=n|r<<1,o=65536+~(i=t.length)&65535,a[s++]=255&i,a[s++]=i>>>8&255,a[s++]=255&o,a[s++]=o>>>8&255,a.set(t,s),s+=t.length,a=a.subarray(0,s),this.op=s,this.output=a,a},qe.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var n,r,i,o=new qe.BitStream(new Uint8Array(this.output.buffer),this.op);return n=e?1:0,r=qe.RawDeflate.CompressionType.FIXED,o.writeBits(n,1,!0),o.writeBits(r,2,!0),i=this.lz77(t),this.fixedHuffman(i,o),o.finish()},qe.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w=new qe.BitStream(new Uint8Array(this.output.buffer),this.op),b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(n=e?1:0,r=qe.RawDeflate.CompressionType.DYNAMIC,w.writeBits(n,1,!0),w.writeBits(r,2,!0),i=this.lz77(t),c=this.getLengths_(this.freqsLitLen,15),h=this.getCodesFromLengths_(c),l=this.getLengths_(this.freqsDist,7),u=this.getCodesFromLengths_(l),o=286;o>257&&0===c[o-1];o--);for(a=30;a>1&&0===l[a-1];a--);for(f=this.getTreeSymbols_(o,c,a,l),p=this.getLengths_(f.freqs,7),v=0;v<19;v++)x[v]=p[b[v]];for(s=19;s>4&&0===x[s-1];s--);for(d=this.getCodesFromLengths_(p),w.writeBits(o-257,5,!0),w.writeBits(a-1,5,!0),w.writeBits(s-4,4,!0),v=0;v<s;v++)w.writeBits(x[v],3,!0);for(v=0,y=f.codes.length;v<y;v++)if(g=f.codes[v],w.writeBits(d[g],p[g],!0),g>=16){switch(v++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}w.writeBits(f.codes[v],m,!0)}return this.dynamicHuffman(i,[h,c],[u,l],w),w.finish()},qe.RawDeflate.prototype.dynamicHuffman=function(t,e,n,r){var i,o,a,s,c,h,l,u;for(c=e[0],h=e[1],l=n[0],u=n[1],i=0,o=t.length;i<o;++i)if(a=t[i],r.writeBits(c[a],h[a],!0),a>256)r.writeBits(t[++i],t[++i],!0),s=t[++i],r.writeBits(l[s],u[s],!0),r.writeBits(t[++i],t[++i],!0);else if(256===a)break;return r},qe.RawDeflate.prototype.fixedHuffman=function(t,e){var n,r,i;for(n=0,r=t.length;n<r;n++)if(i=t[n],qe.BitStream.prototype.writeBits.apply(e,qe.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++n],t[++n],!0),e.writeBits(t[++n],5),e.writeBits(t[++n],t[++n],!0);else if(256===i)break;return e},qe.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},qe.RawDeflate.Lz77Match.LengthCodeTable=function(t){return new Uint32Array(t)}(function(){var t,e,n=[];for(t=3;t<=258;t++)e=r(t),n[t]=e[2]<<24|e[1]<<16|e[0];function r(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return n}()),qe.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},qe.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,n=this.backwardDistance,r=[],i=0;return t=qe.RawDeflate.Lz77Match.LengthCodeTable[e],r[i++]=65535&t,r[i++]=t>>16&255,r[i++]=t>>24,t=this.getDistanceCode_(n),r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],r},qe.RawDeflate.prototype.lz77=function(t){var e,n,r,i,o,a,s,c,h,l={},u=qe.RawDeflate.WindowSize,f=new Uint16Array(2*t.length),p=0,d=0,g=new Uint32Array(286),m=new Uint32Array(30),v=this.lazy;function y(t,e){var n,r,i=t.toLz77Array();for(n=0,r=i.length;n<r;++n)f[p++]=i[n];g[i[0]]++,m[i[3]]++,d=t.length+e-1,c=null}for(g[256]=1,e=0,n=t.length;e<n;++e){for(o=0,r=0,i=qe.RawDeflate.Lz77MinLength;r<i&&e+r!==n;++r)o=o<<8|t[e+r];if(void 0===l[o]&&(l[o]=[]),a=l[o],d-- >0)a.push(e);else{for(;a.length>0&&e-a[0]>u;)a.shift();if(e+qe.RawDeflate.Lz77MinLength>=n){for(c&&y(c,-1),r=0,i=n-e;r<i;++r)h=t[e+r],f[p++]=h,++g[h];break}a.length>0?(s=this.searchLongestMatch_(t,e,a),c?c.length<s.length?(h=t[e-1],f[p++]=h,++g[h],y(s,0)):y(c,-1):s.length<v?c=s:y(s,0)):c?y(c,-1):(h=t[e],f[p++]=h,++g[h]),a.push(e)}}return f[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=m,f.subarray(0,p)},qe.RawDeflate.prototype.searchLongestMatch_=function(t,e,n){var r,i,o,a,s,c,h=0,l=t.length;t:for(a=0,c=n.length;a<c;a++){if(r=n[c-a-1],o=qe.RawDeflate.Lz77MinLength,h>qe.RawDeflate.Lz77MinLength){for(s=h;s>qe.RawDeflate.Lz77MinLength;s--)if(t[r+s-1]!==t[e+s-1])continue t;o=h}for(;o<qe.RawDeflate.Lz77MaxLength&&e+o<l&&t[r+o]===t[e+o];)++o;if(o>h&&(i=r,h=o),o===qe.RawDeflate.Lz77MaxLength)break}return new qe.RawDeflate.Lz77Match(h,e-i)},qe.RawDeflate.prototype.getTreeSymbols_=function(t,e,n,r){var i,o,a,s,c,h,l=new Uint32Array(t+n),u=new Uint32Array(316),f=new Uint8Array(19);for(o=0,i=0;i<t;i++)l[o++]=e[i];for(i=0;i<n;i++)l[o++]=r[i];for(c=0,i=0,s=l.length;i<s;i+=o){for(o=1;i+o<s&&l[i+o]===l[i];++o);if(a=o,0===l[i])if(a<3)for(;a-- >0;)u[c++]=0,f[0]++;else for(;a>0;)(h=a<138?a:138)>a-3&&h<a&&(h=a-3),h<=10?(u[c++]=17,u[c++]=h-3,f[17]++):(u[c++]=18,u[c++]=h-11,f[18]++),a-=h;else if(u[c++]=l[i],f[l[i]]++,--a<3)for(;a-- >0;)u[c++]=l[i],f[l[i]]++;else for(;a>0;)(h=a<6?a:6)>a-3&&h<a&&(h=a-3),u[c++]=16,u[c++]=h-3,f[16]++,a-=h}return{codes:u.subarray(0,c),freqs:f}},qe.RawDeflate.prototype.getLengths_=function(t,e){var n,r,i,o,a,s=t.length,c=new qe.Heap(2*qe.RawDeflate.HUFMAX),h=new Uint8Array(s);for(o=0;o<s;++o)t[o]>0&&c.push(o,t[o]);if(n=new Array(c.length/2),r=new Uint32Array(c.length/2),1===n.length)return h[c.pop().index]=1,h;for(o=0,a=c.length/2;o<a;++o)n[o]=c.pop(),r[o]=n[o].value;for(i=this.reversePackageMerge_(r,r.length,e),o=0,a=n.length;o<a;++o)h[n[o].index]=i[o];return h},qe.RawDeflate.prototype.reversePackageMerge_=function(t,e,n){var r,i,o,a,s,c=new Uint16Array(n),h=new Uint8Array(n),l=new Uint8Array(e),u=new Array(n),f=new Array(n),p=new Array(n),d=(1<<n)-e,g=1<<n-1;function m(t){var n=f[t][p[t]];n===e?(m(t+1),m(t+1)):--l[n],++p[t]}for(c[n-1]=e,i=0;i<n;++i)d<g?h[i]=0:(h[i]=1,d-=g),d<<=1,c[n-2-i]=(c[n-1-i]/2|0)+e;for(c[0]=h[0],u[0]=new Array(c[0]),f[0]=new Array(c[0]),i=1;i<n;++i)c[i]>2*c[i-1]+h[i]&&(c[i]=2*c[i-1]+h[i]),u[i]=new Array(c[i]),f[i]=new Array(c[i]);for(r=0;r<e;++r)l[r]=n;for(o=0;o<c[n-1];++o)u[n-1][o]=t[o],f[n-1][o]=o;for(r=0;r<n;++r)p[r]=0;for(1===h[n-1]&&(--l[0],++p[n-1]),i=n-2;i>=0;--i){for(r=0,a=0,s=p[i+1],o=0;o<c[i];o++)(a=u[i+1][s]+u[i+1][s+1])>t[r]?(u[i][o]=a,f[i][o]=e,s+=2):(u[i][o]=t[r],f[i][o]=r,++r);p[i]=0,1===h[i]&&m(i)}return l},qe.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,n,r,i,o=new Uint16Array(t.length),a=[],s=[],c=0;for(e=0,n=t.length;e<n;e++)a[t[e]]=1+(0|a[t[e]]);for(e=1,n=qe.RawDeflate.MaxCodeLength;e<=n;e++)s[e]=c,c+=0|a[e],c<<=1;for(e=0,n=t.length;e<n;e++)for(c=s[t[e]],s[t[e]]+=1,o[e]=0,r=0,i=t[e];r<i;r++)o[e]=o[e]<<1|1&c,c>>>=1;return o},qe.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},qe.Unzip.CompressionMethod=qe.Zip.CompressionMethod,qe.Unzip.FileHeaderSignature=qe.Zip.FileHeaderSignature,qe.Unzip.LocalFileHeaderSignature=qe.Zip.LocalFileHeaderSignature,qe.Unzip.CentralDirectorySignature=qe.Zip.CentralDirectorySignature,qe.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},qe.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==qe.Unzip.FileHeaderSignature[0]||t[e++]!==qe.Unzip.FileHeaderSignature[1]||t[e++]!==qe.Unzip.FileHeaderSignature[2]||t[e++]!==qe.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},qe.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},qe.Unzip.LocalFileHeader.Flags=qe.Zip.Flags,qe.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==qe.Unzip.LocalFileHeaderSignature[0]||t[e++]!==qe.Unzip.LocalFileHeaderSignature[1]||t[e++]!==qe.Unzip.LocalFileHeaderSignature[2]||t[e++]!==qe.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},qe.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===qe.Unzip.CentralDirectorySignature[0]&&e[t+1]===qe.Unzip.CentralDirectorySignature[1]&&e[t+2]===qe.Unzip.CentralDirectorySignature[2]&&e[t+3]===qe.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},qe.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==qe.Unzip.CentralDirectorySignature[0]||e[t++]!==qe.Unzip.CentralDirectorySignature[1]||e[t++]!==qe.Unzip.CentralDirectorySignature[2]||e[t++]!==qe.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},qe.Unzip.prototype.parseFileHeader=function(){var t,e,n,r,i=[],o={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,n=0,r=this.totalEntries;n<r;++n)(e=new qe.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,i[n]=e,o[e.filename]=n;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=o}},qe.Unzip.prototype.getFileData=function(t,e){e=e||{};var n,r,i,o,a,s,c,h,l=this.input,u=this.fileHeaderList;if(u||this.parseFileHeader(),void 0===u[t])throw new Error("wrong index");if(r=u[t].relativeOffset,(n=new qe.Unzip.LocalFileHeader(this.input,r)).parse(),r+=n.length,i=n.compressedSize,0!=(n.flags&qe.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(e.password||this.password),c=r,h=r+12;c<h;++c)this.decode(s,l[c]);for(c=r+=12,h=r+(i-=12);c<h;++c)l[c]=this.decode(s,l[c])}switch(n.compression){case qe.Unzip.CompressionMethod.STORE:o=this.input.subarray(r,r+i);break;case qe.Unzip.CompressionMethod.DEFLATE:o=new qe.RawInflate(this.input,{index:r,bufferSize:n.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(a=qe.CRC32.calc(o),n.crc32!==a))throw new Error("wrong crc: file=0x"+n.crc32.toString(16)+", data=0x"+a.toString(16));return o},qe.Unzip.prototype.getFilenames=function(){var t,e,n,r=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(n=this.fileHeaderList).length;t<e;++t)r[t]=n[t].filename;return r},qe.Unzip.prototype.decompress=function(t,e){var n;if(this.filenameToIndex||this.parseFileHeader(),void 0===(n=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(n,e)},qe.Unzip.prototype.setPassword=function(t){this.password=t},qe.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},qe.Unzip.prototype.updateKeys=qe.Zip.prototype.updateKeys,qe.Unzip.prototype.createDecryptionKey=qe.Zip.prototype.createEncryptionKey,qe.Unzip.prototype.getByte=qe.Zip.prototype.getByte,qe.Util.stringToByteArray=function(t){var e,n,r=t.split("");for(e=0,n=r.length;e<n;e++)r[e]=(255&r[e].charCodeAt(0))>>>0;return r},qe.Adler32=function(t){return"string"==typeof t&&(t=qe.Util.stringToByteArray(t)),qe.Adler32.update(1,t)},qe.Adler32.update=function(t,e){for(var n,r=65535&t,i=t>>>16&65535,o=e.length,a=0;o>0;){o-=n=o>qe.Adler32.OptimizationParameter?qe.Adler32.OptimizationParameter:o;do{i+=r+=e[a++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},qe.Adler32.OptimizationParameter=1024,qe.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(qe.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},qe.BitStream.DefaultBlockSize=32768,qe.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,n=new Uint8Array(e<<1);return n.set(t),this.buffer=n},qe.BitStream.prototype.writeBits=function(t,e,n){var r,i=this.buffer,o=this.index,a=this.bitindex,s=i[o];if(n&&e>1&&(t=e>8?function(t){return qe.BitStream.ReverseTable[255&t]<<24|qe.BitStream.ReverseTable[t>>>8&255]<<16|qe.BitStream.ReverseTable[t>>>16&255]<<8|qe.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:qe.BitStream.ReverseTable[t]>>8-e),e+a<8)s=s<<e|t,a+=e;else for(r=0;r<e;++r)s=s<<1|t>>e-r-1&1,8==++a&&(a=0,i[o++]=qe.BitStream.ReverseTable[s],s=0,o===i.length&&(i=this.expandBuffer()));i[o]=s,this.buffer=i,this.bitindex=a,this.index=o},qe.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=qe.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},qe.BitStream.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,n=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--n;return(e<<n&255)>>>0}(t);return e}(),qe.CRC32.calc=function(t,e,n){return qe.CRC32.update(t,0,e,n)},qe.CRC32.update=function(t,e,n,r){var i=qe.CRC32.Table,o="number"==typeof n?n:n=0,a="number"==typeof r?r:t.length;for(e^=4294967295,o=7&a;o--;++n)e=e>>>8^i[255&(e^t[n])];for(o=a>>3;o--;n+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^i[255&(e^t[n])])>>>8^i[255&(e^t[n+1])])>>>8^i[255&(e^t[n+2])])>>>8^i[255&(e^t[n+3])])>>>8^i[255&(e^t[n+4])])>>>8^i[255&(e^t[n+5])])>>>8^i[255&(e^t[n+6])])>>>8^i[255&(e^t[n+7])];return(4294967295^e)>>>0},qe.CRC32.single=function(t,e){return(qe.CRC32.Table[255&(t^e)]^t>>>8)>>>0},qe.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],qe.CRC32.Table=new Uint32Array(qe.CRC32.Table_),qe.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(qe.Deflate.DefaultBufferSize),this.compressionType=qe.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var n,r={};for(n in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)r[n]=e[n];r.outputBuffer=this.output,this.rawDeflate=new qe.RawDeflate(this.input,r)},qe.Deflate.DefaultBufferSize=32768,qe.Deflate.CompressionType=qe.RawDeflate.CompressionType,qe.Deflate.compress=function(t,e){return new qe.Deflate(t,e).compress()},qe.Deflate.prototype.compress=function(){var t,e,n,r,i,o,a,s=0;switch(a=this.output,t=qe.CompressionMethod.DEFLATE){case qe.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(qe.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(n=e<<4|t,a[s++]=n,0,t){case qe.CompressionMethod.DEFLATE:switch(this.compressionType){case qe.Deflate.CompressionType.NONE:i=0;break;case qe.Deflate.CompressionType.FIXED:i=1;break;case qe.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return r=i<<6|0,r|=31-(256*n+r)%31,a[s++]=r,o=qe.Adler32(this.input),this.rawDeflate.op=s,s=(a=this.rawDeflate.compress()).length,(a=new Uint8Array(a.buffer)).length<=s+4&&(this.output=new Uint8Array(a.length+4),this.output.set(a),a=this.output),(a=a.subarray(0,s+4))[s++]=o>>24&255,a[s++]=o>>16&255,a[s++]=o>>8&255,a[s++]=255&o,a};const Ke=function(t){return t.split(/\n|\r\n|\r/g)};function Xe(t,e){var n,r,i=[],o=t.length,a=0,s=!1;if(o>0)for(i[a]=t.charAt(0),n=1;n<o;n++)'"'===(r=t.charAt(n))?s=!s:s||r!==e?i[a]+=r:i[++a]="";return i}function Ye(t){return t.split("").reduce((function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t}),0)}const Qe={rgbListFromHSV:()=>{let t=[];for(let e=1;e>=.5;e-=.1)for(let n=0;n<1;n+=1/28){const r="rgb("+Qe.hsvToRgb(n,1,e).join(",")+")";t.push(r)}return t.pop(),t.push(Qe.rgbColor(16,16,16)),t},rgbToHex:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(null!==e)return"rgb("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+")"},hsvToRgb:function(t,e,n){var r,i,o,a=Math.floor(6*t),s=6*t-a,c=n*(1-e),h=n*(1-s*e),l=n*(1-(1-s)*e);switch(a%6){case 0:r=n,i=l,o=c;break;case 1:r=h,i=n,o=c;break;case 2:r=c,i=n,o=l;break;case 3:r=c,i=h,o=n;break;case 4:r=l,i=c,o=n;break;case 5:r=n,i=c,o=h}return[Math.floor(255*r),Math.floor(255*i),Math.floor(255*o)]},hslToRgb:function(t,e,n){var r,i,o;if(0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,s=2*n-a;r=Qe.hue2rgb(s,a,t+1/3),i=Qe.hue2rgb(s,a,t),o=Qe.hue2rgb(s,a,t-1/3)}return[255*r,255*i,255*o]},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),rgbaColor:function(t,e,n,r){return"rgba("+(t=He(t,0,255))+","+(e=He(e,0,255))+","+(n=He(n,0,255))+","+(r=He(r,0,1))+")"},rgbColor:function(t,e,n){return"rgb("+(t=He(t,0,255))+","+(e=He(e,0,255))+","+(n=He(n,0,255))+")"},greyScale:function(t){var e=He(t,0,255);return"rgb("+e+","+e+","+e+")"},randomGrey:function(t,e){t=He(t,0,255),e=He(e,0,255);var n=Math.round(Math.random(t,e)).toString(10);return"rgb("+n+","+n+","+n+")"},randomRGB:function(t,e){return t=He(t,0,255),e=He(e,0,255),"rgb("+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+")"},randomRGBConstantAlpha:function(t,e,n){return t=He(t,0,255),e=He(e,0,255),"rgba("+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+n+")"},addAlpha:function(t,e){const n=this.colorNameToHex(t);n&&(t=n);var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return t.startsWith("rgba")?t:(r&&(t=Qe.hexToRgb(t)),t.startsWith("rgb")?t.replace("rgb","rgba").replace(")",", "+e+")"):t)},getCompositeColor:function(t,e,n){return"rgb("+Math.floor(n*e[0]+(1-n)*t[0])+","+Math.floor(n*e[1]+(1-n)*t[1])+","+Math.floor(n*e[2]+(1-n)*t[2])+")"},createColorString:function(t){return(t=function(t){return(t.startsWith("'")||t.startsWith('"'))&&(t=t.substring(1)),(t.endsWith("'")||t.endsWith('"'))&&(t=t.substring(0,t.length-1)),t}(t)).includes(",")?t.startsWith("rgb")?t:"rgb("+t+")":t},darkenLighten:function(t,e){let n,r=this.colorNameToHex(t);n=r?Qe.hexToRgb(r):t.startsWith("rgb(")?t:Qe.hexToRgb(t);const i=n.replace(")","").substring(4).split(","),o=Math.max(0,Math.min(255,Number.parseInt(i[0].trim())+e)),a=Math.max(0,Math.min(255,Number.parseInt(i[1].trim())+e)),s=Math.max(0,Math.min(255,Number.parseInt(i[2].trim())+e));return"rgb("+o.toString()+","+a.toString()+","+s.toString()+")"},colorNameToHex:function(t){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",darkgrey:"#a9a9a9",darkslategrey:"#2f4f4f",dimgrey:"#696969",grey:"#808080",lightgray:"#d3d3d3",lightslategrey:"#778899",slategrey:"#708090"}[t]}};function Je(t,e){var n=pe("<div>");t.append(n),n.append(Me("times")),n.on("click",(function(t){t.preventDefault(),t.stopPropagation(),e()}))}function tn(t,e,n){let r=Object.values(Fe);n&&"function"!=typeof n&&(r.splice(11,1),r.unshift(Qe.rgbToHex(n)));for(let n of r){let r=pe("<div>",{class:"igv-color-swatch"});t.append(r),r.css("background-color",n),"white"===n||(r.hover(()=>{r.get(0).style.borderColor=n},()=>{r.get(0).style.borderColor="white"}),r.on("click.trackview",t=>{t.stopPropagation(),e(n)}),r.on("touchend.trackview",t=>{t.stopPropagation(),e(n)}))}}function en(t){if(t.type.startsWith("touch")){const e=t.touches[0];return{x:e.pageX,y:e.pageY}}return{x:t.pageX,y:t.pageY}}function nn(t,e){var n=pe(e);n.offset();const r=en(t);return{x:r.x-n.offset().left,y:r.y-n.offset().top}}function rn(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}const on=Ae.trackMenuItemListHelper,an=function(t,e){this.browser=e,this.$parent=sn.call(this,t)};function sn(t){var e,n=this;return this.$popover=pe('<div class="igv-popover">'),t.append(this.$popover),e=pe('<div class="igv-popover-header">'),this.$popover.append(e),Je(e,(function(){n.hide()})),this.$popoverContent=pe("<div>"),this.$popover.append(this.$popoverContent),_e(this.$popover.get(0),e.get(0)),t}function cn(t,e,n){var r,i,o=t,a=pe(window).width(),s=(pe(window).height(),t),c=e;return r=s-=n.$parent.offset().left,o+(i={x:s,y:c-=n.$parent.offset().top,width:n.$popover.outerWidth(),height:n.$popover.outerHeight()}).width>a&&(r=s-i.width),{left:r+"px",top:c+"px"}}an.prototype.hide=function(){this.$popover.hide()},an.prototype.presentTrackContextMenu=function(t,e){var n=this.$popover;if(pe(".igv-popover").hide(),e.length>0){e=on(e,n),this.$popoverContent.empty(),this.$popoverContent.removeClass(),this.$popoverContent.addClass("igv-popover-track-popup-content");for(let t of e)this.$popoverContent.append(t.object);const r=en(t);n.css(cn(r.x,r.y,this)),n.show()}},an.prototype.presentTrackContent=function(t,e,n){pe(".igv-popover").hide(),void 0!==n&&(this.$popoverContent.empty(),this.$popoverContent.removeClass(),this.$popoverContent.addClass("igv-popover-track-popup-content"),this.$popoverContent.html(n),this.$popover.css(cn(t,e,this)),this.$popover.show())},an.prototype.dispose=function(){this.$popover.empty(),this.$popoverContent.empty(),Object.keys(this).forEach((function(t){this[t]=void 0}))};const hn=function(t,e){return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._super=Object.getPrototypeOf(e.prototype),e};function ln(t){const e=new Set(["boolean","number","string","symbol"]),n=typeof t;return void 0!==t&&(e.has(n)||t.substring||t.toFixed)}function un(t,e){var n={oauthToken:t.oauthToken,headers:t.headers,withCredentials:t.withCredentials,filename:t.filename};return Object.assign(n,e)}function fn(t,e){const n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}const pn=function(t){var e,n;return t.length>0?(e=Number.MAX_VALUE,n=-Number.MAX_VALUE,t.forEach((function(t){Number.isNaN(t.value)||(e=Math.min(e,t.value),n=Math.max(n,t.value))})),n>0&&(e=Math.min(0,e)),n<0&&(n=0)):(e=0,n=100),{min:e,max:n}},dn=function(t,e,n){let r=e.start,i=e.end;if(void 0===i)r-=n/2,i=r+n,i>t?(i=t,r=i-n):r<0&&(r=0,i=n);else if(i-r<n){const e=(i+r)/2;e-n/2<0?(r=0,i=r+n):e+n/2>t?(i=t,r=i-n):(r=e-n/2,i=r+n)}e.start=Math.ceil(r),e.end=Math.floor(i)},gn=function(t){this.viewport=t,this.browser=t.browser,this.$rulerSweeper=pe('<div class="igv-ruler-sweeper-div">'),pe(t.contentDiv).append(this.$rulerSweeper),this.namespace=".sweeper_"+rn(),this.addMouseHandlers()};function mn(t){return this.viewport.genomicState.referenceFrame.start+t*this.viewport.genomicState.referenceFrame.bpPerPixel}gn.prototype.disableMouseHandlers=function(){pe(document).off(this.namespace),this.viewport.$viewport.off(this.namespace)},gn.prototype.addMouseHandlers=function(){const t=this.browser,e=this;var n,r,i,o,a,s;this.disableMouseHandlers(),n=r=i=void 0,pe(this.browser.$root).on("mousedown"+this.namespace,(function(t){r=!0,i=nn(t,e.viewport.$viewport).x,!0===n&&(e.$rulerSweeper.show(),a=1,o=i,e.$rulerSweeper.css({left:o+"px"}),e.$rulerSweeper.width(a))})),pe(this.browser.$root).on("mousemove"+this.namespace,(function(t){var c;n&&r&&(c=nn(t,e.viewport.$viewport).x,c=Math.min(c,e.viewport.$viewport.width()),c=Math.max(c,0),s=c-i,a=Math.abs(s),e.$rulerSweeper.width(a),s<0&&(o=i+s,e.$rulerSweeper.css({left:o+"px"})))})),pe(this.browser.$root).on("mouseup"+this.namespace,(function(i){let s;!0===n&&!0===r&&(n=r=void 0,e.$rulerSweeper.hide(),s={},s.start=mn.call(e,o),s.end=mn.call(e,o+a),a>1&&(dn(t.genome.getChromosome(e.viewport.genomicState.referenceFrame.chrName).bpLength,s,t.minimumBases()),e.viewport.genomicState.referenceFrame.bpPerPixel=(Math.round(s.end)-Math.round(s.start))/e.viewport.$viewport.width(),e.viewport.genomicState.referenceFrame.start=Math.round(s.start),t.updateViews(e.viewport.genomicState)))})),this.viewport.$viewport.on("mousedown"+this.namespace,(function(t){n=!0}))},gn.prototype.dispose=function(){this.disableMouseHandlers()};const vn=function(t,e,n,r){this.start=t,this.end=e,this.name=n,this.stain=0,"acen"===r?this.type="c":(this.type=r.charAt(1),"p"===this.type&&(this.stain=parseInt(r.substring(4))))},yn=function(t,e,n,r){this.chr=t,this.start=e,this.end=n,this.features=r};yn.prototype.contains=function(t,e,n){return this.chr===t&&this.start<=e&&this.end>=n},yn.prototype.containsRange=function(t){return this.chr===t.chr&&this.start<=t.start&&this.end>=t.end};const wn=function(t,e,n,r,i){this.name=t,this.order=e,this.bpStart=n,this.bpLength=r,this.rangeLocus=i},bn={fileInfoCache:{},isGoogleURL:function(t){return t.includes("googleapis")&&!t.includes("urlshortener")||this.isGoogleCloudURL(t)||this.isGoogleStorageURL(t)||this.isGoogleDrive(t)},isGoogleStorageURL:function(t){return t.startsWith("https://www.googleapis.com/storage")||t.startsWith("https://storage.cloud.google.com")||t.startsWith("https://storage.googleapis.com")},isGoogleCloudURL:function(t){return t.startsWith("gs://")},isGoogleDrive:function(t){return t.indexOf("drive.google.com")>=0||t.indexOf("www.googleapis.com/drive")>0},setApiKey:function(t){this.apiKey=t},translateGoogleCloudURL:function(t){var e,n,r,i,o,a;return e=t.indexOf("/",5),i=t.indexOf("?"),e<0?t:(n=t.substring(5,e),o=i<0?t.substring(e+1):t.substring(e+1,i),r=encodeURIComponent(o),i>0&&(a=t.substring(i)),"https://www.googleapis.com/storage/v1/b/"+n+"/o/"+r+(a?a+"&alt=media":"?alt=media"))},addApiKey:function(t){const e=this.apiKey;if(void 0!==e&&!t.includes("key=")){const n=t.includes("?")?"&":"?";t=t+n+"key="+e}return t},driveDownloadURL:function(t){var e=xn(t);return e?"https://www.googleapis.com/drive/v3/files/"+e+"?alt=media&supportsTeamDrives=true":t},getDriveFileInfo:function(t){var e="https://www.googleapis.com/drive/v3/files/"+xn(t)+"?supportsTeamDrives=true";return zn.loadJson(e,un({}))},loadGoogleProperties:function(t){const e=this;return zn.loadArrayBuffer(t).then((function(t){var n,r;n=new qe.Gunzip(new Uint8Array(t)).decompress(),r=String.fromCharCode.apply(null,n);const i=JSON.parse(r);return e.setApiKey(i.api_key),e.properties=i,i}))}};function xn(t){var e,n;if(t.includes("/open?id=")){if(e=t.indexOf("/open?id=")+9,n=t.indexOf("&"),e>0&&n>e)return t.substring(e,n);if(e>0)return t.substring(e)}else if(t.includes("/file/d/"))return e=t.indexOf("/file/d/")+8,n=t.lastIndexOf("/"),t.substring(e,n)}const kn={oauthTokens:{},setToken:function(t,e){e?this.oauthTokens[e]=t:this.google.access_token=t},getToken:function(t){let e;if(t)for(let n in this.oauthTokens){if(new RegExp("^"+n.split(/\*+/).map(Sn).join(".*")+"$").test(t)){e=this.oauthTokens[n];break}}else e=this.google.access_token;return e},removeToken:function(t){t?delete this.oauthTokens[t]:delete kn.google.access_token},google:{setToken:function(t){this.access_token=t}}};function Sn(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function Cn(t,e){const n=[];let r=0,i=0;for(e=e||t.byteLength-18;r<e;)try{const e=new Uint8Array(t,r,18),o=e[11]<<8|e[10],a=(e[12],e[13],e[15],e[14],1+(e[17]<<8|e[16])),s=12+o+r,c=t.byteLength-s,h=a-o-19;if(c<h)break;const l=new Uint8Array(t,s,h),u=new qe.RawInflate(l),f=u.decompress();r+=u.ip+26,i+=f.byteLength,n.push(f)}catch(t){console.error(t);break}if(1===n.length)return n[0];{const t=new Uint8Array(i);let e=0;for(let r=0;r<n.length;++r){var o=new Uint8Array(n[r]);Tn(o,0,t,e,o.length),e+=o.length}return t}}function _n(t){const e=new Uint8Array(t);return e[17]<<8|e[16]+1}const Rn="function"==typeof new Uint8Array(1).subarray;function Tn(t,e,n,r,i){if(0!==i){if(!t)throw"Undef src";if(!n)throw"Undef dest";0===e&&i===t.length?En(t,n,r):Rn?En(t.subarray(e,e+i),n,r):1===t.BYTES_PER_ELEMENT&&i>100?En(new Uint8Array(t.buffer,t.byteOffset+e,i),n,r):function(t,e,n,r,i){for(let o=0;o<i;++o)n[r+o]=t[e+o]}(t,e,n,r,i)}}function En(t,e,n){e.set(t,n)}function An(t){var e,n;return t instanceof File?t.name:((e=(n=(e=t.lastIndexOf("/"))<0?t:t.substr(e+1)).indexOf("?"))>0&&(n=n.substr(0,e)),n)}function Ln(t){return t instanceof File}function In(t){const e=t.split(","),n=e[0].split(":")[1];let r=e[1];r=n.indexOf("base64")>=0?atob(r):decodeURI(r);const i=new Uint8Array(r.length);for(let t=0;t<r.length;t++)i[t]=r.charCodeAt(t);let o;if(n.indexOf("gzip")>0){o=new qe.Gunzip(i).decompress()}else o=i;return o}function Mn(t){for(var e=Dn,n=e.parser.loose.exec(t),r={},i=14;i--;)r[e.key[i]]=n[i]||"";return r[e.q.name]={},r[e.key[12]].replace(e.q.parser,(function(t,n,i){n&&(r[e.q.name][n]=i)})),r}"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(t){return Buffer.from(t,"base64").toString("binary")});const Dn={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},Bn={401:"Access unauthorized",403:"Access forbidden",404:"Not found"},Fn=function(t){const e=this;this.$container=pe("<div>",{class:"igv-alert-dialog-container"}),t.append(this.$container);let n=pe("<div>");this.$container.append(n);let r=pe("<div>",{id:"igv-alert-dialog-body"});this.$container.append(r),this.$body=pe("<div>",{id:"igv-alert-dialog-body-copy"}),r.append(this.$body);let i=pe("<div>");this.$container.append(i),this.$ok=pe("<div>"),i.append(this.$ok),this.$ok.text("OK"),this.$ok.on("click",(function(){e.$body.html(""),e.$container.hide()})),this.$container.hide()};let Nn;Fn.prototype.configure=function(t){this.$body.html(t.label)},Fn.prototype.present=function(t,e){const n=this;let r=t.message||t;Bn.hasOwnProperty(r)&&(r=Bn[r]),this.$body.html(r),this.$ok.on("click",(function(){"function"==typeof e&&e("OK"),n.$body.html(""),n.$container.hide()})),this.$container.show()};const On={init(t){Nn||(Nn=new Fn(t))},presentAlert:function(t,e){Nn.present(t,e)}};const Pn=new class{constructor(t){this.wait=void 0===t?100:t,this.isCalled=!1,this.calls=[]}limiter(t){const e=this;let n=function(){e.calls.length&&!e.isCalled&&(e.isCalled=!0,e.calls.shift().call(),setTimeout((function(){e.isCalled=!1,n()}),e.wait))};return function(){e.calls.push(t.bind(this,...arguments)),n()}}}(100),zn={load:async function(t,e){return e=e||{},t instanceof File?$n(t,e):t.startsWith("data:")?In(t):function(t){return t.includes("drive.google.com")||t.includes("www.googleapis.com/drive")}(t)?new Promise((function(r,i){Pn.limiter((async function(t,e){try{const i=n(t,e);r(i)}catch(t){i(t)}}))(t,e)})):n(t,e);async function n(t,e){t=function(t){return t.includes("//www.dropbox.com")?t.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):t.includes("//drive.google.com")?bn.driveDownloadURL(t):t.includes("//www.broadinstitute.org/igvdata")?t.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):t.includes("//igvdata.broadinstitute.org")?t.replace("//igvdata.broadinstitute.org","https://dn7ywbm9isq8j.cloudfront.net"):t.startsWith("ftp://ftp.ncbi.nlm.nih.gov/geo")?t.replace("ftp://","https://"):t}(t);let n=(e=e||{}).oauthToken;if(n||(n=function(t){const e=Mn(t).host;let n=kn.getToken(e);!n&&bn.isGoogleURL(t)&&(n=kn.google.access_token);return n}(t)),n){let t="function"==typeof n?n():n;return t.then&&"function"==typeof t.then?t.then(r):r(t)}return i(t,e);function r(n){return n&&(e.token=n),i(t,e)}async function i(t,e){return new Promise((function(n,r){bn.isGoogleURL(t)&&(t.startsWith("gs://")?t=bn.translateGoogleCloudURL(t):bn.isGoogleStorageURL(t)&&(t.includes("altMedia=")||(t+=t.includes("?")?"&altMedia=true":"?altMedia=true")),t=bn.addApiKey(t));const i=e.headers||{};e.token&&function(t,e){e&&(t["Cache-Control"]="no-cache",t.Authorization="Bearer "+e)}(i,e.token);const o=e.range,a=navigator.userAgent.indexOf("Chrome")>-1;0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent);o&&a&&!function(t){return t.indexOf("X-Amz-Signature")>-1}(t)&&(t+=t.includes("?")?"&":"?",t+="someRandomSeed="+Math.random().toString(36));const s=new XMLHttpRequest,c=e.sendData||e.body,h=e.method||(c?"POST":"GET"),l=e.responseType,u=e.contentType,f=e.mimeType;if(s.open(h,t),o){var p=o.size?o.start+o.size-1:"";s.setRequestHeader("Range","bytes="+o.start+"-"+p)}if(u&&s.setRequestHeader("Content-Type",u),f&&s.overrideMimeType(f),l&&(s.responseType=l),i)for(let t of Object.keys(i)){const e=i[t];s.setRequestHeader(t,e)}!0===e.withCredentials&&(s.withCredentials=!0),s.onload=async function(r){if(0===s.status||s.status>=200&&s.status<=300)o&&206!==s.status&&0!==o.start?(s.response.length>1e5&&On.presentAlert(`Warning: Range header ignored for URL: ${t}.  This can have performance impacts.`),n(s.response.slice(o.start,o.start+o.size))):n(s.response);else if("undefined"==typeof gapi||404!==s.status&&401!==s.status||!bn.isGoogleURL(t)||e.retries)403===s.status?d("Access forbidden: "+t):416===s.status?d("Unsatisfiable range"):d(s.status);else try{e.retries=1;const n=await async function(){if(kn.google.access_token)return kn.google.access_token;if(Hn)return Hn;if(!gapi||!gapi.auth2)throw new Error("The Google oAuth API is required but not loaded");if(!gapi.auth2.getAuthInstance())return void On.presentAlert("Authorization is required, but Google oAuth has not been initalized.  Contact your site administrator for assistance.");const t=new gapi.auth2.SigninOptionsBuilder;return t.setPrompt("select_account"),t.setScope("https://www.googleapis.com/auth/devstorage.read_only https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/drive.readonly"),Hn=new Promise((function(e,n){On.presentAlert("Google Login required",(function(){gapi.auth2.getAuthInstance().signIn(t).then((function(t){const n=t.getAuthResponse();kn.google.setToken(n.access_token),e(n.access_token),Hn=void 0})).catch((function(t){Hn=void 0,n(t)}))}))})),Hn}();return e.oauthToken=n,zn.load(t,e)}catch(t){d(t)}},s.onerror=function(e){d("Error accessing resource: "+t+" Status: "+s.status)},s.ontimeout=function(t){d("Timed out")},s.onabort=function(t){r(t)};try{s.send(c)}catch(t){r(t)}function d(t){if(!r)throw new Error(t);r(new Error(t))}}))}}},loadArrayBuffer:function(t,e){return(e=e||{}).responseType="arraybuffer",t instanceof File?$n(t,e):zn.load(t,e)},loadJson:function(t,e){return"POST"===((e=e||{}).method||(e.sendData?"POST":"GET"))&&(e.contentType="application/json"),zn.load(t,e).then((function(t){return t?JSON.parse(t):t}))},loadString:function(t,e){return e=e||{},t instanceof File?function(t,e){let n=(e=e||{}).range?t.slice(e.range.start,e.range.start+e.range.size):t;return new Promise((function(r,i){var o=new FileReader,a=0;e.bgz||t.name.endsWith(".bgz")?a=2:t.name.endsWith(".gz")&&(a=1),o.onload=function(t){return r(0===a?o.result:Un(o.result,a))},o.onerror=function(e){const n=o.error;i(n+" "+t.name,o)},0===a?o.readAsText(n):o.readAsArrayBuffer(n)}))}(t,e):function(t,e){var n=(e=e||{}).filename||An(t),r=3;e.bgz?r=2:n.endsWith(".gz")&&(r=1);return e.responseType="arraybuffer",zn.load(t,e).then((function(t){return Un(t,r)}))}(t,e)},startup:function(){const t=window.document.location.href;Mn(t).host;if(0===jn&&!t.includes("localhost")&&!t.includes("127.0.0.1")){jn++;zn.load("https://data.broadinstitute.org/igv/projects/current/counter_igvjs.php?version=0").then((function(t){})).catch((function(t){}))}}};function $n(t,e){return new Promise((function(n,r){var i=new FileReader;if(i.onload=function(t){n(i.result)},i.onerror=function(t){r(null,i)},e.range){var o=t.slice(e.range.start,e.range.start+e.range.size);"arraybuffer"===e.responseType?i.readAsArrayBuffer(o):i.readAsBinaryString(o)}else"arraybuffer"===e.responseType?i.readAsArrayBuffer(t):i.readAsBinaryString(t)}))}function Un(t,e){if(3===e&&t.byteLength>2){const n=new Uint8Array(t,0,2);31===n[0]&&139===n[1]&&(e=1)}var n;1===e?n=new qe.Gunzip(new Uint8Array(t)).decompress():n=2===e?Cn(t):new Uint8Array(t);return"TextDecoder"in function(){if("undefined"!=typeof self)return self;return"undefined"!=typeof global?global:window}()?(new TextDecoder).decode(n):function(t){var e="",n=0;for(;n<t.length;){var r=t[n],i=0,o=0;if(r<=127?(i=0,o=255&r):r<=223?(i=1,o=31&r):r<=239?(i=2,o=15&r):r<=244&&(i=3,o=7&r),t.length-n-i>0)for(var a=0;a<i;)r=t[n+a+1],o=o<<6|63&r,a+=1;else o=65533,i=t.length-n;e+=String.fromCodePoint(o),n+=i+1}return e}(n)}let Hn;let jn=0;const Vn=new Set(["fastaURL","indexURL","cytobandURL","indexed"]),qn=function(t){"string"==typeof t.fastaURL&&t.fastaURL.startsWith("data:")?(this.file=function(t){var e,n=t.split(","),r=n[0].split(":")[1],i=n[1];i=r.indexOf("base64")>=0?atob(i):decodeURI(i);e=new Uint8Array(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);var o=new qe.Gunzip(e).decompress();let a="";const s=o.length;for(let t=0;t<s;t++)a+=String.fromCharCode(o[t]);return a}(t.fastaURL),this.indexed=!1,this.isDataURI=!0):(this.file=t.fastaURL,this.indexed=!1!==t.indexed,this.indexed&&(this.indexFile=t.indexURL||t.indexFile||this.file+".fai")),this.withCredentials=t.withCredentials,this.chromosomeNames=[],this.chromosomes={},this.sequences={},this.offsets={},this.config=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&!Vn.has(e)&&(n[e]=t[e]);return n}(t)};function Gn(t,e,n){var r=this,i=r.interval;if(i&&i.contains(t,e,n))return Promise.resolve(h(i,e,n));var o=e,a=n;if(n-e<5e4){var s=n-e,c=Math.round(e+s/2);o=Math.max(0,c-25e3),a=c+25e3}return r.readSequence(t,o,a).then((function(i){return r.interval=new yn(t,o,a,i),h(r.interval,e,n)}));function h(t,e,n){var r=e-t.start,i=n-e;return t.features?t.features.substr(r,i):null}}function Wn(t,e,n){this.offsets[t]&&(e-=this.offsets[t],n-=this.offsets[t]);let r="";if(e<0)for(let t=e;t<Math.min(n,0);t++)r+="*";if(n<=0)return Promise.resolve(r);var i=this.sequences[t];Math.min(n,i.length);return Promise.resolve(r+i.substring(e,n))}let Zn;qn.prototype.init=function(){return this.indexed?this.getIndex():this.loadAll()},qn.prototype.getSequence=function(t,e,n){return this.indexed?Gn.call(this,t,e,n):Wn.call(this,t,e,n)},qn.prototype.getIndex=function(){if(this.index)return Promise.resolve(this.index);{const t=this;return zn.load(t.indexFile,un(t.config)).then((function(e){const n=Ke(e),r=n.length;let i=0,o=0;for(t.index={};i<r;){var a=n[i++].split("\t");if(5===a.length){var s=a[0],c=parseInt(a[1]),h={size:c,position:parseInt(a[2]),basesPerLine:parseInt(a[3]),bytesPerLine:parseInt(a[4])};t.chromosomeNames.push(s),t.index[s]=h,t.chromosomes[s]=new wn(s,o++,0,c)}}return t.index}))}},qn.prototype.loadAll=function(){var t=this;return this.isDataURI?Promise.resolve(e(this.file)):zn.load(t.file,un(t.config)).then(e);function e(e){for(var n,r,i=Ke(e),o=i.length,a=0,s="",c=void 0,h=0,l=0;a<o;)if((n=i[a++].trim()).startsWith("#")||0===n.length);else if(n.startsWith(">")){s&&(t.chromosomeNames.push(r),t.sequences[r]=s,t.chromosomes[r]=new wn(r,l++,h,h+s.length,c));const e=n.substr(1).split(/\s+/)[0].split(":");if(r=e[0],s="",h=0,c=void 0,e.length>1&&e[1].indexOf("-")>0){const n=e[1].split("-");2===n.length&&/^[0-9]+$/.test(n[0])&&/^[0-9]+$/.test(n[1]);const i=Number.parseInt(n[0]);Number.parseInt(n[1])>i&&(h=i-1,t.offsets[r]=h,c=e[1])}}else s+=n;s&&(t.chromosomeNames.push(r),t.sequences[r]=s,t.chromosomes[r]=new wn(r,l++,h,h+s.length,c))}},qn.prototype.readSequence=function(t,e,n){const r=this;let i,o,a,s,c;return r.getIndex().then((function(){var h=r.index[t];if(h){o=Math.max(0,e),a=Math.min(h.size,n);const l=h.bytesPerLine;s=h.basesPerLine;const u=h.position;c=l-s;const f=Math.floor(o/s),p=Math.floor(a/s);i=o-f*s;const d=u+f*l+i,g=u+p*l+(a-p*s)-1-d+1;return g<=0?(console.error("No sequence for "+t+":"+e+"-"+n),""):zn.load(r.file,un(r.config,{range:{start:d,size:g}}))}return r.interval=new yn(t,e,n,null),null})).then((function(t){if(t){let e,n="",r=0,h=t.length;for(i>0&&(e=Math.min(a-o,s-i),n+=t.substr(r,e),r+=e+c);r<h;)e=Math.min(s,h-r),n+=t.substr(r,e),r+=e+c;return n}return null}))};const Kn={loadGenome:async function(t){const e=t.cytobandURL,n=t.aliasURL,r=new qn(t);let i,o;return await r.init(),e&&(i=await function(t,e){if(t.startsWith("data:")){var n=function(t){let e;if(t.startsWith("data:application/gzip;base64"))e=In(t);else{let r,i=t.split(","),o=i[0].split(":")[1],a=i[1];a=o.indexOf("base64")>=0?atob(a):decodeURI(a),r=new Uint8Array(a.length);for(let t=0;t<a.length;t++)r[t]=a.charCodeAt(t);var n=new qe.Gunzip(r);e=n.decompress()}let r="";const i=e.length;for(let t=0;t<i;t++)r+=String.fromCharCode(e[t]);return r}(t);return Promise.resolve(r(n))}return zn.loadString(t,un(e)).then((function(t){return r(t)}));function r(t){for(var e,n=[],r=0,i=Ke(t),o=i.length,a={},s=0;s<o;s++){var c=i[s].split("\t"),h=c[0];if(e||(e=h),h!==e&&(a[e]=n,n=[],e=h,r=0),5===c.length){var l=parseInt(c[1]),u=parseInt(c[2]),f=c[3],p=c[4];n[r++]=new vn(l,u,f,p)}}return a}}(e,r.config)),n&&(o=await function(t,e){return zn.loadString(t,un(e)).then((function(t){var e=Ke(t),n=[];return e.forEach((function(t){!t.startsWith("#")&&t.length>0&&n.push(t.split("\t"))})),n}))}(n,r.config)),new Xn(t,r,i,o)},getKnownGenomes:async function(){const t=Kn.genomeList;if(Zn)return Zn;if(t){if("string"==typeof t){return e(await zn.loadJson(t,{}))}return e(t)}return{};function e(t){var e={};return t.forEach((function(t){e[t.id]=t})),Zn=e,e}},isWholeGenomeView:function(t){return"all"===t.chrName.toLowerCase()}};var Xn=function(t,e,n,r){this.config=t,this.id=t.id,this.sequence=e,this.chromosomeNames=e.chromosomeNames,this.chromosomes=e.chromosomes,this.ideograms=n,this.wholeGenomeView=void 0===t.wholeGenomeView||t.wholeGenomeView,this.wholeGenomeView&&Object.keys(e.chromosomes).length>1?function(t,e){let n;if(e.chromosomeOrder)t.wgChromosomeNames=e.chromosomeOrder.split(",").map(t=>t.trim()),n=t.wgChromosomeNames.map(e=>t.chromosomes[e]).filter(t=>void 0!==t);else{const e=Object.keys(t.chromosomes).map(e=>t.chromosomes[e].bpLength).reduce((t,e)=>Math.max(t,e))/50;n=Object.values(t.chromosomes).filter(t=>t.bpLength>e);const r=n.filter(t=>i(t.name.replace("chr",""))),o=n.filter(t=>!i(t.name.replace("chr","")));r.sort((t,e)=>Number.parseInt(t.name.replace("chr",""))-Number.parseInt(e.name.replace("chr","")));const a=r.map(t=>t.name);for(let t of o)a.push(t.name);t.wgChromosomeNames=a}const r=n.reduce((t,e)=>t+e.bpLength,0);function i(t){return/^\d+$/.test(t)}t.chromosomes.all={name:"all",bpLength:r}}(this,t):this.wgChromosomeNames=e.chromosomeNames;var i={},o=this;i.all="all",this.chromosomeNames.forEach((function(t){var e=t.startsWith("chr")?t.substring(3):"chr"+t;i[e.toLowerCase()]=t,"chrM"===t&&(i.mt="chrM"),"MT"===t&&(i.chrm="MT"),i[t.toLowerCase()]=t})),r&&r.forEach((function(t){var e,n;for(n=0;n<t.length;n++)if(o.chromosomes[t[n]]){e=t[n];break}e&&t.forEach((function(t){t!==e&&(i[t.toLowerCase()]=e,i[t]=e)}))})),this.chrAliasTable=i};function Yn(){let t=this,e={},n=0;for(let r of t.wgChromosomeNames){e[r]=Math.floor(n),n+=t.getChromosome(r).bpLength}return e}Xn.prototype.showWholeGenomeView=function(){return!1!==this.config.wholeGenomeView},Xn.prototype.toJSON=function(){return Object.assign({},this.config,{tracks:void 0})},Xn.prototype.getInitialLocus=function(){},Xn.prototype.getHomeChromosomeName=function(){if(this.showWholeGenomeView()&&this.chromosomes.hasOwnProperty("all"))return"all";{const t=this.chromosomes[this.chromosomeNames[0]];return t.rangeLocus?t.name+":"+t.rangeLocus:this.chromosomeNames[0]}},Xn.prototype.getChromosomeName=function(t){var e=this.chrAliasTable[t.toLowerCase()];return e||t},Xn.prototype.getChromosome=function(t){return t=this.getChromosomeName(t),this.chromosomes[t]},Xn.prototype.getCytobands=function(t){return this.ideograms?this.ideograms[t]:null},Xn.prototype.getLongestChromosome=function(){var t,e=this.chromosomes;for(let r in e){if(e.hasOwnProperty(r)){var n=e[r];(void 0===t||n.bpLength>t.bpLength)&&(t=n)}return t}},Xn.prototype.getChromosomes=function(){return this.chromosomes},Xn.prototype.getGenomeCoordinate=function(t,e){var n=this.getCumulativeOffset(t);if(void 0!==n)return n+e},Xn.prototype.getChromosomeCoordinate=function(t){void 0===this.cumulativeOffsets&&(this.cumulativeOffsets=Yn.call(this));let e=void 0,n=0;for(let r of this.wgChromosomeNames){const i=this.cumulativeOffsets[r];if(i>t){return{chr:e,position:t-n}}e=r,n=i}return{chr:this.chromosomeNames[this.chromosomeNames.length-1],position:0}},Xn.prototype.getCumulativeOffset=function(t){void 0===this.cumulativeOffsets&&(this.cumulativeOffsets=Yn.call(this));const e=this.getChromosomeName(t);return this.cumulativeOffsets[e]},Xn.prototype.getGenomeLength=function(){let t=this;if(!this.bpLength){let e=0;t.wgChromosomeNames.forEach((function(n){let r=t.chromosomes[n];e+=r.bpLength})),this.bpLength=e}return this.bpLength};function Qn(t,e,n,r){const i=this;this.guid=rn(),this.trackView=t,this.genomicState=n,this.browser=t.browser,this.$viewport=pe('<div class="igv-viewport-div">'),e.append(this.$viewport),this.$viewport.data("viewportGUID",this.guid);const o=pe("<div>",{class:"igv-viewport-content-div"});this.$viewport.append(o),o.height(this.$viewport.height()),this.contentDiv=o.get(0);const a=pe("<canvas>");if(pe(this.contentDiv).append(a),this.canvas=a.get(0),this.ctx=this.canvas.getContext("2d"),this.setWidth(r),"sequence"===t.track.type&&this.$viewport.addClass("igv-viewport-sequence"),"ruler"===t.track.type)this.rulerSweeper=new gn(this),t.track.appendMultiPanelCloseButton(this.$viewport,this.genomicState),this.$rulerLabel=pe('<div class = "igv-multi-locus-panel-label-div">'),this.$rulerLabel.click((function(t){i.browser.selectMultiLocusPanelWithGenomicState(i.genomicState)})),pe(this.contentDiv).append(this.$rulerLabel),!0===Kn.isWholeGenomeView(this.genomicState.referenceFrame)?nr.call(this):rr.call(this);else if(ar.call(this),this.$spinner=pe('<div class="igv-viewport-spinner">'),this.$spinner.append(Me("spinner")),this.$viewport.append(this.$spinner),this.stopSpinner(),"sequence"!==t.track.type){this.popover=new an(this.browser.$content);let e=t.track.name.toLowerCase().split(" ").join("_");e=e+"_"+this.browser.genomicStateList.indexOf(this.genomicState),this.popover.$popover.attr("id",e),this.$zoomInNotice=Jn.call(this,pe(this.contentDiv))}t.track.name&&(this.$trackLabel=pe('<div class="igv-track-label">'),this.$viewport.append(this.$trackLabel),this.setTrackLabel(t.track.name),!1===this.browser.trackLabelsVisible&&this.$trackLabel.hide(),this.$trackLabel.click((function(e){let n;e.stopPropagation(),n="function"==typeof t.track.description?t.track.description():t.track.description?t.track.description:t.track.name;const r=en(e);i.popover.presentTrackContent(r.x,r.y,n)})),this.$trackLabel.mousedown((function(t){t.stopPropagation()})),this.$trackLabel.mouseup((function(t){t.stopPropagation()})),this.$trackLabel.mousemove((function(t){t.stopPropagation()})))}function Jn(t){const e=pe('<div class="zoom-in-notice-container">');t.append(e);const n=pe("<div>");return e.append(n),n.text("Zoom in to see features"),e.hide(),e}function tr(t,e,n){if(e&&(t.features=e,this.trackView.track.draw(t)),n)for(let e of n)t.features=e.features,e.track.draw(t)}function er(){return this.browser&&this.browser.genomicStateList&&this.genomicState.referenceFrame}function nr(){const t=".ruler_track_viewport_"+this.browser.genomicStateList.indexOf(this.genomicState);let e=this;this.$viewport.on("click"+t,t=>{const n=nn(t,e.$viewport.get(0)).x,r=Math.round(e.genomicState.referenceFrame.start+e.genomicState.referenceFrame.toBP(n));let i;if(1===e.browser.genomicStateList.length)i=e.browser.genome.getChromosomeCoordinate(r).chr;else{let t=e.browser.genomicStateList.map(t=>t.locusSearchString);t[e.browser.genomicStateList.indexOf(e.genomicState)]=e.browser.genome.getChromosomeCoordinate(r).chr,i=t.join(" ")}e.browser.search(i)})}function rr(){const t=".ruler_track_viewport_"+this.browser.genomicStateList.indexOf(this.genomicState);this.$viewport.off(t)}function ir(t){const{x:e,y:n,width:r,height:i}=((t,e)=>{const{x:n,y:r,width:i,height:o}=t.getBoundingClientRect(),{x:a,y:s,width:c,height:h}=e.getBoundingClientRect();return{x:a-n,y:s-r,width:c,height:h}})(this.$viewport.get(0),this.$trackLabel.get(0)),{width:o}=t.measureText(this.$trackLabel.text());t.fillStyle="white",t.fillRect(e,n,r,i),t.font="12px Arial",t.fillStyle="rgb(68, 68, 68)";const a=.25*(r-o),s=.7*(i-12);t.fillText(this.$trackLabel.text(),e+a,n+i-s),t.strokeStyle="rgb(68, 68, 68)",t.strokeRect(e,n,r,i)}Qn.prototype.isVisible=function(){return this.$viewport.width()},Qn.prototype.setTrackLabel=function(t){this.trackView.track.name=this.trackView.track.config.name=t,this.$trackLabel.empty(),this.$trackLabel.html(t);const e=this.$trackLabel.text();this.$trackLabel.attr("title",e)},Qn.prototype.setWidth=function(t){this.$viewport.outerWidth(t),this.canvas.style.width=this.$viewport.width()+"px",this.canvas.setAttribute("width",this.$viewport.width())},Qn.prototype.startSpinner=function(){const t=this.$spinner;t&&(t.addClass("igv-fa5-spin"),t.show())},Qn.prototype.stopSpinner=function(){const t=this.$spinner;t&&(t.hide(),t.removeClass("igv-fa5-spin"))},Qn.prototype.showMessage=function(t){this.messageDiv||(this.messageDiv=document.createElement("div"),this.messageDiv.className="igv-viewport-message",this.contentDiv.append(this.messageDiv)),this.messageDiv.textContent=t,this.messageDiv.style.display="inline-block"},Qn.prototype.hideMessage=function(t){this.messageDiv&&(this.messageDiv.style.display="none")},Qn.prototype.checkZoomIn=function(){if(!er.call(this))return!1;if(this.$zoomInNotice){if(function(){const t=this.genomicState.referenceFrame;if("all"!==t.chrName.toLowerCase()||this.trackView.track.supportsWholeGenome()){const e="function"==typeof this.trackView.track.getVisibilityWindow?this.trackView.track.getVisibilityWindow():this.trackView.track.visibilityWindow;return void 0!==e&&e>0&&t.bpPerPixel*this.$viewport.width()>e}return!0}.call(this)){if(this.canvas&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.tile=void 0),this.$zoomInNotice.show(),this.trackView.track.autoHeight){const t=this.trackView.minHeight||0;this.setContentHeight(t)}return!1}return this.$zoomInNotice.hide(),!0}return!0},Qn.prototype.shift=function(){const t=this,e=t.genomicState.referenceFrame;if(t.canvas&&t.tile&&t.tile.chr===e.chrName&&t.tile.bpPerPixel===e.bpPerPixel){const n=Math.round((t.tile.startBP-e.start)/e.bpPerPixel);t.canvas.style.left=n+"px"}},Qn.prototype.setTop=function(t){const e=-t,n=e+this.$viewport.height();pe(this.contentDiv).css("top",t+"px"),(!this.canvasVerticalRange||this.canvasVerticalRange.bottom<n||this.canvasVerticalRange.top>e)&&this.repaint()},Qn.prototype.loadFeatures=async function(){const t=this.genomicState.referenceFrame,e=t.chrName,n=this.browser.genome.getChromosome(e).bpLength,r=3*pe(this.contentDiv).width()*t.bpPerPixel,i=Math.floor(Math.max(0,t.start-r/3)),o=Math.ceil(Math.min(n,i+r));if(!this.loading||this.loading.start!==i||this.loading.end!==o){this.loading={start:i,end:o},this.startSpinner();try{const e=await sr.call(this,t.chrName,i,o,t.bpPerPixel);let n=[];const r=(a=this.browser.roi,s=this.trackView.track.roi,a&&s?a.concat(s):a||s);if(r)for(let e of r){const r=await e.getFeatures(t.chrName,i,o,t.bpPerPixel);n.push({track:e,features:r})}return this.tile=new or(t.chrName,i,o,t.bpPerPixel,e,n),this.loading=!1,this.hideMessage(),this.stopSpinner(),this.tile}catch(t){this.showMessage("Error loading track data"),console.error(t)}finally{this.loading=!1,this.stopSpinner()}var a,s}},Qn.prototype.repaint=async function(t){if(t||(t=this.tile),!t)return;const e=Kn.isWholeGenomeView(this.genomicState.referenceFrame),n=t.features,r=t.roiFeatures,i=this.genomicState,o=i.referenceFrame,a=e?o.initialEnd/this.$viewport.width():t.bpPerPixel,s=e?0:t.startBP,c=e?o.initialEnd:t.endBP,h=e?this.$viewport.width():Math.ceil((c-s)/a),l=this.$viewport.height();let u=Math.min(this.getContentHeight(),3*l);if(0===h||0===u)return void(this.canvas&&pe(this.canvas).remove());const f=Math.max(0,-pe(this.contentDiv).position().top-l);let p;p="FILL"===this.trackView.track.displayMode?window.devicePixelRatio:!1===this.trackView.track.supportHiDPI?1:window.devicePixelRatio;const d={features:n,pixelWidth:h,pixelHeight:u,pixelTop:f,bpStart:s,bpEnd:c,bpPerPixel:a,referenceFrame:o,genomicState:i,selection:this.selection,viewport:this,viewportWidth:this.$viewport.width(),viewportContainerX:o.toPixels(o.start-s),viewportContainerWidth:this.browser.viewportContainerWidth()},g=pe("<canvas>").get(0);g.style.width=h+"px",g.style.height=u+"px",g.width=p*h,g.height=p*u;const m=g.getContext("2d");m.scale(p,p);const v=Math.round((s-o.start)/o.bpPerPixel);g.style.position="absolute",g.style.left=v+"px",g.style.top=f+"px",d.context=m,m.translate(0,-f),tr.call(this,d,n,r),this.canvasVerticalRange={top:f,bottom:f+u},this.canvas&&pe(this.canvas).remove(),pe(this.contentDiv).append(g),this.canvas=g,this.ctx=m},Qn.prototype.toSVG=async function(t){if(this.$zoomInNotice&&this.$zoomInNotice.is(":visible"))return;const e=this.genomicState.referenceFrame,n=t.bpPerPixel,r=t.features,i=t.roiFeatures,o=this.$viewport.width(),a=this.$viewport.height(),s=e.start,c=e.start+o*e.bpPerPixel,h=new Se({width:o,height:a,viewbox:{x:0,y:-pe(this.contentDiv).position().top,width:o,height:a}}),l={viewport:this,context:h,top:-pe(this.contentDiv).position().top,pixelTop:0,pixelWidth:o,pixelHeight:a,bpStart:s,bpEnd:c,bpPerPixel:n,referenceFrame:e,genomicState:this.genomicState,selection:this.selection,viewportWidth:o,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth()};return tr.call(this,l,r,i),h.getSerializedSvg(!0)},Qn.prototype.setContentHeight=function(t){t=Math.min(t,32e3),pe(this.contentDiv).height(t),this.tile&&(this.tile.invalidate=!0)},Qn.prototype.getContentHeight=function(){return pe(this.contentDiv).height()},Qn.prototype.getContentTop=function(){return this.contentDiv.offsetTop},Qn.prototype.isLoading=function(){return this.loading},Qn.prototype.saveImage=function(){if(!this.ctx)return;const t=this.canvasVerticalRange?this.canvasVerticalRange.top:0,e=window.devicePixelRatio,n=this.$viewport.width()*e,r=this.$viewport.height()*e,i=-pe(this.canvas).position().left*e,o=(-pe(this.contentDiv).position().top-t)*e,a=this.ctx.getImageData(i,o,n,r),s=document.createElement("canvas"),c=s.getContext("2d");s.width=a.width,s.height=a.height,c.putImageData(a,0,0),fn((this.$trackLabel.text()?this.$trackLabel.text():"image")+".png",s.toDataURL("image/png"))},Qn.prototype.renderSVGContext=async function(t,e){if(this.$zoomInNotice&&this.$zoomInNotice.is(":visible"))return;let n=this.trackView.track.name||this.trackView.track.id;n=n.replace(/\W/g,"");const r=this.browser.genomicStateList.indexOf(this.genomicState),i=n.toLowerCase()+"_genomic_state_index_"+r;if(0===r&&"function"==typeof this.trackView.track.paintAxis){const n=this.trackView.controlCanvas.getBoundingClientRect();t.addTrackGroupWithTranslationAndClipRect(i+"_axis",e.deltaX-n.width,e.deltaY,n.width,n.height,0),t.save(),this.trackView.track.paintAxis(t,n.width,n.height),t.restore()}const o=pe(this.contentDiv).position().top,a=e.deltaX+r*t.multiLocusGap,s=e.deltaY+o,{width:c,height:h}=this.$viewport.get(0).getBoundingClientRect();t.addTrackGroupWithTranslationAndClipRect(i,a,s,c,h,-o);let{referenceFrame:l}=this.genomicState,{start:u,bpPerPixel:f}=l;t.save();const p={context:t,viewport:this,referenceFrame:l,genomicState:this.genomicState,pixelWidth:c,pixelHeight:h,viewportWidth:c,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth(),bpStart:u,bpEnd:u+c*f,bpPerPixel:f,selection:this.selection},d=this.tile?this.tile.features:[],g=this.tile?this.tile.roiFeatures:void 0;tr.call(this,p,d,g),this.$trackLabel&&!0===this.browser.trackLabelsVisible&&ir.call(this,t),t.restore()},Qn.prototype.saveSVG=function(){const t=this.$viewport.width(),e=this.$viewport.height(),n=new Se({width:t,height:e,viewbox:{x:0,y:-pe(this.contentDiv).position().top,width:t,height:e}}),{start:r,bpPerPixel:i}=this.genomicState.referenceFrame,o={viewport:this,context:n,top:-pe(this.contentDiv).position().top,pixelTop:0,pixelWidth:t,pixelHeight:e,bpStart:r,bpEnd:r+t*i,bpPerPixel:i,referenceFrame:this.genomicState.referenceFrame,genomicState:this.genomicState,selection:this.selection,viewportWidth:t,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth()};tr.call(this,o,this.tile.features),this.$trackLabel&&!0===this.browser.trackLabelsVisible&&ir.call(this,n);const a=o.context.getSerializedSvg(!0),s=URL.createObjectURL(new Blob([a],{type:"application/octet-stream"}));fn((this.$trackLabel?this.$trackLabel.text():this.trackView.track.id)+".svg",s)},Qn.prototype.dispose=function(){const t=this;this.popover&&(this.popover.$popover.off(),this.popover.$popover.empty(),this.popover.$popover.remove()),pe(this.canvas).off(),pe(this.canvas).empty(),pe(this.contentDiv).off(),pe(this.contentDiv).empty(),this.$viewport.off(),this.$viewport.empty(),Object.keys(this).forEach((function(e,n,r){t[e]=void 0}))},Qn.prototype.getCachedFeatures=function(){return this.tile?this.tile.features:[]};var or=function(t,e,n,r,i,o){this.chr=t,this.startBP=e,this.endBP=n,this.bpPerPixel=r,this.features=i,this.roiFeatures=o};function ar(){const t=this,e=this.browser;let n,r,i=0;function o(e){if(t.browser.dragObject||t.browser.isScrolling)return t.browser.cancelTrackPan(),e.preventDefault(),e.stopPropagation(),void(t.enableClick=!1);t.browser.cancelTrackPan(),t.browser.endTrackDrag()}function a(t,e){const n=e.genomicState.referenceFrame,r=nn(t,e.contentDiv),i=nn(t,e.canvas),o=n.start+n.toBP(r.x);if(void 0!==o&&null!==e.tile)return{viewport:e,referenceFrame:n,genomicLocation:o,x:r.x,y:r.y,canvasX:i.x,canvasY:i.y}}this.$viewport.on("contextmenu",(function(e){if(t.browser.dragObject)return!1;const n=a(e,t);if(void 0===n)return!1;e.preventDefault();let r=[];"function"==typeof t.trackView.track.contextMenuItemList&&(r=t.trackView.track.contextMenuItemList(n)),r.length>0&&r.push({label:pe("<HR>")}),r.push({label:"Save Image (PNG)",click:function(){t.saveImage()}}),r.push({label:"Save Image (SVG)",click:function(){t.saveSVG()}}),t.popover&&t.popover.presentTrackContextMenu(e,r)})),this.$viewport.on("mousedown",(function(r){t.enableClick=!0,e.mouseDownOnViewport(r,t),n=en(r)})),this.$viewport.on("touchstart",(function(r){t.enableClick=!0,e.mouseDownOnViewport(r,t),n=en(r)})),this.$viewport.on("mouseup",o),this.$viewport.on("touchend",o),this.$viewport.on("click",(function(n){t.enableClick&&function(n){if(3===n.which||n.ctrlKey)return;if(pe(".igv-popover").hide(),e.dragObject||e.isScrolling)return;n.preventDefault(),n.stopPropagation();const o=nn(n,t.$viewport.get(0)).x,s=nn(n,t.canvas).x,c=t.genomicState.referenceFrame,h=Math.floor(c.start+c.toBP(s)),l=Date.now();if(l-i<e.constants.doubleClickDelay){r&&(window.clearTimeout(r),r=void 0);const n=Math.round(c.start+c.toBP(o));let i;if("all"===c.chrName.toLowerCase()){const r=e.genome.getChromosomeCoordinate(n).chr;if(1===e.genomicStateList.length)i=r;else{let n=e.genomicStateList.map((function(t){return t.locusSearchString}));n[e.genomicStateList.indexOf(t.genomicState)]=r,i=n.join(" ")}e.search(i)}else e.zoomWithScaleFactor(.5,n,t)}else n.shiftKey&&"function"==typeof t.trackView.track.shiftClick?t.trackView.track.shiftClick(h,n):"function"==typeof t.trackView.track.popupData&&(r=setTimeout((function(){var i=function(t,n){const r=a(t,n);if(void 0===r)return;let i=n.trackView.track;const o=i.popupData(r),s=e.fireEvent("trackclick",[i,o]);let c;void 0===s||!0===s?o&&o.length>0&&(h='<table class="igv-popover-table">',o.forEach((function(t){t.name?h+='<tr><td class="igv-popover-td"><div class="igv-popover-name-value"><span class="igv-popover-name">'+t.name+'</span><span class="igv-popover-value">'+t.value+"</span></div></td></tr>":h+="<tr><td>"+t.toString()+"</td></tr>"})),c=h+="</table>"):"string"==typeof s&&(c=s);var h;return c}(n,t);if(i){const e=en(n);t.popover.presentTrackContent(e.x,e.y,i)}clearTimeout(r),r=void 0}),e.constants.doubleClickDelay));i=l}(n)}))}async function sr(t,e,n,r){const i=this.trackView.track;if(this.tile&&this.tile.containsRange(t,e,n,r))return this.tile.features;if("function"==typeof i.getFeatures){const o=await i.getFeatures(t,e,n,r,this);return this.cachedFeatures=o,this.checkContentHeight(),o}}or.prototype.containsRange=function(t,e,n,r){return this.bpPerPixel===r&&e>=this.startBP&&n<=this.endBP&&t===this.chr},or.prototype.overlapsRange=function(t,e,n){return this.chr===t&&n>=this.startBP&&e<=this.endBP},Qn.prototype.checkContentHeight=function(){let t=this.trackView.track;if("FILL"===t.displayMode)this.setContentHeight(this.$viewport.height());else if("function"==typeof t.computePixelHeight){let e=this.cachedFeatures;if(e){let n=t.computePixelHeight(e);n!==pe(this.contentDiv).height()&&this.setContentHeight(n)}}};var cr={color:1};cr.parent=cr,cr.left=cr,cr.right=cr;const hr=function(){this.root=cr};function lr(t,e,n){return e.interval.overlaps(t)&&n.push(e.interval),e.left!==cr&&e.left.max>=t.low&&lr.call(this,t,e.left,n),e.right!==cr&&e.right.min<=t.high&&lr.call(this,t,e.right,n),n}function ur(t){var e=t.right;t.right=e.left,e.left!==cr&&(e.left.parent=t),e.parent=t.parent,t.parent===cr?this.root=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e,pr.call(this,t)}function fr(t){var e=t.left;t.left=e.right,e.right!==cr&&(e.right.parent=t),e.parent=t.parent,t.parent===cr?this.root=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e,pr.call(this,t)}function pr(t){for(;t!==cr;){var e=t.left.max>t.right.max?t.left.max:t.right.max,n=t.interval.high;t.max=e>n?e:n;var r=t.left.min<t.right.min?t.left.min:t.right.min,i=t.interval.low;t.min=r<i?r:i,t=t.parent}}function dr(t,e,n){this.low=t,this.high=e,this.value=n}function gr(t){this.parent=cr,this.left=cr,this.right=cr,this.interval=t,this.color=2}hr.prototype.insert=function(t,e,n){var r=new gr(new dr(t,e,n));for(this.treeInsert(r),r.color=2;r!==this.root&&2===r.parent.color;)if(r.parent===r.parent.parent.left){let t=r.parent.parent.right;2===t.color?(r.parent.color=1,t.color=1,r.parent.parent.color=2,r=r.parent.parent):(r===r.parent.right&&(r=r.parent,ur.call(this,r)),r.parent.color=1,r.parent.parent.color=2,fr.call(this,r.parent.parent))}else{let t=r.parent.parent.left;2===t.color?(r.parent.color=1,t.color=1,r.parent.parent.color=2,r=r.parent.parent):(r===r.parent.left&&(r=r.parent,fr.call(this,r)),r.parent.color=1,r.parent.parent.color=2,ur.call(this,r.parent.parent))}this.root.color=1},hr.prototype.findOverlapping=function(t,e){var n=new dr(t,e,0);if(this.root===cr)return[];var r=lr.call(this,n,this.root,[]);return r.length>1&&r.sort((function(t,e){return t.low-e.low})),r},hr.prototype.logIntervals=function(){!function t(e,n){e.left!==cr&&t(e.left);e.right!==cr&&t(e.right)}(this.root)},hr.prototype.mapIntervals=function(t){!function e(n){t(n.interval),n.left!==cr&&e(n.left);n.right!==cr&&e(n.right)}(this.root)},hr.prototype.treeInsert=function(t){for(var e=this.root,n=cr;e!==cr;)n=e,e=t.interval.low<=e.interval.low?e.left:e.right;t.parent=n,n===cr?(this.root=t,t.left=t.right=cr):t.interval.low<=n.interval.low?n.left=t:n.right=t,pr.call(this,t)},dr.prototype.equals=function(t){return!!t&&(this===t||this.low===t.low&&this.high===t.high)},dr.prototype.compareTo=function(t){return this.low<t.low?-1:this.low>t.low?1:this.high<t.high?-1:this.high>t.high?1:0},dr.prototype.overlaps=function(t){try{return this.low<=t.high&&t.low<=this.high}catch(t){On.presentAlert(t,void 0)}};const mr=function(t,e,n){if(t&&0!==t.length){const r=function(t){const e=new hr,n=t.length,r=Math.max(10,Math.round(n/100));t.sort((function(t,e){return t.start===e.start?0:t.start>e.start?1:-1}));for(let i=0;i<n;i+=r){const o=Math.min(n,i+r),a=t.slice(i,o),s=a[0].start;let c=s;a.forEach((function(t){c=Math.max(c,t.end)})),e.insert(s,c,a)}return e}(t).findOverlapping(e,n);return 0===r.length?[]:(t=[],r.forEach((function(r){const i=r.value,o=i.length;for(let r=0;r<o;r++){const o=i[r];if(o.start>n)break;o.end>e&&t.push(o)}})),t.sort((function(t,e){return t.start-e.start})),t)}return[]};const vr={setProperties:function(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]=r}},strokeLine:function(t,e,n,r,i,o){e=Math.floor(e)+.5,n=Math.floor(n)+.5,r=Math.floor(r)+.5,i=Math.floor(i)+.5,o&&(t.save(),vr.setProperties(t,o)),t.beginPath(),t.moveTo(e,n),t.lineTo(r,i),t.stroke(),o&&t.restore()},fillRect:function(t,e,n,r,i,o){e=Math.round(e),n=Math.round(n),o&&(t.save(),vr.setProperties(t,o)),t.fillRect(e,n,r,i),o&&t.restore()},fillPolygon:function(t,e,n,r){r&&(t.save(),vr.setProperties(t,r)),yr(t,e,n),t.fill(),r&&t.restore()},strokePolygon:function(t,e,n,r){r&&(t.save(),vr.setProperties(t,r)),yr(t,e,n),t.stroke(),r&&t.restore()},fillText:function(t,e,n,r,i,o){if((i||o)&&t.save(),i&&vr.setProperties(t,i),o){for(var a in t.translate(n,r),o){var s=o[a];"translate"===a&&t.translate(s.x,s.y),"rotate"===a&&t.rotate(s.angle*Math.PI/180)}t.fillText(e,0,0)}else t.fillText(e,n,r);(i||o)&&t.restore()},strokeText:function(t,e,n,r,i,o){if((i||o)&&t.save(),i&&vr.setProperties(t,i),o){for(var a in t.translate(n,r),o){var s=o[a];"translate"===a&&t.translate(s.x,s.y),"rotate"===a&&t.rotate(s.angle*Math.PI/180)}t.strokeText(e,0,0)}else t.strokeText(e,n,r);(i||o)&&t.restore()},strokeCircle:function(t,e,n,r,i){i&&(t.save(),vr.setProperties(t,i)),t.beginPath(),t.arc(e,n,r,0,2*Math.PI),t.stroke(),i&&t.restore()},fillCircle:function(t,e,n,r,i){i&&(t.save(),vr.setProperties(t,i)),t.beginPath(),t.arc(e,n,r,0,2*Math.PI),t.fill(),i&&t.restore()},drawArrowhead:function(t,e,n,r,i){t.save(),r||(r=5),i&&(t.lineWidth=i),t.beginPath(),t.moveTo(e,n-r/2),t.lineTo(e,n+r/2),t.lineTo(e+r,n),t.lineTo(e,n-r/2),t.closePath(),t.fill(),t.restore()},dashedLine:function(t,e,n,r,i,o,a={}){void 0===o&&(o=2),t.setLineDash([o,o]),vr.strokeLine(t,e,n,r,i,a),t.setLineDash([])},roundRect:function(t,e,n,r,i,o,a,s){void 0===s&&(s=!0),void 0===o&&(o=5),t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),s&&t.stroke(),a&&t.fill()},polygon:function(t,e,n,r,i){void 0===i&&(i=!0),t.beginPath();var o=e.length;t.moveTo(e[0],n[0]);for(var a=1;a<o;a++)t.lineTo(e[a],n[a]);t.closePath(),i&&t.stroke(),r&&t.fill()}};function yr(t,e,n){var r,i=e.length;for(r=0;r<i;r++)e[r]=Math.round(e[r]),n[r]=Math.round(n[r]);for(t.beginPath(),t.moveTo(e[0],n[0]),r=1;r<i;r++)t.lineTo(e[r],n[r]);t.closePath()}const wr=function(t){this.browser=t,this.height=40,this.name="",this.id="ruler",this.disableButtons=!0,this.ignoreTrackMenu=!0,this.order=-Number.MAX_VALUE,this.removable=!1,this.type="ruler"};function br(t){t.context.save(),vr.fillRect(t.context,0,0,t.pixelWidth,t.pixelHeight,{fillStyle:"white"});let e=t.pixelHeight;for(let n of this.browser.genome.wgChromosomeNames){let r=this.browser.genome.getCumulativeOffset(n),i=this.browser.genome.getChromosome(n).bpLength,o=Math.round(r/t.bpPerPixel),a=Math.round(i/t.bpPerPixel);xr.call(this,t.context,o,0,a,e,n)}t.context.restore()}function xr(t,e,n,r,i,o){t.textAlign="center",t.textBaseline="middle",t.font="12px sans-serif",vr.strokeLine(t,e+r,n,e+r,n+i,{strokeStyle:Qe.greyScale(191)});const a=o.startsWith("chr")?o.substring(3):o;r>t.measureText(a).width&&vr.fillText(t,a,e+r/2,n+i/2,{fillStyle:Qe.greyScale(68)})}wr.prototype.updateLocusLabel=function(){this.trackView.viewports.forEach((function(t){var e;e=t.genomicState.referenceFrame.showLocus(t.$viewport.width()),t.$rulerLabel.text(e)}))},wr.prototype.appendMultiPanelCloseButton=function(t,e){const n=this.browser;var r;t.addClass("igv-viewport-ruler"),r=pe('<div class="igv-multi-locus-panel-close-container">'),t.append(r),r.append(Me("times-circle")),r.click((function(t){n.removeMultiLocusPanelWithGenomicState(e,!0)}))},wr.prototype.getFeatures=function(t,e,n){return Promise.resolve([])},wr.prototype.computePixelHeight=function(t){return this.height},wr.prototype.draw=function(t){if(Kn.isWholeGenomeView(t.referenceFrame))t.viewport.rulerSweeper.disableMouseHandlers(),br.call(this,t);else{t.viewport.rulerSweeper.addMouseHandlers();const e=6,n=2,r=1+Math.floor(t.referenceFrame.toBP(t.pixelWidth));new kr(r,t).drawTicks(t,e,n,this.height),vr.strokeLine(t.context,0,this.height-n,t.pixelWidth,this.height-n)}},wr.prototype.supportsWholeGenome=function(){return!0},wr.prototype.dispose=function(){};const kr=function(t,e){function n(t,e,n,r){this.majorTick=!0===r?2*t:t,this.majorUnit=e,this.halfTick=t/2,this.unitMultiplier=n}(function(t,e){var r,i,o,a;const s=e.context.isSVG||!1;t<10&&n.call(this,1,"bp",1,s);(r=Math.floor(Math.log10(t)))>9?(i="gb",o=1e9):r>6?(i="mb",o=1e6):r>3?(i="kb",o=1e3):(i="bp",o=1);a=Ze(Math.floor(t/o))+" "+i,this.labelWidthBP=Math.round(e.referenceFrame.toBP(e.context.measureText(a).width)),t/Math.pow(10,r-1)<25?n.call(this,Math.pow(10,r-1),i,o,s):n.call(this,Math.pow(10,r)/2,i,o,s)}).call(this,t,e)};kr.prototype.drawTicks=function(t,e,n,r){var i,o,a,s,c,h,l;for(i=Math.floor(t.bpStart/this.majorTick)-1,c=0,h=0,a=0;a<t.pixelWidth;)o=Math.floor(i*this.majorTick),a=Math.round(t.referenceFrame.toPixels(o-1-t.bpStart+.5)),s=Ze(Math.floor(o/this.unitMultiplier))+" "+this.majorUnit,c=t.context.measureText(s).width,h=Math.round(a-c/2),vr.fillText(t.context,s,h,r-e/.75),vr.strokeLine(t.context,a,r-e,a,r-n),++i;for(i=Math.floor(t.bpStart/this.halfTick)-1,a=0;a<t.pixelWidth;)o=Math.floor(i*this.halfTick),a=Math.round(t.referenceFrame.toPixels(o-1-t.bpStart+.5)),(l=o/this.unitMultiplier)===Math.floor(l)&&this.majorTick/this.labelWidthBP>8&&(s=Ze(Math.floor(l))+" "+this.majorUnit,h=a-(c=t.context.measureText(s).width)/2,vr.fillText(t.context,s,h,r-e/.75)),vr.strokeLine(t.context,a,r-e,a,r-n),++i},kr.prototype.description=function(t){};const Sr=Ae.trackMenuItemListHelper,Cr=function(t){this.$popover=pe("<div>",{class:"igv-trackgear-popover"}),t.append(this.$popover);let e=pe("<div>",{class:"igv-trackgear-popover-header"});this.$popover.append(e);let n=this;Je(e,(function(){n.$popover.hide()})),this.$popoverContent=pe("<div>"),this.$popover.append(this.$popoverContent),_e(this.$popover.get(0),e.get(0)),e.on("click.track_gear_popover",(function(t){t.stopPropagation(),t.preventDefault()}))};Cr.prototype.presentMenuList=function(t,e,n){if(n.length>0){this.$popoverContent.empty(),n=Sr(n,this.$popover);for(let t of n){t.init&&t.init();let e=t.object;0===n.indexOf(t)&&e.removeClass("igv-track-menu-border-top"),e.hasClass("igv-track-menu-border-top")||e.hasClass("igv-trackgear-popover-check-container")||e.is("div")&&e.addClass("igv-trackgear-popover-shim"),this.$popoverContent.append(e)}this.$popover.css({left:t+"px",top:e+"px"}),this.$popover.show()}},Cr.prototype.dispose=function(){this.$popover.empty(),this.$popoverContent.empty(),Object.keys(this).forEach((function(t){this[t]=void 0}))};const _r=function({$parent:t,width:e,height:n,closeHandler:r}){var i;this.namespace=".generic_container_"+rn();let o=pe("<div>",{class:"igv-generic-container"});t.append(o),this.$container=o,e&&this.$container.width(e),n&&this.$container.height(n);let a=t.get(0).getBoundingClientRect();this.origin={x:a.x,y:a.y},this.$container.offset({left:this.origin.x,top:this.origin.y}),i=pe("<div>"),this.$container.append(i);let s=pe("<i>");i.append(s),s.append(Me("times")),s.on("mousedown"+this.namespace,(function(t){t.stopPropagation()})),s.on("mouseup"+this.namespace,(function(t){t.stopPropagation()})),s.on("click"+this.namespace,(function(t){t.preventDefault(),t.stopPropagation(),r(t)})),s.on("touchend"+this.namespace,(function(t){t.preventDefault(),t.stopPropagation(),r(t)})),_e(this.$container.get(0),i.get(0))},Rr=function(t,e,n){var r,i,o=this;this.browser=t,this.track=n,n.trackView=this,i=pe('<div class="igv-track-div">'),this.trackDiv=i.get(0),e.append(i),this.namespace=".trackview_"+rn(),this.track instanceof wr&&(this.trackDiv.dataset.rulerTrack="rulerTrack"),n.height&&(this.trackDiv.style.height=n.height+"px"),this.appendLeftHandGutter(pe(this.trackDiv)),this.$viewportContainer=pe('<div class="igv-viewport-container">'),pe(this.trackDiv).append(this.$viewportContainer),this.viewports=[],r=this.browser.viewportContainerWidth()/this.browser.genomicStateList.length,t.genomicStateList.forEach((function(t){var e;e=new Qn(o,o.$viewportContainer,t,r),o.viewports.push(e)})),this.decorateViewports(),this.configureViewportContainer(this.$viewportContainer,this.viewports),!0===this.track.ignoreTrackMenu||this.appendRightHandGutter(pe(this.trackDiv)),this.track instanceof wr||Ar.call(this,pe(this.trackDiv),this.$viewportContainer),"sequence"===this.track.type||this.track instanceof wr||this.createColorPicker()};function Tr(t){let e=pe("<div>",{class:"igv-trackgear-container"});t.append(e),e.append(Me("cog")),this.trackGearPopover=new Cr(t),this.trackGearPopover.$popover.hide();let n=this;e.click((function(t){t.preventDefault(),t.stopPropagation(),n.trackGearPopover.presentMenuList(-n.trackGearPopover.$popover.width(),0,Ae.trackMenuItemList(n))}))}function Er(t,e){var n=window.devicePixelRatio;if(this.leftHandGutter){this.controlCanvas&&pe(this.controlCanvas).remove();var r=pe('<canvas class ="igv-track-control-canvas">');this.controlCanvas=r[0],pe(this.leftHandGutter).append(r),this.controlCanvas.height=n*e,this.controlCanvas.width=n*t,this.controlCanvas.style.height=e+"px",this.controlCanvas.style.width=t+"px",this.controlCtx=this.controlCanvas.getContext("2d"),this.controlCtx.scale(n,n)}}function Ar(t,e){const n=this,r=this.browser;this.$trackDragScrim=pe('<div class="igv-track-drag-scrim">'),e.append(this.$trackDragScrim),this.$trackDragScrim.hide(),n.$trackManipulationHandle=pe('<div class="igv-track-manipulation-handle">'),t.append(n.$trackManipulationHandle),n.$trackManipulationHandle.on("mousedown",(function(t){t.preventDefault(),t.stopPropagation(),n.$trackDragScrim.show(),r.startTrackDrag(n)})),n.$trackManipulationHandle.on("mouseup",(function(t){t.preventDefault(),t.stopPropagation(),r.endTrackDrag(),n.$trackDragScrim.hide()})),t.on("mouseenter",(function(t){r.dragTrack&&(t.preventDefault(),t.stopPropagation(),r.updateTrackDrag(n))})),n.$trackManipulationHandle.on("mouseleave",(function(t){r.dragTrack||(t.preventDefault(),t.stopPropagation(),n.$trackDragScrim.hide())}))}function Lr(t){return this.viewports.filter((function(e){if(!e.isVisible())return!1;if(e.checkZoomIn()){const n=e.genomicState.referenceFrame,r=n.chrName,i=n.start,o=i+n.toBP(pe(e.contentDiv).width()),a=n.bpPerPixel;return t||!e.tile||e.tile.invalidate||!e.tile.containsRange(r,i,o,a)}return!1}))}function Ir(){var t=this.maxContentHeight();if(this.track.autoHeight?this.setTrackHeight(t,!1):this.track.paintAxis&&this.track.paintAxis(this.controlCtx,pe(this.controlCanvas).width(),pe(this.controlCanvas).height()),this.scrollbar){const t=this.viewports[0].getContentTop(),e=Math.min(0,this.$viewportContainer.height()-function(t){const e=t.map(t=>t.getContentHeight());return Math.min(...e)}(this.viewports));t<e&&this.viewports.forEach((function(t){pe(t.contentDiv).css("top",e+"px")})),this.scrollbar.update()}}function Mr(t){const e=t.map(t=>t.getContentHeight());return Math.max(...e)}Rr.prototype.renderSVGContext=function(t,e){for(let n of this.viewports){const r=n.browser.genomicStateList.indexOf(n.genomicState),i=n.$viewport.get(0).getBoundingClientRect();let o={deltaX:e.deltaX+r*n.$viewport.width(),deltaY:e.deltaY+i.y};n.renderSVGContext(t,o)}},Rr.prototype.configureViewportContainer=function(t,e){return"hidden"===t.css("overflow-y")&&(this.scrollbar=new Dr(t,e,this.browser.$root),t.append(this.scrollbar.$outerScroll)),t},Rr.prototype.removeViewportWithLocusIndex=function(t){this.viewports[t].$viewport.remove(),this.viewports.splice(t,1),this.decorateViewports()},Rr.prototype.decorateViewports=function(){var t=this;this.viewports.forEach((function(e,n){var r;r=e.$viewport,t.viewports.length>1?(r.find(".igv-multi-locus-panel-close-container").show(),r.find(".igv-multi-locus-panel-label-div").show()):(r.find(".igv-multi-locus-panel-close-container").hide(),r.find(".igv-multi-locus-panel-label-div").hide()),n<t.viewports.length&&1+n!==t.viewports.length?r.addClass("igv-viewport-div-border-right"):r.removeClass("igv-viewport-div-border-right")}))},Rr.prototype.appendLeftHandGutter=function(t){var e,n,r=this;e=pe('<div class="igv-left-hand-gutter">'),this.leftHandGutter=e[0],t.append(e),"function"==typeof this.track.paintAxis&&(this.track.dataRange&&(e.click((function(t){r.browser.dataRangeDialog.configure({trackView:r}),r.browser.dataRangeDialog.present(pe(r.trackDiv))})),e.addClass("igv-clickable")),n=pe('<canvas class ="igv-track-control-canvas">'),e.append(n),this.controlCanvas=n.get(0),Er.call(this,e.outerWidth(),e.outerHeight()))},Rr.prototype.appendRightHandGutter=function(t){let e=pe('<div class="igv-right-hand-gutter">');t.append(e),Tr.call(this,e)},Rr.prototype.dataRange=function(){return this.track.dataRange?this.track.dataRange:void 0},Rr.prototype.setDataRange=function(t,e,n){void 0!==t&&(this.track.dataRange.min=t,this.track.config.min=t),void 0!==e&&(this.track.dataRange.max=e,this.track.config.max=e),this.track.autoscale=n,this.track.config.autoScale=n,this.repaintViews()},Rr.prototype.setColor=function(t){this.track.color=t,this.track.config.color=t,this.repaintViews(!0)},Rr.prototype.createColorPicker=function(){let t=this;const e={$parent:pe(this.trackDiv),width:384,height:void 0,closeHandler:()=>{t.colorPicker.$container.hide()}};this.colorPicker=new _r(e),tn(this.colorPicker.$container,t=>this.setColor(t),this.track.color),t.colorPicker.$container.hide()},Rr.prototype.presentColorPicker=function(){const t=this.trackDiv.getBoundingClientRect();this.colorPicker.origin={x:t.x,y:0},this.colorPicker.$container.offset({left:this.colorPicker.origin.x,top:this.colorPicker.origin.y}),this.colorPicker.$container.show()},Rr.prototype.setTrackHeight=function(t,e,n){n||(this.track.minHeight&&(t=Math.max(this.track.minHeight,t)),this.track.maxHeight&&(t=Math.min(this.track.maxHeight,t))),this.track.height=t,this.track.config.height=t,pe(this.trackDiv).height(t),"function"!=typeof this.track.computePixelHeight&&(this.viewports.forEach((function(e){e.setContentHeight(t),e.tile&&(e.tile.invalidate=!0)})),this.repaintViews()),Er.call(this,pe(this.leftHandGutter).outerWidth(),t),this.track.paintAxis&&this.track.paintAxis(this.controlCtx,pe(this.controlCanvas).width(),pe(this.controlCanvas).height()),this.scrollbar&&this.scrollbar.update()},Rr.prototype.isLoading=function(){for(let t=0;t<this.viewports.length;t++)if(this.viewports[t].isLoading())return!0},Rr.prototype.resize=function(){var t;if(0!==(t=this.browser.viewportContainerWidth()/this.browser.genomicStateList.length)){this.viewports.forEach((function(e){e.setWidth(t)}));var e=pe(this.leftHandGutter);Er.call(this,e.outerWidth(),e.outerHeight()),this.updateViews(!0)}},Rr.prototype.repaintViews=function(){this.viewports.forEach((function(t){t.repaint()})),this.track.paintAxis&&this.track.paintAxis(this.controlCtx,pe(this.controlCanvas).width(),pe(this.controlCanvas).height())},Rr.prototype.updateViews=async function(t){if(!this.browser||!this.browser.genomicStateList)return;const e=this.viewports.filter(t=>t.isVisible());e.forEach((function(t){t.shift()}));const n=Lr.call(this,t);for(let t of n)await t.loadFeatures(),t.tile&&t.tile.features&&0===t.tile.features.length&&"all"===t.genomicState.referenceFrame.chrName&&t.checkZoomIn();const r=this.browser.dragObject;if(!r&&this.track.autoscale){let t=[];for(let n of e){const e=n.genomicState.referenceFrame,r=e.start,i=r+e.toBP(pe(n.contentDiv).width());n.tile&&n.tile.features&&(t=t.concat(mr(n.tile.features,r,i)))}"function"==typeof this.track.doAutoscale?this.track.dataRange=this.track.doAutoscale(t):this.track.dataRange=pn(t)}if(r||!this.track.autoscale&&!this.track.autoscaleGroup)for(let t of n)t.repaint();else for(let t of e)t.repaint();Ir.call(this)},Rr.prototype.getInViewFeatures=async function(t){if(!this.browser||!this.browser.genomicStateList)return[];const e=Lr.call(this,t).map((function(t){return t.loadFeatures()}));await Promise.all(e);let n=[];for(let t of this.viewports)if(t.tile&&t.tile.features){const e=t.genomicState.referenceFrame,r=e.start,i=r+e.toBP(pe(t.contentDiv).width());n=n.concat(mr(t.tile.features,r,i))}return n},Rr.prototype.checkContentHeight=function(){this.viewports.forEach((function(t){t.checkContentHeight()})),Ir.call(this)},Rr.prototype.maxContentHeight=function(){return Mr(this.viewports)},Rr.prototype.dispose=function(){const t=this;this.$trackManipulationHandle&&this.$trackManipulationHandle.off(),this.$innerScroll&&this.$innerScroll.off(),this.scrollbar&&this.scrollbar.dispose(),pe(document).off(this.namespace),"function"==typeof this.track.dispose&&this.track.dispose();var e=this.track;"function"==typeof e.dispose&&e.dispose(),Object.keys(e).forEach((function(t){e[t]=void 0})),this.viewports.forEach((function(t){t.dispose()})),Object.keys(this).forEach((function(e){t[e]=void 0}))},Rr.prototype.scrollBy=function(t){this.scrollbar.moveScrollerBy(t)};const Dr=function(t,e,n){const r=this;let i;const o=".trackscrollbar"+rn();this.namespace=o;const a=pe('<div class="igv-scrollbar-outer-div">');function s(t){t.preventDefault(),t.stopPropagation();const e=en(t);r.moveScrollerBy(e.y-i),i=e.y}function c(t){pe(document).off(r.namespace)}this.$outerScroll=a,this.$innerScroll=pe("<div>"),this.$outerScroll.append(this.$innerScroll),this.$viewportContainer=t,this.viewports=e,this.$innerScroll.on("mousedown",(function(t){t.preventDefault();const e=en(t);i=e.y,pe(document).on("mousemove"+o,s),pe(document).on("mouseup"+o,c),pe(document).on("mouseleave"+o,c),t.stopPropagation()})),this.$innerScroll.on("click",(function(t){t.stopPropagation()})),this.$outerScroll.on("click",(function(t){r.moveScrollerBy(t.offsetY-r.$innerScroll.height()/2),t.stopPropagation()}))};function Br(t){return"string"==typeof t||t instanceof String?new Fr(t):new Nr(t)}Dr.prototype.moveScrollerBy=function(t){const e=this.$innerScroll.position().top+t;this.moveScrollerTo(e)},Dr.prototype.moveScrollerTo=function(t){const e=this.$outerScroll.height(),n=this.$innerScroll.height(),r=Math.min(Math.max(0,t),e-n),i=Mr(this.viewports),o=-Math.round(r*(i/this.$viewportContainer.height()));this.$innerScroll.css("top",r+"px"),this.viewports.forEach((function(t){t.setTop(o)}))},Dr.prototype.dispose=function(){pe(window).off(this.namespace)},Dr.prototype.update=function(){var t,e,n;t=this.$viewportContainer.height(),e=Mr(this.viewports),n=Math.round(t/e*t),e>t?(this.$outerScroll.show(),this.$innerScroll.height(n)):this.$outerScroll.hide()};var Fr=function(t){this.data=t,this.ptr=0};Fr.prototype.nextLine=function(){var t=this.ptr,e=this.data.indexOf("\n",t);return e>0?(this.ptr=e+1,e===t?void 0:this.data.substring(t,e).trim()):(this.ptr=this.data.length,t>=this.data.length?void 0:this.data.substring(t).trim())},Fr.prototype.nextLineNoTrim=function(){var t=this.ptr,e=this.data.indexOf("\n",t),n=this.data;if(e>0)return this.ptr=e+1,e>t&&"\r"===n.charAt(e-1)?n.substring(t,e-1):n.substring(t,e);var r=n.length;return this.ptr=r,t>=r?void 0:n.substring(t)};var Nr=function(t){this.data=t,this.length=this.data.length,this.ptr=0};Nr.prototype.nextLine=function(){var t,e;if(e="",!(this.ptr>=this.length)){for(var n=this.ptr;n<this.length;n++)if("\r"!==(t=String.fromCharCode(this.data[n]))){if("\n"===t)break;e+=t}return this.ptr=n+1,e}},Nr.prototype.nextLineNoTrim=Nr.prototype.nextLine;const Or={gwascatalog:{fields:["bin","chr","start","end","name","pubMedID","author","pubDate","journal","title","trait","initSample","replSample","region","genes","riskAllele","riskAlFreq","pValue","pValueDesc","orOrBeta","ci95","platform","cnv"]},wgrna:{fields:["bin","chr","start","end","name","score","strand","thickStart","thickEnd","type"]},cpgislandext:{fields:["bin","chr","start","end","name","length","cpgNum","gcNum","perCpg","perGc","obsExp"]},clinVarMain:{fields:["chr1","start","end","name","score","strand","thickStart","thickEnd","reserved","blockCount","blockSizes","chromStarts","origName","clinSign","reviewStatus","type","geneId","snpId","nsvId","rcvAcc","testedInGtr","phenotypeList","phenotype","origin","assembly","cytogenetic","hgvsCod","hgvsProt","numSubmit","lastEval","guidelines","otherIds"]}},Pr=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","vcf","bb","bigbed","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram"]);function zr(t){if(function(t){t.featureType&&(t.type=t.type||t.featureType,t.featureType=void 0);"junctions"===t.type?t.type="spliceJunctions":"bed"===t.type?(t.type="annotation",t.format=t.format||"bed"):"annotations"===t.type?t.type="annotation":"alignments"===t.type?t.type="alignment":"bam"===t.type?(t.type="alignment",t.format="bam"):"vcf"===t.type?(t.type="variant",t.format="vcf"):"t2d"===t.type?t.type="gwas":"FusionJuncSpan"!==t.type||t.format?"aed"===t.type&&(t.type="annotation",t.format=t.format||"aed"):t.format="fusionjuncspan"}(t),void 0===t.sourceType&&t.url&&(t.sourceType="file"),"file"===t.sourceType)if(void 0===t.format){const e=Ln(t.url)?t.url.name:t.url;t.format=$r(e)}else t.format=t.format.toLowerCase();if(void 0===t.type){if(t.type)return;if(t.format)switch(t.format.toLowerCase()){case"bw":case"bigwig":case"wig":case"bedgraph":case"tdf":t.type="wig";break;case"vcf":t.type="variant";break;case"seg":t.type="seg";break;case"bam":case"cram":t.type="alignment";break;case"bedpe":case"bedpe-loop":t.type="interaction";break;case"bp":t.type="arc";break;default:t.type="annotation"}}}function $r(t){var e,n;if((t=t.toLowerCase()).endsWith("refgene.txt.gz")||t.endsWith("refgene.txt.bgz")||t.endsWith("refgene.txt")||t.endsWith("refgene.sorted.txt.gz")||t.endsWith("refgene.sorted.txt.bgz"))return"refgene";switch((e=t.indexOf("?"))>0&&(t=t.substr(0,e)),t.endsWith(".gz")&&(t=t.substr(0,t.length-3)),(t.endsWith(".txt")||t.endsWith(".tab")||t.endsWith(".bgz"))&&(t=t.substr(0,t.length-4)),n=(e=t.lastIndexOf("."))<0?t:t.substr(e+1)){case"bw":return"bigwig";case"bb":return"bigbed";default:return Pr.has(n)?n:void 0}}var Ur=Number.MAX_VALUE,Hr=["Name","gene_name","gene","gene_id","alias","locus"],jr=new RegExp("([^:]*)\\(([^)]*)\\)"),Vr=new RegExp("([^:]*):([^(]*)\\(([^)]*)\\)");const qr=function(t,e,n){var r;if(void 0!==t&&(this.format=t.toLowerCase()),this.nameField=n?n.nameField:void 0,this.skipRows=0,e)this.decode=e;else switch(this.format){case"narrowpeak":case"broadpeak":case"regionpeak":case"peaks":this.decode=ii,this.delimiter=/\s+/;break;case"bedgraph":this.decode=oi,this.delimiter=/\s+/;break;case"wig":this.decode=ai,this.delimiter=/\s+/;break;case"gff3":case"gff":case"gtf":this.decode=li,this.delimiter="\t";break;case"fusionjuncspan":this.decode=si,this.delimiter=/\s+/;break;case"gtexgwas":this.skipRows=1,this.decode=ci,this.delimiter="\t";break;case"refflat":this.decode=ni,this.delimiter=/\s+/;break;case"genepred":this.decode=ti,this.delimiter=/\s+/;break;case"genepredext":this.decode=ei,this.delimiter=/\s+/;break;case"ensgene":this.decode=ti,this.shift=1,this.delimiter=/\s+/;break;case"refgene":this.decode=ei,this.delimiter=/\s+/,this.shift=1;break;case"aed":this.decode=pi,this.delimiter="\t";break;case"bed":this.decode=Qr,this.delimiter=n.delimiter||/\s+/;break;case"bedpe":this.skipRows=1,this.decode=di,this.delimiter=/\s+/;break;case"bedpe-domain":this.decode=gi,this.headerLine=!0,this.delimiter=/\s+/;break;case"bedpe-loop":this.decode=di,this.delimiter=/\s+/,this.skipRows=1,this.header={colorColumn:7};break;case"snp":this.decode=mi,this.delimiter="\t";break;case"rmsk":this.decode=Jr,this.delimiter="\t";break;default:void 0!==(r=function(t){return Or&&Or[t]?function(t){const e=t.fields,n=["chr","start","end"];for(let r=0;r<e.length;r++)for(let i of n)i===e[r]&&(t[i]=r);return t}(Or[t]):void 0}(this.format))?(this.decode=vi,this.format=r,this.delimiter=r.delimiter||"\t"):(this.decode=Qr,this.delimiter=/\s+/)}};function Gr(t){var e=t.split(/\s+/);return{format:"fixedStep",chrom:e[1].split("=")[1],start:parseInt(e[2].split("=")[1],10)-1,step:parseInt(e[3].split("=")[1],10),span:e.length>4?parseInt(e[4].split("=")[1],10):1,index:0}}function Wr(t){var e=t.split(/\s+/);return{format:"variableStep",chrom:e[1].split("=")[1],span:e.length>2?parseInt(e[2].split("=")[1],10):1}}function Zr(t){var e=Vr.exec(t);if(e)return{namespace:e[1],name:e[2],type:e[3]};if(e=jr.exec(t))return{namespace:"?",name:e[1],type:e[2]};throw new Error("Error parsing the header row of AED file - column not in ns:name(ns:type) format")}function Kr(t){var e,n,r;for(e={columns:[],metadata:{}},n=0;n<t.length;n++)r=Zr(t[n]),e.columns.push(r);return e}function Xr(t){const e={},n=t.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g);let r;const i=[];for(let t of n)t&&0!==t.trim().length&&(t.endsWith("=")>0?r=t:r?(i.push(r+t),r=void 0):i.push(t));for(let t of i){if(!t)return;var o=t.split("=",2);if(2===o.length){const t=o[0].trim(),n=o[1].trim();e[t]=n}}return e}function Yr(t){let e={},n=t.split(/\s+/);if(2===n.length){n[1].split(";").forEach((function(t){let n=t.split("=");"color"===n[0]?e.colorColumn=Number.parseInt(n[1])-1:"thickness"===n[0]&&(e.thicknessColumn=Number.parseInt(n[1])-1)}))}return e}function Qr(t,e){var n,r,i,o,a,s,c,h;if(!(t.length<3)){if(s={chr:t[0],start:n=parseInt(t[1]),end:t.length>2?parseInt(t[2]):n+1,score:1e3},t.length>3&&(-1==t[3].indexOf(";")?s.name=t[3]:(s.attributes=hi(t[3],"="),s.name=s.attributes.Name)),t.length>4&&(s.score=parseFloat(t[4])),t.length>5&&(s.strand=t[5]),t.length>6&&(s.cdStart=parseInt(t[6])),t.length>7&&(s.cdEnd=parseInt(t[7])),t.length>8&&"."!==t[8]&&"0"!==t[8]&&(s.color=Qe.createColorString(t[8])),t.length>11){r=parseInt(t[9]),i=t[10].split(","),o=t[11].split(","),a=[];for(let t=0;t<r;t++)h=(c=n+parseInt(o[t]))+parseInt(i[t]),a.push({start:c,end:h});ri(a,s.cdStart,s.cdEnd),s.exons=a}if(this.header){let e=this.header.thicknessColumn,n=this.header.colorColumn;n&&n<t.length&&(s.color=Qe.createColorString(t[n])),e&&e<t.length&&(s.thickness=t[e])}return s}}function Jr(t,e){if(t.length<15)return;return{swScore:Number.parseInt(t[1]),milliDiv:Number.parseInt(t[2]),milliDel:Number.parseInt(t[3]),milliIns:Number.parseInt(t[4]),chr:t[5],start:Number.parseInt(t[6]),end:Number.parseInt(t[7]),strand:t[9],repName:t[10],repClass:t[11],repFamily:t[12],repStart:Number.parseInt(t[13]),repEnd:Number.parseInt(t[14]),repLeft:Number.parseInt(t[15])}}function ti(t,e){var n=void 0===this.shift?0:1;if(t.length<9+n)return;const r=parseInt(t[5+n]),i=parseInt(t[6+n]);var o={name:t[0+n],chr:t[1+n],strand:t[2+n],start:parseInt(t[3+n]),end:parseInt(t[4+n]),cdStart:r,cdEnd:i,id:t[0+n]},a=parseInt(t[7+n]),s=t[8+n].split(","),c=t[9+n].split(","),h=[];for(let t=0;t<a;t++){const e=parseInt(s[t]),n=parseInt(c[t]);h.push({start:e,end:n})}return ri(h,r,i),o.exons=h,o}function ei(t,e){var n=void 0===this.shift?0:1;if(t.length<11+n)return;const r=parseInt(t[5+n]),i=parseInt(t[6+n]),o={name:t[11+n],chr:t[1+n],strand:t[2+n],start:parseInt(t[3+n]),end:parseInt(t[4+n]),cdStart:r,cdEnd:i,id:t[0+n]},a=parseInt(t[7+n]),s=t[8+n].split(","),c=t[9+n].split(","),h=[];for(let t=0;t<a;t++){const e=parseInt(s[t]),n=parseInt(c[t]);h.push({start:e,end:n})}return ri(h,r,i),o.exons=h,o}function ni(t,e){var n=void 0===this.shift?0:1;if(t.length<10+n)return;const r=parseInt(t[6+n]),i=parseInt(t[7+n]);var o={name:t[0+n],id:t[1+n],chr:t[2+n],strand:t[3+n],start:parseInt(t[4+n]),end:parseInt(t[5+n]),cdStart:r,cdEnd:i},a=parseInt(t[8+n]),s=t[9+n].split(","),c=t[10+n].split(","),h=[];for(let t=0;t<a;t++){const e=parseInt(s[t]),n=parseInt(c[t]);h.push({start:e,end:n})}return ri(h,r,i),o.exons=h,o}function ri(t,e,n){for(let r of t){const t=r.end,i=r.start;t<e||i>n?r.utr=!0:(e>=i&&e<=t&&(r.cdStart=e),n>=i&&n<=t&&(r.cdEnd=n))}}function ii(t,e){var n,r,i,o,a,s,c;return t.length<9?null:(n=t[0],r=parseInt(t[1]),i=parseInt(t[2]),a=t[3],s=parseFloat(t[4]),o=t[5].trim(),c=parseFloat(t[6]),0===s&&(s=c),{chr:n,start:r,end:i,name:a,score:s,strand:o,signal:c,pValue:parseFloat(t[7]),qValue:parseFloat(t[8])})}function oi(t,e){if(t.length<3)return null;const n={chr:t[0],start:parseInt(t[1]),end:parseInt(t[2]),value:parseFloat(t[3])};if(this.header){let e=this.header.colorColumn;e&&e<t.length&&(n.color=Qe.createColorString(t[e]))}return n}function ai(t,e){var n,r,i;return"fixedStep"===e.format?(r=(n=e.index*e.step+e.start)+e.span,i=parseFloat(t[0]),++e.index,isNaN(i)?null:{chr:e.chrom,start:n,end:r,value:i}):"variableStep"===e.format?t.length<2?null:(r=(n=parseInt(t[0],10)-1)+e.span,i=parseFloat(t[1]),isNaN(i)?null:{chr:e.chrom,start:n,end:r,value:i}):oi(t)}function si(t,e){var n=t[0],r=t[1],i=parseInt(t[2]),o=parseInt(t[3]),a=parseInt(t[4]),s=parseInt(t[5]),c=t[6],h={chr:n,name:r,junction_left:i,junction_right:o,num_junction_reads:a,num_spanning_frags:s,spanning_frag_coords:[],start:-1,end:-1},l=i,u=o;if(s>0)for(var f=c.split(","),p=0;p<f.length;p++){var d=f[p].split("-"),g=d[0],m=d[1];g<l&&(l=g),m>u&&(u=m),h.spanning_frag_coords.push({left:g,right:m})}return h.start=l,h.end=u,h}function ci(t,e){if(t.length<7)return null;const n={chr:t[0],start:parseInt(t[1])-1,end:parseInt(t[2]),"Strongest SNP-risk allele":t[3],"Disease/Phenotype":t[4],"P-value":t[5],"Odds ratio or beta":t[6]};return t.length>6&&(n.PUBMEDID=`<a target = "blank" href = "https://www.ncbi.nlm.nih.gov/pubmed/${t[7]}">${t[7]}</a>`),n}function hi(t,e){var n={};for(let r of t.split(";")){const t=r.trim().split(e,2);if(2===t.length){const e=t[0].trim();let r=t[1].trim();r.startsWith('"')&&r.endsWith('"')&&(r=r.substr(1,r.length-2)),n[e]=r}}return n}function li(t,e){var n,r,i,o,a,s,c,h,l,u,f=this.format;if(t.length<9)return null;n=t[0],a=t[2],r=parseInt(t[3])-1,i=parseInt(t[4]),s="."===t[5]?0:parseFloat(t[5]),o=t[6],"."===t[7]||parseInt(t[7]);var p="gff3"===f?"=":/\s+/,d=hi(c=t[8],p);for(let[t,e]of Object.entries(d)){const n=t.toLowerCase();if("color"===n||"colour"===n)h=Qe.createColorString(e);else if("gff3"===f)try{d[t]=unescape(e)}catch(n){d[t]=e,console.error(`Malformed gff3 attibute value: ${e}`)}}if(this.nameField)l=d[this.nameField];else for(u=0;u<Hr.length;u++)if(d.hasOwnProperty(Hr[u])){this.nameField=Hr[u],l=d[this.nameField];break}return new ui({id:d.ID||d.transcript_id,parent:d.Parent,name:l,type:a,chr:n,start:r,end:i,score:s,strand:o,color:h,attributeString:c,delim:p})}function ui(t){Object.assign(this,t)}function fi(t,e){var n,r,i=t.columns;this.aed=t,this.allColumns=e,this.chr=null,this.start=null,this.end=null,this.score=1e3,this.strand=".",this.cdStart=null,this.cdEnd=null,this.name=null,this.color=null;for(let t=0;t<e.length;t++)(n=e[t])&&("aed:Integer"===(r=i[t]).type&&(n=parseInt(n)),"bio"===r.namespace?"sequence"===r.name?this.chr=n:"start"===r.name?this.start=n:"end"===r.name?this.end=n:"cdsMin"===r.name?this.cdStart=n:"cdsMax"===r.name?this.cdEnd=n:"strand"===r.name&&(this.strand=n):"aed"===r.namespace?"name"===r.name&&(this.name=n):"style"===r.namespace&&"color"===r.name&&(this.color=Qe.createColorString(n)))}function pi(t,e){var n,r,i,o,a,s,c=0,h=this.aed.columns;if(t.length===h.length){for(s=0;s<t.length;s++)o=h[s],""!==(i=t[s])&&c++,"name"===o.name&&"aed"===o.namespace?n=i:"value"===o.name&&"aed"===o.namespace&&(r=i);if(2===c&&n&&r)return a=Zr(n),this.aed.metadata[a.namespace]||(this.aed.metadata[a.namespace]={}),void(this.aed.metadata[a.namespace][a.name]||(this.aed.metadata[a.namespace][a.name]={type:a.type,value:r}));var l=new fi(this.aed,t);if(l.chr&&(l.start||0===l.start)&&l.end)return l}}function di(t,e){if(t.length<6)return;var n={chr1:t[0],start1:Number.parseInt(t[1]),end1:Number.parseInt(t[2]),chr2:t[3],start2:Number.parseInt(t[4]),end2:Number.parseInt(t[5])};t.length>6&&(n.name=t[6]),t.length>7&&(n.score=t[7]),n.chr=n.chr1===n.chr2?n.chr1:"MIXED",n.start=Math.min(n.start1,n.start2),n.end=Math.max(n.end1,n.end2);let r=(n.start1+n.end1)/2,i=(n.start2+n.end2)/2;if(n.m1=r<i?r:i,n.m2=r<i?i:r,this.header){let e=this.header.thicknessColumn,r=this.header.colorColumn;r&&r<t.length&&(n.color=Qe.createColorString(t[r])),e&&e<t.length&&(n.thickness=t[e])}return n}function gi(t,e){return{chr:t[0],start:Number.parseInt(t[1]),end:Number.parseInt(t[2]),color:Qe.createColorString(t[6]),score:Number.parseFloat(t[7])}}function mi(t,e){const n=["bin","chr","start","end","name","score","strand","refNCBI","refUCSC","observed","molType","class","valid","avHet","avHetSE","func","locType","weight","exceptions","submitterCount","submitters","alleleFreqCount","alleles","alleleNs","alleleFreqs","bitfields"],r={chr:t[1],start:Number.parseInt(t[2]),end:Number.parseInt(t[3]),name:t[4],score:Number.parseInt(t[5])},i=Math.min(t.length,n.length);for(let e=6;e<i;e++)r[n[e]]=t[e];return r}function vi(t,e){const n=this.format,r=n.coords||0,i=t[n.chr],o=parseInt(t[n.start])-r,a={chr:i,start:o,end:void 0!==n.end?parseInt(t[n.end]):o+1};return n.fields&&n.fields.forEach((function(e,r){r!==n.chr&&r!==n.start&&r!==n.end&&(a[e]=t[r])})),a}qr.prototype.parseHeader=function(t){var e,n,r;for(r=Br(t);(e=r.nextLine())&&(e.startsWith("track")||e.startsWith("#")||e.startsWith("browser"));)if(e.startsWith("track")||e.startsWith("#track")){let t=Xr(e);n?Object.assign(n,t):n=t}else if(e.startsWith("#columns")){let t=Yr(e);n?Object.assign(n,t):n=t}else e.startsWith("##gff-version 3")&&(this.format="gff3",n||(n={}),n.format="gff3");return this.header=n,n},qr.prototype.parseFeatures=function(t){if(!t)return null;var e,n,r,i,o,a,s,c,h=[],l=0,u=this.decode,f=this.format,p=this.delimiter||"\t";function d(){for(var t,e,n=[],r="",i=!1;o||""===o;){for(t=0;t<o.length;t++)(e=o.charAt(t))===p?i?r+=e:(n.push(r),r=""):'"'===e?t+1<o.length&&'"'===o.charAt(t+1)?(i&&(r+='"'),t++):i=!i:r+=e;if(!i)break;r+="\n",o=c()}return n.push(r),n}for(e=Br(t),c="aed"===f?e.nextLineNoTrim.bind(e):e.nextLine.bind(e),a=0;o=c();)++a<=this.skipRows||o.startsWith("track")||o.startsWith("#")||o.startsWith("browser")||("wig"===f&&o.startsWith("fixedStep")?n=Gr(o):"wig"===f&&o.startsWith("variableStep")?n=Wr(o):(i="aed"!==f||-1===o.indexOf('"')?o.split(p):d()).length<1||("aed"!==f||this.aed?(r=u.call(this,i,n))&&(h.length<Ur?h.push(r):(s=Math.floor(Math.random()*l))<Ur&&(h[s]=r),l++):this.aed=Kr(i)));return h},ui.prototype.popupData=function(t){const e=this.attributeString.split(";"),n=[];n.push({name:"type",value:this.type}),n.push({name:"start",value:this.start+1}),n.push({name:"end",value:this.end});for(let t of e){const e=t.trim().split(this.delim,2);if(2===e.length&&void 0!==e[1]){const t=e[0].trim();let r=e[1].trim();r.startsWith('"')&&r.endsWith('"')&&(r=r.substr(1,r.length-2)),n.push({name:t,value:r})}}return n},fi.prototype.popupData=function(){for(var t=[],e=this.aed,n=0;n<this.allColumns.length;n++){var r=this.allColumns[n],i=e.columns[n].name;"sequence"!==i&&"color"!==i&&r&&t.push({name:i,value:r})}return t};const yi=function(){};yi.prototype.parseHeader=function(t){var e,n,r,i=Ke(t),o=i.length;for(n=0;n<o;n++)if(!(e=i[n]).startsWith("#")){r=e.split("\t"),this.header={headings:r,lineCount:n+1};break}return this.header},yi.prototype.parseFeatures=function(t){var e,n,r,i=t?Ke(t):[],o=i.length,a=[];for(this.header||(this.header=this.parseHeader(t)),r=this.header.headings.length-1,n=this.header.lineCount;n<o;n++)i[n],(e=i[n].split("\t")).length>r&&a.push({sampleKey:e[0],sample:e[0],chr:e[1],start:parseInt(e[2]),end:parseInt(e[3]),value:parseFloat(e[r])});return a};const wi=function(t,e){t.displayMode&&(t.displayMode=t.displayMode.toUpperCase()),this.config=t,this.browser=e,this.url=t.url,this.type=t.type,this.description=t.description,this.supportHiDPI=void 0===t.supportHiDPI||t.supportHiDPI,t.name=t.name||t.label,t.name?this.name=t.name:Ln(t.url)?this.name=t.url.name:this.name=t.url,this.order=t.order,"civic-ws"===t.sourceType?this.color="rgb(155,20,20)":this.color=t.color||t.defaultColor||"rgb(0,0,150)",this.autoscaleGroup=t.autoscaleGroup,this.removable=void 0===t.removable||t.removable,this.height=t.height||100,this.autoHeight=t.autoHeight,this.minHeight=t.minHeight||Math.min(25,this.height),this.maxHeight=t.maxHeight||Math.max(1e3,this.height),this.visibilityWindow=t.visibilityWindow};function bi(t){var e=new Ci;return e.chr=t[0],e.pos=parseInt(t[1]),e.names=t[2],e.referenceBases=t[3],e.alternateBases=t[4],e.quality=t[5],e.filter=t[6],e.info=function(t){if(!t)return;var e={};return t.split(";").forEach((function(t){var n=t.split("=");e[n[0]]=n[1]})),e}(t[7]),xi(e),e}function xi(t){const e=t.referenceBases,n=t.alternateBases;if(t.info&&(t.info.VT?t.type=t.info.VT:t.info.SVTYPE?t.type="SV":t.info.PERIOD?t.type="STR":t.type=_i(n)),"NONVARIANT"===t.type&&(t.heterozygosity=0,t.start=t.pos-1,t.end=t.start+e.length),t.info.END)t.start=t.pos-1,t.end=Number.parseInt(t.info.END);else{const r=n.split(",").filter(t=>t.length>0);t.alleles=[],t.start=t.pos,t.end=t.pos;for(let n of r)if(t.alleles.push(n),"SV"!==t.type&&Si(n)){let r=n.length,i=e.length,o=0;for(e.charCodeAt(0)===n.charCodeAt(0)&&(o++,r--,i--);r>0&&i>0&&n.charCodeAt(o+r-1)===e.charCodeAt(o+i-1);)r--,i--;for(;r>0&&i>0&&n.charCodeAt(o+r-1)===e.charCodeAt(o+i-1);)o++,r--,i--;const a=t.pos+o-1,s=a+Math.max(1,i);t.start=Math.min(t.start,a),t.end=Math.max(t.end,s)}}}wi.prototype.getState=function(){const t=Object.assign({},this.config),e=this;return Object.keys(t).forEach((function(n){const r=e[n];r&&(ln(r)||"boolean"==typeof r)&&(t[n]=r)})),t},wi.prototype.supportsWholeGenome=function(){return!1},wi.prototype.clickedFeatures=function(t){const e=t.viewport.getCachedFeatures();if(!e||0===e.length)return[];const n=t.genomicLocation,r=t.referenceFrame.bpPerPixel>.2?3*t.referenceFrame.bpPerPixel:0,i=Math.floor(n)-r,o=Math.floor(n)+r;return mr(e,i,o)},wi.prototype.setTrackProperties=function(t){for(let e of Object.keys(t))switch(e){case"name":case"useScore":this[e]=t[e];break;case"visibility":switch(t[e]){case"2":case"3":case"pack":case"full":this.displayMode="EXPANDED";break;case"4":case"squish":this.displayMode="SQUISHED";break;case"1":case"dense":this.displayMode="COLLAPSED"}break;case"color":case"altColor":this[e]="rgb("+t[e]+")";break;case"featureVisiblityWindow":this.visibilityWindow=Number.parseInt(t[e])}},wi.prototype.getVisibilityWindow=function(){return this.visibilityWindow},wi.extractPopupData=function(t,e){const n=new Set(["row","color"]),r=[];let i,o;for(var a in t)if(t.hasOwnProperty(a)&&!n.has(a)&&ln(t[a])){let e=t[a];"start"===a&&(e+=1),r.push({name:a,value:e}),"alleles"===a?i=t[a]:"alleleFreqs"===a&&(o=t[a])}if(i&&o){i.endsWith(",")&&(i=i.substr(0,i.length-1)),o.endsWith(",")&&(o=o.substr(0,o.length-1));let n=i.split(","),a=o.split(",");if(a.length>1){let i=[];for(let t=0;t<a.length;t++)i.push({a:n[t],af:Number.parseFloat(a[t])});i.sort((function(t,e){return t.af-e.af}));let o=i[i.length-1].a;if(1===o.length)for(let n=i.length-2;n>=0;n--){let a=i[n].a;if(1===a.length){const n=wi.getCravatLink(t.chr,t.start+1,o,a,e);n&&(r.push("<hr/>"),r.push(n))}}}}return r},wi.prototype.getGenomeId=function(){return this.browser.genome?this.browser.genome.id:void 0},wi.getCravatLink=function(t,e,n,r,i){if("hg38"===i||"GRCh38"===i){return"<a target='_blank' href='https://www.cravat.us/CRAVAT/variant.html?variant="+(t.startsWith("chr")?t:"chr"+t)+"_"+e+"_+_"+n+"_"+r+"'>Cravat "+n+"->"+r+"</a>"}};const ki=new Set(["A","C","T","G"].map(t=>t.charCodeAt(0)));function Si(t){for(let e=0;e<t.length;e++)if(!ki.has(t.charCodeAt(e)))return!1;return!0}const Ci=function(){};function _i(t){if(void 0===t)return"UNKNOWN";if(0===t.trim().length||"<NON_REF>"===t||"<*>"===t)return"NONVARIANT";{const e=t.split(",").map((function(t){return"<NON_REF>"===t?"NONVARIANT":"OTHER"}));let n=e[0];for(let t of e)if(t!==n)return"MIXED";return n}}function Ri(t,e){return void 0===e&&(e=","),Array.isArray(t)?t.join(e):t}Ci.prototype.popupData=function(t,e){var n,r,i=this;const o=this.end===this.pos?this.pos:`${this.pos}-${this.end}`;if(n=[{name:"Chr",value:this.chr},{name:"Pos",value:o},{name:"Names",value:this.names?this.names:""},{name:"Ref",value:this.referenceBases},{name:"Alt",value:this.alternateBases.replace("<","&lt;")},{name:"Qual",value:this.quality},{name:"Filter",value:this.filter}],1===this.referenceBases.length&&!_i(this.alternateBases)){let t=this.referenceBases;if(1===t.length){let r=this.alternateBases.split(",");for(let i=0;i<r.length;i++){let r=this.alternateBases[i];if(1===r.length){let i=wi.getCravatLink(this.chr,this.pos,t,r,e);i&&(n.push("<hr/>"),n.push(i))}}}}return this.hasOwnProperty("heterozygosity")&&n.push({name:"Heterozygosity",value:this.heterozygosity}),this.info&&(n.push("<hr>"),Object.keys(this.info).forEach((function(t){n.push({name:t,value:Ri(i.info[t])})}))),this.calls&&1===this.calls.length&&(n.push("<hr>"),r=this.alleles[this.calls[0].genotype[0]]+this.alleles[this.calls[0].genotype[1]],n.push({name:"Genotype",value:r})),n},Ci.prototype.isRefBlock=function(){return"NONVARIANT"===this.type};const Ti=function(){};function Ei(t){var e,n={genotypeIndex:-1,fields:t};for(e=0;e<t.length;e++)"GT"===t[e]&&(n.genotypeIndex=e);return n}Ti.prototype.parseHeader=function(t){var e,n,r,i,o,a,s,c,h,l={};if(!(r=(e=Br(t)).nextLine()).startsWith("##fileformat"))throw new Error("Invalid VCF file: missing fileformat line");for(l.version=r.substr(13);(r=e.nextLine())&&r.startsWith("#");)if(o=null,a={},r.startsWith("##")){if(r.startsWith("##INFO")||r.startsWith("##FILTER")||r.startsWith("##FORMAT")){if(s=r.indexOf("<"),c=r.lastIndexOf(">"),!(s>2&&c>0))continue;l[h=r.substring(2,s-1)]||(l[h]={}),(n=Xe(r.substring(s+1,c-1),",")).forEach((function(t){var e=t.split("=");e.length>1&&("ID"===e[0]?o=e[1]:a[e[0]]=e[1])})),o&&(l[h][o]=a)}}else if(r.startsWith("#CHROM")&&(n=r.split("\t")).length>8)for(l.callSets=[],i=9;i<n.length;i++)l.callSets.push({id:i,name:n[i]});return this.header=l,l},Ti.prototype.parseFeatures=function(t){var e,n,r,i,o,a,s,c=[],h=this.header.callSets;for(e=Br(t);n=e.nextLine();)if(!n.startsWith("#")&&(i=n.split("\t")).length>=8&&((r=bi(i)).header=this.header,c.push(r),i.length>9))for(o=Ei(i[8].split(":")),r.calls={},a=9;a<i.length;a++){s=i[a];var l=h[a-9],u={callSetName:l.name,info:{}};r.calls[l.id]=u,s.split(":").forEach((function(t,e){switch(e){case o.genotypeIndex:u.genotype=[],t.split(/[\|\/]/).forEach((function(t){u.genotype.push(parseInt(t))}));break;default:u.info[o.fields[e]]=t}}))}return c};class Ai{parseFeatures(t){if(!t)return null;const e=this.parseHeader(t),n=Br(t);let r;const i=[];for(;r=n.nextLine();){let t=r.split("\t");const n=t[0],o=parseInt(t[1]),a=parseInt(t[2]),s=t.slice(3).map(parseFloat);s.length==e.length&&i.push({chr:n,start:o,end:a,values:s})}return console.warn("Parsed",i.length,"features from",e.length,"samples"),i}parseHeader(t){if(!this.sampleNames){const e=Br(t);this.sampleNames=e.nextLine().split("\t").slice(3),console.warn("Parsed",this.sampleNames.length,"samples from gCNV track file header:",this.sampleNames)}return this.sampleNames}}const Li=function(t,e){this.littleEndian=void 0===e||e,this.position=0,this.view=t,this.length=t.byteLength};function Ii(t,e){this.block=t,this.offset=e}Li.prototype.available=function(){return this.length-this.position},Li.prototype.remLength=function(){return this.length-this.position},Li.prototype.hasNext=function(){return this.position<this.length-1},Li.prototype.getByte=function(){var t=this.view.getUint8(this.position,this.littleEndian);return this.position++,t},Li.prototype.getShort=function(){var t=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,t},Li.prototype.getUShort=function(){var t=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,t},Li.prototype.getInt=function(){var t=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,t},Li.prototype.getUInt=function(){var t=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,t},Li.prototype.getLong=function(){var t=[];t[0]=this.view.getUint8(this.position),t[1]=this.view.getUint8(this.position+1),t[2]=this.view.getUint8(this.position+2),t[3]=this.view.getUint8(this.position+3),t[4]=this.view.getUint8(this.position+4),t[5]=this.view.getUint8(this.position+5),t[6]=this.view.getUint8(this.position+6),t[7]=this.view.getUint8(this.position+7);var e=0;if(this.littleEndian)for(let n=t.length-1;n>=0;n--)e=256*e+t[n];else for(let n=0;n<t.length;n++)e=256*e+t[n];return this.position+=8,e},Li.prototype.getString=function(t){for(var e,n="";0!==(e=this.view.getUint8(this.position++))&&(n+=String.fromCharCode(e),!t||n.length!==t););return n},Li.prototype.getFixedLengthString=function(t){var e,n,r="";for(e=0;e<t;e++)(n=this.view.getUint8(this.position++))>0&&(r+=String.fromCharCode(n));return r},Li.prototype.getFixedLengthTrimmedString=function(t){var e,n,r="";for(e=0;e<t;e++)(n=this.view.getUint8(this.position++))>32&&(r+=String.fromCharCode(n));return r},Li.prototype.getFloat=function(){var t=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,t},Li.prototype.getDouble=function(){var t=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,t},Li.prototype.skip=function(t){return this.position+=t,this.position},Li.prototype.getVPointer=function(){var t=this.position,e=this.view.getUint8(t+1)<<8|this.view.getUint8(t),n=4294967296*(255&this.view.getUint8(t+6))+16777216*(255&this.view.getUint8(t+5))+65536*(255&this.view.getUint8(t+4))+256*(255&this.view.getUint8(t+3))+(255&this.view.getUint8(t+2));return this.position+=8,new Ii(n,e)},Ii.prototype.isLessThan=function(t){return this.block<t.block||this.block===t.block&&this.offset<t.offset},Ii.prototype.isGreaterThan=function(t){return this.block>t.block||this.block===t.block&&this.offset>t.offset},Ii.prototype.print=function(){return this.block+":"+this.offset};async function Mi(t,e,n,r){let i=await zn.loadArrayBuffer(t,un(e));const o=[];let a=Number.MAX_VALUE,s=0;if(!i)return;if(n){i=new qe.Gunzip(new Uint8Array(i)).decompress().buffer}const c=new Li(new DataView(i)),h=c.getInt(),l={};if(!(21578050===h||n&&21578324===h))throw new Error(t+" is not a "+(n?"tabix":"bai")+" file");{const t=c.getInt();if(n){c.getInt(),c.getInt(),c.getInt(),c.getInt(),c.getInt(),c.getInt(),c.getInt();for(let e=0;e<t;e++){let t=c.getString();r&&(t=r.getChromosomeName(t)),l[t]=e}}for(let e=0;e<t;e++){const t={},n=[],r=c.getInt();for(let e=0;e<r;e++){const e=c.getInt();if(37450===e){c.getInt(),c.getVPointer(),c.getVPointer(),c.getLong(),c.getLong()}else{t[e]=[];const n=c.getInt();for(let r=0;r<n;r++){const n=c.getVPointer(),r=c.getVPointer();n&&r&&(n.block<a&&(a=n.block),r.block>s&&(s=r.block),t[e].push([n,r]))}}}const i=c.getInt();for(let t=0;t<i;t++){const t=c.getVPointer();n.push(t)}r>0&&(o[e]={binIndex:t,linearIndex:n})}}return new Di(o,a,s,l,n)}const Di=function(t,e,n,r,i){this.firstAlignmentBlock=e,this.lastAlignmentBlock=n,this.indices=t,this.sequenceIndexMap=r,this.tabix=i};Di.prototype.blocksForRange=function(t,e,n){const r=this.indices[t];if(r){const t=function(t,e){let n;const r=[];e>=1<<29&&(e=1<<29);for(--e,r.push(0),n=1+(t>>26);n<=1+(e>>26);++n)r.push(n);for(n=9+(t>>23);n<=9+(e>>23);++n)r.push(n);for(n=73+(t>>20);n<=73+(e>>20);++n)r.push(n);for(n=585+(t>>17);n<=585+(e>>17);++n)r.push(n);for(n=4681+(t>>14);n<=4681+(e>>14);++n)r.push(n);return r}(e,n),i=[];t.forEach((function(t){if(r.binIndex[t]){const e=r.binIndex[t],n=e.length;for(let r=0;r<n;++r){const n=e[r][0],o=e[r][1];i.push({minv:n,maxv:o,bin:t})}}}));const o=r.linearIndex.length;let a=null;const s=Math.min(e>>14,o-1),c=Math.min(n>>14,o-1);for(let t=s;t<=c;++t){const e=r.linearIndex[t];e&&(a&&!e.isLessThan(a)||(a=e))}return function(t,e){const n=[];let r=null;return 0===t.length?t:(t.sort((function(t,e){const n=t.minv.block-e.minv.block;return 0!==n?n:t.minv.offset-e.minv.offset})),t.forEach((function(t){var i,o;e&&!t.maxv.isGreaterThan(e)||(null===r?(n.push(t),r=t):(i=r,(o=t).minv.block-i.maxv.block<65e3&&o.maxv.block-i.minv.block<5e6?t.maxv.isGreaterThan(r.maxv)&&(r.maxv=t.maxv):(n.push(t),r=t)))})),n)}(i,a)}return[]};class Bi{constructor(t){this.chrIndex=t}blocksForRange(t,e,n){const r=this.chrIndex[t];if(r){const t=r.blocks,i=r.longestFeature,o=r.binWidth,a=Math.max(e-i,0),s=Math.floor(a/o);if(s>=t.length)return[];{const e=Math.min(Math.floor((n-1)/o),t.length-1),r=t[s].min,i=t[e].max;if(0===i-r)return[];return[{minv:{block:r,offset:0},maxv:{block:i,offset:0}}]}}}}const Fi=function(t,e){var n;this.config=t||{},this.genome=e,this.indexURL=t.indexURL,this.indexed=t.indexed,Ln(this.config.url)?this.filename=this.config.url.name:We(this.config.url)&&this.config.url.startsWith("data:")?(this.indexed=!1,this.dataURI=t.url):(n=Mn(this.config.url),this.filename=t.filename||n.file),this.format=this.config.format,this.parser=this.getParser(this.format,this.config.decode,this.config)};Fi.prototype.readFeatures=async function(t,e,n){return await this.getIndex()?this.loadFeaturesWithIndex(t,e,n):this.dataURI?this.loadFeaturesFromDataURI():this.loadFeaturesNoIndex()},Fi.prototype.readHeader=async function(){if(!this.header){let t;if(!this.dataURI){let e;if(this.config.indexURL||this.config.indexed){if(e=await this.getIndex(),!e){const t=this.config.indexURL||this.config.url;throw new Error("Unable to load index: "+t)}let n="vcf"===this.config.format?65e3:1e3;if(e.tabix){const t=un(this.config,{range:{start:e.firstAlignmentBlock,size:26}}),r=_n(await zn.loadArrayBuffer(this.config.url,t));n=e.firstAlignmentBlock+r}const r=un(this.config,{bgz:e.tabix,range:{start:0,size:n}}),i=await zn.loadString(this.config.url,r);t=this.parser.parseHeader(i)}else{const e=await this.loadFeaturesNoIndex();t=this.header||{},t.features=e}return t&&this.parser&&(this.parser.header=t),this.header=t,t}{const e=await this.loadFeaturesFromDataURI(this.dataURI);t=this.header||{},t.features=e}}return this.header},Fi.prototype.getParser=function(t,e,n){switch(t){case"vcf":return new Ti(n);case"seg":return new yi;case"gcnv":return new Ai;default:return new qr(t,e,this.config)}},Fi.prototype.loadFeaturesNoIndex=async function(){const t=un(this.config),e=await zn.loadString(this.config.url,t);return this.header=this.parser.parseHeader(e),this.header instanceof String&&this.header.startsWith("##gff-version 3")&&(this.format="gff3"),this.parser.parseFeatures(e)},Fi.prototype.loadFeaturesWithIndex=async function(t,e,n){const r=this.config,i=this.parser,o=this.index.tabix,a=o?this.index.sequenceIndexMap[t]:t,s=[],c=this.genome,h=this.index.blocksForRange(a,e,n);if(!h||0===h.length)return[];for(let a of h){const h=a.minv.block,u=a.minv.offset,f=a.maxv.offset;let p;if(o){let t=0;if(f>0){const e=un(r,{range:{start:a.maxv.block,size:26}});t=_n(await zn.loadArrayBuffer(r.url,e))}p=a.maxv.block+t}else p=a.maxv.block;const d=un(r,{range:{start:h,size:p-h+1}});if(o){l(Cn(await zn.loadArrayBuffer(r.url,d)))}else{l(await zn.loadString(r.url,d))}function l(r){const o=u?r.slice(u):r,a=i.parseFeatures(o);let h=!1;for(let r=0;r<a.length;r++){const i=a[r];if(c.getChromosomeName(i.chr)!==t){if(0===s.length)continue;break}if(i.start>n){s.push(i);break}i.end>=e&&i.start<=n&&(h||(h=!0,r>0&&s.push(a[r-1])),s.push(i))}}}return s.sort((function(t,e){return t.start-e.start})),s},Fi.prototype.getIndex=async function(){if(void 0!==this.index||!1===this.indexed)return this.index;const t=await this.loadIndex();return t?(this.index=t,this.indexed=!0):this.indexed=!1,this.index},Fi.prototype.loadIndex=async function(){let t=this.config.indexURL;try{let e;return this.filename.endsWith(".gz")||this.filename.endsWith(".bgz")?(t||(t=this.config.url+".tbi"),e=await Mi(t,this.config,!0,this.genome)):(t||(t=this.config.url+".idx"),e=await async function(t,e,n){const r=await zn.loadArrayBuffer(t,un(e));if(r){const t={},e=new Li(new DataView(r));!function(t){t.getInt(),t.getInt();const e=t.getInt();t.getString(),t.getLong(),t.getLong(),t.getString(),t.getInt();if(e>=3){let e=t.getInt();for(;e-- >0;){t.getString(),t.getString()}}}(e);let n=e.getInt();for(;n-- >0;){const n=i(e);t[n.chr]=n}return new Bi(t)}return;function i(t){let e=t.getString();n&&(e=n.getChromosomeName(e));const r=t.getInt(),i=t.getInt(),o=t.getInt();t.getInt(),t.getInt();let a=t.getLong();const s=new Array;for(let e=0;e<i;e++){const e=t.getLong();s.push({min:a,max:e}),a=e}return{chr:e,blocks:s,longestFeature:o,binWidth:r}}}(t,this.config,this.genome)),e}catch(t){if(this.config.indexURL||this.config.indexed)throw t;this.indexed=!1,console.error(t)}},Fi.prototype.loadFeaturesFromDataURI=async function(){const t=In(this.dataURI);return this.header=this.parser.parseHeader(t),this.header instanceof String&&this.header.startsWith("##gff-version 3")&&(this.format="gff3"),this.parser.parseFeatures(t)};const Ni=function(t,e,n){this.treeMap=this.buildTreeMap(t,e),this.range=n,this.count=t.length};function Oi(t){const e=new hr,n=t.length,r=Math.max(10,Math.round(n/10));for(let i=0;i<n;i+=r){const o=Math.min(n,i+r),a=new Pi(i,o),s=t[i].start;let c=s;for(let e=i;e<o;e++)c=Math.max(c,t[e].end);e.insert(s,c,a)}return e}Ni.prototype.containsRange=function(t){return void 0===this.range||this.range.contains(t.chr,t.start,t.end)},Ni.prototype.queryFeatures=function(t,e,n){const r=this.treeMap[t];if(!r)return[];const i=r.findOverlapping(e,n);if(0===i.length)return[];{const r=[],o=this.allFeatures[t];if(o){for(let t of i){const i=t.value;for(let t=i.start;t<i.end;t++){let i=o[t];if(i.start>n)break;i.end>=e&&r.push(i)}}r.sort((function(t,e){return t.start-e.start}))}return r}},Ni.prototype.getAllFeatures=function(){return this.allFeatures},Ni.prototype.buildTreeMap=function(t,e){const n={},r=[];if(this.allFeatures={},t){for(let n of t){let t=n.chr;e&&(t=e.getChromosomeName(t));let i=this.allFeatures[t];i||(r.push(t),i=[],this.allFeatures[t]=i),i.push(n)}for(let t of r){const e=this.allFeatures[t];e.sort((function(t,e){return t.start===e.start?0:t.start>e.start?1:-1})),n[t]=Oi(e)}}return n};class Pi{constructor(t,e){this.start=t,this.end=e}}const zi=function(t){this.config=t};zi.prototype.readFeatures=function(t,e,n){var r=this,i=r.config.url,o=r.config.body;return"all"!==t.toLowerCase()&&(i=i.replace("$CHR",t).replace("$START",e).replace("$END",n),void 0!==o&&(r.config.body=r.config.body.replace("$CHR",t).replace("$START",e).replace("$END",n))),zn.load(i,r.config).then((function(t){if(!t)return[];if("function"==typeof r.config.parser)return r.config.parser(t);if(!We(t))return t;try{return JSON.parse(t)}catch(e){return t}})).then((function(t){if(r.config.mappings){let e=Object.keys(r.config.mappings);t.forEach((function(t){e.forEach((function(e){t[e]=t[r.config.mappings[e]]}))}))}return t}))};const $i=function(t,e){this.config=t,this.genome=e,this.expandQueryInterval=!1};$i.prototype.readFeatures=function(t,e,n){const r=Math.max(0,Math.floor(e));let i=Math.ceil(n);if(this.genome){const e=this.genome.getChromosome(t);e&&i>e.bpLength&&(i=e.bpLength)}const o=this.config.url+"?db="+this.config.db+"&table="+this.config.tableName+"&chr="+t+"&start="+r+"&end="+i;return zn.loadJson(o,this.config).then((function(t){return t?(t.forEach((function(t){t.hasOwnProperty("exonStarts")&&t.hasOwnProperty("exonEnds")&&t.hasOwnProperty("exonCount")&&t.hasOwnProperty("cdsStart")&&t.hasOwnProperty("cdsEnd")&&function(t){var e,n,r,i,o,a;e=t.exonCount,n=t.exonStarts.split(","),r=t.exonEnds.split(","),i=[];for(var s=0;s<e;s++){o=parseInt(n[s]),a=parseInt(r[s]);var c={start:o,end:a};(t.cdsStart>a||t.cdsEnd<t.cdsStart)&&(c.utr=!0),t.cdsStart>=o&&t.cdsStart<=a&&(c.cdStart=t.cdsStart),t.cdsEnd>=o&&t.cdsEnd<=a&&(c.cdEnd=t.cdsEnd),i.push(c)}t.exons=i}(t)})),t):null}))};const Ui=new Set(["transcript","primary_transcript","processed_transcript","mRNA","mrna"]),Hi=new Set(["CDS","cds"]),ji=new Set(["start_codon","stop_codon"]),Vi=new Set(["5UTR","3UTR","UTR","five_prime_UTR","three_prime_UTR","3'-UTR","5'-UTR"]),qi=new Set(["exon","coding-exon"]),Gi=function(t){this.format=t.format,t.filterTypes&&(this.filterTypes=new Set(t.filterTypes))};function Wi(t){const e=Object.create(null),n=[],r=new Set,i=this.filterTypes;t=t.filter(t=>void 0===i||!i.has(t.type));for(let i of t)if(Ui.has(i.type)){const t=i.id;if(void 0!==t){const o=new Ki(i);e[t]=o,n.push(o),r.add(i)}}for(let i of t)if(qi.has(i.type)){const t=i.id;if(t){let o=e[t];void 0===o&&(o=new Ki(i),e[t]=o,n.push(o)),o.addExon(i),r.add(i)}}for(let i of t)if(Hi.has(i.type)||Vi.has(i.type)||ji.has(i.type)){const t=i.id;if(t){let o=e[t];void 0===o&&(o=new Ki(i),e[t]=o,n.push(o)),Vi.has(i.type)?o.addUTR(i):Hi.has(i.type)?o.addCDS(i):ji.has(i.type),r.add(i)}}for(let t of n)"function"==typeof t.finish&&t.finish();const o=t.filter(t=>!r.has(t));for(let t of o)n.push(t);return n.sort((function(t,e){return t.start-e.start})),n}function Zi(t){const e=Object.create(null),n=[],r=new Set,i=this.filterTypes;t=t.filter(t=>void 0===i||!i.has(t.type));for(let i of t)if(Ui.has(i.type)){const t=i.id;if(void 0!==t){const o=new Ki(i);e[t]=o,n.push(o),r.add(i)}}for(let n of t)if(qi.has(n.type)){const t=a(n);if(t)for(let i of t){let t=e[i];void 0!==t&&(t.addExon(n),r.add(n))}}for(let n of t)if(Hi.has(n.type)||Vi.has(n.type)||ji.has(n.type)){const t=a(n);if(t)for(let i of t){let t=e[i];void 0!==t&&(Vi.has(n.type)?t.addUTR(n):Hi.has(n.type)?t.addCDS(n):ji.has(n.type),r.add(n))}}n.forEach((function(t){"function"==typeof t.finish&&t.finish()}));const o=t.filter(t=>!r.has(t));for(let t of o)n.push(t);return n.sort((function(t,e){return t.start-e.start})),n;function a(t){return t.parent&&""!==t.parent.trim()?t.parent.trim().split(","):null}}Gi.prototype.combineFeatures=function(t){return"gff3"===this.format?Zi.call(this,t):Wi.call(this,t)};var Ki=function(t){Object.assign(this,t),this.exons=[]};Ki.prototype.addExon=function(t){this.exons.push(t),this.start=Math.min(this.start,t.start),this.end=Math.max(this.end,t.end)},Ki.prototype.addCDS=function(t){let e;const n=this.exons;for(let r=0;r<n.length;r++)if(n[r].start<=t.start&&n[r].end>=t.end){e=n[r];break}e?(e.cdStart=e.cdStart?Math.min(t.start,e.cdStart):t.start,e.cdEnd=e.cdEnd?Math.max(t.end,e.cdEnd):t.end,e.children||(e.children=[]),e.children.push(t)):(t.cdStart=t.start,t.cdEnd=t.end,n.push(t)),this.start=Math.min(this.start,t.start),this.end=Math.max(this.end,t.end),this.cdStart=this.cdStart?Math.min(t.start,this.cdStart):t.start,this.cdEnd=this.cdEnd?Math.max(t.end,this.cdEnd):t.end},Ki.prototype.addUTR=function(t){let e;const n=this.exons;for(let r=0;r<n.length;r++)if(n[r].start<=t.start&&n[r].end>=t.end){e=n[r];break}e?(t.start===e.start&&t.end===e.end?e.utr=!0:(t.end<e.end&&(e.cdStart=t.end),t.start>e.start&&(e.cdEnd=t.start)),e.children||(e.children=[]),e.children.push(t)):(t.utr=!0,n.push(t)),this.start=Math.min(this.start,t.start),this.end=Math.max(this.end,t.end)},Ki.prototype.finish=function(){var t=this.cdStart,e=this.cdEnd;this.exons.sort((function(t,e){return t.start-e.start})),t&&this.exons.forEach((function(n){(n.end<t||n.start>e)&&(n.utr=!0)}))},Ki.prototype.popupData=function(t){const e=this.attributeString.split(";"),n=[];n.push({name:"type",value:this.type}),n.push({name:"start",value:this.start+1}),n.push({name:"end",value:this.end});for(let t of e){var r=t.trim().split(this.delim,2);if(2===r.length&&void 0!==r[1]){const t=r[0].trim();let e=r[1].trim();e.startsWith('"')&&e.endsWith('"')&&(e=e.substr(1,e.length-2)),n.push({name:t,value:e})}}for(let e of this.exons)if(t>=e.start&&t<e.end){n.push("<hr>");const r=e.popupData(t);for(let t of r)n.push(t);if(e.children)for(let r of e.children){n.push("<hr>");const e=r.popupData(t);for(let t of e)n.push(t)}}return n};const Xi=function(t){this.config=t,this.url=t.url,this.tissueId=t.tissueSiteDetailId,this.indexed=!0,this.datasetId=t.datasetId||"gtex_v8"};Xi.prototype.readFeatures=async function(t,e,n){let r=t.startsWith("chr")?t:"chr"+t,i=Math.floor(e),o=Math.ceil(n),a=this.datasetId,s=this.url+"?chromosome="+r+"&start="+i+"&end="+o+"&tissueSiteDetailId="+this.tissueId+"&datasetId="+a;const c=await zn.loadJson(s,{withCredentials:this.config.withCredentials});return c&&c.singleTissueEqtl?(c.singleTissueEqtl.forEach((function(t){t.chr=t.chromosome,t.position=t.pos,t.start=t.pos-1,t.end=t.start+1,t.snp=t.snpId,t.geneName=t.geneSymbol,t.geneId=t.gencodeId})),c.singleTissueEqtl):void 0};const Yi=function(t){this.config=t,this.url=t.url,this.cellConditionId=t.cellConditionId,this.valueThreshold=t.valueThreshold?t.valueThreshold:.05};function Qi(t){var e=t.url+"/"+t.entity+"/"+t.entityId;return t.headers={"Cache-Control":"no-cache"},zn.loadJson(e,t)}function Ji(t){return new Promise((function(e,n){var r=t.results?t.results:[],i=t.url,o=t.body,a=t.decode,s=bn.apiKey,c="?",h=t.fields;return s&&(i=i+c+"key="+s,c="&"),h&&(i=i+c+"fields="+h),function t(s){s?o.pageToken=s:void 0!==o.pageToken&&delete o.pageToken;var c=JSON.stringify(o);zn.loadJson(i,{sendData:c,contentType:"application/json",headers:{"Cache-Control":"no-cache"}}).then((function(n){var i,o;n?((o=a?a(n):n)&&o.forEach((function(t){r.push(t)})),(i=n.nextPageToken)?t(i):e(r)):e(r)})).catch((function(t){n(t)}))}()}))}Yi.prototype.readFeatures=function(t,e,n){var r=this,i=this.url+"?chromosome="+t+"&start="+e+"&end="+n+"&cell_condition_id="+this.cellConditionId;return new Promise((function(t,e){zn.loadJson(i,{withCredentials:r.config.withCredentials}).then((function(e){e?(e.eqtls.forEach((function(t){t.chr=t.chromosome,t.start=t.position,t.end=t.position+1})),t(e.eqtls)):t(null)})).catch((function(t){e(t)}))}))};const to=function(t,e){this.config=t,this.genome=e,this.url=t.url,this.variantSetId=t.variantSetId,this.callSetIds=t.callSetIds,this.includeCalls=void 0===t.includeCalls||t.includeCalls};to.prototype.readHeader=function(){var t=this;return t.header?Promise.resolve(t.header):(t.header={},!1===t.includeCalls?Promise.resolve(t.header):Ji({url:t.url+"/callsets/search",fields:"nextPageToken,callSets(id,name)",body:{variantSetIds:Array.isArray(t.variantSetId)?t.variantSetId:[t.variantSetId],pageSize:"10000"},decode:function(e){if(t.callSetIds){var n=[],r=new Set;return t.callSetIds.forEach((function(t){r.add(t)})),e.callSets.forEach((function(t){r.has(t.id)&&n.push(t)})),n}return e.callSets}}).then((function(e){return t.header.callSets=e,t.header})))},to.prototype.readFeatures=function(t,e,n){const r=this,i=this.genome;return r.readHeader().then((function(t){return new Promise((function(t,e){r.chrAliasTable?t(r.chrAliasTable):r.readMetadata().then((function(e){r.metadata=e.metadata,r.chrAliasTable={},e.referenceBounds&&i&&e.referenceBounds.forEach((function(t){var e=t.referenceName,n=i.getChromosomeName(e);r.chrAliasTable[n]=e})),t(r.chrAliasTable)}))}))})).then((function(i){var o=i.hasOwnProperty(t)?i[t]:t;return Ji({url:r.url+"/variants/search",fields:r.includeCalls?void 0:"nextPageToken,variants(id,variantSetId,names,referenceName,start,end,referenceBases,alternateBases,quality,filter,info)",body:{variantSetIds:Array.isArray(r.variantSetId)?r.variantSetId:[r.variantSetId],callSetIds:r.callSetIds?r.callSetIds:void 0,referenceName:o,start:e.toString(),end:n.toString(),pageSize:"10000"},decode:function(t){var e,n=[];return t.variants.forEach((function(t){(e=function(t){var e,n=new Ci;return n.chr=t.referenceName,n.start=parseInt(t.start),n.end=parseInt(t.end),n.pos=n.start+1,n.names=Ri(t.names,"; "),n.referenceBases=t.referenceBases,n.alternateBases=Ri(t.alternateBases),n.quality=t.quality,n.filter=Ri(t.filter),n.info={},t.info&&Object.keys(t.info).forEach((function(e){var r,i=t.info[e];r=Array.isArray(i)?i.join(","):i,n.info[e]=r})),n.calls={},t.calls&&t.calls.forEach((function(t){e=t.callSetId,n.calls[e]=t})),xi(n),n}(t)).isRefBlock()||n.push(e)})),n}})}))},to.prototype.readMetadata=function(){return Qi({url:this.url,entity:"variantsets",entityId:this.variantSetId})};const eo=function(t){this.config=t};function no(t,e,n,r){if(this.chr=t,this.start=e,this.end=n,this.id=r.id,this.entrezName=r.entrez_name,this.name=r.name,this.actionabilityScore=r.civic_actionability_score,r.coordinates.reference_bases&&(this.refBases=r.coordinates.reference_bases),r.coordinates.variant_bases&&(this.altBases=r.coordinates.variant_bases),r.variant_types&&(this.variant_types=r.variant_types),this.locationString=this.chr+":"+Ze(this.start+1)+"-"+Ze(this.end),void 0!==this.actionabilityScore){let t;if(this.actionabilityScore<=10)t=.2;else{const e=Math.min(30,this.actionabilityScore);t=.2+.8*Math.log10((e-10)/2)}this.alpha=t}}eo.prototype.readFeatures=function(t,e,n){return zn.loadJson(this.config.url+"/variants/?count=5000").then((function(t){const e=t.records,n=[];for(let t of e)if(t.coordinates){t.id;const e=t.coordinates;e.chromosome&&n.push(new no(e.chromosome,e.start-1,e.stop,t)),e.chromosome2&&n.push(new no(e.chromosome2,e.start2-1,e.stop2,t))}return n}))},no.prototype.popupData=function(){const t=n("CIViC","https://civicdb.org/links/variants/"+this.id),e=(this.refBases!==this.altBases&&this.refBases&&1===this.refBases.length&&this.altBases&&this.altBases.length,[t]);if(e.push({name:"Entrez",value:n(this.entrezName,"https://ghr.nlm.nih.gov/gene/"+this.entrezName)}),e.push({name:"Name",value:this.name}),this.variant_types&&this.variant_types.length>0){const t=1===this.variant_types.length?"Type":"Types";let n;for(let t of this.variant_types)n?n+=", "+t.display_name:n=t.display_name;e.push({name:t,value:n})}return e.push({name:"Actionability",value:this.actionabilityScore}),e.push({name:"Location",value:this.locationString}),e;function n(t,e){return"<a target='_blank' href='"+e+"'>"+t+"</a>"}};var ro=new Set(["bigwig","bw","bigbed","bb","tdf"]);const io=function(t,e){if(this.config=t||{},this.genome=e,this.sourceType=void 0===t.sourceType?"file":t.sourceType,void 0===t.filterTypes&&(t.filterTypes=["chromosome","gene"]),t.features&&Array.isArray(t.features)){let n=t.features;ao(n),t.mappings&&function(t,e){let n=Object.keys(e);t.forEach((function(t){n.forEach((function(n){t[n]=t[e[n]]}))}))}(n,t.mappings),this.featureCache=new Ni(n,e),this.static=!0}else"ga4gh"===t.sourceType?(this.reader=new to(t,e),this.queryable=!0):"immvar"===t.sourceType?(this.reader=new Yi(t),this.queryable=!0):"eqtl"===t.type&&"gtex-ws"===t.sourceType?(this.reader=new Xi(t),this.queryable=!0):"ucscservice"===t.sourceType?(this.reader=new $i(t.source),this.queryable=!0):"custom"===t.sourceType||void 0!==t.source?(this.reader=new zi(t.source),this.queryable=void 0===t.source.queryable||t.source.queryable):"civic-ws"===t.sourceType?(this.reader=new eo(t),this.queryable=!1):(this.reader=new Fi(t,e),void 0!==t.queryable?this.queryable=t.queryable:ro.has(t.format)&&(this.queryable=ro.has(t.format)||this.reader.indexed));this.supportsWG=!this.queryable};function oo(t){let e=this;t.forEach((function(t){t.name&&(e.config.browser.featureDB[t.name.toUpperCase()]=t)}))}function ao(t,e){if(e=e||1e3,null!=t&&0!==t.length){var n={},r=[];t.forEach((function(t){var e=t.chr,i=n[e];i||(i=[],n[e]=i,r.push(e)),i.push(t)})),r.forEach((function(t){!function(t,e){const n=[];t.sort((function(t,e){return t.start-e.start})),n.push(-1e3);for(let r of t){let t=0;const i=Math.min(n.length,e);for(t=0;t<i;t++)if(r.start>n[t]){r.row=t,n[t]=r.end;break}r.row=t,n[t]=r.end}}(n[t],e)}))}}io.prototype.supportsWholeGenome=function(){return this.supportsWG},io.prototype.getFileHeader=async function(){if(!this.header)if(this.reader&&"function"==typeof this.reader.readHeader){const t=await this.reader.readHeader();if(t){this.header=t;const e=t.features;e&&this.ingestFeatures(e),t.format&&(this.config.format=t.format)}this.header=t}else this.header={};return this.header},io.prototype.getFeatures=async function(t,e,n,r,i){const o=this.reader,a=this.genome,s=a?a.getChromosomeName(t):t,c=await async function(){let r=e,a=n,c=new yn(s,r,a);if(this.featureCache&&(this.static||this.featureCache.containsRange(c)||"all"===t.toLowerCase()))return this.featureCache;{if(void 0!==i)if(i<=0)r=0,a=Number.MAX_VALUE;else if(i>n-e){const t=Math.min(4.1*(n-e),i);r=Math.max(0,(e+n-t)/2),a=e+t}c=new yn(s,r,a);let t=await o.readFeatures(s,c.start,c.end);return void 0===this.queryable&&(this.queryable=o.indexed),t?this.ingestFeatures(t,c):this.featureCache=new Ni,this.featureCache}}.call(this),h=this.queryable;return"all"===t.toLowerCase()?h?[]:c.count>5e5?(this.supportsWG=!1,[]):this.getWGFeatures(c.getAllFeatures()):c.queryFeatures(s,e,n)},io.prototype.ingestFeatures=function(t,e){if("gtf"!==this.config.format&&"gff3"!==this.config.format&&"gff"!==this.config.format||(t=new Gi(this.config).combineFeatures(t)),"wig"!==this.config.format&&"junctions"!==this.config.type){ao(t,this.config.maxRows||500)}this.featureCache=this.queryable?new Ni(t,this.genome,e):new Ni(t,this.genome),this.config.searchable&&oo.call(this,t)},io.prototype.getWGFeatures=function(t){const e=this.genome,n=new Set(e.wgChromosomeNames),r=[];for(let i of e.wgChromosomeNames){const o=t[i];if(o)for(let t of o){let i=e.getChromosomeName(t.chr);if(n.has(i)){const n=Object.create(Object.getPrototypeOf(t));Object.assign(n,t),n.realChr=t.chr,n.realStart=t.start,n.realEnd=t.end,n.chr="all",n.start=e.getGenomeCoordinate(t.chr,t.start),n.end=e.getGenomeCoordinate(t.chr,t.end),n.exons&&delete n.exons,n.popupData=function(t){const n=Object.assign({},this);return n.chr=this.realChr,n.start=this.realStart+1,n.end=this.realEnd,delete n.realChr,delete n.realStart,delete n.realEnd,wi.extractPopupData(n,e.id)},r.push(n)}}}return r.sort((function(t,e){return t.start-e.start})),r};const so=function(t,e,n){this.path=t.url,this.bufferSize=n||512e3,this.range={start:-1,size:-1},this.config=t};so.prototype.dataViewForRange=function(t,e){var n,r,i=this;return i.data&&i.range.start<=t.start&&i.range.start+i.range.size>=t.start+t.size?Promise.resolve(o(i,t,e)):(n=t.size?Math.max(i.bufferSize,t.size):i.bufferSize,r={start:t.start,size:n},zn.loadArrayBuffer(i.path,un(i.config,{range:r})).then((function(n){return i.data=n,i.range=r,o(i,t,e)})));function o(t,e,n){var r=t.data.byteLength,i=e.start-t.range.start;return n?new Uint8Array(t.data,i,r-i):new DataView(t.data,i,r-i)}};const co=function(t,e){this.path=t.url,this.genome=e,this.rpTreeCache={},this.config=t};function ho(t,e){this.index=t,this.reductionLevel=e.getInt(),this.reserved=e.getInt(),this.dataOffset=e.getLong(),this.indexOffset=e.getLong()}function lo(t,e,n){this.config=e,this.fileOffset=t,this.path=e.url,this.littleEndian=n}function uo(t){this.items=t;let e,n,r=Number.MAX_VALUE,i=0,o=Number.MAX_VALUE,a=0;for(e=0;e<t.length;e++)n=t[e],r=Math.min(r,n.startChrom),i=Math.max(i,n.endChrom),o=Math.min(o,n.startBase),a=Math.max(a,n.endBase);this.startChrom=r,this.endChrom=i,this.startBase=o,this.endBase=a}function fo(t,e,n){let r=t.getInt(),i=t.getInt(),o=t.getInt(),a=t.getInt(),s=t.getLong(),c=t.getLong(),h={},l=[];this.header={magic:r,blockSize:i,keySize:o,valSize:a,itemCount:s,reserved:c},this.chromToID=h,this.idToChrom=l,function t(r,i){i>=0&&(r.position=i);let a,s,c,u,f,p,d,g=r.getByte(),m=(r.getByte(),r.getUShort());if(1===g)for(a=0;a<m;a++)s=r.getFixedLengthTrimmedString(o),c=r.getInt(),u=r.getInt(),n&&(s=n.getChromosomeName(s)),h[s]=c,l[c]=s;else for(a=0;a<m;a++)s=r.getFixedLengthTrimmedString(o),f=r.getLong(),p=f-e,d=r.position,t(r,p),r.position=d}(t,-1)}function po(t,e,n,r,i){return!!t&&((r>t.startChrom||r===t.startChrom&&i>=t.startBase)&&(e<t.endChrom||e===t.endChrom&&n<=t.endBase))}function go(t){t?(this.basesCovered=t.getLong(),this.minVal=t.getDouble(),this.maxVal=t.getDouble(),this.sumData=t.getDouble(),this.sumSquares=t.getDouble(),mo.call(this)):(this.basesCovered=0,this.minVal=0,this.maxVal=0,this.sumData=0,this.sumSquares=0,this.mean=0,this.stddev=0)}function mo(){let t=this.basesCovered;if(t>0){this.mean=this.sumData/t,this.stddev=Math.sqrt(this.sumSquares/(t-1));let e=this.minVal<0?this.mean-2*this.stddev:0,n=this.maxVal>0?this.mean+2*this.stddev:0;this.defaultRange={min:e,max:n}}}function vo(t,e,n,r,i,o,a){let s,c,h=new Li(t),l=h.getInt(),u=h.getInt(),f=h.getInt(),p=h.getInt(),d=h.getInt(),g=h.getByte(),m=(h.getByte(),h.getUShort());if(l>=e&&l<=r)for(;m-- >0;){switch(g){case 1:u=h.getInt(),f=h.getInt(),s=h.getFloat();break;case 2:u=h.getInt(),s=h.getFloat(),f=u+d;break;case 3:s=h.getFloat(),f=u+d,u+=p}if(!(l<e||l===e&&f<n)){if(l>r||l===r&&u>=i)break;Number.isFinite(s)&&(c=a[l],o.push({chr:c,start:u,end:f,value:s}))}}}function yo(t,e,n,r,i,o,a){let s,c,h,l,u,f,p,d,g,m,v,y,w,b=new Li(t);for(;b.remLength()>=13;)if(s=b.getInt(),w=a[s],c=b.getInt(),h=b.getInt(),l=b.getString(),!(s<e||s===e&&h<n)){if(s>r||s===r&&c>=i)break;if(f={chr:w,start:c,end:h},o.push(f),u=l.split("\t"),u.length>0&&(f.name=u[0]),u.length>1&&(f.score=parseFloat(u[1])),u.length>2&&(f.strand=u[2]),u.length>3&&(f.cdStart=parseInt(u[3])),u.length>4&&(f.cdEnd=parseInt(u[4])),u.length>5&&"."!==u[5]&&"0"!==u[5]&&"-1"!==u[5]){const t=Qe.createColorString(u[5]);f.color=t.startsWith("rgb")?t:void 0}if(u.length>8){p=parseInt(u[6]),d=u[7].split(","),g=u[8].split(","),m=[];for(let t=0;t<p;t++)v=c+parseInt(g[t]),y=v+parseInt(d[t]),m.push({start:v,end:y});f.exons=m}}}function wo(t,e,n,r,i,o,a,s){let c,h,l,u,f,p,d,g,m,v,y=new Li(t);for(;y.remLength()>=32;){switch(c=y.getInt(),v=a[c],h=y.getInt(),l=y.getInt(),u=y.getInt(),f=y.getFloat(),p=y.getFloat(),d=y.getFloat(),g=y.getFloat(),s){case"min":m=f;break;case"max":m=p;break;default:m=0===u?0:d/u}if(!(c<e||c===e&&l<n)){if(c>r||c===r&&h>=i)break;Number.isFinite(m)&&o.push({chr:v,start:h,end:l,value:m})}}}co.prototype.readWGFeatures=function(t,e){const n=this;this.genome;return n.getZoomHeaders().then((function(r){let i,o,a,s;return i=0,o=n.chromTree.idToChrom.length-1,a=n.chromTree.idToChrom[0],s=n.chromTree.idToChrom[o],n.readFeatures(a,0,s,Number.MAX_VALUE,t,e)}))},co.prototype.readFeatures=function(t,e,n,r,i,o){let a,s,c,h=this;return h.getZoomHeaders().then((function(t){let e,n=function(t,e){let n,r,i=null;for(n=0;n<e.length;n++)if(r=e[n],r.reductionLevel<t){i=r;break}return i}(i,t);return n?(e=n.indexOffset,a=wo):(e=h.header.fullIndexOffset,a="BigWig"===h.type?vo:yo),h.loadRPTree(e)})).then((function(i){return s=h.chromTree.chromToID[t],c=h.chromTree.chromToID[n],void 0===s||void 0===c?void 0:i.findLeafItemsOverlapping(s,e,c,r)})).then((function(t){if(t&&0!==t.length){let n=Number.MAX_VALUE,i=0;for(let e of t)n=Math.min(n,e.dataOffset),i=Math.max(i,e.dataOffset+e.dataSize);const l=i-n;return zn.loadArrayBuffer(h.config.url,un(h.config,{range:{start:n,size:l}})).then((function(i){const l=[],u=new Uint8Array(i);for(let i of t){const t=u.subarray(i.dataOffset-n,i.dataOffset+i.dataSize);let f;if(h.header.uncompressBuffSize>0){f=new qe.Inflate(t).decompress()}else f=t;a(new DataView(f.buffer),s,e,c,r,l,h.chromTree.idToChrom,o)}return l.sort((function(t,e){return t.start-e.start})),l}))}return[]}))},co.prototype.getZoomHeaders=function(){let t=this;return t.zoomLevelHeaders?Promise.resolve(t.zoomLevelHeaders):t.loadHeader().then((function(){return t.zoomLevelHeaders}))},co.prototype.loadHeader=function(){let t=this;return t.header?Promise.resolve(t.header):zn.loadArrayBuffer(t.path,un(t.config,{range:{start:0,size:64}})).then((function(e){let n;t.littleEndian=!0;let r=new Li(new DataView(e)),i=r.getUInt();if(2291137574===i)t.type="BigWig";else if(2273964779===i)t.type="BigBed";else{t.littleEndian=!1,r.littleEndian=!1,r.position=0;let e=r.getUInt();654085990===e?t.type="BigWig":3958540679===e&&(t.type="BigBed")}return n={},n.bwVersion=r.getUShort(),n.nZoomLevels=r.getUShort(),n.chromTreeOffset=r.getLong(),n.fullDataOffset=r.getLong(),n.fullIndexOffset=r.getLong(),n.fieldCount=r.getUShort(),n.definedFieldCount=r.getUShort(),n.autoSqlOffset=r.getLong(),n.totalSummaryOffset=r.getLong(),n.uncompressBuffSize=r.getInt(),n.reserved=r.getLong(),n})).then((function(n){return t.header=n,e.call(t)}));function e(){const t=this;let e={start:64,size:t.header.fullDataOffset-64+5};return zn.loadArrayBuffer(t.path,un(t.config,{range:e})).then((function(e){const n=t.header.nZoomLevels,r=new Li(new DataView(e));t.zoomLevelHeaders=[],t.firstZoomDataOffset=Number.MAX_VALUE;for(let e=1;e<=n;e++){const i=n-e,o=new ho(i,r);t.firstZoomDataOffset=Math.min(o.dataOffset,t.firstZoomDataOffset),t.zoomLevelHeaders[i]=o}if(t.header.autoSqlOffset>0&&(r.position=t.header.autoSqlOffset-64,t.autoSql=r.getString()),t.header.totalSummaryOffset>0&&(r.position=t.header.totalSummaryOffset-64,t.totalSummary=new go(r)),!(t.header.chromTreeOffset>0))throw"BigWig chromosome tree offset <= 0";return r.position=t.header.chromTreeOffset-64,t.chromTree=new fo(r,64,t.genome),r.position=t.header.fullDataOffset-64,t.header.dataCount=r.getInt(),t.header}))}},co.prototype.loadRPTree=function(t){let e=this,n=e.rpTreeCache[t];return n?Promise.resolve(n):(n=new lo(t,e.config,e.littleEndian),n.load().then((function(){return e.rpTreeCache[t]=n,n})))},lo.prototype.load=function(){let t=this,e=t.fileOffset+48,n=new so(t.config,512e3);return t.readNode(e,n).then((function(e){return t.rootNode=e,t}))},lo.prototype.readNode=function(t,e){let n,r,i=this;return e.dataViewForRange({start:t,size:4},!1).then((function(o){let a,s,c;a=new Li(o,i.littleEndian),s=a.getByte(),r=1===s,c=a.getByte(),n=a.getUShort();let h={start:t+=4,size:n*(r?32:24)};return e.dataViewForRange(h,!1)})).then((function(t){let e,i=new Array(n),o=new Li(t);if(r){for(e=0;e<n;e++){let t={isLeaf:!0,startChrom:o.getInt(),startBase:o.getInt(),endChrom:o.getInt(),endBase:o.getInt(),dataOffset:o.getLong(),dataSize:o.getLong()};i[e]=t}return new uo(i)}for(e=0;e<n;e++){let t={isLeaf:!1,startChrom:o.getInt(),startBase:o.getInt(),endChrom:o.getInt(),endBase:o.getInt(),childOffset:o.getLong()};i[e]=t}return new uo(i)}))},lo.prototype.findLeafItemsOverlapping=function(t,e,n,r){let i=this;return new Promise((function(o,a){let s=[],c=new Set,h=new so(i.config,512e3);c.add(0),function l(u,f){if(po(u,t,e,n,r)){u.items.forEach((function(o){po(o,t,e,n,r)&&(o.isLeaf?s.push(o):o.childNode?l(o.childNode):(c.add(o.childOffset),i.readNode(o.childOffset,h).then((function(t){o.childNode=t,l(t,o.childOffset)})).catch(a)))}))}void 0!==f&&c.delete(f);0===c.size&&o(s)}(i.rootNode,0)}))};const bo=function(t,e){this.reader=new co(t,e),this.genome=e,this.wgValues={}};bo.prototype.getFeatures=function(t,e,n,r,i){let o=this;return"all"===t.toLowerCase()?o.getWGValues(i):o.reader.readFeatures(t,e,t,n,r,i)},bo.prototype.getDefaultRange=function(){return void 0!==this.reader.totalSummary?this.reader.totalSummary.defaultRange:void 0},bo.prototype.defaultVisibilityWindow=function(){if("bigwig"===this.reader.type)return Promise.resolve(void 0);{let t=this.genome?this.genome.getGenomeLength():3088286401;return this.reader.loadHeader().then((function(e){return t/e.dataCount*1e3}))}},bo.prototype.getWGValues=function(t){let e,n=this;const r=this.genome;return n.wgValues[t]?Promise.resolve(n.wgValues[t]):(e=r.getGenomeLength()/500,n.reader.readWGFeatures(e,t).then((function(e){let i=[];return e.forEach((function(t){let e,n,o;o=t.chr,n=r.getCumulativeOffset(o),e=Object.assign({},t),e.chr="all",e.start=n+t.start,e.end=n+t.end,i.push(e)})),n.wgValues[t]=i,i})))},bo.prototype.supportsWholeGenome=function(){return!0};const xo={getTissueInfo:function(t,e){let n=(e=e||"https://gtexportal.org/rest/v1")+"/dataset/tissueInfo?datasetId="+(t=t||"gtex_v8");return zn.loadJson(n,{})},trackConfiguration:function(t,e){return{type:"eqtl",sourceType:"gtex-ws",url:(e=e||"https://gtexportal.org/rest/v1")+"/association/singleTissueEqtlByLocation",tissueSiteDetailId:t.tissueSiteDetailId,name:t.tissueSiteDetailId.split("_").join(" "),visibilityWindow:25e4}}};var ko=new ze("Dark2");["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"].forEach(t=>{ko.getColor(t)});const So=hn(wi,(function(t,e){this.type="feature",wi.call(this,t,e),void 0===t.maxRows&&(t.maxRows=500),this.maxRows=t.maxRows,this.displayMode=t.displayMode||"EXPANDED",this.labelDisplayMode=t.labelDisplayMode;const n=t.format?t.format.toLowerCase():void 0;this.featureSource="bigwig"===n||"bigbed"===n?new bo(t,e.genome):new io(t,e.genome),this.autoHeight=t.autoHeight,this.margin=void 0===t.margin?10:t.margin,this.featureHeight=t.featureHeight||14,"FusionJuncSpan"===t.type?(this.squishedRowHeight=t.squishedRowHeight||50,this.expandedRowHeight=t.expandedRowHeight||50,this.height=t.height||this.margin+2*this.expandedRowHeight):"snp"===t.type?(this.expandedRowHeight=t.expandedRowHeight||10,this.squishedRowHeight=t.squishedRowHeight||5,this.height=t.height||30):(this.squishedRowHeight=t.squishedRowHeight||15,this.expandedRowHeight=t.expandedRowHeight||30,this.height=t.height||this.margin+2*this.expandedRowHeight),void 0!==this.height&&this.height||(this.height=100),"spliceJunctions"===t.type&&void 0===t.colorByNumReadsThreshold&&(t.colorByNumReadsThreshold=5),t.render?this.render=t.render:"FusionJuncSpan"===t.type?this.render=To:"spliceJunctions"===t.type?this.render=Eo:"snp"===t.type?(this.render=Do,this.snpColors=["rgb(0,0,0)","rgb(0,0,255)","rgb(0,255,0)","rgb(255,0,0)"],this.colorBy="function"):(this.render=_o,this.arrowSpacing=30,function(t){t.browser.on&&(t.browser.on("trackdragend",e),t.browser.on("trackremoved",(function n(r){t.browser.un&&t===r&&(t.browser.un("trackdrag",e),t.browser.un("trackremoved",n))})));function e(){t.trackView&&t.trackView.tile&&"SQUISHED"!==t.displayMode&&t.trackView.repaintViews()}}(this))}));function Co(t,e,n){let r=(t.start-e)/n,i=(t.end-e)/n,o=i-r;return o<3&&(o=3,r-=1.5),{px:r,px1:i,pw:o}}function _o(t,e,n,r,i,o){const a=this.browser;let s,c,h=this.color;if(t.alpha&&1!==t.alpha&&(h=Qe.addAlpha(this.color,t.alpha)),this.config.colorBy){const e=t[this.config.colorBy.field];e&&(h=this.config.colorBy.pallete[e])}else t.color&&(h=t.color);i.fillStyle=h,i.strokeStyle=h,"SQUISHED"===this.displayMode&&void 0!==t.row?(s=this.featureHeight/2,c=this.margin+this.squishedRowHeight*t.row):"EXPANDED"===this.displayMode&&void 0!==t.row?(s=this.featureHeight,c=this.margin+this.expandedRowHeight*t.row):(s=this.featureHeight,c=this.margin);const l=c+s/2,u=s/2,f=l-u/2,p=t.exons?t.exons.length:0,d=Co(t,e,n),g=this.arrowSpacing,m="+"===t.strand?1:"-"===t.strand?-1:0;if(0===p){if(i.fillRect(d.px,c,d.pw,s),0!==m){i.fillStyle="white",i.strokeStyle="white";for(let t=d.px+g/2;t<d.px1;t+=g)vr.strokeLine(i,t-2*m,l-2,t,l),vr.strokeLine(i,t-2*m,l+2,t,l);i.fillStyle=h,i.strokeStyle=h}}else{vr.strokeLine(i,d.px+1,l,d.px1-1,l);const r=o.pixelWidth,a=Math.max(0,d.px)+g/2,v=Math.min(r,d.px1);for(let t=a;t<v;t+=g)vr.strokeLine(i,t-2*m,l-2,t,l),vr.strokeLine(i,t-2*m,l+2,t,l);for(let o=0;o<p;o++){const a=t.exons[o];let p,d=Math.round((a.start-e)/n),v=Math.round((a.end-e)/n),y=Math.max(1,v-d);if(!(d+y<0)){if(d>r)break;if(a.utr)i.fillRect(d,f,y,u);else if(a.cdStart&&(p=Math.round((a.cdStart-e)/n),i.fillRect(d,f,p-d,u),y-=p-d,d=p),a.cdEnd&&(p=Math.round((a.cdEnd-e)/n),i.fillRect(p,f,v-p,u),y-=v-p,v=p),i.fillRect(d,c,y,s),y>g+5&&0!==m){i.fillStyle="white",i.strokeStyle="white";for(let t=d+g/2;t<v;t+=g)vr.strokeLine(i,t-2*m,l-2,t,l),vr.strokeLine(i,t-2*m,l+2,t,l);i.fillStyle=h,i.strokeStyle=h}}}}const v=Math.round(o.viewportContainerX),y=a.genomicStateList?a.genomicStateList.length:1,w=v+o.viewportContainerWidth/y;o.drawLabel&&Ro.call(this,i,t,d.px,d.px1,c,v,w,o.genomicState,o)}function Ro(t,e,n,r,i,o,a,s,c){if(void 0===e.name)return;let h,l,u;r<o||n>a?(h=n,l=r):(h=Math.max(n,o),l=Math.min(r,a));let f=!1;if(s.selection&&xo.gtexLoaded&&(f=!0,u=s.selection.colorForGene(e.name)),"SQUISHED"!==this.displayMode){const n={textAlign:"SLANT"===this.labelDisplayMode?void 0:"center",fillStyle:u||e.color||this.color,strokeStyle:u||e.color||this.color};let r;"COLLAPSED"===this.displayMode&&"SLANT"===this.labelDisplayMode&&(r={rotate:{angle:45}});const o=h+(l-h)/2,a=function(t,e){return e?t+20:t+25}(i,r),s=t.measureText(e.name),p=o-s.width/2,d=o+s.width/2;(c.labelAllFeatures||p>c.rowLastX[e.row]||f)&&(c.rowLastX[e.row]=d,c.labelTransform?(t.save(),c.labelTransform(t,o),vr.fillText(t,e.name,o,a,n,void 0),t.restore()):vr.fillText(t,e.name,o,a,n,r))}}function To(t,e,n,r,i){var o,a="EXPANDED"===this.displayMode?this.expandedRowHeight:this.squishedRowHeight;"COLLAPSED"===this.display&&(o=this.margin),"SQUISHED"===this.displayMode&&void 0!==t.row?o=this.margin+a*t.row:"EXPANDED"===this.displayMode&&void 0!==t.row&&(o=this.margin+a*t.row);var s=o+.5*a,c=s-.5*a,h=s+.5*a,l=Math.round((t.junction_left-e)/n),u=Math.round((t.junction_right-e)/n);i.beginPath(),i.moveTo(l,s),i.bezierCurveTo(l,c,u,c,u,s),i.lineWidth=1+Math.log(t.num_junction_reads)/Math.log(2),i.strokeStyle="blue",i.stroke();for(var f=t.spanning_frag_coords,p=0;p<f.length;p++){var d=f[p],g=Math.round((d.left-e)/n),m=Math.round((d.right-e)/n);i.beginPath(),i.moveTo(g,s),i.bezierCurveTo(g,h,m,h,m,s),i.lineWidth=1,i.strokeStyle="purple",i.stroke()}}function Eo(t,e,n,r,i){if(!(this.config.hideAnnotatedJunctions&&"true"===t.attributes.annotated_junction||this.config.hideUnannotatedJunctions&&"false"===t.attributes.annotated_junction||this.config.hideMotifs&&this.config.hideMotifs.includes(t.attributes.motif)||this.config.hideStrand===t.strand)){var o=parseInt(t.attributes.uniquely_mapped);if(!(o<this.config.minUniquelyMappedReads)){var a=parseInt(t.attributes.multi_mapped),s=o+a;if(!(s<this.config.minTotalReads))if(!(s>0&&a/s>this.config.maxFractionMultiMappedReads))if(!(parseInt(t.attributes.maximum_spliced_alignment_overhang)<this.config.minSplicedAlignmentOverhang)){var c,h,l,u=this.margin,f=this.height,p=u+.5*f,d=u,g=u+f-10,m=Math.round((t.start-e)/n),v=Math.round((t.end-e)/n),y=(m+v)/2,w=(m+y)/2,b=(y+v)/2;void 0===this.config.thicknessBasedOn||"numUniqueReads"===this.config.thicknessBasedOn?c=o:"numReads"===this.config.thicknessBasedOn?c=s:"isAnnotatedJunction"===this.config.thicknessBasedOn&&(c="true"===t.attributes.annotated_junction?20:100),c=1+Math.log(c+1)/Math.log(12),void 0===this.config.bounceHeightBasedOn||"random"===this.config.bounceHeightBasedOn?h=(t.start+t.end)%7:"distance"===this.config.bounceHeightBasedOn?h=(t.end-t.start)/1e3:"thickness"===this.config.bounceHeightBasedOn&&(h=2*c),d+=f*Math.max(7-h,0)/10,void 0===this.config.colorBy||"numUniqueReads"===this.config.colorBy?l=o>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"numReads"===this.config.colorBy?l=s>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"isAnnotatedJunction"===this.config.colorBy?l="true"===t.attributes.annotated_junction?"#b0b0ec":"orange":"strand"===this.config.colorBy?l="+"===t.strand?"#b0b0ec":"#ecb0b0":"motif"===this.config.colorBy&&(l=ko.getColor(t.attributes.motif));var x="";void 0===this.config.labelUniqueReadCount&&void 0===this.config.labelMultiMappedReadCount&&void 0===this.config.labelTotalReadCount?x+=o+(0==a?"":"(+"+a+")"):(this.config.labelTotalReadCount?x+=s:this.config.labelUniqueReadCount&&(x+=o),this.config.labelMultiMappedReadCount&&a>0&&(x+=" (+"+a+")")),this.config.labelAnnotatedJunction&&"true"===t.attributes.annotated_junction&&(x+=this.config.labelAnnotatedJunction),this.config.labelMotif&&t.attributes.motif&&(x+=` ${t.attributes.motif}`),i.beginPath(),i.moveTo(m,g),i.bezierCurveTo(w,d,b,d,v,g),i.lineWidth=c,i.strokeStyle=l,i.stroke(),i.fillText(x,y-i.measureText(x).width/2,(7*d+p)/8)}}}}So.prototype.postInit=async function(){const t=await this.readFileHeader();t&&this.setTrackProperties(t);const e=this.config.format;return e&&"bigbed"===e.toLowerCase()&&void 0===this.visibilityWindow&&"function"==typeof this.featureSource.defaultVisibilityWindow&&(this.visibilityWindow=await this.featureSource.defaultVisibilityWindow(),this.featureSource.visibilityWindow=this.visibilityWindow),this},So.prototype.supportsWholeGenome=function(){return!1===this.config.indexed&&!1!==this.config.supportsWholeGenome},So.prototype.readFileHeader=async function(){return"function"==typeof this.featureSource.getFileHeader&&(this.header=await this.featureSource.getFileHeader()),this.header},So.prototype.getFeatures=async function(t,e,n,r){return this.featureSource.getFeatures(t,e,n,r,this.visibilityWindow)},So.prototype.computePixelHeight=function(t){if("spliceJunctions"===this.type)return this.height;if("COLLAPSED"===this.displayMode)return this.margin+this.expandedRowHeight;{let e=0;if(t&&"function"==typeof t.forEach)for(let n of t)n.row&&n.row>e&&(e=n.row);return this.margin+(e+1)*("SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight)}},So.prototype.draw=function(t){const e=t.features,n=t.context,r=t.bpPerPixel,i=t.bpStart,o=t.pixelWidth,a=t.pixelHeight,s=i+o*r+1;if(this.config.isMergedTrack||vr.fillRect(n,0,t.pixelTop,o,a,{fillStyle:"rgb(255, 255, 255)"}),e){const c=[];t.rowLastX=[];for(let n of e){const e=n.row||0;void 0===c[e]?c[e]=1:c[e]++,t.rowLastX[e]=-Number.MAX_VALUE}let h=[];for(let l of e){if(l.end<i)continue;if(l.start>s)break;const e="COLLAPSED"===this.displayMode?0:l.row,u=o/c[e];t.drawLabel=t.labelAllFeatures||u>10;const f=Math.ceil((l.end-i)/r),p=h[e];if((!p||f>p||"spliceJunctions"===this.config.type)&&(this.render.call(this,l,i,r,a,n,t),"spliceJunctions"!==this.config.type)){const t=Math.floor((l.start-i)/r);p&&t-p<=0&&(n.globalAlpha=.5,vr.strokeLine(n,t,0,t,a,{strokeStyle:"rgb(255, 255, 255)"}),n.globalAlpha=1),h[e]=f}}}},So.prototype.clickedFeatures=function(t){const e=t.y-this.margin,n=wi.prototype.clickedFeatures.call(this,t);let r;switch(this.displayMode){case"SQUISHED":r=Math.floor(e/this.squishedRowHeight);break;case"EXPANDED":r=Math.floor(e/this.expandedRowHeight);break;default:r=void 0}return n.filter((function(t){return void 0===r||void 0===t.row||r===t.row}))},So.prototype.popupData=function(t,e){e||(e=this.clickedFeatures(t));const n=t.genomicLocation,r=[];for(let t of e){const e="function"==typeof t.popupData?t.popupData(n):wi.extractPopupData(t,this.getGenomeId());e&&(r.length>0&&r.push("<HR>"),Array.prototype.push.apply(r,e))}return r},So.prototype.menuItemList=function(){const t=this,e=[];return this.render===Do&&(["function","class"].forEach((function(n){e.push({object:Ie("Color by "+n,n===t.colorBy),click:function(){t.colorBy=n,t.trackView.repaintViews()}})})),e.push({object:pe('<div class="igv-track-menu-border-top">')})),e.push({object:pe('<div class="igv-track-menu-border-top">')}),["COLLAPSED","SQUISHED","EXPANDED"].forEach((function(n){e.push({object:Ie({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[n],n===t.displayMode),click:function(){t.displayMode=n,t.config.displayMode=n,t.trackView.checkContentHeight(),t.trackView.repaintViews()}})})),e},So.prototype.description=function(){if(Do===this.render){let t="<html>"+this.name+"<hr>";return t+="<em>Color By Function:</em><br>",t+='<span style="color:red">Red</span>: Coding-Non-Synonymous, Splice Site<br>',t+='<span style="color:green">Green</span>: Coding-Synonymous<br>',t+='<span style="color:blue">Blue</span>: Untranslated<br>',t+='<span style="color:black">Black</span>: Intron, Locus, Unknown<br><br>',t+="<em>Color By Class:</em><br>",t+='<span style="color:red">Red</span>: Deletion<br>',t+='<span style="color:green">Green</span>: MNP<br>',t+='<span style="color:blue">Blue</span>: Microsatellite, Named<br>',t+='<span style="color:black">Black</span>: Indel, Insertion, SNP',t+="</html>",t}return this.name},So.prototype.dispose=function(){this.trackView=void 0};const Ao=new Set(["nonsense","missense","stop-loss","frameshift","cds-indel"]),Lo=new Set(["coding-synon"]),Io=new Set(["splice-3","splice-5"]),Mo=new Set(["untranslated-5","untranslated-3"]);function Do(t,e,n,r,i){var o,a,s,c,h=Co(t,e,n),l=this.margin,u=this.snpColors.length;switch(o="squished"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight,this.colorBy){case"function":c=t.func,a=c.split(",").map((function(t){return Ao.has(t)||Io.has(t)?u-1:Lo.has(t)?u-2:Mo.has(t)?u-3:0})).reduce((function(t,e){return Math.max(t,e)}));break;case"class":a="deletion"===(s=t.class)?u-1:"mnp"===s?u-2:"microsatellite"===s||"named"===s?u-3:0}i.fillStyle=this.snpColors[a],i.fillRect(h.px,l,h.pw,o)}const Bo=function(t,e){this.type="sequence",this.browser=e,this.removable=!1,this.config=t,this.name="",this.id="sequence",this.sequenceType=t.sequenceType||"dna",this.height=25,this.disableButtons=!1,this.order=t.order||-Number.MAX_VALUE,this.ignoreTrackMenu=!1,this.removable=!1,this.reversed=!1,this.frameTranslate=!1,this.complement={A:"T",C:"G",G:"C",T:"A"},this.translationDict={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"STOP",TAG:"STOP",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"STOP",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"}};function Fo(t){return this.color?this.color:"dna"===this.sequenceType?Oe[t]||"gray":"rgb(0, 0, 150)"}Bo.prototype.menuItemList=function(){var t=this;return[{name:t.reversed?"Forward":"Reverse",click:function(){t.reversed=!t.reversed,t.trackView.repaintViews()}},{name:t.frameTranslate?"Close Translation":"Three-frame Translate",click:function(){t.frameTranslate=!t.frameTranslate,t.frameTranslate?(t.trackView.viewports.forEach((function(t){t.setContentHeight(115)})),t.trackView.setTrackHeight(115)):(t.trackView.viewports.forEach((function(t){t.setContentHeight(25)})),t.trackView.setTrackHeight(25)),t.trackView.repaintViews()}}]},Bo.prototype.translateSequence=function(t){var e=[[],[],[]],n=this;return[0,1,2].forEach((function(r){for(var i,o,a=r;t.length-a>=3;)i={},o=t.slice(a,a+3),n.reversed&&(o=o.split("").reverse().join("")),i.codons=o,i.aminoA=n.translationDict[o.toUpperCase()],e[r].push(i),i=null,a+=3})),e},Bo.prototype.getFeatures=function(t,e,n,r){const i=this.browser;return r&&r>1?Promise.resolve(null):i.genome.sequence.getSequence(t,e,n).then((function(t){return{bpStart:e,sequence:t}}))},Bo.prototype.draw=function(t){const e=this,n=t.context;if(t.features){const r=t.features.sequence,i=t.features.bpStart,o=1+t.bpStart+t.pixelWidth*t.bpPerPixel;let a=15;for(let e=i;e<=o;e++){let o=Math.floor(e-i);if(o<r.length){let i=r[o];this.reversed&&(i=this.complement[i.toUpperCase()]);let s=e-t.bpStart,c=s/t.bpPerPixel,h=(s+1)/t.bpPerPixel,l=Fo.call(this,i);if(t.bpPerPixel>.1)vr.fillRect(n,c,5,h-c,a-5,{fillStyle:l});else{let t=.5*(c+h-n.measureText(i).width);vr.strokeText(n,i,t,a,{strokeStyle:l})}}}if(this.frameTranslate){let i;this.reversed?(i=r.split("").map((function(t){return e.complement[t]})),i=i.join("")):i=r;let o=a,s=this.translateSequence(i);for(let e of s){let r=s.indexOf(e),i=r,a=25;o=0===r?o+10:o+30;for(let r of e){let s,c=e.indexOf(r),h=c+i+2*c,l=0==c%2?"rgb(160,160,160)":"rgb(224,224,224)",u=Math.floor(h/t.bpPerPixel),f=Math.floor((h+3)/t.bpPerPixel),p=Math.round((u+f)/2);r.aminoA.indexOf("STOP")>-1?(l="rgb(255, 0, 0)",s="STOP"):s=r.aminoA,"M"===r.aminoA&&(l="rgb(0, 153, 0)",s="START"),vr.fillRect(n,u,o,f-u,a,{fillStyle:l}),t.bpPerPixel<=.1&&vr.strokeText(n,s,p-n.measureText(s).width/2,o+15)}}}}},Bo.prototype.supportsWholeGenome=function(){return!1},Bo.prototype.computePixelHeight=function(t){return this.height};const No=function(t,e){this.config=t,this.genome=e,this.path=t.url,this.groupCache={},this.datasetCache={}};function Oo(t,e){const n=t.getInt(),r=t.getInt(),i=t.getFloat(),o=[];let a=e;for(;a-- >0;){let e=n;const r=[];for(;e-- >0;)r.push(t.getFloat());o.push(r)}return{type:"fixedStep",start:r,span:i,data:o,nTracks:e,nPositions:n}}function Po(t,e){const n=t.getInt(),r=t.getFloat(),i=t.getInt(),o=[];let a=i;for(;a-- >0;)o.push(t.getInt());t.getInt();const s=[];let c=e;for(;c-- >0;){a=i;const e=[];for(;a-- >0;)e.push(t.getFloat());s.push(e)}return{type:"variableStep",tileStart:n,span:r,start:o,data:s,nTracks:e,nPositions:i}}function zo(t,e,n){const r=t.getInt();let i=r;const o=[];for(;i-- >0;)o.push(t.getInt());i=r;const a=[];for(;i-- >0;)a.push(t.getInt());t.getInt();const s=[];let c=e;for(;c-- >0;){let e=r;const n=[];for(;e-- >0;)n.push(t.getFloat());s.push(n)}if("bedWithName"===n){i=r;const e=[];for(;i-- >0;)e.push(t.getString())}return{type:n,start:o,end:a,data:s,name:name,nTracks:e,nPositions:r}}No.prototype.readHeader=async function(){if(void 0!==this.magic)return this;let t=await zn.loadArrayBuffer(this.path,un(this.config,{range:{start:0,size:64e3}})),e=new Li(new DataView(t));this.magic=e.getInt(),this.version=e.getInt(),this.indexPos=e.getLong(),this.indexSize=e.getInt();e.getInt();if(this.version>=2){let t=e.getInt();for(this.windowFunctions=[];t-- >0;)this.windowFunctions.push(e.getString())}this.trackType=e.getString(),this.trackLine=e.getString();let n=e.getInt();for(this.trackNames=[];n-- >0;)this.trackNames.push(e.getString());this.genomeID=e.getString(),this.flags=e.getInt(),this.compressed=0!=(1&this.flags),t=await zn.loadArrayBuffer(this.path,un(this.config,{range:{start:this.indexPos,size:this.indexSize}})),e=new Li(new DataView(t)),this.datasetIndex={};let r=e.getInt();for(;r-- >0;){const t=e.getString(),n=e.getLong(),r=e.getInt();this.datasetIndex[t]={position:n,size:r}}for(this.groupIndex={},r=e.getInt();r-- >0;){const t=e.getString(),n=e.getLong(),r=e.getInt();this.groupIndex[t]={position:n,size:r}}return this},No.prototype.readDataset=async function(t,e,n){const r=t+"_"+e+"_"+n;if(this.datasetCache[r])return this.datasetCache[r];{await this.readHeader();const i=this.version<2?"":"/"+e,o="all"===t.toLowerCase()||void 0===n?"0":n.toString();let a;a="raw"===e?"/"+t+"/raw":"/"+t+"/z"+o+i;const s=this.datasetIndex[a];if(void 0===s)return;const c=await zn.loadArrayBuffer(this.path,un(this.config,{range:{start:s.position,size:s.size}}));if(!c)return;const h=new Li(new DataView(c));let l=h.getInt();const u={};for(;l-- >0;)u[h.getString()]=h.getString();const f=h.getString(),p=h.getFloat();let d=h.getInt();const g=[];for(;d-- >0;)g.push({position:h.getLong(),size:h.getInt()});const m={name:a,attributes:u,dataType:f,tileWidth:p,tiles:g};return this.datasetCache[r]=m,m}},No.prototype.readRootGroup=async function(){const t=this.genome,e=this.groupCache["/"];if(e)return e;{const e=await this.readGroup("/"),n=e.chromosomes,r=e.maxZoom;r&&(this.maxZoom=Number(r));const i={};return n&&n.split(",").forEach((function(e){const n=t.getChromosomeName(e);i[n]=e})),this.chrAliasTable=i,this.groupCache["/"]=e,e}},No.prototype.readGroup=async function(t){const e=this.groupCache[t];if(e)return e;{await this.readHeader();const e=this.groupIndex[t];if(void 0===e)return;const n=await zn.loadArrayBuffer(this.path,un(this.config,{range:{start:e.position,size:e.size}}));if(!n)return;const r=new Li(new DataView(n)),i={name:t};let o=r.getInt();for(;o-- >0;){const t=r.getString(),e=r.getString();i[t]=e}return this.groupCache[t]=i,i}},No.prototype.readTiles=async function(t,e){if(t.sort((function(t,e){return t.position-e.position})),0===(t=t.filter((function(t){return t.size>0}))).length)return Promise.resolve([]);const n=t[0],r=t[t.length-1],i=n.position,o=r.position+r.size-i,a=await zn.loadArrayBuffer(this.path,un(this.config,{range:{start:i,size:o}})),s=[];for(let n of t){const t=n.position-i,r=n.size;if(r>0){let n;if(this.compressed){n=new qe.Inflate(new Uint8Array(a,t,r)).decompress().buffer}else n=a.slice(t,t+r);const i=new Li(new DataView(n)),o=i.getString();let c;switch(o){case"fixedStep":c=Oo(i,e);break;case"variableStep":c=Po(i,e);break;case"bed":case"bedWithName":c=zo(i,e,o);break;default:throw"Unknown tile type: "+o}s.push(c)}}return s},No.prototype.readTile=async function(t,e){let n=await zn.loadArrayBuffer(this.path,un(this.config,{range:{start:t.position,size:t.size}}));if(this.compressed){n=new qe.Inflate(new Uint8Array(n)).decompress().buffer}const r=new Li(new DataView(n)),i=r.getString();switch(i){case"fixedStep":return Oo(r,e);case"variableStep":return Po(r,e);case"bed":case"bedWithName":return zo(r,e,i);default:throw"Unknown tile type: "+i}};const $o=function(t,e){this.genome=e,this.windowFunction=t.windowFunction||"mean",this.reader=new No(t,e)};function Uo(t,e,n,r,i,o){const a=t.nPositions,s=t.start,c=t.end,h=t.data[0];for(let t=0;t<a;t++){const i=s[t],a=c[t];if(!(a<n)){if(i>r)break;o.push({chr:e,start:i,end:a,value:h[t]})}}}function Ho(t,e,n,r,i,o){const a=t.nPositions,s=t.start,c=t.span,h=t.data[0];for(let t=0;t<a;t++){const i=s[t],a=i+c;if(!(a<n)){if(i>r)break;o.push({chr:e,start:i,end:a,value:h[t]})}}}function jo(t,e,n,r,i,o){const a=t.nPositions;let s=t.start;const c=t.span,h=t.data[0];for(let t=0;t<a;t++){const i=s+c;if(s>r)break;i>=n&&(Number.isNaN(h[t])||o.push({chr:e,start:s,end:i,value:h[t]})),s=i}}$o.prototype.getFeatures=async function(t,e,n,r){await m.call(this);const i=new yn(t,e,n),o=this.genome;if("all"===t.toLowerCase())return[];i.bpPerPixel=r;await m.call(this);const a=function(t,e,n){var r=n.getChromosome(t).bpLength;return Math.ceil(Math.log(Math.max(0,r/(700*e)))/Vo)}(t,r,o);let s=this.reader.chrAliasTable[t],c=this.reader.maxZoom;void 0===s&&(s=t),void 0===c&&(c=-1);const h=a>c?"raw":this.windowFunction,l=await this.reader.readDataset(s,h,a);if(null==l)return[];const u=l.tileWidth,f=Math.floor(e/u),p=Math.floor(n/u),d=await this.reader.readTiles(l.tiles.slice(f,p+1),1),g=[];for(let i of d)switch(i.type){case"bed":Uo(i,t,e,n,r,g);break;case"variableStep":Ho(i,t,e,n,r,g);break;case"fixedStep":jo(i,t,e,n,r,g);break;default:throw"Unknown tile type: "+i.type}return g.sort((function(t,e){return t.start-e.start})),g;async function m(){return this.rootGroup?this.rootGroup:(this.rootGroup=await this.reader.readRootGroup(),this.rootGroup)}},$o.prototype.supportsWholeGenome=function(){return!1};var Vo=Math.log(2);function qo(t,e,n){var r,i,o,a,s,c,h,l={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};function u(t){return 0===t?"0":Math.abs(t)>=10?t.toFixed():Math.abs(t)>=1?t.toFixed(1):t.toFixed(2)}void 0!==this.dataRange&&void 0!==this.dataRange.max&&void 0!==this.dataRange.min&&(vr.fillRect(t,0,0,e,n,{fillStyle:"rgb(255, 255, 255)"}),r=(h=.95*e)-8,.01,s={x:i=h,y:o=a=.01*n},vr.strokeLine(t,r,o,i,a,l),vr.fillText(t,u(this.dataRange.max),r+4,o+12,l),c={x:i,y:o=a=.99*n},vr.strokeLine(t,r,o,i,a,l),vr.fillText(t,u(this.dataRange.min),r+4,o-4,l),vr.strokeLine(t,s.x,s.y,c.x,c.y,l))}const Go=Ae.dataRangeMenuItem,Wo=hn(wi,(function(t,e){this.type="wig",this.featureType="numeric",void 0===t.color&&(t.color="rgb(150,150,150)"),void 0===t.height&&(t.height=50),wi.call(this,t,e);const n=t.format?t.format.toLowerCase():t.format;this.featureSource="bigwig"===n?new bo(t,e.genome):"tdf"===n?new $o(t,e.genome):new io(t,e.genome),this.autoscale=t.autoscale||void 0===t.max,this.autoscale||(this.dataRange={min:t.min||0,max:t.max}),this.windowFunction=t.windowFunction||"mean",this.paintAxis=qo,this.graphType=t.graphType||"bar"}));function Zo(t){this.thresholds=t.thresholds,this.colors=t.colors}function Ko(t){this.scale=t,this.lowColor="rgb("+t.lowR+","+t.lowG+","+t.lowB+")",this.highColor="rgb("+t.highR+","+t.highG+","+t.highB+")",this.diff=t.high-t.low}Wo.prototype.postInit=async function(){const t=await this.getFileHeader();t&&this.setTrackProperties(t)},Wo.prototype.getFeatures=async function(t,e,n,r){return this.featureSource.getFeatures(t,e,n,r,this.windowFunction)},Wo.prototype.menuItemList=function(){var t=this,e=[];return e.push(Go(this.trackView)),e.push({object:Ie("Autoscale",t.autoscale),click:function(){t.autoscale=!t.autoscale,t.config.autoscale=t.autoscale,t.trackView.setDataRange(void 0,void 0,t.autoscale)}}),e},Wo.prototype.getFileHeader=async function(){return"function"==typeof this.featureSource.getFileHeader&&(this.header=await this.featureSource.getFileHeader()),this.header},Wo.prototype.draw=function(t){let e=this;const n=t.features,r=t.context,i=t.bpPerPixel,o=t.bpStart,a=t.pixelWidth,s=t.pixelHeight,c=o+a*i+1;let h,l=-1,u=-1;"string"==typeof e.color&&e.color.startsWith("rgb(")&&(h=Qe.addAlpha(e.color,.1));const f=t=>(e.dataRange.max-t)/(e.dataRange.max-e.dataRange.min)*s;if(n&&n.length>0&&(void 0===e.dataRange.min&&(e.dataRange.min=0),e.dataRange.max>e.dataRange.min)){if(p.end<o)return;if(p.start>c)return;for(let t of n)p(t);if(e.dataRange.min<0){const n=e.dataRange.max/(e.dataRange.max-e.dataRange.min)*t.pixelHeight;vr.strokeLine(r,0,n,t.pixelWidth,n,{strokeStyle:h})}}function p(t){if(t.value<e.dataRange.min)return;const n=f(t.value),a=function(t){return Math.floor((t.start-o)/i)}(t);if(isNaN(a))return;const s=f(0)-n,c=function(t,e){const n=Math.ceil((t.end-o)/i);return Math.max(1,n-e)}(t,a);let h=t.value<0&&e.altColor?e.altColor:e.color;const p="function"==typeof h?h(t.value):h;if("points"===e.graphType){const t=e.config.pointSize||3,i=a+c/2;vr.fillCircle(r,i,n,t/2,{fillStyle:p,strokeStyle:p})}else{const e=a+c;(e>l||t.value>=0&&t.value>u||t.value<0&&t.value<1)&&vr.fillRect(r,a,n,c,s,{fillStyle:p}),u=t.value,l=e}}!function(t){if(e.config.hasOwnProperty("guideLines"))for(let n of e.config.guideLines)if(n.hasOwnProperty("color")&&n.hasOwnProperty("y")&&n.hasOwnProperty("dotted")){let e=f(n.y),r={strokeStyle:n.color,strokeWidth:2};n.dotted?vr.dashedLine(t.context,0,e,t.pixelWidth,e,5,r):vr.strokeLine(t.context,0,e,t.pixelWidth,e,r)}}(t)},Wo.prototype.popupData=function(t,e){if(e||(e=this.clickedFeatures(t)),e&&e.length>0){let n=[],r=function(t,e,n){var r,i,o=0,a=t.length-1,s=o+a>>1;for(;!c(t[s],e,n)&&o<a;)e<t[s].start?a=s-1:e>t[s].end&&(o=s+1),s=o+a>>1;if(c(t[s],e,n)){if(c(r=t[s],e,0))return r;for(i=s;i-- >=0&&(c(t[i]),!n);){if(c(t[i],e,0))return t[i];for(h(t[i],e)<h(r,e)&&(r=t[i]),i=s;i++<t.length&&(c(t[i]),!n);){if(c(t[i],e,0))return t[i];h(t[i],e)<h(r,e)&&(r=t[i])}}return r}return;function c(t,e,n){return e>=t.start-n&&e<=t.end+n}function h(t,e){return Math.min(Math.abs(t.start-e),Math.abs(t.end-e))}}(e,t.genomicLocation,2*t.viewport.genomicState.referenceFrame.bpPerPixel);if(r){let t=r.end-r.start==1?Ze(r.start+1):Ze(r.start+1)+"-"+Ze(r.end);n.push({name:"Position:",value:t}),n.push({name:"Value:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",value:Ze(r.value)})}return n}return[]},Wo.prototype.dispose=function(){this.trackView=void 0},Wo.prototype.getState=function(){let t=this.config;return t.autoscale=this.autoscale,!this.autoscale&&this.dataRange&&(t.min=this.dataRange.min,t.max=this.dataRange.max),t},Wo.prototype.supportsWholeGenome=function(){return"function"==typeof this.featureSource.supportsWholeGenome&&this.featureSource.supportsWholeGenome()},Zo.prototype.getColor=function(t){for(let e of this.thresholds)if(t<e)return this.colors[this.thresholds.indexOf(e)];return this.colors[this.colors.length-1]},Ko.prototype.getColor=function(t){var e,n=this.scale;return t<=n.low?this.lowColor:t>=n.high?this.highColor:(e=(t-n.low)/this.diff,"rgb("+Math.floor(n.lowR+e*(n.highR-n.lowR))+","+Math.floor(n.lowG+e*(n.highG-n.lowG))+","+Math.floor(n.lowB+e*(n.highB-n.lowB))+")")};const Xo=hn(wi,(function(t,e){if(wi.call(this,t,e),this.isLog=t.isLog,this.displayMode=t.displayMode||"SQUISHED",this.maxHeight=t.maxHeight||500,this.squishedRowHeight=t.sampleSquishHeight||t.squishedRowHeight||2,this.expandedRowHeight=t.sampleExpandHeight||t.expandedRowHeight||12,this.posColorScale=t.posColorScale||new Ko({low:.1,lowR:255,lowG:255,lowB:255,high:1.5,highR:255,highG:0,highB:0}),this.negColorScale=t.negColorScale||new Ko({low:-1.5,lowR:0,lowG:0,lowB:255,high:-.1,highR:255,highG:255,highB:255}),this.sampleKeys=[],this.featureSource=new io(this.config,e.genome),t.sort){const e=t.sort;this.sortSamples(e.chr,e.start,e.end,e.direction)}}));Xo.prototype.menuItemList=function(){const t=this,e=[],n={SQUISHED:"Squish",EXPANDED:"Expand",FILL:"Fill"};return e.push("<hr/>"),e.push("Sample Height"),["SQUISHED","EXPANDED","FILL"].forEach((function(r){e.push({object:Ie(n[r],r===t.displayMode),click:function(){t.displayMode=r,t.config.displayMode=r,t.trackView.checkContentHeight(),t.trackView.repaintViews()}})})),e},Xo.prototype.getFeatures=function(t,e,n){return this.featureSource.getFeatures(t,e,n)},Xo.prototype.draw=function(t){const e=this,n=t.context,r=t.pixelWidth,i=t.pixelHeight;vr.fillRect(n,0,t.pixelTop,r,i,{fillStyle:"rgb(255, 255, 255)"});const o=t.features;if(o&&o.length>0){void 0===e.isLog&&function(t){if(void 0===e.isLog){e.isLog=!1;for(let n of t)if(n.value<0)return void(e.isLog=!0)}}(o);const i=t.bpPerPixel,a=t.bpStart,s=a+r*i+1,c=i;this.updateSampleKeys(o);const h={};let l,u;switch(this.sampleKeys.forEach((function(t,e){h[t]=e})),this.displayMode){case"FILL":l=t.pixelHeight/this.sampleKeys.length,u=0;break;case"SQUISHED":l=this.squishedRowHeight,u=0;break;default:l=this.expandedRowHeight,u=1}for(let t of o){if(t.end<a)continue;if(t.start>s)break;const r=t.sampleKey||t.sample;t.row=h[r];const i=h[r]*l+u;let o,f=t.value;e.isLog||(f=je(f/2)),o=f<-.1?e.negColorScale.getColor(f):f>.1?e.posColorScale.getColor(f):"white";const p=Math.max(t.start,a),d=Math.round((p-a)/c),g=Math.min(t.end,s),m=Math.round((g-a)/c),v=Math.max(1,m-d);n.fillStyle=o;let y=l;if(l<.25){const t=.1+2*Math.abs(f);y=Math.min(1,t*l)}t.pixelRect={x:d,y:i,w:v,h:y-2*u},n.fillRect(d,i,v,y-2*u)}}},Xo.prototype.computePixelHeight=function(t){if(!t)return 0;const e="SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight;return this.updateSampleKeys(t),this.sampleKeys.length*e},Xo.prototype.sortSamples=async function(t,e,n,r){const i=await this.featureSource.getFeatures(t,e,n);this.updateSampleKeys(i);const o={},a=n-e+1;for(let t of i){if(t.end<e)continue;if(t.start>n)break;const r=Math.max(e,t.start),i=(Math.min(n,t.end)-r)/a,s=t.sampleKey||t.sample,c=o[s]||0;o[s]=c+i*t.value}const s="ASC"===r?1:-1;this.sampleKeys.sort((function(t,e){let n=o[t],r=o[e];return n||(n=s*Number.MAX_VALUE),r||(r=s*Number.MAX_VALUE),n===r?0:n>r?s:-1*s})),this.trackView.repaintViews()},Xo.prototype.clickedFeatures=function(t){const e=wi.prototype.clickedFeatures.call(this,t);return n=e,r=t.y,n.filter((function(t){const e=t.pixelRect;return e&&r>=e.y&&r<=e.y+e.h}));var n,r},Xo.prototype.popupData=function(t,e){e||(e=this.clickedFeatures(t));const n=[];return e.forEach((function(t){!function(t,e){const n=new Set(["row","color","sampleKey","uniqueSampleKey","uniquePatientKey"]);let r;t.hasOwnProperty("realChr")?(r=Object.assign({},t),r.chr=t.realChr,r.start=t.realStart,r.end=t.realEnd,delete r.realChr,delete r.realStart,delete r.realEnd):r=t;for(let t of Object.keys(r))!n.has(t)&&ln(r[t])&&e.push({name:t,value:r[t]})}(t,n)})),n},Xo.prototype.contextMenuItemList=function(t){const e=this,n=t.viewport.genomicState.referenceFrame,r=t.genomicLocation,i=this.config.sort?"ASC"===this.config.sort.direction?"DESC":"ASC":"DESC",o=n.toBP(2.5);return[{label:"Sort by value",click:function(t){const a={direction:i,chr:n.chrName,start:r-o,end:r+o};!function(t){e.sortSamples(t.chr,t.start,t.end,t.direction)}(a),e.config.sort=a}}]},Xo.prototype.supportsWholeGenome=function(){return this.featureSource.supportsWholeGenome()},Xo.prototype.updateSampleKeys=function(t){const e=new Set(this.sampleKeys);for(let n of t){const t=n.sampleKey||n.sample;e.has(t)||(e.add(t),this.sampleKeys.push(t))}};const Yo=hn(wi,(function(t,e){var n=this;t.tracks&&(wi.call(this,t,e),this.tracks=[],t.tracks.forEach((function(t){t.type||zr(t),t.isMergedTrack=!0;var r=e.createTrack(t);r?(r.autoscale=!1,n.tracks.push(r)):console.warn("Could not create track "+t)})),Object.defineProperty(this,"height",{get(){return this._height},set(t){this._height=t;for(let e of this.tracks)e.height=t,e.config.height=t}}),this.height=t.height||100)}));Yo.prototype.getFeatures=function(t,e,n,r){var i=this.tracks.map((function(i){return i.getFeatures(t,e,n,r)}));return Promise.all(i)},Yo.prototype.draw=function(t){var e,n,r,i,o;for(r=t.features,o=function(t,e){var n=0,r=-Number.MAX_VALUE;return e.forEach((function(t,e){t.forEach((function(t){void 0===t.value||Number.isNaN(t.value)||(n=Math.min(n,t.value),r=Math.max(r,t.value))}))})),{min:n,max:r}}(t.genomicState.chromosome.name,r),e=0,n=this.tracks.length;e<n;e++)(i=Object.assign({},t)).features=r[e],this.tracks[e].dataRange=o,this.tracks[e].draw(i)},Yo.prototype.paintAxis=function(t,e,n){var r,i,o;for(!0,r=0,i=this.tracks.length;r<i;r++)if("function"==typeof(o=this.tracks[r]).paintAxis){o.paintAxis(t,e,n);break}},Yo.prototype.popupData=function(t){for(var e=[],n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n].popupData(t);e.push(...i)}return e};const Qo=function(t){this.paired=!0,this.firstAlignment=t,this.chr=t.chr,this.readName=t.readName,t.start<t.mate.position?(this.start=t.start,this.scStart=t.scStart,this.connectingStart=t.start+t.lengthOnRef,this.connectingEnd=t.mate.position):(this.start=t.mate.position,this.scStart=this.start,this.connectingStart=t.mate.position,this.connectingEnd=t.start),this.end=Math.max(t.mate.position,t.start+t.lengthOnRef),this.lengthOnRef=this.end-this.start;let e=Math.max(this.end,t.scStart+t.scLengthOnRef);this.scLengthOnRef=e-this.scStart};function Jo(t){return t.isPaired()&&t.mate&&t.isMateMapped()&&t.chr===t.mate.chr&&(t.isFirstOfPair()||t.isSecondOfPair())&&!(t.isSecondary()||t.isSupplementary())}Qo.prototype.setSecondAlignment=function(t){this.secondAlignment=t;const e=this.firstAlignment;t.start>e.start?this.connectingEnd=t.start:this.connectingStart=t.start+t.lengthOnRef,this.start=Math.min(e.start,t.start),this.end=Math.max(e.start+e.lengthOnRef,t.start+t.lengthOnRef),this.lengthOnRef=this.end-this.start,this.scStart=Math.min(e.scStart,t.scStart);const n=Math.max(e.scStart+e.scLengthOnRef,t.scStart+t.scLengthOnRef);this.scLengthOnRef=n-this.scStart},Qo.prototype.popupData=function(t){var e=[];return e=e.concat(this.firstAlignment.popupData(t)),this.secondAlignment&&(e.push("-------------------------------"),e=e.concat(this.secondAlignment.popupData(t))),e},Qo.prototype.isPaired=function(){return!0},Qo.prototype.firstOfPairStrand=function(){return this.firstAlignment.isFirstOfPair()?this.firstAlignment.strand:this.secondAlignment&&this.secondAlignment.isFirstOfPair()?this.secondAlignment.strand:this.firstAlignment.mate.strand};const ta=function(t,e,n,r,i,o,a){this.chr=t,this.start=Math.floor(e),this.end=Math.ceil(n),this.length=n-e,this.alleleFreqThreshold=a,this.coverageMap=new ra(t,e,n,this.alleleFreqThreshold),this.alignments=[],this.downsampledIntervals=[],this.samplingWindowSize=void 0===r?100:r,this.samplingDepth=void 0===i?1e3:i,this.pairsSupported=void 0===o||o,this.paired=!1,this.pairsCache={},this.downsampledReads=new Set,this.currentBucket=new na(this.start,this.start+this.samplingWindowSize,this),this.filter=function(t){return t.isMapped()&&!t.isFailsVendorQualityCheck()},this.pairedEndStats=new aa};function ea(){this.alignments=this.alignments.concat(this.currentBucket.alignments),this.currentBucket.downsampledCount>0&&this.downsampledIntervals.push(new oa(this.currentBucket.start,this.currentBucket.end,this.currentBucket.downsampledCount)),this.paired=this.paired||this.currentBucket.paired}function na(t,e,n){this.start=t,this.end=e,this.alignments=[],this.downsampledCount=0,this.samplingDepth=n.samplingDepth,this.pairsSupported=n.pairsSupported,this.downsampledReads=n.downsampledReads,this.pairsCache=n.pairsCache}function ra(t,e,n,r){this.chr=t,this.bpStart=e,this.length=n-e,this.coverage=new Array(this.length),this.maximum=0,this.threshold=r,this.qualityWeight=!0}function ia(t){this.posA=0,this.negA=0,this.posT=0,this.negT=0,this.posC=0,this.negC=0,this.posG=0,this.negG=0,this.posN=0,this.negN=0,this.pos=0,this.neg=0,this.qualA=0,this.qualT=0,this.qualC=0,this.qualG=0,this.qualN=0,this.qual=0,this.total=0,this.del=0,this.ins=0,this.t=t}function oa(t,e,n){this.start=t,this.end=e,this.counts=n}function aa(t,e){this.totalCount=0,this.frCount=0,this.rfCount=0,this.ffCount=0,this.sumF=0,this.sumF2=0}ta.prototype.push=function(t){!1!==this.filter(t)&&(t.isPaired()&&this.pairedEndStats.push(t),this.coverageMap.incCounts(t),this.pairsSupported&&this.downsampledReads.has(t.readName)||(t.start>=this.currentBucket.end&&(ea.call(this),this.currentBucket=new na(t.start,t.start+this.samplingWindowSize,this)),this.currentBucket.addAlignment(t)))},ta.prototype.forEach=function(t){this.alignments.forEach(t)},ta.prototype.finish=function(){void 0!==this.currentBucket&&ea.call(this),this.alignments.sort((function(t,e){return t.start-e.start})),this.pairsCache=void 0,this.downsampledReads=void 0,this.pairedEndStats.compute()},ta.prototype.contains=function(t,e,n){return this.chr===t&&this.start<=e&&this.end>=n},ta.prototype.hasDownsampledIntervals=function(){return this.downsampledIntervals&&this.downsampledIntervals.length>0},na.prototype.addAlignment=function(t){var e,n,r;if(this.pairsSupported&&Jo(t)&&(r=this.pairsCache[t.readName]))return r.setSecondAlignment(t),void(this.pairsCache[t.readName]=void 0);this.alignments.length<this.samplingDepth?this.pairsSupported&&Jo(t)?(r=new Qo(t),this.paired=!0,this.pairsCache[t.readName]=r,this.alignments.push(r)):this.alignments.push(t):((e=Math.floor(Math.random()*(this.samplingDepth+this.downsampledCount-1)))<this.samplingDepth?(n=this.alignments[e],this.pairsSupported&&Jo(t)?(void 0!==this.pairsCache[n.readName]&&(this.pairsCache[n.readName]=void 0),r=new Qo(t),this.paired=!0,this.pairsCache[t.readName]=r,this.alignments[e]=r):this.alignments[e]=t,this.downsampledReads.add(n.readName)):this.downsampledReads.add(t.readName),this.downsampledCount++)},ra.prototype.incCounts=function(t){var e=this;if(void 0===t.blocks?n(t):t.blocks.forEach((function(t){n(t)})),t.gaps)for(let n of t.gaps)if("D"===n.type){const t=n.start-e.bpStart;for(let r=t;r<t+n.len;r++)r<0||(this.coverage[r]||(this.coverage[r]=new ia(e.threshold)),this.coverage[r].del++)}if(t.insertions)for(let n of t.insertions){const t=n.start-this.bpStart;t<0||(this.coverage[t]||(this.coverage[t]=new ia(e.threshold)),this.coverage[t].ins++)}function n(n){if("S"===n.type)return;const r=t.seq,i=t.qual,o=n.seqOffset;for(let a=n.start-e.bpStart,s=0;s<n.len;a++,s++){e.coverage[a]||(e.coverage[a]=new ia(e.threshold));const n=r.charAt(o+s),c=t.strand?"pos"+n:"neg"+n,h=i&&o+s<i.length?i[o+s]:30;e.coverage[a][c]+=1,e.coverage[a]["qual"+n]+=h,e.coverage[a].total+=1,e.coverage[a].qual+=h,e.maximum=Math.max(e.coverage[a].total,e.maximum)}}},ia.prototype.isMismatch=function(t){var e,n=this,r=this.t*(this.qual?this.qual:this.total);return e=0,["A","T","C","G"].forEach((function(r){r!==t&&(e+=n.qual?n["qual"+r]:n["pos"+r]+n["neg"+r])})),e>=r},oa.prototype.popupData=function(t){return[{name:"start",value:this.start+1},{name:"end",value:this.end},{name:"# downsampled:",value:this.counts}]},aa.prototype.push=function(t){if(t.isProperPair()){var e=Math.abs(t.fragmentLength);this.sumF+=e,this.sumF2+=e*e;var n=t.pairOrientation;if("string"==typeof n&&4===n.length)switch(""+n.charAt(0)+n.charAt(2)){case"FF":case"RR":this.ffCount++;break;case"FR":this.frCount++;break;case"RF":this.rfCount++}this.totalCount++}},aa.prototype.compute=function(){if(this.totalCount>100){this.ffCount/this.totalCount>.9?this.orienation="ff":this.frCount/this.totalCount>.9?this.orienation="fr":this.rfCount/this.totalCount>.9&&(this.orienation="rf");var t=this.sumF/this.totalCount,e=Math.sqrt((this.totalCount*this.sumF2-this.sumF*this.sumF)/(this.totalCount*this.totalCount));this.lowerFragmentLength=t-3*e,this.upperFragmentLength=t+3*e}};function sa(){this.hidden=!1}function ca(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(e>=r.start&&e<r.start+r.len)return r}}function ha(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function la(t,e){return t[e+1]<<8|t[e]}function ua(t,e){return new DataView(t.buffer).getFloat32(e,!0)}sa.prototype.isMapped=function(){return 0==(4&this.flags)},sa.prototype.isPaired=function(){return 0!=(1&this.flags)},sa.prototype.isProperPair=function(){return 0!=(2&this.flags)},sa.prototype.isFirstOfPair=function(){return 0!=(64&this.flags)},sa.prototype.isSecondOfPair=function(){return 0!=(128&this.flags)},sa.prototype.isSecondary=function(){return 0!=(256&this.flags)},sa.prototype.isSupplementary=function(){return 0!=(2048&this.flags)},sa.prototype.isFailsVendorQualityCheck=function(){return 0!=(512&this.flags)},sa.prototype.isDuplicate=function(){return 0!=(1024&this.flags)},sa.prototype.isMateMapped=function(){return 0==(8&this.flags)},sa.prototype.isNegativeStrand=function(){return 0!=(16&this.flags)},sa.prototype.isMateNegativeStrand=function(){return 0!=(32&this.flags)},sa.prototype.tags=function(){return this.tagDict||(this.tagBA?(this.tagDict=function(t){var e=0,n=t.length,r={};for(;e<n;){var i,o=String.fromCharCode(t[e])+String.fromCharCode(t[e+1]),a=String.fromCharCode(t[e+2]);if("A"===a)i=String.fromCharCode(t[e+3]),e+=4;else if("i"===a||"I"===a)i=ha(t,e+3),e+=7;else if("c"===a||"C"===a)i=t[e+3],e+=4;else if("s"===a||"S"===a)i=la(t,e+3),e+=5;else if("f"===a)i=ua(t,e+3),e+=7;else if("Z"===a)for(e+=3,i="";;){var s=t[e++];if(0===s)break;i+=String.fromCharCode(s)}else i="B"===a?"Arrays not currently supported":"Error unknown type: "+a;r[o]=i}return r}(this.tagBA),this.tagBA=void 0):this.tagDict={}),this.tagDict},sa.prototype.popupData=function(t){const e=[];if(t=Math.floor(t),this.insertions){const r=this.seq;for(let i of this.insertions){var n=i.start;if(t===n||t===n-1)return e.push({name:"Insertion",value:r.substr(i.seqOffset,i.len)}),e.push({name:"Location",value:n}),e}}e.push({name:"Read Name",value:this.readName}),e.push("<hr>"),e.push({name:"Alignment Start",value:Ze(1+this.start),borderTop:!0}),e.push({name:"Read Strand",value:!0===this.strand?"(+)":"(-)",borderTop:!0}),e.push({name:"Cigar",value:this.cigar}),e.push({name:"Mapped",value:o(this.isMapped())}),e.push({name:"Mapping Quality",value:this.mq}),e.push({name:"Secondary",value:o(this.isSecondary())}),e.push({name:"Supplementary",value:o(this.isSupplementary())}),e.push({name:"Duplicate",value:o(this.isDuplicate())}),e.push({name:"Failed QC",value:o(this.isFailsVendorQualityCheck())}),this.isPaired()&&(e.push("<hr>"),e.push({name:"First in Pair",value:!this.isSecondOfPair(),borderTop:!0}),e.push({name:"Mate is Mapped",value:o(this.isMateMapped())}),this.pairOrientation&&e.push({name:"Pair Orientation",value:this.pairOrientation}),this.isMateMapped()&&(e.push({name:"Mate Chromosome",value:this.mate.chr}),e.push({name:"Mate Start",value:this.mate.position+1}),e.push({name:"Mate Strand",value:!0===this.mate.strand?"(+)":"(-)"}),e.push({name:"Insert Size",value:this.fragmentLength}))),e.push("<hr>");const r=this.tags();let i=!0;for(let t in r)r.hasOwnProperty(t)&&(i?(e.push({name:t,value:r[t],borderTop:!0}),i=!1):e.push({name:t,value:r[t]}));return e.push("<hr>"),e.push({name:"Genomic Location: ",value:Ze(1+t)}),e.push({name:"Read Base:",value:this.readBaseAt(t)}),e.push({name:"Base Quality:",value:this.readBaseQualityAt(t)}),e;function o(t){return t?"Yes":"No"}},sa.prototype.readBaseAt=function(t){const e=ca(this.blocks,t);if(e){if("*"===this.seq)return"*";{const n=e.seqIndexAt(t);return this.seq[n]}}},sa.prototype.readBaseQualityAt=function(t){const e=ca(this.blocks,t);if(e){if("*"===this.qual)return 30;{const n=e.seqIndexAt(t);return n>=0&&this.qual&&n<this.qual.length?this.qual[n]:30}}};const fa=function(t){t&&Object.assign(this,t)};function pa(t){t||(t={}),this.vendorFailed=void 0===t.vendorFailed||t.vendorFailed,this.duplicates=void 0===t.duplicates||t.duplicates,this.secondary=t.secondary||!1,this.supplementary=t.supplementary||!1,this.mqThreshold=void 0===t.mqThreshold?0:t.mqThreshold,t.readgroups&&(this.readgroups=new Set(t.readgroups))}fa.prototype.seqIndexAt=function(t){return Math.floor(t)-this.start+this.seqOffset},pa.prototype.pass=function(t){if(this.vendorFailed&&t.isFailsVendorQualityCheck())return!1;if(this.duplicates&&t.isDuplicate())return!1;if(this.secondary&&t.isSecondary())return!1;if(this.supplementary&&t.isSupplementary())return!1;if(t.mq<this.mqThreshold)return!1;if(this.readgroups){var e=t.tags().RG;return this.readgroups.has(e)}return!0};const da=["=","A","C","x","G","x","x","x","T","x","x","x","x","x","x","N"],ga=["M","I","D","N","S","H","P","=","X","?","?","?","?","?","?","?"],ma=wa(new Uint8Array([66,65,77,1]),0),va={readHeader:function(t,e,n){return zn.loadArrayBuffer(t,e).then((function(t){var e;return e=Cn(t),va.decodeBamHeader(e,n)}))},decodeBamHeader:function(t,e){var n,r,i,o,a;if((n=wa(t,0))!==ma)throw new Error("BAM header errror: bad magic number.  This could be caused by either a corrupt or missing file.");r=wa(t,4);for(var s=0;s<r;++s)String.fromCharCode(t[s+8]);var c=wa(t,r+8),h=r+12;for(i={},o=[],a={},s=0;s<c;++s){for(var l=wa(t,h),u="",f=0;f<l-1;++f)u+=String.fromCharCode(t[h+4+f]);wa(t,h+l+4);i[u]=s,o[s]=u,e&&(a[e.getChromosomeName(u)]=u),h=h+8+l}return{magicNumber:n,size:h,chrNames:o,chrToIndex:i,chrAliasTable:a}},bam_tag2cigar:function(t,e,n,r,i,o){function a(t){return"C"===t||"c"===t||"A"===t?1:"S"===t||"s"===t?2:"I"===t||"i"===t||"f"===t?4:0}if(1!==o.length||i.start<0)return!1;for(var s=n+(r+1>>1)+r;s+4<e;){if("CG"===String.fromCharCode(t[s])+String.fromCharCode(t[s+1]))break;var c=String.fromCharCode(t[s+2]);if("B"===c)s+=8+a(c=String.fromCharCode(t[s+3]))*wa(t,s+4);else if("Z"===c||"H"===c)for(s+=3;0!==t[s++];);else s+=3+a(c)}if(s>=e)return!1;if("B"!==String.fromCharCode(t[s+2])||"I"!==String.fromCharCode(t[s+3]))return!1;var h=wa(t,s+4),l=s+8;if(l+4*h>e)return!1;var u="",f=0;o.length=0,s=l;for(var p=0;p<h;++p,s+=4){var d=wa(t,s),g=d>>4,m=ga[15&d];"M"!==m&&"EQ"!==m&&"X"!==m&&"D"!==m&&"N"!==m&&"="!==m||(f+=g),u=u+g+m,o.push({len:g,ltr:m})}return i.cigar=u,i.lengthOnRef=f,!0},decodeBamRecords:function(t,e,n,r,i,o,a,s){for(;e<t.length;){const f=e+wa(t,e)+4,p=new sa,d=wa(t,e+4),g=wa(t,e+8);if(f>t.length)return;if(d<0){e=f;continue}if(void 0!==i&&(d>i||g>a))return!0;if(void 0!==i&&d<i){e=f;continue}const m=wa(t,e+12),v=(65280&m)>>8,y=255&m,w=wa(t,e+16),b=(4294901760&w)>>16,x=65535&w,k=wa(t,e+20),S=wa(t,e+24),C=wa(t,e+28),_=wa(t,e+32);let R=[];for(let n=0;n<y-1;++n)R.push(String.fromCharCode(t[e+36+n]));R=R.join("");let T=0,E="",A=e+36+y;const L=[];let I;for(let e=0;e<x;++e){var c=wa(t,A),h=c>>4,l=ga[15&c];"M"!==l&&"EQ"!==l&&"X"!==l&&"D"!==l&&"N"!==l&&"="!==l||(T+=h),E=E+h+l,A+=4,I={len:h,ltr:l},L.push(I)}if(p.chr=r[d],p.start=g,p.flags=b,p.strand=!(16&b),p.readName=R,p.cigar=E,p.lengthOnRef=T,p.fragmentLength=_,p.mq=v,va.bam_tag2cigar(t,f,A,k,p,L),p.end=p.start+p.lengthOnRef,p.end<o){e=f;continue}let M=[];const D=k+1>>1;for(let e=0;e<D;++e){var u=t[A+e];M.push(da[(240&u)>>4]),M.push(da[15&u])}M=M.slice(0,k).join(""),A+=D;const B=[];for(let e=0;e<k;++e)B.push(t[A+e]);A+=k,S>=0&&(p.mate={chr:r[S],position:C,strand:!(32&b)}),p.seq=M,p.qual=B,p.tagBA=new Uint8Array(t.buffer.slice(A,f)),this.setPairOrientation(p),(void 0===s||s.pass(p))&&(ya(p,L),n.push(p)),e=f}},decodeSamRecords:function(t,e,n,r,i,o){var a,s,c,h,l,u,f,p,d,g;for(h=(a=Ke(t)).length,!1,s=0;s<h;s++)if(l=a[s].split("\t"),(d=new sa).chr=l[2],d.start=Number.parseInt(l[3])-1,d.flags=Number.parseInt(l[1]),d.readName=l[0],d.strand=!(16&d.flags),d.mq=Number.parseInt(l[4]),d.cigar=l[5],d.fragmentLength=Number.parseInt(l[8]),d.seq=l[9],"*"!==d.chr&&d.isMapped()&&d.chr===n){if(d.start>i)break;if(p=0,(g=ba(d.cigar)).forEach((function(t){var e=t.len,n=t.ltr;"M"!==n&&"EQ"!==n&&"X"!==n&&"D"!==n&&"N"!==n&&"="!==n||(p+=e)})),d.lengthOnRef=p,!(d.start+p<r)){for(u=l[10],d.qual=[],c=0;c<u.length;c++)d.qual[c]=u.charCodeAt(c)-33;d.tagDict=l.length<11?{}:xa(l.slice(11)),d.isMateMapped()&&(f=l[6],d.mate={chr:"="===f?d.chr:f,position:Number.parseInt(l[7]),strand:!(32&d.flags)}),this.setPairOrientation(d),(void 0===o||o.pass(d))&&(ya(d,g),e.push(d))}}},setReaderDefaults:function(t,e){t.filter=new pa(e.filter),e.readgroup&&(t.filter.readgroups=new Set([e.readgroup])),t.alleleFreqThreshold=void 0===e.alleleFreqThreshold?.2:e.alleleFreqThreshold,t.samplingWindowSize=void 0===e.samplingWindowSize?100:e.samplingWindowSize,t.samplingDepth=void 0===e.samplingDepth?500:e.samplingDepth,t.samplingDepth>1e4&&(t.samplingDepth=1e4),e.viewAsPairs?t.pairsSupported=!0:t.pairsSupported=void 0===e.pairsSupported||e.pairsSupported},setPairOrientation:function(t){if(t.isMapped()&&t.mate&&t.isMateMapped()&&t.mate.chr===t.chr){var e=t.strand?"F":"R",n=t.mate,r=n.strand?"F":"R",i=" ",o=" ";t.isFirstOfPair()?(i="1",o="2"):t.isSecondOfPair()&&(i="2",o="1");var a=[],s=t.fragmentLength,c=t.end-t.start;if(0===s)s=(t.start<n.position?n.position+c:n.position-c)-t.start;s>0?(a[0]=e,a[1]=i,a[2]=r,a[3]=o):(a[2]=e,a[3]=i,a[0]=r,a[1]=o),t.pairOrientation=a.join("")}}};function ya(t,e){const n=[];let r,i,o=0,a=t.start;t.scStart=t.start,t.scLengthOnRef=t.lengthOnRef;for(let s of e){let e;switch(s.ltr){case"H":case"P":break;case"S":e=a,t.scLengthOnRef+=s.len,0===n.length&&(t.scStart-=s.len,e-=s.len),n.push(new fa({start:e,seqOffset:o,len:s.len,type:"S"})),o+=s.len;break;case"N":case"D":void 0===i&&(i=[]),i.push({start:a,len:s.len,type:s.ltr}),a+=s.len;break;case"I":void 0===r&&(r=[]),r.push(new fa({start:a,len:s.len,seqOffset:o,type:"I"})),o+=s.len;break;case"M":case"EQ":case"=":case"X":n.push(new fa({start:a,seqOffset:o,len:s.len,type:"M"})),o+=s.len,a+=s.len}}t.blocks=n,t.insertions=r,t.gaps=i}function wa(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function ba(t){var e,n,r,i,o,a,s,c,h;for(e=[],n=[],o=null,i=t.length,r=0;r<i;r++)a=t.charAt(r),h=void 0,(h=a.charCodeAt(0))>=48&&h<=57?n.push(a):(s=a,c=Number.parseInt(n.join("")),n=[],null!==o&&o.ltr===s?o.len+=c:(o={len:c,ltr:s},e.push(o)));return e}function xa(t){var e={};return t.forEach((function(t){var n=t.split(":");e[n[0]]=n[2]})),e}const ka=function(t,e){this.config=t,this.genome=e,this.bamPath=t.url,this.isDataUri=We(t.url)&&t.url.startsWith("data:"),va.setReaderDefaults(this,t)};ka.prototype.readAlignments=async function(t,e,n){const r=this.genome;if(this.alignmentCache){const r=this.header,i=r.chrAliasTable.hasOwnProperty(t)?r.chrAliasTable[t]:t,o=this.alignmentCache.queryFeatures(i,e,n),a=new ta(t,e,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold);for(let t of o)a.push(t);return a.finish(),a}if(this.isDataUri){const r=Cn(function(t){const e=t.split(","),n=e[0].split(":")[1];let r=e[1];r=n.indexOf("base64")>=0?atob(r):decodeURI(r);const i=new Uint8Array(r.length);for(var o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return i}(this.bamPath).buffer);return i.call(this,r),o.call(this,t,e,n)}{const r=Cn(await zn.loadArrayBuffer(this.bamPath,un(this.config)));return i.call(this,r),o.call(this,t,e,n)}function i(t){const e=[];this.header=va.decodeBamHeader(t),va.decodeBamRecords(t,this.header.size,e,this.header.chrNames),this.alignmentCache=new Ni(e,r)}function o(t,e,n){var r,i,o,a;return i=(r=this.header).chrAliasTable.hasOwnProperty(t)?r.chrAliasTable[t]:t,o=this.alignmentCache.queryFeatures(i,e,n),a=new ta(t,e,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported),o.forEach((function(t){a.push(t)})),a.finish(),a}};const Sa=function(t,e){this.config=t,this.genome=e,this.bamPath=t.url,this.baiPath=t.indexURL||function(t,e){var n;if(t instanceof File)throw new Error("Cannot infer an index path for a local File.  Please select explicitly");return t.includes("?")?(n=t.indexOf("?"),t.substring(0,n)+"."+e+t.substring(n)):t+"."+e}(this.bamPath,"bai"),va.setReaderDefaults(this,t)};async function Ca(){if(!this.header){const t=this.genome,e=await _a.call(this),n=un(this.config,{range:{start:e.firstAlignmentBlock,size:26}}),r=_n(await zn.loadArrayBuffer(this.bamPath,n)),i=e.firstAlignmentBlock+r,o=un(this.config,{range:{start:0,size:i}});this.header=await va.readHeader(this.bamPath,o,t)}return this.header}async function _a(){const t=this.genome;return this.index?this.index:(this.index=await Mi(this.baiPath,this.config,!1,t),this.index)}async function Ra(){if(this.chrToIndex)return this.chrToIndex;{const t=await Ca.call(this);return this.chrToIndex=t.chrToIndex,this.indexToChr=t.chrNames,this.chrAliasTable=t.chrAliasTable,this.chrToIndex}}Sa.prototype.readAlignments=async function(t,e,n){const r=(await Ra.call(this))[this.chrAliasTable.hasOwnProperty(t)?this.chrAliasTable[t]:t],i=new ta(t,e,n,this.config.samplingWindowSize,this.config.samplingDepth,this.config.pairsSupported,this.config.alleleFreqThreshold);if(void 0===r)return i;{const t=(await _a.call(this)).blocksForRange(r,e,n);if(!t||0===t.length)return i;for(let a of t){let t;if(0===a.maxv.offset)t=0;else{const e=un(this.config,{range:{start:a.maxv.block,size:26}});t=_n(await zn.loadArrayBuffer(this.bamPath,e))}const s=a.minv.block,c={start:s,size:a.maxv.block+t-s+1};var o=Cn(await zn.loadArrayBuffer(this.bamPath,un(this.config,{range:c})));if(va.decodeBamRecords(o,a.minv.offset,i,this.indexToChr,r,e,n,this.filter))break}return i.finish(),i}};const Ta=function(t,e){this.config=t,this.genome=e;const n={},r={};t.sources.sequences.forEach((function(t){if(n[t]=null,e){const n=e.getChromosomeName(t);r[n]=t}})),this.chrAliasTable=r,this.bamReaders=n,va.setReaderDefaults(this,t)};Ta.prototype.readAlignments=function(t,e,n){this.genome;const r=this,i=r.chrAliasTable.hasOwnProperty(t)?r.chrAliasTable[t]:t;if(this.bamReaders.hasOwnProperty(i)&&"none"!==this.bamReaders[i]){let o,a=r.bamReaders[i];if(!a){o={url:r.config.sources.url.replace("$CHR",i)},r.config.sources.indexURL&&(o.indexURL=r.config.sources.indexURL.replace("$CHR",i));const t=Object.assign(r.config,o);a=new Sa(t),r.bamReaders[i]=a}return a.readAlignments(i,e,n).catch((function(a){return console.error(a),On.presentAlert(o.url),r.bamReaders[i]="none",new ta(t,e,n)}))}return Promise.resolve(new ta(t,e,n))};const Ea=function(t,e){this.config=t,this.genome=e,va.setReaderDefaults(this,t)};function Aa(){const t=this,e=this.genome;if(this.header)return Promise.resolve(this.header);{const n=this.config.url+"?file="+this.config.alignmentFile+"&options=-b,-H",r=un(this.config);return va.readHeader(n,r,e).then((function(e){return t.header=e,e}))}}Ea.prototype.readAlignments=function(t,e,n){var r=this;return Aa.call(r).then((function(i){var o,a;return o=i.chrAliasTable.hasOwnProperty(t)?i.chrAliasTable[t]:t,a=r.config.url+"?reference="+r.config.referenceFile+"&file="+r.config.alignmentFile+"&region="+o+":"+e+"-"+n,zn.loadString(a,un(r.config)).then((function(a){var s;return i.chrToIndex[o],s=new ta(t,e,n,r.samplingWindowSize,r.samplingDepth,r.pairsSupported,r.alleleFreqThreshold),va.decodeSamRecords(a,s,o,e,n,r.filter),s}))}))};const La=function(t,e){this.config=t,this.genome=e,va.setReaderDefaults(this,t)};La.prototype.readAlignments=async function(t,e,n,r){if(this.config.format&&"BAM"!==this.config.format.toUpperCase())throw Error(`htsget format ${this.config.format} is not supported`);const i=this.genome;let o,a;o=this.header&&this.header.chrAliasTable.hasOwnProperty(t)?this.header.chrAliasTable[t]:t,a=this.config.url?this.config.url+this.config.endpoint:this.config.endpoint+"/reads/";const s=a+this.config.id+"?format=BAM&referenceName="+o+"&start="+e+"&end="+n,c=await zn.loadJson(s,this.config),h=Cn(function(t){let e=0;t.forEach((function(t){e+=t.length}));let n=0;const r=new Uint8Array(e);return t.forEach((function(t){r.set(t,n),n+=t.length})),r}(await function(t){const e=[];return t.forEach((function(t){if(t.url.startsWith("data:"))e.push(Promise.resolve(function(t){const e=t.split(","),n=e[0].split(":")[1];let r=e[1];r=n.indexOf("base64")>=0?atob(r):decodeURI(r);const i=new Uint8Array(r.length);for(var o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return i}(t.url)));else{const n={};t.headers&&(n.headers=t.headers,n.headers.hasOwnProperty("referer")&&delete n.headers.referer),e.push(new Promise((function(e,r){zn.loadArrayBuffer(t.url,n).then((function(t){e(new Uint8Array(t))}))})))}})),Promise.all(e)}(c.htsget.urls)).buffer);this.header||(this.header=va.decodeBamHeader(h,i));const l=this.header.chrToIndex[t],u=new ta(t,e,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold);return va.decodeBamRecords(h,this.header.size,u,this.header.chrNames,l,e,n),u.finish(),0===u.alignments.length&&void 0===l&&this.header.chrAliasTable.hasOwnProperty(t)&&!r?(o=this.header.chrAliasTable[t],this.readAlignments(o,e,n,1)):u};var Ia=eval,Ma=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=35)}([function(t,e){class n extends Error{}class r extends n{}t.exports={CramBufferOverrunError:class extends r{},CramMalformedError:r,CramUnimplementedError:class extends Error{},CramSizeLimitError:class extends n{},CramArgumentError:class extends n{}}},function(t,e,n){(function(t){
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   */
var r=n(37),i=n(38),o=n(19);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return h(this,t,e,n)}function h(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(l(e),t=s(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return $(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var u=!0,f=0;f<c;f++)if(h(t,o+f)!==h(e,f)){u=!1;break}if(u)return o}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return H($(e,t.length-n),t,n,r)}function b(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return b(t,e,n,r)}function k(t,e,n,r){return H(U(e),t,n,r)}function S(t,e,n,r){return H(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function _(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,c,h=t[i],l=null,u=h>239?4:h>223?3:h>191?2:1;if(i+u<=n)switch(u){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&h)<<6|63&o)>127&&(l=c);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(c=(15&h)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&h)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,u=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=u}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=R));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return h(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return u(null,t)},c.allocUnsafeSlow=function(t){return u(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?_(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),h=this.slice(r,i),l=t.slice(e,n),u=0;u<s;++u)if(h[u]!==l[u]){o=h[u],a=l[u];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function A(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z(t[o]);return i}function L(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function F(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,o){return o||F(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function O(t,e,n,r,o){return o||F(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return O(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return O(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:$(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(P,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,h=[],l=!1,u=-1;function f(){l&&c&&(l=!1,c.length?h=c.concat(h):u=-1,h.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=h.length;e;){for(c=h,h=[];++u<e;)c&&c[u].run();u=-1,e=h.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new d(t,e)),1!==h.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var r=n(9),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=u;var o=n(7);o.inherits=n(4);var a=n(21),s=n(16);o.inherits(u,a);for(var c=i(s.prototype),h=0;h<c.length;h++){var l=c[h];u.prototype[l]||(u.prototype[l]=s.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){const{CramBufferOverrunError:r}=n(0),i={int:!0,byte:!0,long:!0,byteArray:!0,byteArrayBlock:!0};t.exports=class{constructor(t={},e){if(this.parameters=t,this.dataType=e,!e)throw new TypeError("must provide a data type to codec constructor");if(!i[e])throw new TypeError(`invalid data type ${e}`)}_getBits(t,e,n){let i=0;if(e.bytePosition+(7-e.bitPosition+n)/8>t.length)throw new r("read error during decoding. the file seems to be truncated.");for(let r=n;r;r-=1)i<<=1,i|=t[e.bytePosition]>>e.bitPosition&1,e.bitPosition-=1,e.bitPosition<0&&(e.bytePosition+=1),e.bitPosition&=7;return i}}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(1).Buffer)},function(t,e,n){const r=n(72),{CramBufferOverrunError:i}=n(0);t.exports={itf8Size:t=>-128&t?-16384&t?-2097152&t?-268435456&t?5:4:3:2:1,parseItf8(t,e){let n=e;const r=t[n];let o;if(r<128?(o=r,n+=1):r<192?(o=16383&(r<<8|t[n+1]),n+=2):r<224?(o=2097151&(r<<16|t[n+1]<<8|t[n+2]),n+=3):r<240?(o=268435455&(r<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),n+=4):(o=(15&r)<<28|t[n+1]<<20|t[n+2]<<12|t[n+3]<<4|15&t[n+4],n+=5),n>t.length)throw new i("Attempted to read beyond end of buffer; this file seems truncated.");return[o,n-e]},parseItem(t,e,n=0,r=0){const{offset:i,result:o}=e.parse(t);return o._endPosition=i+r,o._size=i-n,o},tinyMemoize(t,e){const n=t.prototype[e],r=`_memo_${e}`;t.prototype[e]=function(){return r in this||(this[r]=n.call(this)),this[r]}},sequenceMD5:t=>r(t.toUpperCase().replace(/[^\x21-\x7e]/g,""))}},function(t,e,n){(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(3))},function(t,e,n){var r=n(1),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},function(t,e,n){const{CramMalformedError:r}=n(0),i=n(13);class o{constructor(){this.F=void 0,this.C=void 0}}function a(t,e,n,r){return n*(t>>r)+(t&(1<<r)-1)-e}const s={FC:o,AriDecoder:class{constructor(){this.fc=new Array(256);for(let t=0;t<this.fc.length;t+=1)this.fc[t]=new o;this.R=null}},Symbol:class{constructor(){this.start=void 0,this.freq=void 0}},symbolInit:function(t,e,n){if(!(e<=65536))throw new r("assertion failed: start <= 1<<16");if(!(n<=65536-e))throw new r("assertion failed: freq <= 1<<16");t.start=e,t.freq=n},advanceStep:a,advanceSymbolStep:function(t,e,n){return a(t,e.start,e.freq,n)},get:function(t,e){return t&(1<<e)-1},advanceSymbol:function(t,e,n,r){return function(t,e,n,r,o){if((t=r*(t>>o)+(t&(1<<o)-1)-n)<i.RANS_BYTE_L)do{t=t<<8|255&e.get()}while(t<i.RANS_BYTE_L);return t}(t,e,n.start,n.freq,r)},renormalize:function(t,e){if(t<i.RANS_BYTE_L)do{t=t<<8|255&e.get()}while(t<i.RANS_BYTE_L);return t}};t.exports=s},function(t,e){t.exports={TF_SHIFT:12,TOTFREQ:4096,RANS_BYTE_L:1<<23}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,c,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(h=n.slice()).length,c=0;c<a;c++)h[c].apply(this,s);return!0},n.prototype.addListener=function(t,e){var a;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(e=t.exports=n(21)).Stream=e,e.Readable=e,e.Writable=n(16),e.Duplex=n(5),e.Transform=n(25),e.PassThrough=n(46)},function(t,e,n){(function(e,r,i){var o=n(9);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,c=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;y.WritableState=v;var h=n(7);h.inherits=n(4);var l,u={deprecate:n(45)},f=n(22),p=n(10).Buffer,d=i.Uint8Array||function(){},g=n(23);function m(){}function v(t,e){s=s||n(5),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,h=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(h||0===h)?h:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(C,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),C(t,e))}(t,n,r,e,i);else{var a=k(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||x(t,n),r?c(b,t,n,a,i):b(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(s=s||n(5),!(l.call(y,this)||this instanceof s))return new y(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function w(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),C(t,e)}function x(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,c=!0;n;)i[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;i.allBuffers=c,w(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var h=n.chunk,l=n.encoding,u=n.callback;if(w(t,e,!1,e.objectMode?1:h.length,h,l,u),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),C(t,e)}))}function C(t,e){var n=k(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}h.inherits(y,f),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===y&&t&&t._writableState instanceof v}})):l=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=t,p.isBuffer(r)||r instanceof d);return s&&!p.isBuffer(t)&&(t=function(t){return p.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=m),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,t,n))&&(i.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=p.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else w(t,e,!1,s,r,i,o);return c}(this,i,s,t,e,n)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||x(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,C(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(3),n(43).setImmediate,n(2))},function(t,e){t.exports={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183}},function(t,e,n){const r=n(36);t.exports=r},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){var r=n(1).Buffer,i=n(39).Transform,o=n(51),a=n(27),s=n(26).ok,c=n(1).kMaxLength,h="Cannot create final Buffer. It would be larger than 0x"+c.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var l=Object.keys(o),u=0;u<l.length;u++){var f=l[u];f.match(/^Z/)&&Object.defineProperty(e,f,{enumerable:!0,value:o[f],writable:!1})}for(var p={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},d=Object.keys(p),g=0;g<d.length;g++){var m=d[g];p[p[m]]=m}function v(t,e,n){var i=[],o=0;function a(){for(var e;null!==(e=t.read());)i.push(e),o+=e.length;t.once("readable",a)}function s(){var e,a=null;o>=c?a=new RangeError(h):e=r.concat(i,o),i=[],t.close(),n(a,e)}t.on("error",(function(e){t.removeListener("end",s),t.removeListener("readable",a),n(e)})),t.on("end",s),t.end(e),a()}function y(t,e){if("string"==typeof e&&(e=r.from(e)),!r.isBuffer(e))throw new TypeError("Not a string or buffer");var n=t._finishFlushFlag;return t._processChunk(e,n)}function w(t){if(!(this instanceof w))return new w(t);T.call(this,t,o.DEFLATE)}function b(t){if(!(this instanceof b))return new b(t);T.call(this,t,o.INFLATE)}function x(t){if(!(this instanceof x))return new x(t);T.call(this,t,o.GZIP)}function k(t){if(!(this instanceof k))return new k(t);T.call(this,t,o.GUNZIP)}function S(t){if(!(this instanceof S))return new S(t);T.call(this,t,o.DEFLATERAW)}function C(t){if(!(this instanceof C))return new C(t);T.call(this,t,o.INFLATERAW)}function _(t){if(!(this instanceof _))return new _(t);T.call(this,t,o.UNZIP)}function R(t){return t===o.Z_NO_FLUSH||t===o.Z_PARTIAL_FLUSH||t===o.Z_SYNC_FLUSH||t===o.Z_FULL_FLUSH||t===o.Z_FINISH||t===o.Z_BLOCK}function T(t,n){var a=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,i.call(this,t),t.flush&&!R(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!R(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||o.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:o.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!r.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(t,n){E(s),s._hadError=!0;var r=new Error(t);r.errno=n,r.code=e.codes[n],s.emit("error",r)};var c=e.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(c=t.level);var h=e.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(h=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,c,t.memLevel||e.Z_DEFAULT_MEMLEVEL,h,t.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=c,this._strategy=h,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!a._handle},configurable:!0,enumerable:!0})}function E(e,n){n&&t.nextTick(n),e._handle&&(e._handle.close(),e._handle=null)}function A(t){t.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),e.Deflate=w,e.Inflate=b,e.Gzip=x,e.Gunzip=k,e.DeflateRaw=S,e.InflateRaw=C,e.Unzip=_,e.createDeflate=function(t){return new w(t)},e.createInflate=function(t){return new b(t)},e.createDeflateRaw=function(t){return new S(t)},e.createInflateRaw=function(t){return new C(t)},e.createGzip=function(t){return new x(t)},e.createGunzip=function(t){return new k(t)},e.createUnzip=function(t){return new _(t)},e.deflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new w(e),t,n)},e.deflateSync=function(t,e){return y(new w(e),t)},e.gzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new x(e),t,n)},e.gzipSync=function(t,e){return y(new x(e),t)},e.deflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new S(e),t,n)},e.deflateRawSync=function(t,e){return y(new S(e),t)},e.unzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new _(e),t,n)},e.unzipSync=function(t,e){return y(new _(e),t)},e.inflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new b(e),t,n)},e.inflateSync=function(t,e){return y(new b(e),t)},e.gunzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new k(e),t,n)},e.gunzipSync=function(t,e){return y(new k(e),t)},e.inflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),v(new C(e),t,n)},e.inflateRawSync=function(t,e){return y(new C(e),t)},a.inherits(T,i),T.prototype.params=function(n,r,i){if(n<e.Z_MIN_LEVEL||n>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=e.Z_FILTERED&&r!=e.Z_HUFFMAN_ONLY&&r!=e.Z_RLE&&r!=e.Z_FIXED&&r!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var a=this;this.flush(o.Z_SYNC_FLUSH,(function(){s(a._handle,"zlib binding closed"),a._handle.params(n,r),a._hadError||(a._level=n,a._strategy=r,i&&i())}))}else t.nextTick(i)},T.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},T.prototype._flush=function(t){this._transform(r.alloc(0),"",t)},T.prototype.flush=function(e,n){var i=this,a=this._writableState;("function"==typeof e||void 0===e&&!n)&&(n=e,e=o.Z_FULL_FLUSH),a.ended?n&&t.nextTick(n):a.ending?n&&this.once("end",n):a.needDrain?n&&this.once("drain",(function(){return i.flush(e,n)})):(this._flushFlag=e,this.write(r.alloc(0),"",n))},T.prototype.close=function(e){E(this,e),t.nextTick(A,this)},T.prototype._transform=function(t,e,n){var i,a=this._writableState,s=(a.ending||a.ended)&&(!t||a.length===t.length);return null===t||r.isBuffer(t)?this._handle?(s?i=this._finishFlushFlag:(i=this._flushFlag,t.length>=a.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),void this._processChunk(t,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},T.prototype._processChunk=function(t,e,n){var i=t&&t.length,o=this._chunkSize-this._offset,a=0,l=this,u="function"==typeof n;if(!u){var f,p=[],d=0;this.on("error",(function(t){f=t})),s(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(e,t,a,i,this._buffer,this._offset,o)}while(!this._hadError&&y(g[0],g[1]));if(this._hadError)throw f;if(d>=c)throw E(this),new RangeError(h);var m=r.concat(p,d);return E(this),m}s(this._handle,"zlib binding closed");var v=this._handle.write(e,t,a,i,this._buffer,this._offset,o);function y(c,h){if(this&&(this.buffer=null,this.callback=null),!l._hadError){var f=o-h;if(s(f>=0,"have should not go down"),f>0){var g=l._buffer.slice(l._offset,l._offset+f);l._offset+=f,u?l.push(g):(p.push(g),d+=g.length)}if((0===h||l._offset>=l._chunkSize)&&(o=l._chunkSize,l._offset=0,l._buffer=r.allocUnsafe(l._chunkSize)),0===h){if(a+=i-c,i=c,!u)return!0;var m=l._handle.write(e,t,a,i,l._buffer,l._offset,l._chunkSize);return m.callback=y,void(m.buffer=t)}if(!u)return!1;n()}}v.buffer=t,v.callback=y},a.inherits(w,T),a.inherits(b,T),a.inherits(x,T),a.inherits(k,T),a.inherits(S,T),a.inherits(C,T),a.inherits(_,T)}).call(this,n(3))},function(t,e,n){(function(e,r){var i=n(9);t.exports=w;var o,a=n(19);w.ReadableState=y,n(14).EventEmitter;var s=function(t,e){return t.listeners(e).length},c=n(22),h=n(10).Buffer,l=e.Uint8Array||function(){},u=n(7);u.inherits=n(4);var f=n(40),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=n(41),m=n(23);u.inherits(w,c);var v=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var r=e instanceof(o=o||n(5));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(24).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function w(t){if(o=o||n(5),!(this instanceof w))return new w(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),c.call(this)}function b(t,e,n,r,i){var o,a=t._readableState;return null===e?(a.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,C(t)}}(t,a)):(i||(o=function(t,e){var n,r;return r=e,h.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?x(t,a,e,!1):R(t,a)):x(t,a,e,!1))):r||(a.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function x(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&C(t)),R(t,e)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),w.prototype.destroy=m.destroy,w.prototype._undestroy=m.undestroy,w.prototype._destroy=function(t,e){this.push(null),e(t)},w.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=h.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},w.prototype.unshift=function(t){return b(this,t,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(t){return d||(d=n(24).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var k=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=k?t=k:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function C(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(_,t):_(t))}function _(t){p("emit readable"),t.emit("readable"),L(t)}function R(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(T,t,e))}function T(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function E(t){p("readable nexttick read 0"),t.read(0)}function A(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function I(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0==(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=h.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0==(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function M(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(D,e,t))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function B(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}w.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?M(this):C(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&M(this),null;var r,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(n,e))),null===(r=t>0?I(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&M(this)),null!==r&&this.emit("data",r),r},w.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var c=e&&!1===e.end||t===r.stdout||t===r.stderr?y:h;function h(){p("onend"),t.end()}o.endEmitted?i.nextTick(c):n.once("end",c),t.on("unpipe",(function e(r,i){p("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,p("cleanup"),t.removeListener("close",m),t.removeListener("finish",v),t.removeListener("drain",l),t.removeListener("error",g),t.removeListener("unpipe",e),n.removeListener("end",h),n.removeListener("end",y),n.removeListener("data",d),u=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}));var l=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,L(t))}}(n);t.on("drain",l);var u=!1,f=!1;function d(e){p("ondata"),f=!1,!1!==t.write(e)||f||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==B(o.pipes,t))&&!u&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function g(e){p("onerror",e),y(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",v),y()}function v(){p("onfinish"),t.removeListener("close",m),y()}function y(){p("unpipe"),n.unpipe(t)}return n.on("data",d),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",m),t.once("finish",v),t.emit("pipe",n),o.flowing||(p("pipe resume"),n.resume()),t},w.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=B(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},w.prototype.on=function(t,e){var n=c.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&C(this):i.nextTick(E,this))}return n},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(A,t,e))}(this,t)),this},w.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<v.length;o++)t.on(v[o],this.emit.bind(this,v[o]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=I}).call(this,n(2),n(3))},function(t,e,n){t.exports=n(14).EventEmitter},function(t,e,n){var r=n(9);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){var r=n(10).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=h,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=u,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"ï¿½";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"ï¿½";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"ï¿½"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ï¿½":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){t.exports=a;var r=n(5),i=n(7);function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){c(t,e,n)})):c(this,null,null)}function c(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(4),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){(function(e){
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   */
function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=n(27),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,c="foo"===function(){}.name;function h(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var u=t.exports=v,f=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(o.isFunction(t)){if(c)return t.name;var e=t.toString().match(f);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function g(t){if(c||!o.isFunction(t))return o.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function m(t,e,n,r,i){throw new u.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function v(t,e){t||m(t,!0,e,"==",u.ok)}function y(t,e,n,a){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(l(t)&&l(e)&&h(t)===h(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var c=(a=a||{actual:[],expected:[]}).actual.indexOf(t);return-1!==c&&c===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=w(t),a=w(e);if(i&&!a||!i&&a)return!1;if(i)return y(t=s.call(t),e=s.call(e),n);var c,h,l=k(t),u=k(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),h=l.length-1;h>=0;h--)if(l[h]!==u[h])return!1;for(h=l.length-1;h>=0;h--)if(!y(t[c=l[h]],e[c],n,r))return!1;return!0}(t,e,n,a))}return n?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&m(i,n,"Missing expected exception"+r);var a="string"==typeof r,s=!t&&i&&!n;if((!t&&o.isError(i)&&a&&b(i,n)||s)&&m(i,n,"Got unwanted exception"+r),t&&i&&n&&!b(i,n)||!t&&i)throw i}u.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=d(g(this.actual),128)+" "+this.operator+" "+d(g(this.expected),128),this.generatedMessage=!0);var e=t.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=p(e),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},o.inherits(u.AssertionError,Error),u.fail=m,u.ok=v,u.equal=function(t,e,n){t!=e&&m(t,e,n,"==",u.equal)},u.notEqual=function(t,e,n){t==e&&m(t,e,n,"!=",u.notEqual)},u.deepEqual=function(t,e,n){y(t,e,!1)||m(t,e,n,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(t,e,n){y(t,e,!0)||m(t,e,n,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(t,e,n){y(t,e,!1)&&m(t,e,n,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function t(e,n,r){y(e,n,!0)&&m(e,n,r,"notDeepStrictEqual",t)},u.strictEqual=function(t,e,n){t!==e&&m(t,e,n,"===",u.strictEqual)},u.notStrictEqual=function(t,e,n){t===e&&m(t,e,n,"!==",u.notStrictEqual)},u.throws=function(t,e,n){x(!0,t,e,n)},u.doesNotThrow=function(t,e,n){x(!1,t,e,n)},u.ifError=function(t){if(t)throw t};var k=Object.keys||function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e}}).call(this,n(2))},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),c=r[n];n<o;c=r[++n])g(c)||!b(c)?a+=" "+c:a+=" "+s(c);return a},e.deprecate=function(n,i){if(y(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,t,r.depth)}function c(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function h(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return v(i)||(i=l(t,i,r)),i}var o=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),k(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(n);if(0===a.length){if(S(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(k(n))return u(n)}var h,b="",C=!1,R=["{","}"];return p(n)&&(C=!0,R=["[","]"]),S(n)&&(b=" [Function"+(n.name?": "+n.name:"")+"]"),w(n)&&(b=" "+RegExp.prototype.toString.call(n)),x(n)&&(b=" "+Date.prototype.toUTCString.call(n)),k(n)&&(b=" "+u(n)),0!==a.length||C&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),h=C?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)_(e,String(a))?o.push(f(t,e,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))})),o}(t,n,r,s,a):a.map((function(e){return f(t,n,r,s,e,C)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(h,b,R)):R[0]+b+R[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),_(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=g(n)?l(t,c.value,null):l(t,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),y(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return"number"==typeof t}function v(t){return"string"==typeof t}function y(t){return void 0===t}function w(t){return b(t)&&"[object RegExp]"===C(t)}function b(t){return"object"==typeof t&&null!==t}function x(t){return b(t)&&"[object Date]"===C(t)}function k(t){return b(t)&&("[object Error]"===C(t)||t instanceof Error)}function S(t){return"function"==typeof t}function C(t){return Object.prototype.toString.call(t)}function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.debuglog=function(t){if(y(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=w,e.isObject=b,e.isDate=x,e.isError=k,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(52),e.log=function(){},e.inherits=n(4),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(2),n(3))},function(t,e,n){t.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,n){var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,n){t.exports=class{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const e=this.oldCache.get(t);return this._set(t,e),e}}set(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){return this.cache.has(t)?this.cache.get(t):this.oldCache.has(t)?this.oldCache.get(t):void 0}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[e]=t;this.cache.has(e)||(yield t)}}get size(){let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return this._size+t}}},function(t,e){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function r(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function i(t){return!0===(t&&t.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var o={},a={};function s(t,e){var n,r,i;return e?(i=0<=(t>>>=0)&&t<256)&&(r=a[t])?r:(n=h(t,(0|t)<0?-1:0,!0),i&&(a[t]=n),n):(i=-128<=(t|=0)&&t<128)&&(r=o[t])?r:(n=h(t,t<0?-1:0,!1),i&&(o[t]=n),n)}function c(t,e){if(isNaN(t))return e?y:v;if(e){if(t<0)return y;if(t>=d)return S}else{if(t<=-g)return C;if(t+1>=g)return k}return t<0?c(-t,e).neg():h(t%p|0,t/p|0,e)}function h(t,e,n){return new r(t,e,n)}r.fromInt=s,r.fromNumber=c,r.fromBits=h;var l=Math.pow;function u(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return v;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(t.substring(1),e,n).neg();for(var i=c(l(n,8)),o=v,a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a),h=parseInt(t.substring(a,a+s),n);if(s<8){var f=c(l(n,s));o=o.mul(f).add(c(h))}else o=(o=o.mul(i)).add(c(h))}return o.unsigned=e,o}function f(t,e){return"number"==typeof t?c(t,e):"string"==typeof t?u(t,e):h(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}r.fromString=u,r.fromValue=f;var p=4294967296,d=p*p,g=d/2,m=s(1<<24),v=s(0);r.ZERO=v;var y=s(0,!0);r.UZERO=y;var w=s(1);r.ONE=w;var b=s(1,!0);r.UONE=b;var x=s(-1);r.NEG_ONE=x;var k=h(-1,2147483647,!1);r.MAX_VALUE=k;var S=h(-1,-1,!0);r.MAX_UNSIGNED_VALUE=S;var C=h(0,-2147483648,!1);r.MIN_VALUE=C;var _=r.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},_.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var e=c(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=c(l(t,6),this.unsigned),o=this,a="";;){var s=o.div(i),h=(o.sub(s.mul(i)).toInt()>>>0).toString(t);if((o=s).isZero())return h+a;for(;h.length<6;)h="0"+h;a=""+h+a}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1==(1&this.low)},_.isEven=function(){return 0==(1&this.low)},_.equals=function(t){return i(t)||(t=f(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},_.eq=_.equals,_.notEquals=function(t){return!this.eq(t)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(t){return this.comp(t)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(t){return this.comp(t)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(t){return this.comp(t)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(t){return this.comp(t)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(t){if(i(t)||(t=f(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(w)},_.neg=_.negate,_.add=function(t){i(t)||(t=f(t));var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=t.high>>>16,s=65535&t.high,c=t.low>>>16,l=0,u=0,p=0,d=0;return p+=(d+=o+(65535&t.low))>>>16,u+=(p+=r+c)>>>16,l+=(u+=n+s)>>>16,l+=e+a,h((p&=65535)<<16|(d&=65535),(l&=65535)<<16|(u&=65535),this.unsigned)},_.subtract=function(t){return i(t)||(t=f(t)),this.add(t.neg())},_.sub=_.subtract,_.multiply=function(t){if(this.isZero())return v;if(i(t)||(t=f(t)),n)return h(n.mul(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned);if(t.isZero())return v;if(this.eq(C))return t.isOdd()?C:v;if(t.eq(C))return this.isOdd()?C:v;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(m)&&t.lt(m))return c(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,r=65535&this.high,o=this.low>>>16,a=65535&this.low,s=t.high>>>16,l=65535&t.high,u=t.low>>>16,p=65535&t.low,d=0,g=0,y=0,w=0;return y+=(w+=a*p)>>>16,g+=(y+=o*p)>>>16,y&=65535,g+=(y+=a*u)>>>16,d+=(g+=r*p)>>>16,g&=65535,d+=(g+=o*u)>>>16,g&=65535,d+=(g+=a*l)>>>16,d+=e*p+r*u+o*l+a*s,h((y&=65535)<<16|(w&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(t){if(i(t)||(t=f(t)),t.isZero())throw Error("division by zero");var e,r,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?h((this.unsigned?n.div_u:n.div_s)(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:v;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return b;o=y}else{if(this.eq(C))return t.eq(w)||t.eq(x)?C:t.eq(C)?w:(e=this.shr(1).div(t).shl(1)).eq(v)?t.isNegative()?w:x:(r=this.sub(t.mul(e)),o=e.add(r.div(t)));if(t.eq(C))return this.unsigned?y:v;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=v}for(r=this;r.gte(t);){e=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(e)/Math.LN2),s=a<=48?1:l(2,a-48),u=c(e),p=u.mul(t);p.isNegative()||p.gt(r);)p=(u=c(e-=s,this.unsigned)).mul(t);u.isZero()&&(u=w),o=o.add(u),r=r.sub(p)}return o},_.div=_.divide,_.modulo=function(t){return i(t)||(t=f(t)),n?h((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,t.low,t.high),n.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return h(~this.low,~this.high,this.unsigned)},_.and=function(t){return i(t)||(t=f(t)),h(this.low&t.low,this.high&t.high,this.unsigned)},_.or=function(t){return i(t)||(t=f(t)),h(this.low|t.low,this.high|t.high,this.unsigned)},_.xor=function(t){return i(t)||(t=f(t)),h(this.low^t.low,this.high^t.high,this.unsigned)},_.shiftLeft=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?h(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):h(0,this.low<<t-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?h(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):h(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(t){if(i(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?h(this.low>>>t|e<<32-t,e>>>t,this.unsigned):h(32===t?e:e>>>t-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?h(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:h(this.low,this.high,!0)},_.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},_.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},r.fromBytes=function(t,e,n){return n?r.fromBytesLE(t,e):r.fromBytesBE(t,e)},r.fromBytesLE=function(t,e){return new r(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},r.fromBytesBE=function(t,e){return new r(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){const r=n(87),i=n(94),o=n(97);function a(t){const{protocol:e,pathname:n}=r.parse(t);return"file:"===e?new o(unescape(n)):new i(t)}t.exports={LocalFile:o,RemoteFile:i,fromUrl:a,open(t,e,n){if(n)return n;if(t)return a(t);if(e)return new o(e);throw new Error("no url, path, or filehandle provided, cannot open")}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function i(t){if("function"!=typeof t)throw new TypeError("Argument to promisify must be a function");var e=t[r],n=i.Promise||Promise;if("function"!=typeof n)throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var r=this,i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return new n((function(n,i){o.push((function(t){if(t)return i(t);for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(1===o.length||!e)return n(o[0]);var s={};o.forEach((function(t,n){var r=e[n];r&&(s[r]=t)})),n(s)})),t.call.apply(t,[r].concat(o))}))}}i.argumentNames=r,i.Promise=void 0,e.promisify=i},function(t,e,n){const r=n(18),i=n(99),o=n(100);t.exports={CramFile:r,IndexedCramFile:i,CraiIndex:o}},function(t,e,n){(function(e){const r=n(20),i=n(61),o=n(30),{CramUnimplementedError:a,CramMalformedError:s}=n(0),c=n(62),{cramFileDefinition:h,getSectionParsers:l}=n(66),u=n(71),{open:f}=n(33),{parseItem:p,tinyMemoize:d}=n(8),{parseHeaderText:g}=n(98);class m{constructor(t){this.file=f(t.url,t.path,t.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=t.seqFetch,this.options={checkSequenceMD5:!1!==t.checkSequenceMD5,cacheSize:void 0!==t.cacheSize?t.cacheSize:2e4},this.featureCache=new o({maxSize:this.options.cacheSize})}toString(){return this.file.filename?this.file.filename:this.file.url?this.file.url:"(cram file)"}read(t,e,n,r){return this.file.read(t,e,n,r)}stat(){return this.file.stat()}async getDefinition(){const t=e.allocUnsafe(h.maxLength);await this.file.read(t,0,h.maxLength,0);const n=h.parser.parse(t).result;if(2!==n.majorVersion&&3!==n.majorVersion)throw new a(`CRAM version ${n.majorVersion} not supported`);return n}async getSamHeader(){const t=await this.getContainerById(0);if(!t)throw new s("file contains no containers");const{content:e}=await t.getFirstBlock(),n=e.readInt32LE(0),r=e.toString("utf8",4,4+n);return g(r)}async getSectionParsers(){const{majorVersion:t}=await this.getDefinition();return l(t)}async getContainerById(t){const e=await this.getSectionParsers();let n=e.cramFileDefinition.maxLength;const{size:r}=await this.file.stat(),{cramContainerHeader1:i}=e;let o;for(let e=0;e<=t;e+=1){if(n+i.maxLength+8>=r)return;o=this.getContainerAtPosition(n);const a=await o.getHeader();if(!a)throw new s(`container ${t} not found in file`);if(0===e){n=a._endPosition;for(let t=0;t<a.numBlocks;t+=1)n=(await this.readBlock(n))._endPosition}else n+=a._size+a.length}return o}async checkCrc32(t,n,r,o){const a=e.allocUnsafe(n);await this.file.read(a,0,n,t);const c=i.unsigned(a);if(c!==r)throw new s(`crc mismatch in ${o}: recorded CRC32 = ${r}, but calculated CRC32 = ${c}`)}async containerCount(){const t=await this.getSectionParsers(),{size:e}=await this.file.stat(),{cramContainerHeader1:n}=t;let r=0,i=t.cramFileDefinition.maxLength;for(;i+n.maxLength+8<e;){const t=await this.getContainerAtPosition(i).getHeader();if(!t)break;if(0===r){i=t._endPosition;for(let e=0;e<t.numBlocks;e+=1)i=(await this.readBlock(i))._endPosition}else i+=t._size+t.length;r+=1}return r}getContainerAtPosition(t){return new u(this,t)}async readBlockHeader(t){const n=await this.getSectionParsers(),{cramBlockHeader:r}=n,{size:i}=await this.file.stat();if(t+r.maxLength>=i)return;const o=e.allocUnsafe(r.maxLength);return await this.file.read(o,0,r.maxLength,t),p(o,r.parser,0,t)}async _parseSection(t,n,r=t.maxLength,i){let o;if(i)o=i;else{const{size:t}=await this.file.stat();if(n+r>=t)return;o=e.allocUnsafe(r),await this.file.read(o,0,r,n)}const a=p(o,t.parser,0,n);if(a._size!==r)throw new s(`section read error: requested size ${r} does not equal parsed size ${a._size}`);return a}_uncompress(t,e,n){if("gzip"===t)r.gunzipSync(e).copy(n);else{if("rans"!==t)throw new a(`${t} decompression not yet implemented`);c.uncompress(e,n)}}async readBlock(t){const{majorVersion:n}=await this.getDefinition(),r=await this.getSectionParsers(),i=await this.readBlockHeader(t),o=i._endPosition;i.contentPosition=i._endPosition;const a=e.allocUnsafe(i.uncompressedSize);if("raw"!==i.compressionMethod){const t=e.allocUnsafe(i.compressedSize);await this.read(t,0,i.compressedSize,o),this._uncompress(i.compressionMethod,t,a)}else await this.read(a,0,i.uncompressedSize,o);if(i.content=a,n>=3){const e=await this._parseSection(r.cramBlockCrc32,o+i.compressedSize);i.crc32=e.crc32,this.validateChecksums&&await this.checkCrc32(t,i._size+i.compressedSize,i.crc32,"block data"),i._endPosition=e._endPosition,i._size=i.compressedSize+r.cramBlockCrc32.maxLength}else i._endPosition=o+i.compressedSize,i._size=i.compressedSize;return i}}"getDefinition getSectionParsers getSamHeader".split(" ").forEach(t=>d(m,t)),t.exports=m}).call(this,n(1).Buffer)},function(t,e,n){e.byteLength=function(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=h(t),r=n[0],a=n[1],s=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,a)),c=0,l=a>0?r-4:r,u=0;u<l;u+=4)e=i[t.charCodeAt(u)]<<18|i[t.charCodeAt(u+1)]<<12|i[t.charCodeAt(u+2)]<<6|i[t.charCodeAt(u+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;return 2===a&&(e=i[t.charCodeAt(u)]<<2|i[t.charCodeAt(u+1)]>>4,s[c++]=255&e),1===a&&(e=i[t.charCodeAt(u)]<<10|i[t.charCodeAt(u+1)]<<4|i[t.charCodeAt(u+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e),s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,h=c>>1,l=-7,u=n?i-1:0,f=n?-1:1,p=t[e+u];for(u+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+u],u+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+u],u+=f,l-=8);if(0===o)o=1-h;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=h}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,c,h=8*o-i-1,l=(1<<h)-1,u=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+u>=1?f/c:f*Math.pow(2,1-u))*c>=2&&(a++,c/=2),a+u>=l?(s=0,a=l):a+u>=1?(s=(e*c-1)*Math.pow(2,i),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,h+=i;h>0;t[n+p]=255&a,p+=d,a/=256,h-=8);t[n+p-d]|=128*g}},function(t,e,n){t.exports=i;var r=n(14).EventEmitter;function i(){r.call(this)}n(4)(i,r),i.Readable=n(15),i.Writable=n(47),i.Duplex=n(48),i.Transform=n(49),i.PassThrough=n(50),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",c));var a=!1;function s(){a||(a=!0,t.end())}function c(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",h),t.removeListener("error",h),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",h),t.on("error",h),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e){},function(t,e,n){var r=n(10).Buffer,i=n(42);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i=r.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=i,n=a,o.data.copy(e,n),a+=o.data.length,o=o.next;return i},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(44),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(2))},function(t,e,n){(function(t,e){!function(t,n){if(!t.setImmediate){var r,i,o,a,s,c=1,h={},l=!1,u=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(i=u.documentElement,r=function(t){var e=u.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)},f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return h[c]=i,r(c),c++},f.clearImmediate=p}function p(t){delete h[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=h[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(2),n(3))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(2))},function(t,e,n){t.exports=o;var r=n(25),i=n(7);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(4),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(16)},function(t,e,n){t.exports=n(5)},function(t,e,n){t.exports=n(15).Transform},function(t,e,n){t.exports=n(15).PassThrough},function(t,e,n){(function(t,r){var i=n(26),o=n(53),a=n(54),s=n(57),c=n(60);for(var h in c)e[h]=c[h];function l(t){if("number"!=typeof t||t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7,l.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==e.INFLATE&&this.mode!==e.GUNZIP&&this.mode!==e.INFLATERAW&&this.mode!==e.UNZIP||s.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null)},l.prototype.write=function(t,e,n,r,i,o,a){return this._write(!0,t,e,n,r,i,o,a)},l.prototype.writeSync=function(t,e,n,r,i,o,a){return this._write(!1,t,e,n,r,i,o,a)},l.prototype._write=function(n,o,a,s,c,h,l,u){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==e.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==e.Z_NO_FLUSH&&o!==e.Z_PARTIAL_FLUSH&&o!==e.Z_SYNC_FLUSH&&o!==e.Z_FULL_FLUSH&&o!==e.Z_FINISH&&o!==e.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=t.alloc(0),c=0,s=0),this.strm.avail_in=c,this.strm.input=a,this.strm.next_in=s,this.strm.avail_out=u,this.strm.output=h,this.strm.next_out=l,this.flush=o,!n)return this._process(),this._checkError()?this._afterSync():void 0;var f=this;return r.nextTick((function(){f._process(),f._after()})),this},l.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},l.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=e.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},l.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},l.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},l.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},l.prototype.init=function(t,n,r,o,a){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(t>=8&&t<=15,"invalid windowBits"),i(n>=-1&&n<=9,"invalid compression level"),i(r>=1&&r<=9,"invalid memlevel"),i(o===e.Z_FILTERED||o===e.Z_HUFFMAN_ONLY||o===e.Z_RLE||o===e.Z_FIXED||o===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,t,r,o,a),this._setDictionary()},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype.reset=function(){this._reset(),this._setDictionary()},l.prototype._init=function(t,n,r,i,c){switch(this.level=t,this.windowBits=n,this.memLevel=r,this.strategy=i,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=c,this.write_in_progress=!1,this.init_done=!0},l.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},l.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=a.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=l}).call(this,n(1).Buffer,n(3))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){var r,i=n(11),o=n(55),a=n(28),s=n(29),c=n(56),h=-2,l=258,u=262,f=103,p=113,d=666;function g(t,e){return t.msg=c[e],e}function m(t){return(t<<1)-(t>4?9:0)}function v(t){for(var e=t.length;--e>=0;)t[e]=0}function y(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function w(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,y(t.strm)}function b(t,e){t.pending_buf[t.pending++]=e}function x(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function k(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,c=t.strstart>t.w_size-u?t.strstart-(t.w_size-u):0,h=t.window,f=t.w_mask,p=t.prev,d=t.strstart+l,g=h[o+a-1],m=h[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(h[(n=e)+a]===m&&h[n+a-1]===g&&h[n]===h[o]&&h[++n]===h[o+1]){o+=2,n++;do{}while(h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&o<d);if(r=l-(d-o),o=d-l,r>a){if(t.match_start=e,a=r,r>=s)break;g=h[o+a-1],m=h[o+a]}}}while((e=p[e&f])>c&&0!=--i);return a<=t.lookahead?a:t.lookahead}function S(t){var e,n,r,o,c,h,l,f,p,d,g=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=g+(g-u)){i.arraySet(t.window,t.window,g,g,0),t.match_start-=g,t.strstart-=g,t.block_start-=g,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=g?r-g:0}while(--n);e=n=g;do{r=t.prev[--e],t.prev[e]=r>=g?r-g:0}while(--n);o+=g}if(0===t.strm.avail_in)break;if(h=t.strm,l=t.window,f=t.strstart+t.lookahead,p=o,d=void 0,(d=h.avail_in)>p&&(d=p),n=0===d?0:(h.avail_in-=d,i.arraySet(l,h.input,h.next_in,d,f),1===h.state.wrap?h.adler=a(h.adler,l,d,f):2===h.state.wrap&&(h.adler=s(h.adler,l,d,f)),h.next_in+=d,h.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=3)for(c=t.strstart-t.insert,t.ins_h=t.window[c],t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+3-1])&t.hash_mask,t.prev[c&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=c,c++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<u&&0!==t.strm.avail_in)}function C(t,e){for(var n,r;;){if(t.lookahead<u){if(S(t),t.lookahead<u&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-u&&(t.match_length=k(t,n)),t.match_length>=3)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(w(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(w(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(w(t,!1),0===t.strm.avail_out)?1:2}function _(t,e){for(var n,r,i;;){if(t.lookahead<u){if(S(t),t.lookahead<u&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-u&&(t.match_length=k(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(w(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=o._tr_tally(t,0,t.window[t.strstart-1]))&&w(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(w(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(w(t,!1),0===t.strm.avail_out)?1:2}function R(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function T(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),v(this.dyn_ltree),v(this.dyn_dtree),v(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),v(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),v(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:p,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):g(t,h)}function A(t){var e,n=E(t);return 0===n&&((e=t.state).window_size=2*e.w_size,v(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function L(t,e,n,r,o,a){if(!t)return h;var s=1;if(-1===e&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>9||8!==n||r<8||r>15||e<0||e>9||a<0||a>4)return g(t,h);8===r&&(r=9);var c=new T;return t.state=c,c.strm=t,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=a,c.method=n,A(t)}r=[new R(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(S(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,w(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-u&&(w(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(w(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(w(t,!1),t.strm.avail_out),1)})),new R(4,4,8,4,C),new R(4,5,16,8,C),new R(4,6,32,32,C),new R(4,4,16,16,_),new R(8,16,32,32,_),new R(8,16,128,128,_),new R(8,32,128,256,_),new R(32,128,258,1024,_),new R(32,258,258,4096,_)],e.deflateInit=function(t,e){return L(t,e,8,15,8,0)},e.deflateInit2=L,e.deflateReset=A,e.deflateResetKeep=E,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?h:(t.state.gzhead=e,0):h},e.deflate=function(t,e){var n,i,a,c;if(!t||!t.state||e>5||e<0)return t?g(t,h):h;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===d&&4!==e)return g(t,0===t.avail_out?-5:h);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,b(i,31),b(i,139),b(i,8),i.gzhead?(b(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),b(i,255&i.gzhead.time),b(i,i.gzhead.time>>8&255),b(i,i.gzhead.time>>16&255),b(i,i.gzhead.time>>24&255),b(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),b(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(b(i,255&i.gzhead.extra.length),b(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(b(i,0),b(i,0),b(i,0),b(i,0),b(i,0),b(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),b(i,3),i.status=p);else{var u=8+(i.w_bits-8<<4)<<8;u|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(u|=32),u+=31-u%31,i.status=p,x(i,u),0!==i.strstart&&(x(i,t.adler>>>16),x(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),y(t),a=i.pending,i.pending!==i.pending_buf_size));)b(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),y(t),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,b(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),y(t),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,b(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.status=f)}else i.status=f;if(i.status===f&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&y(t),i.pending+2<=i.pending_buf_size&&(b(i,255&t.adler),b(i,t.adler>>8&255),t.adler=0,i.status=p)):i.status=p),0!==i.pending){if(y(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&m(e)<=m(n)&&4!==e)return g(t,-5);if(i.status===d&&0!==t.avail_in)return g(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&i.status!==d){var k=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(S(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(w(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(w(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(w(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,r,i,a,s=t.window;;){if(t.lookahead<=l){if(S(t),t.lookahead<=l&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=s[i=t.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=t.strstart+l;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);t.match_length=l-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(w(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(w(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(w(t,!1),0===t.strm.avail_out)?1:2}(i,e):r[i.level].func(i,e);if(3!==k&&4!==k||(i.status=d),1===k||3===k)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===k&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(v(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),y(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(b(i,255&t.adler),b(i,t.adler>>8&255),b(i,t.adler>>16&255),b(i,t.adler>>24&255),b(i,255&t.total_in),b(i,t.total_in>>8&255),b(i,t.total_in>>16&255),b(i,t.total_in>>24&255)):(x(i,t.adler>>>16),x(i,65535&t.adler)),y(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&e!==f&&e!==p&&e!==d?g(t,h):(t.state=null,e===p?g(t,-3):0):h},e.deflateSetDictionary=function(t,e){var n,r,o,s,c,l,u,f,p=e.length;if(!t||!t.state)return h;if(2===(s=(n=t.state).wrap)||1===s&&42!==n.status||n.lookahead)return h;for(1===s&&(t.adler=a(t.adler,e,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(v(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,e,p-n.w_size,n.w_size,0),e=f,p=n.w_size),c=t.avail_in,l=t.next_in,u=t.input,t.avail_in=p,t.next_in=0,t.input=e,S(n);n.lookahead>=3;){r=n.strstart,o=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=2,S(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=l,t.input=u,t.avail_in=c,n.wrap=s,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){var r=n(11);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var o=256,a=286,s=30,c=15,h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);i(p);var d=new Array(60);i(d);var g=new Array(512);i(g);var m=new Array(256);i(m);var v=new Array(29);i(v);var y,w,b,x=new Array(s);function k(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function S(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function C(t){return t<256?g[t]:g[256+(t>>>7)]}function _(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function R(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,_(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function T(t,e,n){R(t,n[2*e],n[2*e+1])}function E(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function A(t,e,n){var r,i,o=new Array(16),a=0;for(r=1;r<=c;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=E(o[s]++,s))}}function L(t){var e;for(e=0;e<a;e++)t.dyn_ltree[2*e]=0;for(e=0;e<s;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function I(t){t.bi_valid>8?_(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function M(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function D(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&M(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!M(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function B(t,e,n){var r,i,a,s,c=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],i=t.pending_buf[t.l_buf+c],c++,0===r?T(t,i,e):(T(t,(a=m[i])+o+1,e),0!==(s=h[a])&&R(t,i-=v[a],s),T(t,a=C(--r),n),0!==(s=l[a])&&R(t,r-=x[a],s))}while(c<t.last_lit);T(t,256,e)}function F(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<h;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)D(t,o,n);i=h;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],D(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,D(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,h=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,f=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,g=e.stat_desc.max_length,m=0;for(o=0;o<=c;o++)t.bl_count[o]=0;for(h[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(o=h[2*h[2*(r=t.heap[n])+1]+1]+1)>g&&(o=g,m++),h[2*r+1]=o,r>l||(t.bl_count[o]++,a=0,r>=d&&(a=p[r-d]),s=h[2*r],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(u[2*r+1]+a)));if(0!==m){do{for(o=g-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[g]--,m-=2}while(m>0);for(o=g;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>l||(h[2*i+1]!==o&&(t.opt_len+=(o-h[2*i+1])*h[2*i],h[2*i+1]=o),r--)}}(t,e),A(o,l,t.bl_count)}function N(t,e,n){var r,i,o=-1,a=e[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<c&&i===a||(s<h?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4))}function O(t,e,n){var r,i,o=-1,a=e[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<c&&i===a)){if(s<h)do{T(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(T(t,i,t.bl_tree),s--),T(t,16,t.bl_tree),R(t,s-3,2)):s<=10?(T(t,17,t.bl_tree),R(t,s-3,3)):(T(t,18,t.bl_tree),R(t,s-11,7));s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4)}}i(x);var P=!1;function z(t,e,n,i){R(t,0+(i?1:0),3),function(t,e,n,i){I(t),_(t,n),_(t,~n),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}e._tr_init=function(t){P||(function(){var t,e,n,r,i,o=new Array(16);for(n=0,r=0;r<28;r++)for(v[r]=n,t=0;t<1<<h[r];t++)m[n++]=r;for(m[n-1]=r,i=0,r=0;r<16;r++)for(x[r]=i,t=0;t<1<<l[r];t++)g[i++]=r;for(i>>=7;r<s;r++)for(x[r]=i<<7,t=0;t<1<<l[r]-7;t++)g[256+i++]=r;for(e=0;e<=c;e++)o[e]=0;for(t=0;t<=143;)p[2*t+1]=8,t++,o[8]++;for(;t<=255;)p[2*t+1]=9,t++,o[9]++;for(;t<=279;)p[2*t+1]=7,t++,o[7]++;for(;t<=287;)p[2*t+1]=8,t++,o[8]++;for(A(p,287,o),t=0;t<s;t++)d[2*t+1]=5,d[2*t]=E(t,5);y=new k(p,h,257,a,c),w=new k(d,l,0,s,c),b=new k(new Array(0),u,0,19,7)}(),P=!0),t.l_desc=new S(t.dyn_ltree,y),t.d_desc=new S(t.dyn_dtree,w),t.bl_desc=new S(t.bl_tree,b),t.bi_buf=0,t.bi_valid=0,L(t)},e._tr_stored_block=z,e._tr_flush_block=function(t,e,n,r){var i,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),s=function(t){var e;for(N(t,t.dyn_ltree,t.l_desc.max_code),N(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*f[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==e?z(t,e,n,r):4===t.strategy||a===i?(R(t,2+(r?1:0),3),B(t,p,d)):(R(t,4+(r?1:0),3),function(t,e,n,r){var i;for(R(t,e-257,5),R(t,n-1,5),R(t,r-4,4),i=0;i<r;i++)R(t,t.bl_tree[2*f[i]+1],3);O(t,t.dyn_ltree,e-1),O(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),B(t,t.dyn_ltree,t.dyn_dtree)),L(t),r&&I(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(m[n]+o+1)]++,t.dyn_dtree[2*C(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){R(t,2,3),T(t,256,p),function(t){16===t.bi_valid?(_(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){var r=n(11),i=n(28),o=n(29),a=n(58),s=n(59),c=-2,h=12,l=30;function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):c}function d(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,p(t)):c}function g(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?c:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,d(t))):c}function m(t,e){var n,r;return t?(r=new f,t.state=r,r.window=null,0!==(n=g(t,e))&&(t.state=null),n):c}var v,y,w=!0;function b(t){if(w){var e;for(v=new r.Buf32(512),y=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,v,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,y,0,t.work,{bits:5}),w=!1}t.lencode=v,t.lenbits=9,t.distcode=y,t.distbits=5}function x(t,e,n,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,e,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=d,e.inflateReset2=g,e.inflateResetKeep=p,e.inflateInit=function(t){return m(t,15)},e.inflateInit2=m,e.inflate=function(t,e){var n,f,p,d,g,m,v,y,w,k,S,C,_,R,T,E,A,L,I,M,D,B,F,N,O=0,P=new r.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;(n=t.state).mode===h&&(n.mode=13),g=t.next_out,p=t.output,v=t.avail_out,d=t.next_in,f=t.input,m=t.avail_in,y=n.hold,w=n.bits,k=m,S=v,B=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;w<16;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(2&n.wrap&&35615===y){n.check=0,P[0]=255&y,P[1]=y>>>8&255,n.check=o(n.check,P,2,0),y=0,w=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){t.msg="incorrect header check",n.mode=l;break}if(8!=(15&y)){t.msg="unknown compression method",n.mode=l;break}if(w-=4,D=8+(15&(y>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){t.msg="invalid window size",n.mode=l;break}n.dmax=1<<D,t.adler=n.check=1,n.mode=512&y?10:h,y=0,w=0;break;case 2:for(;w<16;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(n.flags=y,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=l;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=l;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(P[0]=255&y,P[1]=y>>>8&255,n.check=o(n.check,P,2,0)),y=0,w=0,n.mode=3;case 3:for(;w<32;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}n.head&&(n.head.time=y),512&n.flags&&(P[0]=255&y,P[1]=y>>>8&255,P[2]=y>>>16&255,P[3]=y>>>24&255,n.check=o(n.check,P,4,0)),y=0,w=0,n.mode=4;case 4:for(;w<16;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(P[0]=255&y,P[1]=y>>>8&255,n.check=o(n.check,P,2,0)),y=0,w=0,n.mode=5;case 5:if(1024&n.flags){for(;w<16;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(P[0]=255&y,P[1]=y>>>8&255,n.check=o(n.check,P,2,0)),y=0,w=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((C=n.length)>m&&(C=m),C&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,d,C,D)),512&n.flags&&(n.check=o(n.check,f,C,d)),m-=C,d+=C,n.length-=C),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===m)break t;C=0;do{D=f[d+C++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D))}while(D&&C<m);if(512&n.flags&&(n.check=o(n.check,f,C,d)),m-=C,d+=C,D)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===m)break t;C=0;do{D=f[d+C++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D))}while(D&&C<m);if(512&n.flags&&(n.check=o(n.check,f,C,d)),m-=C,d+=C,D)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;w<16;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(y!==(65535&n.check)){t.msg="header crc mismatch",n.mode=l;break}y=0,w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=h;break;case 10:for(;w<32;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}t.adler=n.check=u(y),y=0,w=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=g,t.avail_out=v,t.next_in=d,t.avail_in=m,n.hold=y,n.bits=w,2;t.adler=n.check=1,n.mode=h;case h:if(5===e||6===e)break t;case 13:if(n.last){y>>>=7&w,w-=7&w,n.mode=27;break}for(;w<3;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}switch(n.last=1&y,w-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(b(n),n.mode=20,6===e){y>>>=2,w-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=l}y>>>=2,w-=2;break;case 14:for(y>>>=7&w,w-=7&w;w<32;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if((65535&y)!=(y>>>16^65535)){t.msg="invalid stored block lengths",n.mode=l;break}if(n.length=65535&y,y=0,w=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(C=n.length){if(C>m&&(C=m),C>v&&(C=v),0===C)break t;r.arraySet(p,f,d,C,g),m-=C,d+=C,v-=C,g+=C,n.length-=C;break}n.mode=h;break;case 17:for(;w<14;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(n.nlen=257+(31&y),y>>>=5,w-=5,n.ndist=1+(31&y),y>>>=5,w-=5,n.ncode=4+(15&y),y>>>=4,w-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=l;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;w<3;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}n.lens[z[n.have++]]=7&y,y>>>=3,w-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},B=s(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,B){t.msg="invalid code lengths set",n.mode=l;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=(O=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,A=65535&O,!((T=O>>>24)<=w);){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(A<16)y>>>=T,w-=T,n.lens[n.have++]=A;else{if(16===A){for(N=T+2;w<N;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(y>>>=T,w-=T,0===n.have){t.msg="invalid bit length repeat",n.mode=l;break}D=n.lens[n.have-1],C=3+(3&y),y>>>=2,w-=2}else if(17===A){for(N=T+3;w<N;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}w-=T,D=0,C=3+(7&(y>>>=T)),y>>>=3,w-=3}else{for(N=T+7;w<N;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}w-=T,D=0,C=11+(127&(y>>>=T)),y>>>=7,w-=7}if(n.have+C>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=l;break}for(;C--;)n.lens[n.have++]=D}}if(n.mode===l)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=l;break}if(n.lenbits=9,F={bits:n.lenbits},B=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,B){t.msg="invalid literal/lengths set",n.mode=l;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},B=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,B){t.msg="invalid distances set",n.mode=l;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(m>=6&&v>=258){t.next_out=g,t.avail_out=v,t.next_in=d,t.avail_in=m,n.hold=y,n.bits=w,a(t,S),g=t.next_out,p=t.output,v=t.avail_out,d=t.next_in,f=t.input,m=t.avail_in,y=n.hold,w=n.bits,n.mode===h&&(n.back=-1);break}for(n.back=0;E=(O=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,A=65535&O,!((T=O>>>24)<=w);){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(E&&0==(240&E)){for(L=T,I=E,M=A;E=(O=n.lencode[M+((y&(1<<L+I)-1)>>L)])>>>16&255,A=65535&O,!(L+(T=O>>>24)<=w);){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}y>>>=L,w-=L,n.back+=L}if(y>>>=T,w-=T,n.back+=T,n.length=A,0===E){n.mode=26;break}if(32&E){n.back=-1,n.mode=h;break}if(64&E){t.msg="invalid literal/length code",n.mode=l;break}n.extra=15&E,n.mode=22;case 22:if(n.extra){for(N=n.extra;w<N;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,w-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=(O=n.distcode[y&(1<<n.distbits)-1])>>>16&255,A=65535&O,!((T=O>>>24)<=w);){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(0==(240&E)){for(L=T,I=E,M=A;E=(O=n.distcode[M+((y&(1<<L+I)-1)>>L)])>>>16&255,A=65535&O,!(L+(T=O>>>24)<=w);){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}y>>>=L,w-=L,n.back+=L}if(y>>>=T,w-=T,n.back+=T,64&E){t.msg="invalid distance code",n.mode=l;break}n.offset=A,n.extra=15&E,n.mode=24;case 24:if(n.extra){for(N=n.extra;w<N;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,w-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=l;break}n.mode=25;case 25:if(0===v)break t;if(C=S-v,n.offset>C){if((C=n.offset-C)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=l;break}C>n.wnext?(C-=n.wnext,_=n.wsize-C):_=n.wnext-C,C>n.length&&(C=n.length),R=n.window}else R=p,_=g-n.offset,C=n.length;C>v&&(C=v),v-=C,n.length-=C;do{p[g++]=R[_++]}while(--C);0===n.length&&(n.mode=21);break;case 26:if(0===v)break t;p[g++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;w<32;){if(0===m)break t;m--,y|=f[d++]<<w,w+=8}if(S-=v,t.total_out+=S,n.total+=S,S&&(t.adler=n.check=n.flags?o(n.check,p,S,g-S):i(n.check,p,S,g-S)),S=v,(n.flags?y:u(y))!==n.check){t.msg="incorrect data check",n.mode=l;break}y=0,w=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;w<32;){if(0===m)break t;m--,y+=f[d++]<<w,w+=8}if(y!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=l;break}y=0,w=0}n.mode=29;case 29:B=1;break t;case l:B=-3;break t;case 31:return-4;case 32:default:return c}return t.next_out=g,t.avail_out=v,t.next_in=d,t.avail_in=m,n.hold=y,n.bits=w,(n.wsize||S!==t.avail_out&&n.mode<l&&(n.mode<27||4!==e))&&x(t,t.output,t.next_out,S-t.avail_out)?(n.mode=31,-4):(k-=t.avail_in,S-=t.avail_out,t.total_in+=k,t.total_out+=S,n.total+=S,n.wrap&&S&&(t.adler=n.check=n.flags?o(n.check,p,S,t.next_out-S):i(n.check,p,S,t.next_out-S)),t.data_type=n.bits+(n.last?64:0)+(n.mode===h?128:0)+(20===n.mode||15===n.mode?256:0),(0===k&&0===S||4===e)&&0===B&&(B=-5),B)},e.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?c:(n.head=e,e.done=!1,0):c},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?c:11===n.mode&&i(1,e,r,0)!==n.check?-3:x(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):c},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){t.exports=function(t,e){var n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b,x,k,S,C,_,R;n=t.state,r=t.next_in,_=t.input,i=r+(t.avail_in-5),o=t.next_out,R=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),c=n.dmax,h=n.wsize,l=n.whave,u=n.wnext,f=n.window,p=n.hold,d=n.bits,g=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{d<15&&(p+=_[r++]<<d,d+=8,p+=_[r++]<<d,d+=8),w=g[p&v];e:for(;;){if(p>>>=b=w>>>24,d-=b,0==(b=w>>>16&255))R[o++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=g[(65535&w)+(p&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&w,(b&=15)&&(d<b&&(p+=_[r++]<<d,d+=8),x+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=_[r++]<<d,d+=8,p+=_[r++]<<d,d+=8),w=m[p&y];n:for(;;){if(p>>>=b=w>>>24,d-=b,!(16&(b=w>>>16&255))){if(0==(64&b)){w=m[(65535&w)+(p&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(k=65535&w,d<(b&=15)&&(p+=_[r++]<<d,(d+=8)<b&&(p+=_[r++]<<d,d+=8)),(k+=p&(1<<b)-1)>c){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=b,d-=b,k>(b=o-a)){if((b=k-b)>l&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(S=0,C=f,0===u){if(S+=h-b,b<x){x-=b;do{R[o++]=f[S++]}while(--b);S=o-k,C=R}}else if(u<b){if(S+=h+u-b,(b-=u)<x){x-=b;do{R[o++]=f[S++]}while(--b);if(S=0,u<x){x-=b=u;do{R[o++]=f[S++]}while(--b);S=o-k,C=R}}}else if(S+=u-b,b<x){x-=b;do{R[o++]=f[S++]}while(--b);S=o-k,C=R}for(;x>2;)R[o++]=C[S++],R[o++]=C[S++],R[o++]=C[S++],x-=3;x&&(R[o++]=C[S++],x>1&&(R[o++]=C[S++]))}else{S=o-k;do{R[o++]=R[S++],R[o++]=R[S++],R[o++]=R[S++],x-=3}while(x>2);x&&(R[o++]=R[S++],x>1&&(R[o++]=R[S++]))}break}}break}}while(r<i&&o<s);r-=x=d>>3,p&=(1<<(d-=x<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=d}},function(t,e,n){var r=n(11),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,c,h,l,u,f){var p,d,g,m,v,y,w,b,x,k=f.bits,S=0,C=0,_=0,R=0,T=0,E=0,A=0,L=0,I=0,M=0,D=null,B=0,F=new r.Buf16(16),N=new r.Buf16(16),O=null,P=0;for(S=0;S<=15;S++)F[S]=0;for(C=0;C<c;C++)F[e[n+C]]++;for(T=k,R=15;R>=1&&0===F[R];R--);if(T>R&&(T=R),0===R)return h[l++]=20971520,h[l++]=20971520,f.bits=1,0;for(_=1;_<R&&0===F[_];_++);for(T<_&&(T=_),L=1,S=1;S<=15;S++)if(L<<=1,(L-=F[S])<0)return-1;if(L>0&&(0===t||1!==R))return-1;for(N[1]=0,S=1;S<15;S++)N[S+1]=N[S]+F[S];for(C=0;C<c;C++)0!==e[n+C]&&(u[N[e[n+C]]++]=C);if(0===t?(D=O=u,y=19):1===t?(D=i,B-=257,O=o,P-=257,y=256):(D=a,O=s,y=-1),M=0,C=0,S=_,v=l,E=T,A=0,g=-1,m=(I=1<<T)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){w=S-A,u[C]<y?(b=0,x=u[C]):u[C]>y?(b=O[P+u[C]],x=D[B+u[C]]):(b=96,x=0),p=1<<S-A,_=d=1<<E;do{h[v+(M>>A)+(d-=p)]=w<<24|b<<16|x|0}while(0!==d);for(p=1<<S-1;M&p;)p>>=1;if(0!==p?(M&=p-1,M+=p):M=0,C++,0==--F[S]){if(S===R)break;S=e[n+u[C]]}if(S>T&&(M&m)!==g){for(0===A&&(A=T),v+=_,L=1<<(E=S-A);E+A<R&&!((L-=F[E+A])<=0);)E++,L<<=1;if(I+=1<<E,1===t&&I>852||2===t&&I>592)return 1;h[g=M&m]=T<<24|E<<16|v-l|0}}return 0!==M&&(h[v+M]=S-A<<24|64<<16|0),f.bits=T,0}},function(t,e,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){var r=n(1).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function o(t){if(r.isBuffer(t))return t;var e="function"==typeof r.alloc&&"function"==typeof r.from;if("number"==typeof t)return e?r.alloc(t):new r(t);if("string"==typeof t)return e?r.from(t):new r(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function a(t,e){t=o(t),r.isBuffer(e)&&(e=e.readUInt32BE(0));for(var n=-1^~~e,a=0;a<t.length;a++)n=i[255&(n^t[a])]^n>>>8;return-1^n}function s(){return t=a.apply(null,arguments),(e=o(4)).writeInt32BE(t,0),e;var t,e}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),s.signed=function(){return a.apply(null,arguments)},s.unsigned=function(){return a.apply(null,arguments)>>>0},t.exports=s},function(t,e,n){(function(e){const{CramMalformedError:r}=n(0),i=n(12),o=n(63),a=n(64),s=n(65);class c{constructor(t,e=0){this._buffer=t,this._position=e,this.length=t.length}get(){const t=this._buffer[this._position];return this._position+=1,t}getByte(){return this.get()}getByteAt(t){return this._buffer[t]}position(){return this._position}put(t){return this._buffer[this._position]=t,this._position+=1,t}putAt(t,e){return this._buffer[t]=e,e}setPosition(t){return this._position=t,t}getInt(){const t=this._buffer.readInt32LE(this._position);return this._position+=4,t}remaining(){return this._buffer.length-this._position}}t.exports={uncompress:function(t,n,h=0){if(0===t.length)return n.fill(0),n;const l=new c(t,h),u=l.get();if(0!==u&&1!==u)throw new r(`Invalid rANS order ${u}`);if(l.getInt()!==l.remaining()-4)throw new r("Incorrect input length.");const f=l.getInt(),p=new c(n||e.allocUnsafe(f));if(p.length<f)throw new r(`Output buffer too small to fit ${f} bytes.`);switch(u){case 0:return function(t,e){const n=new i.AriDecoder,r=new Array(256);for(let t=0;t<r.length;t+=1)r[t]=new i.Symbol;return o.readStatsO0(t,n,r),a.uncompress(t,n,r,e),e}(l,p);case 1:return function(t,e){const n=new Array(256);for(let t=0;t<n.length;t+=1)n[t]=new i.AriDecoder;const r=new Array(256);for(let t=0;t<r.length;t+=1){r[t]=new Array(256);for(let e=0;e<r[t].length;e+=1)r[t][e]=new i.Symbol}return o.readStatsO1(t,n,r),s.uncompress(t,e,n,r),e}(l,p);default:throw new r(`Invalid rANS order: ${u}`)}}}}).call(this,n(1).Buffer)},function(t,e,n){const{CramMalformedError:r}=n(0),i=n(13),o=n(12);function a(t){if(!t)throw new r("assertion failed")}t.exports={readStatsO0:function(t,e,n){let r=0,s=0,c=255&t.get();do{null==e.fc[c]&&(e.fc[c]=new o.FC),e.fc[c].F=255&t.get(),e.fc[c].F>=128&&(e.fc[c].F&=-129,e.fc[c].F=(127&e.fc[c].F)<<8|255&t.get()),e.fc[c].C=s,o.symbolInit(n[c],e.fc[c].C,e.fc[c].F),e.R||(e.R=new Array(i.TOTFREQ)),e.R.fill(c,s,s+e.fc[c].F),s+=e.fc[c].F,0===r&&c+1===(255&t.getByteAt(t.position()))?(c=255&t.get(),r=255&t.get()):0!==r?(r-=1,c+=1):c=255&t.get()}while(0!==c);a(s<i.TOTFREQ)},readStatsO1:function(t,e,n){let r=0,s=255&t.get();do{let c=0,h=0,l=255&t.get();null==e[s]&&(e[s]=new o.AriDecoder);do{null==e[s].fc[l]&&(e[s].fc[l]=new o.FC),e[s].fc[l].F=255&t.get(),e[s].fc[l].F>=128&&(e[s].fc[l].F&=-129,e[s].fc[l].F=(127&e[s].fc[l].F)<<8|255&t.get()),e[s].fc[l].C=h,0===e[s].fc[l].F&&(e[s].fc[l].F=i.TOTFREQ),null==n[s][l]&&(n[s][l]=new o.RansDecSymbol),o.symbolInit(n[s][l],e[s].fc[l].C,e[s].fc[l].F),null==e[s].R&&(e[s].R=new Array(i.TOTFREQ)),e[s].R.fill(l,h,h+e[s].fc[l].F),a((h+=e[s].fc[l].F)<=i.TOTFREQ),0===c&&l+1===(255&t.getByteAt(t.position()))?(l=255&t.get(),c=255&t.get()):0!==c?(c-=1,l+=1):l=255&t.get()}while(0!==l);0===r&&s+1===(255&t.getByteAt(t.position()))?(s=255&t.get(),r=255&t.get()):0!==r?(r-=1,s+=1):s=255&t.get()}while(0!==s)}}},function(t,e,n){const{CramMalformedError:r}=n(0),i=n(13),o=n(12);t.exports={uncompress:function(t,e,n,a){let s=t.getInt(),c=t.getInt(),h=t.getInt(),l=t.getInt();const u=a.remaining(),f=-4&u;for(let r=0;r<f;r+=4){const u=e.R[o.get(s,i.TF_SHIFT)],f=e.R[o.get(c,i.TF_SHIFT)],p=e.R[o.get(h,i.TF_SHIFT)],d=e.R[o.get(l,i.TF_SHIFT)];a.putAt(r,u),a.putAt(r+1,f),a.putAt(r+2,p),a.putAt(r+3,d),s=o.advanceSymbolStep(s,n[255&u],i.TF_SHIFT),c=o.advanceSymbolStep(c,n[255&f],i.TF_SHIFT),h=o.advanceSymbolStep(h,n[255&p],i.TF_SHIFT),l=o.advanceSymbolStep(l,n[255&d],i.TF_SHIFT),s=o.renormalize(s,t),c=o.renormalize(c,t),h=o.renormalize(h,t),l=o.renormalize(l,t)}let p;switch(a.setPosition(f),3&u){case 0:break;case 1:p=e.R[o.get(s,i.TF_SHIFT)],o.advanceSymbol(s,t,n[255&p],i.TF_SHIFT),a.put(p);break;case 2:p=e.R[o.get(s,i.TF_SHIFT)],o.advanceSymbol(s,t,n[255&p],i.TF_SHIFT),a.put(p),p=e.R[o.get(c,i.TF_SHIFT)],o.advanceSymbol(c,t,n[255&p],i.TF_SHIFT),a.put(p);break;case 3:p=e.R[o.get(s,i.TF_SHIFT)],o.advanceSymbol(s,t,n[255&p],i.TF_SHIFT),a.put(p),p=e.R[o.get(c,i.TF_SHIFT)],o.advanceSymbol(c,t,n[255&p],i.TF_SHIFT),a.put(p),p=e.R[o.get(h,i.TF_SHIFT)],o.advanceSymbol(h,t,n[255&p],i.TF_SHIFT),a.put(p);break;default:throw new r("invalid output size encountered during rANS decoding")}a.setPosition(0)}}},function(t,e,n){const r=n(13),i=n(12);t.exports={uncompress:function(t,e,n,o){const a=e.remaining();let s=t.getInt(),c=t.getInt(),h=t.getInt(),l=t.getInt();const u=a>>2;let f=0,p=u,d=2*u,g=3*u,m=0,v=0,y=0,w=0;for(;f<u;f+=1,p+=1,d+=1,g+=1){const a=255&n[m].R[i.get(s,r.TF_SHIFT)],u=255&n[v].R[i.get(c,r.TF_SHIFT)],b=255&n[y].R[i.get(h,r.TF_SHIFT)],x=255&n[w].R[i.get(l,r.TF_SHIFT)];e.putAt(f,a),e.putAt(p,u),e.putAt(d,b),e.putAt(g,x),s=i.advanceSymbolStep(s,o[m][a],r.TF_SHIFT),c=i.advanceSymbolStep(c,o[v][u],r.TF_SHIFT),h=i.advanceSymbolStep(h,o[y][b],r.TF_SHIFT),l=i.advanceSymbolStep(l,o[w][x],r.TF_SHIFT),s=i.renormalize(s,t),c=i.renormalize(c,t),h=i.renormalize(h,t),l=i.renormalize(l,t),m=a,v=u,y=b,w=x}for(;g<a;g+=1){const a=255&n[w].R[i.get(l,r.TF_SHIFT)];e.putAt(g,a),l=i.advanceSymbol(l,t,o[w][a],r.TF_SHIFT),w=a}}}},function(t,e,n){const{Parser:r}=n(67),i=(new r).itf8(),o={parser:(new r).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},a={parser:(new r).uint8("compressionMethod",{formatter:t=>{const e=["raw","gzip","bzip2","lzma","rans"][t];if(!e)throw new Error(`compression method number ${t} not implemented`);return e}}).uint8("contentType",{formatter:t=>{const e=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][t];if(!e)throw new Error(`invalid block content type id ${t}`);return e}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},s={parser:(new r).uint32("crc32"),maxLength:4},c=(new r).itf8("size").buffer("entries",{length:"size",formatter:t=>{function e(e,n){const r=t.toString("utf8",e,n),i=[];for(let t=0;t<r.length;t+=3)i.push(r.substr(t,3));return i}var n,r=[],i=0;for(n=0;n<t.length;n+=1)t[n]||(r.push(e(i,n)),i=n+1);return n>i&&r.push(e(i,n)),r}}),h=(new r).uint8(null,{formatter:t=>!!t}),l=(new r).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new r).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:h,UI:h,PI:h,RN:h,AP:h,RR:h,SM:(new r).array(null,{type:"uint8",length:5}),TD:(new r).nest(null,{type:c,formatter:t=>t.entries})}})});function u(t){const e={};return t.entries.forEach(({key:t,value:n})=>{e[t]&&console.warn(`duplicate key ${t} in map`),e[t]=n}),e}const f={cramFileDefinition:o,cramBlockHeader:a,cramBlockCrc32:s},p={cramUnmappedSliceHeader(t){let e=0,n=(new r).itf8("numRecords");return e+=5,t>=3?(n=n.ltf8("recordCounter"),e+=9):2===t&&(n=n.itf8("recordCounter"),e+=5),n=n.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:i,length:"numContentIds"}),e+=10,t>=2&&(n=n.array("md5",{type:"uint8",length:16}),e+=16),{parser:n,maxLength:t=>e+5*t}},cramMappedSliceHeader(t){let e=(new r).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),n=20;return t>=3?(e=e.ltf8("recordCounter"),n+=9):2===t&&(e=e.itf8("recordCounter"),n+=5),e=e.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:i,length:"numContentIds"}).itf8("refBaseBlockId"),n+=15,t>=2&&(e=e.array("md5",{type:"uint8",length:16}),n+=16),{parser:e,maxLength:t=>n+5*t}},cramEncoding:t=>({parser:(new r).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new r,1:(new r).itf8("blockContentId"),2:(new r).itf8("offset").itf8("M"),3:r.start().itf8("numCodes").array("symbols",{length:"numCodes",type:i}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:i}),4:r.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new r).uint8("stopByte")[t>1?"itf8":"int"]("blockContentId"),6:(new r).itf8("offset").itf8("length"),7:(new r).itf8("offset").itf8("K"),8:(new r).itf8("offset").itf8("log2m"),9:(new r).itf8("offset")}})}),cramDataSeriesEncodingMap(t){return(new r).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new r).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(t).parser})})},cramTagEncodingMap(t){return(new r).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new r).itf8("key",{formatter:t=>String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)}).nest("value",{type:this.cramEncoding(t).parser})})},cramCompressionHeader(t){let e=new r;return{parser:e=e.nest("preservation",{type:l,formatter:u}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(t),formatter:u}).nest("tagEncoding",{type:this.cramTagEncodingMap(t),formatter:u})}},cramContainerHeader1(t){let e=(new r).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),n=24;return t>=3?(e=e.ltf8("recordCounter"),n+=9):2===t&&(e=e.itf8("recordCounter"),n+=5),t>1&&(e=e.ltf8("numBases"),n+=9),{parser:e=e.itf8("numBlocks").itf8("numLandmarks"),maxLength:n+=10}},cramContainerHeader2(t){let e=(new r).itf8("numLandmarks").array("landmarks",{type:(new r).itf8(),length:"numLandmarks"}),n=0;return t>=3&&(e=e.uint32("crc32"),n=4),{parser:e,maxLength:t=>5+5*t+n}}};t.exports={cramFileDefinition:o,getSectionParsers:function(t){const e=Object.assign({},f);return Object.keys(p).forEach(n=>{e[n]=p[n](t)}),e}}},function(t,e,n){(function(t){var r=n(68),i=n(70).Context,o=n(31);"undefined"!=typeof window&&(window.Buffer=t);var a={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8},s={},c=[];!function(){var t;for(t=1;t<=32;t++)c.push(t)}();var h={};Object.keys(a).concat(Object.keys({String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null,Itf8:null,Ltf8:null})).forEach((function(t){h[t.toLowerCase()]=t}));var l=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="le",this.constructorFn=null,this.alias=null};l.start=function(){return new l},Object.keys(a).forEach((function(t){l.prototype[t.toLowerCase()]=function(e,n){return this.setNextParser(t.toLowerCase(),e,n)};var e=t.replace(/BE|LE/,"").toLowerCase();e in l.prototype||(l.prototype[e]=function(t,n){return this[e+this.endian](t,n)})})),c.forEach((function(t){l.prototype["bit"+t.toString()]=function(e,n){return n||(n={}),n.length=t,this.setNextParser("bit",e,n)}})),l.prototype.namely=function(t){return s[t]=this,this.alias=t,this},l.prototype.skip=function(t,e){if(e&&e.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:t})},l.prototype.string=function(t,e){if(!e.zeroTerminated&&!e.length&&!e.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((e.zeroTerminated||e.length)&&e.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(e.stripNull&&!e.length&&!e.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return e.encoding=e.encoding||"utf8",this.setNextParser("string",t,e)},l.prototype.buffer=function(t,e){if(!e.length&&!e.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",t,e)},l.prototype.array=function(t,e){if(!e.readUntil&&!e.length&&!e.lengthInBytes)throw new Error("Length option of array is not defined.");if(!e.type)throw new Error("Type option of array is not defined.");if("string"==typeof e.type&&!s[e.type]&&Object.keys(a).indexOf(h[e.type])<0)throw new Error('Specified primitive type "'+e.type+'" is not supported.');return this.setNextParser("array",t,e)},l.prototype.choice=function(t,e){if(1==arguments.length&&"object"==typeof t&&(e=t,t=null),!e.tag)throw new Error("Tag option of array is not defined.");if(!e.choices)throw new Error("Choices option of array is not defined.");return Object.keys(e.choices).forEach((function(n){if(!e.choices[n])throw new Error("Choice Case "+n+" of "+t+" is not valid.");if("string"==typeof e.choices[n]&&!s[e.choices[n]]&&Object.keys(a).indexOf(h[e.choices[n]])<0)throw new Error('Specified primitive type "'+e.choices[n]+'" is not supported.')}),this),this.setNextParser("choice",t,e)},l.prototype.nest=function(t,e){if(1==arguments.length&&"object"==typeof t&&(e=t,t=null),!e.type)throw new Error("Type option of nest is not defined.");if(!(e.type instanceof l||s[e.type]))throw new Error("Type option of nest must be a Parser object.");if(!(e.type instanceof l||t))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",t,e)},l.prototype.endianess=function(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+t)}return this},l.prototype.create=function(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this},l.prototype.getCode=function(){var t=new i;return t.pushCode("if (!Buffer.isBuffer(buffer)) {"),t.generateError('"argument buffer is not a Buffer object"'),t.pushCode("}"),this.alias?this.addAliasedCode(t):this.addRawCode(t),this.alias?t.pushCode("return {0}(0)","___parser_"+this.alias):t.pushCode("return { offset: offset, result: vars };"),t.code},l.prototype.addRawCode=function(t){t.pushCode("var offset = 0;"),this.constructorFn?t.pushCode("var vars = new constructorFn();"):t.pushCode("var vars = {};"),this.generate(t),this.resolveReferences(t),t.pushCode("return { offset: offset, result: vars };")},l.prototype.addAliasedCode=function(t){return t.pushCode("function {0}(offset) {","___parser_"+this.alias),this.constructorFn?t.pushCode("var vars = new constructorFn();"):t.pushCode("var vars = {};"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t},l.prototype.resolveReferences=function(t){var e=t.getUnresolvedReferences();t.markRequested(e),e.forEach((function(e){s[e].addAliasedCode(t)}))},l.prototype.compile=function(){var t="(function(buffer, constructorFn, Long) { "+this.getCode()+" })";this.compiled=r.runInThisContext(t)},l.prototype.sizeOf=function(){var t=NaN;if(Object.keys(a).indexOf(this.type)>=0)t=a[this.type];else if("String"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("Buffer"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("Array"===this.type&&"number"==typeof this.options.length){var e=NaN;"string"==typeof this.options.type?e=a[h[this.options.type]]:this.options.type instanceof l&&(e=this.options.type.sizeOf()),t=this.options.length*e}else"Skip"===this.type?t=this.options.length:"Nest"===this.type?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t},l.prototype.parse=function(t){return this.compiled||this.compile(),this.compiled(t,this.constructorFn,o)},l.prototype.setNextParser=function(t,e,n){var r=new l;return r.type=h[t],r.varName=e,r.options=n||r.options,r.endian=this.endian,this.head?this.head.next=r:this.next=r,this.head=r,this},l.prototype.generate=function(t){this.type&&(this["generate"+this.type](t),this.generateAssert(t));var e=t.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(t,e,this.options.formatter),this.generateNext(t)},l.prototype.generateAssert=function(t){if(this.options.assert){var e=t.generateVariable(this.varName);switch(typeof this.options.assert){case"function":t.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,e);break;case"number":t.pushCode("if ({0} !== {1}) {",this.options.assert,e);break;case"string":t.pushCode('if ("{0}" !== {1}) {',this.options.assert,e);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}t.generateError('"Assert error: {0} is " + {0}',e),t.pushCode("}")}},l.prototype.generateNext=function(t){return this.next&&(t=this.next.generate(t)),t},Object.keys(a).forEach((function(t){l.prototype["generate"+t]=function(e){e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),t),e.pushCode("offset += {0};",a[t])}})),l.prototype.generateBit=function(t){var e=JSON.parse(JSON.stringify(this));if(e.varName=t.generateVariable(e.varName),t.bitFields.push(e),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var n=0;t.bitFields.forEach((function(t){n+=t.options.length}));var r=t.generateTmpVariable();if(n<=8)t.pushCode("var {0} = buffer.readUInt8(offset);",r),n=8;else if(n<=16)t.pushCode("var {0} = buffer.readUInt16BE(offset);",r),n=16;else if(n<=24){var i=t.generateTmpVariable(),o=t.generateTmpVariable();t.pushCode("var {0} = buffer.readUInt16BE(offset);",i),t.pushCode("var {0} = buffer.readUInt8(offset + 2);",o),t.pushCode("var {2} = ({0} << 8) | {1};",i,o,r),n=24}else{if(!(n<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");t.pushCode("var {0} = buffer.readUInt32BE(offset);",r),n=32}t.pushCode("offset += {0};",n/8);var a=0,s="be"===this.endian;t.bitFields.forEach((function(e){t.pushCode("{0} = {1} >> {2} & {3};",e.varName,r,s?n-a-e.options.length:a,(1<<e.options.length)-1),a+=e.options.length})),t.bitFields=[]}},l.prototype.generateSkip=function(t){var e=t.generateOption(this.options.length);t.pushCode("offset += {0};",e)},l.prototype.generateString=function(t){var e=t.generateVariable(this.varName),n=t.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(t.pushCode("var {0} = offset;",n),t.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",n,this.options.length),t.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",e,this.options.encoding,n,this.options.length)):this.options.length?(t.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",e,this.options.encoding,t.generateOption(this.options.length)),t.pushCode("offset += {0};",t.generateOption(this.options.length))):this.options.zeroTerminated?(t.pushCode("var {0} = offset;",n),t.pushCode("while(buffer.readUInt8(offset++) !== 0);"),t.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",e,this.options.encoding,n)):this.options.greedy&&(t.pushCode("var {0} = offset;",n),t.pushCode("while(buffer.length > offset++);"),t.pushCode("{0} = buffer.toString('{1}', {2}, offset);",e,this.options.encoding,n)),this.options.stripNull&&t.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",e)},l.prototype.generateBuffer=function(t){"eof"===this.options.readUntil?t.pushCode("{0} = buffer.slice(offset);",t.generateVariable(this.varName)):(t.pushCode("{0} = buffer.slice(offset, offset + {1});",t.generateVariable(this.varName),t.generateOption(this.options.length)),t.pushCode("offset += {0};",t.generateOption(this.options.length))),this.options.clone&&t.pushCode("{0} = Buffer.from({0});",t.generateVariable(this.varName))},l.prototype.generateArray=function(t){var e=t.generateOption(this.options.length),n=t.generateOption(this.options.lengthInBytes),r=this.options.type,i=t.generateTmpVariable(),o=t.generateVariable(this.varName),c=t.generateTmpVariable(),u=this.options.key,f="string"==typeof u;if(f?t.pushCode("{0} = {};",o):t.pushCode("{0} = [];",o),"function"==typeof this.options.readUntil?t.pushCode("do {"):"eof"===this.options.readUntil?t.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",i):void 0!==n?t.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",i,n):t.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",i,e),"string"==typeof r)if(s[r]){var p=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",p,"___parser_"+r),t.pushCode("var {0} = {1}.result; offset = {1}.offset;",c,p),r!==this.alias&&t.addReference(r)}else t.pushCode("var {0} = buffer.read{1}(offset);",c,h[r]),t.pushCode("offset += {0};",a[h[r]]);else r instanceof l&&(t.pushCode("var {0} = {};",c),t.pushScope(c),r.generate(t),t.popScope());f?t.pushCode("{0}[{2}.{1}] = {2};",o,u,c):t.pushCode("{0}.push({1});",o,c),t.pushCode("}"),"function"==typeof this.options.readUntil&&t.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,c)},l.prototype.generateChoiceCase=function(t,e,n){if("string"==typeof n)if(s[n]){var r=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",r,"___parser_"+n),t.pushCode("{0} = {1}.result; offset = {1}.offset;",t.generateVariable(this.varName),r),n!==this.alias&&t.addReference(n)}else t.pushCode("{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),h[n]),t.pushCode("offset += {0};",a[h[n]]);else n instanceof l&&(t.pushPath(e),n.generate(t),t.popPath(e))},l.prototype.generateChoice=function(t){var e=t.generateOption(this.options.tag);this.varName&&t.pushCode("{0} = {};",t.generateVariable(this.varName)),t.pushCode("switch({0}) {",e),Object.keys(this.options.choices).forEach((function(e){var n=this.options.choices[e];isNaN(parseInt(e,10))?t.pushCode("case '{0}':",e):t.pushCode("case {0}:",e),this.generateChoiceCase(t,this.varName,n),t.pushCode("break;")}),this),t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError('"Met undefined tag value " + {0} + " at choice"',e),t.pushCode("}")},l.prototype.generateNest=function(t){var e=t.generateVariable(this.varName);if(this.options.type instanceof l)this.varName&&t.pushCode("{0} = {};",e),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(s[this.options.type]){var n=t.generateTmpVariable();t.pushCode("var {0} = {1}(offset);",n,"___parser_"+this.options.type),t.pushCode("{0} = {1}.result; offset = {1}.offset;",e,n),this.options.type!==this.alias&&t.addReference(this.options.type)}},l.prototype.generateFormatter=function(t,e,n){"function"==typeof n&&t.pushCode("{0} = ({1}).call(this, {0});",e,n)},l.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},l.prototype.itf8=function(t,e){return this.setNextParser("itf8",t,e)},l.prototype.generateItf8=function(t){const e=t.generateVariable(this.varName),n=t.generateTmpVariable();t.pushCode(`\n    var ${n} = buffer[offset];\n    if (${n} < 0x80) {\n      ${e} = ${n};\n      offset += 1;\n    } else if (${n} < 0xc0) {\n      ${e} = ((${n}<<8) | buffer[offset+1]) & 0x3fff;\n      offset += 2;\n    } else if (${n} < 0xe0) {\n      ${e} = ((${n}<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\n      offset += 3;\n    } else if (${n} < 0xf0) {\n      ${e} = ((${n}<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n      offset += 4\n    } else {\n      ${e} = ((${n} & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n      offset += 5\n    }\n  `)},l.prototype.ltf8=function(t,e){return this.setNextParser("ltf8",t,e)},l.prototype.generateLtf8=function(t){const e=t.generateVariable(this.varName),n=t.generateTmpVariable();t.pushCode(`\n  var ${n} = buffer[offset];\n  if (${n} < 0x80) {\n    ${e} = ${n};\n    offset += 1;\n  } else if (${n} < 0xc0) {\n    ${e} = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\n    offset += 2;\n  } else if (${n} < 0xe0) {\n    ${e} = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\n    ${e} = (((${n} & 63) << 16) | buffer.readUInt16LE(offset + 1));\n    offset += 3;\n  } else if (${n} < 0xf0) {\n    ${e} = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n    offset += 4;\n  } else if (${n} < 0xf8) {\n    ${e} = (((buffer[offset] & 15) * Math.pow(2,32))) +\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n    offset += 5;\n  } else if (${n} < 0xfc) {\n    ${e} = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\n    offset += 6;\n  } else if (${n} < 0xfe) {\n    ${e} = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\n    offset += 7;\n  } else if (${n} < 0xff) {\n    ${e} = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\n    if (${e}.greaterThan(Number.MAX_SAFE_INTEGER) || ${e}.lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ${e} = ${e}.toNumber()\n    offset += 8;\n  } else {\n    ${e} = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\n    if (${e}.greaterThan(Number.MAX_SAFE_INTEGER) || ${e}.lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ${e} = ${e}.toNumber()\n    offset += 9;\n  }\n  `)},e.Parser=l}).call(this,n(1).Buffer)},function(t,e,n){var r=n(69),i=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},o=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},a=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),s=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval2","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function c(){}c.prototype={};var h=e.Script=function(t){if(!(this instanceof h))return new h(t);this.code=t};h.prototype.runInContext=function(t){if(!(t instanceof c))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,h=n.eval2,l=n.execScript;!h&&l&&(l.call(n,"null"),h=n.eval2),o(i(t),(function(e){n[e]=t[e]})),o(s,(function(e){t[e]&&(n[e]=t[e])}));var u=i(n),f=h.call(n,this.code);return o(i(n),(function(e){(e in t||-1===r(u,e))&&(t[e]=n[e])})),o(s,(function(e){e in t||a(t,e,n[e])})),document.body.removeChild(e),f},h.prototype.runInThisContext=function(){return Ia(this.code)},h.prototype.runInNewContext=function(t){var e=h.createContext(t),n=this.runInContext(e);return o(i(e),(function(n){t[n]=e[n]})),n},o(i(h.prototype),(function(t){e[t]=h[t]=function(e){var n=h(e);return n[t].apply(n,[].slice.call(arguments,1))}})),e.createScript=function(t){return e.Script(t)},e.createContext=h.createContext=function(t){var e=new c;return"object"==typeof t&&o(i(t),(function(n){e[n]=t[n]})),e}},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e){var n=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};n.prototype.generateVariable=function(t){var e=[];for(Array.prototype.push.apply(e,this.scopes[this.scopes.length-1]);/^\$parent\./.test(t);)e.pop(),t=t.replace(/^\$parent\./,"");return t&&e.push(t),e.join(".")},n.prototype.generateOption=function(t){switch(typeof t){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return"("+t+").call("+this.generateVariable()+", vars)"}},n.prototype.generateError=function(){var t=Array.prototype.slice.call(arguments),e=n.interpolate.apply(this,t);this.isAsync?this.pushCode("return process.nextTick(function() { callback(new Error("+e+"), vars); });"):this.pushCode("throw new Error("+e+");")},n.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},n.prototype.pushCode=function(){var t=Array.prototype.slice.call(arguments);this.code+=n.interpolate.apply(this,t)+"\n"},n.prototype.pushPath=function(t){t&&this.scopes[this.scopes.length-1].push(t)},n.prototype.popPath=function(t){t&&this.scopes[this.scopes.length-1].pop()},n.prototype.pushScope=function(t){this.scopes.push([t])},n.prototype.popScope=function(){this.scopes.pop()},n.prototype.addReference=function(t){this.references[t]||(this.references[t]={resolved:!1,requested:!1})},n.prototype.markResolved=function(t){this.references[t].resolved=!0},n.prototype.markRequested=function(t){t.forEach(function(t){this.references[t].requested=!0}.bind(this))},n.prototype.getUnresolvedReferences=function(){var t=this.references;return Object.keys(this.references).filter((function(e){return!t[e].resolved&&!t[e].requested}))},n.interpolate=function(t){var e=t.match(/{\d+}/g),n=Array.prototype.slice.call(arguments,1);return e&&e.forEach((function(e){var r=parseInt(e.substr(1,e.length-2),10);t=t.replace(e,n[r].toString())})),t},e.Context=n},function(t,e,n){(function(e){const{CramMalformedError:r}=n(0),{itf8Size:i,parseItem:o,tinyMemoize:a}=n(8),s=n(75),c=n(78);class h{constructor(t,e){this.file=t,this.filePosition=e}getHeader(){return this._readContainerHeader(this.filePosition)}async getCompressionHeaderBlock(){if(!(await this.getHeader()).numRecords)return null;const t=await this.file.getSectionParsers(),e=await this.getFirstBlock();if("COMPRESSION_HEADER"!==e.contentType)throw new r(`invalid content type ${e.contentType} in what is supposed to be the compression header block`);const n=o(e.content,t.cramCompressionHeader.parser,0,e.contentPosition);return e.content=n,e}async getFirstBlock(){const t=await this.getHeader();return this.file.readBlock(t._endPosition)}async getCompressionScheme(){const t=await this.getCompressionHeaderBlock();if(t)return new c(t.content)}getSlice(t,e){return new s(this,t,e)}async _readContainerHeader(t){const n=await this.file.getSectionParsers(),{cramContainerHeader1:r,cramContainerHeader2:a}=n,{size:s}=await this.file.stat();if(t>=s)return;const c=e.allocUnsafe(r.maxLength);await this.file.read(c,0,r.maxLength,t);const h=o(c,r.parser),l=i(h.numLandmarks);if(t+h.length>=s)return void console.warn(`${this.file}: container header at ${t} indicates that the container has length ${h.length}, which extends beyond the length of the file. Skipping this container.`);const u=e.allocUnsafe(a.maxLength(h.numLandmarks));await this.file.read(u,0,a.maxLength(h.numLandmarks),t+h._size-l);const f=o(u,a.parser);return this.file.validateChecksums&&void 0!==f.crc32&&await this.file.checkCrc32(t,h._size+f._size-l-4,f.crc32,`container header beginning at position ${t}`),Object.assign(h,f,{_size:h._size+f._size-l,_endPosition:h._size+f._size-l+t})}}"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach(t=>a(h,t)),t.exports=h}).call(this,n(1).Buffer)},function(t,e,n){var r,i,o,a,s;r=n(73),i=n(32).utf8,o=n(74),a=n(32).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var n=r.bytesToWords(t),c=8*t.length,h=1732584193,l=-271733879,u=-1732584194,f=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var d=s._ff,g=s._gg,m=s._hh,v=s._ii;for(p=0;p<n.length;p+=16){var y=h,w=l,b=u,x=f;h=d(h,l,u,f,n[p+0],7,-680876936),f=d(f,h,l,u,n[p+1],12,-389564586),u=d(u,f,h,l,n[p+2],17,606105819),l=d(l,u,f,h,n[p+3],22,-1044525330),h=d(h,l,u,f,n[p+4],7,-176418897),f=d(f,h,l,u,n[p+5],12,1200080426),u=d(u,f,h,l,n[p+6],17,-1473231341),l=d(l,u,f,h,n[p+7],22,-45705983),h=d(h,l,u,f,n[p+8],7,1770035416),f=d(f,h,l,u,n[p+9],12,-1958414417),u=d(u,f,h,l,n[p+10],17,-42063),l=d(l,u,f,h,n[p+11],22,-1990404162),h=d(h,l,u,f,n[p+12],7,1804603682),f=d(f,h,l,u,n[p+13],12,-40341101),u=d(u,f,h,l,n[p+14],17,-1502002290),h=g(h,l=d(l,u,f,h,n[p+15],22,1236535329),u,f,n[p+1],5,-165796510),f=g(f,h,l,u,n[p+6],9,-1069501632),u=g(u,f,h,l,n[p+11],14,643717713),l=g(l,u,f,h,n[p+0],20,-373897302),h=g(h,l,u,f,n[p+5],5,-701558691),f=g(f,h,l,u,n[p+10],9,38016083),u=g(u,f,h,l,n[p+15],14,-660478335),l=g(l,u,f,h,n[p+4],20,-405537848),h=g(h,l,u,f,n[p+9],5,568446438),f=g(f,h,l,u,n[p+14],9,-1019803690),u=g(u,f,h,l,n[p+3],14,-187363961),l=g(l,u,f,h,n[p+8],20,1163531501),h=g(h,l,u,f,n[p+13],5,-1444681467),f=g(f,h,l,u,n[p+2],9,-51403784),u=g(u,f,h,l,n[p+7],14,1735328473),h=m(h,l=g(l,u,f,h,n[p+12],20,-1926607734),u,f,n[p+5],4,-378558),f=m(f,h,l,u,n[p+8],11,-2022574463),u=m(u,f,h,l,n[p+11],16,1839030562),l=m(l,u,f,h,n[p+14],23,-35309556),h=m(h,l,u,f,n[p+1],4,-1530992060),f=m(f,h,l,u,n[p+4],11,1272893353),u=m(u,f,h,l,n[p+7],16,-155497632),l=m(l,u,f,h,n[p+10],23,-1094730640),h=m(h,l,u,f,n[p+13],4,681279174),f=m(f,h,l,u,n[p+0],11,-358537222),u=m(u,f,h,l,n[p+3],16,-722521979),l=m(l,u,f,h,n[p+6],23,76029189),h=m(h,l,u,f,n[p+9],4,-640364487),f=m(f,h,l,u,n[p+12],11,-421815835),u=m(u,f,h,l,n[p+15],16,530742520),h=v(h,l=m(l,u,f,h,n[p+2],23,-995338651),u,f,n[p+0],6,-198630844),f=v(f,h,l,u,n[p+7],10,1126891415),u=v(u,f,h,l,n[p+14],15,-1416354905),l=v(l,u,f,h,n[p+5],21,-57434055),h=v(h,l,u,f,n[p+12],6,1700485571),f=v(f,h,l,u,n[p+3],10,-1894986606),u=v(u,f,h,l,n[p+10],15,-1051523),l=v(l,u,f,h,n[p+1],21,-2054922799),h=v(h,l,u,f,n[p+8],6,1873313359),f=v(f,h,l,u,n[p+15],10,-30611744),u=v(u,f,h,l,n[p+6],15,-1560198380),l=v(l,u,f,h,n[p+13],21,1309151649),h=v(h,l,u,f,n[p+4],6,-145523070),f=v(f,h,l,u,n[p+11],10,-1120210379),u=v(u,f,h,l,n[p+2],15,718787259),l=v(l,u,f,h,n[p+9],21,-343485551),h=h+y>>>0,l=l+w>>>0,u=u+b>>>0,f=f+x>>>0}return r.endian([h,l,u,f])})._ff=function(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._gg=function(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._hh=function(t,e,n,r,i,o,a){var s=t+(e^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._ii=function(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(s(t,e));return e&&e.asBytes?n:e&&e.asString?a.bytesToString(n):r.bytesToHex(n)}},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){const{CramMalformedError:r,CramBufferOverrunError:i,CramArgumentError:o}=n(0),{parseItem:a,tinyMemoize:s,sequenceMD5:c}=n(8),h=n(17),l=n(76);function u(t,e,n,i){if(!i)throw new r("could not resolve intra-slice mate pairs, file seems truncated or malformed");const o=!!(i.mate||void 0!==i.mateRecordNumber&&i.mateRecordNumber!==e);n.readName||(n.readName=String(n.uniqueId),i.readName=n.readName),n.mate={sequenceId:i.sequenceId,alignmentStart:i.alignmentStart,uniqueId:i.uniqueId},i.readName&&(n.mate.readName=i.readName),i.mate||void 0!==i.mateRecordNumber||(i.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(i.mate.readName=n.readName)),n.flags|=h.BAM_FPAIRED,i.flags&h.BAM_FUNMAP&&(n.flags|=h.BAM_FMUNMAP),n.flags&h.BAM_FUNMAP&&(i.flags|=h.BAM_FMUNMAP),i.flags&h.BAM_FREVERSE&&(n.flags|=h.BAM_FMREVERSE),n.flags&h.BAM_FREVERSE&&(i.flags|=h.BAM_FMREVERSE),void 0===n.templateLength&&(o?function(t,e,n){const i=function e(n){const i=[n];if(n.mateRecordNumber>=0){const o=t[n.mateRecordNumber];if(!o)throw new r("intra-slice mate record not found, this file seems malformed");i.push(...e(o))}return i}(n),o=i.map(t=>t.alignmentStart),a=i.map(t=>t.alignmentStart+t.readLength-1),s=Math.max(...a)-Math.min(...o)+1;s>=0&&i.forEach(t=>{if(void 0!==t.templateLength)throw new r("mate pair group has some members that have template lengths already, this file seems malformed");t.templateLength=s})}(t,0,n):function(t,e){const n=Math.min(t.alignmentStart,e.alignmentStart),r=Math.max(t.alignmentStart+t.readLength-1,e.alignmentStart+e.readLength-1)-n+1;t.templateLength=r,e.templateLength=r}(n,i)),delete n.mateRecordNumber}class f{constructor(t,e){this.container=t,this.file=t.file,this.containerPosition=e}async getHeader(){const t=await this.file.getSectionParsers(),e=await this.container.getHeader(),n=await this.file.readBlock(e._endPosition+this.containerPosition);if("MAPPED_SLICE_HEADER"===n.contentType)n.content=a(n.content,t.cramMappedSliceHeader.parser,0,e._endPosition);else{if("UNMAPPED_SLICE_HEADER"!==n.contentType)throw new r(`error reading slice header block, invalid content type ${n._contentType}`);n.content=a(n.content,t.cramUnmappedSliceHeader.parser,0,e._endPosition)}return n}async getBlocks(){const t=await this.getHeader();let e=t._endPosition;const n=new Array(t.content.numBlocks);for(let t=0;t<n.length;t+=1)n[t]=await this.file.readBlock(e),e=n[t]._endPosition;return n}async getCoreDataBlock(){return(await this.getBlocks())[0]}async _getBlocksContentIdIndex(){const t=await this.getBlocks(),e={};return t.forEach(t=>{"EXTERNAL_DATA"===t.contentType&&(e[t.contentId]=t)}),e}async getBlockByContentId(t){return(await this._getBlocksContentIdIndex())[t]}async getReferenceRegion(){const t=(await this.getHeader()).content;if(t.refSeqId<0)return;const e=await this.container.getCompressionScheme();if(t.refBaseBlockId>=0){const e=this.getBlockByContentId(t.refBaseBlockId);if(!e)throw new r("embedded reference specified, but reference block does not exist");if(t.span>e.uncompressedSize)throw new r("Embedded reference is too small");return{seq:e.data.toString("utf8"),start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan}}if(e.referenceRequired||this.file.fetchReferenceSequenceCallback){if(!this.file.fetchReferenceSequenceCallback)throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");const e=await this.file.fetchReferenceSequenceCallback(t.refSeqId,t.refSeqStart,t.refSeqStart+t.refSeqSpan-1);if(e.length!==t.refSeqSpan)throw new o("seqFetch callback returned a reference sequence of the wrong length");return{seq:e,start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan}}}getAllRecords(){return this.getRecords(()=>!0)}async _fetchRecords(){const{majorVersion:t}=await this.file.getDefinition(),e=await this.container.getCompressionScheme(),n=await this.getHeader(),o=await this._getBlocksContentIdIndex();if(t>1&&this.file.options.checkSequenceMD5&&n.content.refSeqId>=0&&"0000000000000000"!==n.content.md5.join("")){const t=await this.getReferenceRegion();if(t){const{seq:e,start:i,end:o}=t,a=c(e),s=n.content.md5.map(t=>(t<16?"0":"")+t.toString(16)).join("");if(a!==s)throw new r(`MD5 checksum reference mismatch for ref ${n.content.refSeqId} pos ${i}..${o}. recorded MD5: ${s}, calculated MD5: ${a}`)}}const a=await this.getCoreDataBlock(),s={lastAlignmentStart:n.content.refSeqStart||0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{getCursor(t){return this[t]||(this[t]={bitPosition:7,bytePosition:0}),this[t]}}},h=t=>{const n=e.getCodecForDataSeries(t);if(!n)throw new r(`no codec defined for ${t} data series`);return n.decode(this,a,o,s)};let f=new Array(n.content.numRecords);for(let r=0;r<f.length;r+=1)try{f[r]=l(this,h,e,n,a,o,s,t,r),f[r].uniqueId=n.contentPosition+n.content.recordCounter+r+1}catch(t){if(t instanceof i){console.warn("read attempted beyond end of buffer, file seems truncated."),f=f.filter(t=>!!t);break}throw t}for(let t=0;t<f.length;t+=1){const{mateRecordNumber:e}=f[t];e>=0&&u(f,t,f[t],f[e])}return f}async getRecords(t){const e=this.container.filePosition+this.containerPosition;let n=this.file.featureCache.get(e);n||(n=this._fetchRecords(),this.file.featureCache.set(e,n));const r=(await n).filter(t);if(r.length&&this.file.fetchReferenceSequenceCallback){const t=await this.getHeader();if(t.content.refSeqId>=0||-2===t.content.refSeqId){const e=t.content.refSeqId>=0?t.content.refSeqId:void 0,n=await this.container.getCompressionScheme(),i={};for(let t=0;t<r.length;t+=1){const n=void 0!==e?e:r[t].sequenceId;let o=i[n];o||(o={id:n,start:r[t].alignmentStart,end:-1/0},i[n]=o);const a=r[t].alignmentStart+(r[t].lengthOnRef||r[t].readLength)-1;a>o.end&&(o.end=a),r[t].alignmentStart<o.start&&(o.start=r[t].alignmentStart)}await Promise.all(Object.values(i).map(async t=>{-1!==t.id&&t.start<=t.end&&(t.seq=await this.file.fetchReferenceSequenceCallback(t.id,t.start,t.end))}));for(let t=0;t<r.length;t+=1){const o=i[void 0!==e?e:r[t].sequenceId];o&&o.seq&&r[t].addReferenceSequence(o,n)}}}return r}}"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach(t=>s(f,t)),t.exports=f},function(t,e,n){(function(e){const{CramMalformedError:r,CramUnimplementedError:i}=n(0),o=n(31),a=n(77),s=n(17);function c(t){const e=t.indexOf(0);return-1===e?t.toString("utf8"):t.toString("utf8",0,e)}function h(t,n){if(n.readInt32LE||(n=e.from(n)),"Z"===t)return c(n);if("A"===t)return String.fromCharCode(n[0]);if("I"===t){const t=o.fromBytesLE(n);if(t.greaterThan(Number.MAX_SAFE_INTEGER)||t.lessThan(Number.MIN_SAFE_INTEGER))throw new i("integer overflow");return t.toNumber()}if("i"===t)return n.readInt32LE(0);if("s"===t)return n.readInt16LE(0);if("S"===t)return n.readUInt16LE(0);if("c"===t)return n.readInt8(0);if("C"===t)return n.readUInt8(0);if("f"===t)return n.readFloatLE(0);if("H"===t){const t=c(n);return Number.parseInt(t.replace(/^0x/,""),16)}if("B"===t)return function(t){const e=String.fromCharCode(t[0]),n=t.readInt32LE(1),i={c:["readInt8",1],C:["readUInt8",1],s:["readInt16LE",2],S:["readUInt16LE",2],i:["readInt32LE",4],I:["readUInt32LE",4],f:["readFloatLE",4]}[e];if(!i)throw new r(`invalid tag value array type '${e}'`);const[o,a]=i,s=new Array(n);let c=5;for(let e=0;e<n;e+=1)s[e]=t[o](c),c+=a;return s}(n);throw new r(`Unrecognized tag type ${t}`)}function l(t){if(t instanceof e)return c(t);if(t.length&&t.indexOf){if(!t[t.length-1]){const e=t.indexOf(0);return String.fromCharCode(...t.slice(0,e))}return String.fromCharCode(...t)}return String(t)}t.exports=function(t,e,n,i,o,c,u,f,p){const d=new a;if(d.flags=e("BF"),d.cramFlags=e("CF"),f>1&&-2===i.content.refSeqId?d.sequenceId=e("RI"):d.sequenceId=i.content.refSeqId,d.readLength=e("RL"),d.alignmentStart=e("AP"),n.APdelta&&(d.alignmentStart+=u.lastAlignmentStart),u.lastAlignmentStart=d.alignmentStart,d.readGroupId=e("RG"),n.readNamesIncluded&&(d.readName=l(e("RN"))),d.isDetached()){const t={};t.flags=e("MF"),n.readNamesIncluded||(t.readName=l(e("RN")),d.readName=t.readName),t.sequenceId=e("NS"),t.alignmentStart=e("NP"),(t.flags||t.sequenceId>-1)&&(d.mate=t),d.templateSize=e("TS"),t.flags&s.CRAM_M_UNMAP&&(d.flags|=s.BAM_FMUNMAP),t.flags&s.CRAM_M_REVERSE&&(d.flags|=s.BAM_FMREVERSE)}else d.hasMateDownStream()&&(d.mateRecordNumber=e("NF")+p+1);const g=e("TL");if(g<0)throw new r("invalid TL index");const m=n.getTagNames(g),v=m.length;for(let e=0;e<v;e+=1){const i=m[e],a=i.substr(0,2),s=i.substr(2,1),l=n.getCodecForTag(i);if(!l)throw new r(`no codec defined for auxiliary tag ${i}`);const f=l.decode(t,o,c,u);d.tags[a]=h(s,f)}if(d.isSegmentUnmapped())if(d.isUnknownBases())d.readBases=null,d.qualityScores=null;else{const t=new Array(d.readLength);for(let n=0;n<t.length;n+=1)t[n]=e("BA");if(d.readBases=String.fromCharCode(...t),d.isPreservingQualityScores()){for(let n=0;n<t.length;n+=1)t[n]=e("QS");d.qualityScores=t}}else{const t=e("FN");t&&(d.readFeatures=function(t,e,n,i,o){let a=0,s=t.alignmentStart-1;const c=new Array(e);function h([t,e]){const r=n(e);return"character"===t?String.fromCharCode(r):"string"===t?r.toString("utf8"):"numArray"===t?r.toArray():r}for(let t=0;t<e;t+=1){const e=String.fromCharCode(n("FC")),i=n("FP"),l={code:e},u={B:["character","BA"],S:["string",o>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[e];if(!u)throw new r(`invalid read feature code "${e}"`);l.data=h(u);const f={B:["number","QS"]}[e];f&&(l.data=[l.data,h(f)]),a+=i,l.pos=a,s+=i,l.refPos=s,"D"===e||"N"===e?s+=l.data:"H"===e?s-=l.data:"I"===e||"S"===e?s-=l.data.length:"i"===e&&(s-=1),c[t]=l}return c}(d,t,e,0,f));let n=d.readLength;if(d.readFeatures&&d.readFeatures.forEach(({code:t,data:e})=>{"D"===t||"N"===t?n+=e:"I"===t||"S"===t?n-=e.length:"i"===t&&(n-=1)}),Number.isNaN(n)&&(console.warn(`${d.readName||`${d.sequenceId}:${d.alignmentStart}`} record has invalid read features`),n=d.readLength),d.lengthOnRef=n,d.mappingQuality=e("MQ"),d.isPreservingQualityScores()){const t=new Array(d.readLength);for(let n=0;n<t.length;n+=1)t[n]=e("QS");d.qualityScores=t}}return d}}).call(this,n(1).Buffer)},function(t,e,n){const r=n(17),i={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};t.exports=class{constructor(){this.tags={}}isPaired(){return!!(this.flags&r.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&r.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&r.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&r.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&r.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&r.BAM_FMREVERSE)}isRead1(){return!!(this.flags&r.BAM_FREAD1)}isRead2(){return!!(this.flags&r.BAM_FREAD2)}isSecondary(){return!!(this.flags&r.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&r.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&r.BAM_FDUP)}isSupplementary(){return!!(this.flags&r.BAM_FSUPPLEMENTARY)}isDetached(){return!!(this.cramFlags&r.CRAM_FLAG_DETACHED)}hasMateDownStream(){return!!(this.cramFlags&r.CRAM_FLAG_MATE_DOWNSTREAM)}isPreservingQualityScores(){return!!(this.cramFlags&r.CRAM_FLAG_PRESERVE_QUAL_SCORES)}isUnknownBases(){return!!(this.cramFlags&r.CRAM_FLAG_NO_SEQ)}getReadBases(){return!this.readBases&&this._refRegion&&(this.readBases=function(t,e){if(!t.lengthOnRef&&!t.readLength)return;if(t.isUnknownBases())return;const n=t.alignmentStart-e.start;if(!t.readFeatures)return e.seq.substr(n,t.lengthOnRef).toUpperCase();let r="",i=n,o=0;for(;r.length<t.readLength;)if(o<t.readFeatures.length&&t.readFeatures[o].pos===r.length+1){const e=t.readFeatures[o];o+=1,"b"===e.code?(r+=e.data,i+=1):"B"===e.code?(r+=e.data[0],i+=1):"X"===e.code?(r+=e.sub,i+=1):"I"===e.code?r+=e.data:"D"===e.code?i+=e.data:"i"===e.code?r+=e.data:"N"===e.code?i+=e.data:"S"===e.code?r+=e.data:"P"===e.code||e.code}else if(o<t.readFeatures.length){const n=e.seq.substr(i,t.readFeatures[o].pos-r.length-1);r+=n,i+=n.length}else{const n=e.seq.substr(i,t.readLength-r.length);r+=n,i+=n.length}return r.toUpperCase()}(this,this._refRegion)),this.readBases}getPairOrientation(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.sequenceId===this.mate.sequenceId){const t=this.isReverseComplemented()?"R":"F",e=this.isMateReverseComplemented()?"R":"F";let n=" ",r=" ";this.isRead1()?(n="1",r="2"):this.isRead2()&&(n="2",r="1");const i=[];let o=this.templateLength||this.templateSize;return this.alignmentStart>this.mate.alignmentStart&&o>0&&(o=-o),o>0?(i[0]=t,i[1]=n,i[2]=e,i[3]=r):(i[2]=t,i[3]=n,i[0]=e,i[1]=r),i.join("")}return null}addReferenceSequence(t,e){this.readFeatures&&this.readFeatures.forEach(n=>{"X"===n.code&&function(t,e,n,r){if(!e)return;const o=r.refPos-e.start,a=e.seq.charAt(o);a&&(r.ref=a);let s=i[a];void 0===s&&(s=4);const c=n.substitutionMatrix[s][r.data];c&&(r.sub=c)}(0,t,e,n)}),!this.readBases&&t.start<=this.alignmentStart&&t.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=t)}toJSON(){const t={};return Object.keys(this).forEach(e=>{"_"!==e.charAt(0)&&(t[e]=this[e])}),t.readBases=this.getReadBases(),t}}},function(t,e,n){const{CramMalformedError:r}=n(0),{instantiateCodec:i}=n(79),o={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int",TM:"ignore",TV:"ignore"};t.exports=class{constructor(t){Object.assign(this,t),this.readNamesIncluded=t.preservation.RN,this.APdelta=t.preservation.AP,this.referenceRequired=!!t.preservation.RR,this.tagIdsDictionary=t.preservation.TD,this.substitutionMatrix=function(t){const e=new Array(5);for(let t=0;t<5;t+=1)e[t]=new Array(4);return e[0][t[0]>>6&3]="C",e[0][t[0]>>4&3]="G",e[0][t[0]>>2&3]="T",e[0][t[0]>>0&3]="N",e[1][t[1]>>6&3]="A",e[1][t[1]>>4&3]="G",e[1][t[1]>>2&3]="T",e[1][t[1]>>0&3]="N",e[2][t[2]>>6&3]="A",e[2][t[2]>>4&3]="C",e[2][t[2]>>2&3]="T",e[2][t[2]>>0&3]="N",e[3][t[3]>>6&3]="A",e[3][t[3]>>4&3]="C",e[3][t[3]>>2&3]="G",e[3][t[3]>>0&3]="N",e[4][t[4]>>6&3]="A",e[4][t[4]>>4&3]="C",e[4][t[4]>>2&3]="G",e[4][t[4]>>0&3]="T",e}(t.preservation.SM),this.dataSeriesCodecCache={},this.tagCodecCache={}}getCodecForTag(t){if(!this.tagCodecCache[t]){const e=this.tagEncoding[t];e&&(this.tagCodecCache[t]=i(e,"byteArray"))}return this.tagCodecCache[t]}getTagNames(t){return this.tagIdsDictionary[t]}getCodecForDataSeries(t){if(!this.dataSeriesCodecCache[t]){const e=this.dataSeriesEncoding[t];if(e){const n=o[t];if(!n)throw new r(`data series name ${t} not defined in file compression header`);this.dataSeriesCodecCache[t]=i(e,n)}}return this.dataSeriesCodecCache[t]}toJSON(){const t={};return Object.keys(this).forEach(e=>{/Cache$/.test(e)||(t[e]=this[e])}),t}}},function(t,e,n){const{CramUnimplementedError:r}=n(0),i=n(80),o=n(81),a=n(82),s=n(83),c=n(84),h=n(85),l={1:o,3:i,4:s,5:a,6:c,7:n(86),9:h};function u(t){return l[t]}t.exports={getCodecClassWithId:u,instantiateCodec:function t(e,n){const i=u("ignore"===n?0:e.codecId);if(!i)throw new r(`no codec implemented for codec ID ${e.codecId}`);return new i(e.parameters,n,t)}}},function(t,e,n){const{CramMalformedError:r}=n(0),i=n(6);t.exports=class extends i{constructor(t={},e){if(super(t,e),!["byte","int"].includes(this.dataType))throw new TypeError(`${this.dataType} decoding not yet implemented by HUFFMAN_INT codec`);this.buildCodeBook(),this.buildCodes(),this.buildCaches(),0===this.sortedCodes[0].bitLength&&(this._decode=this._decodeZeroLengthCode)}buildCodeBook(){let t=new Array(this.parameters.numCodes);for(let e=0;e<this.parameters.numCodes;e+=1)t[e]={symbol:this.parameters.symbols[e],bitLength:this.parameters.bitLengths[e]};t=t.sort((t,e)=>t.bitLength-e.bitLength||t.symbol-e.symbol),this.codeBook={},t.forEach(t=>{this.codeBook[t.bitLength]||(this.codeBook[t.bitLength]=[]),this.codeBook[t.bitLength].push(t.symbol)})}buildCodes(){this.codes={};let t=0,e=-1;Object.entries(this.codeBook).forEach(([n,i])=>{n=parseInt(n,10),i.forEach(i=>{const o={bitLength:n,value:i};e+=1;const a=n-t;if(e<<=a,o.bitCode=e,t+=a,function(t){let e=t-(t>>1)&1431655765;return 16843009*((e=(858993459&e)+(e>>2&858993459))+(e>>4)&252645135)>>24}(e)>n)throw new r("Symbol out of range");this.codes[i]=o})})}buildCaches(){this.sortedCodes=Object.values(this.codes).sort((t,e)=>t.bitLength-e.bitLength||t.bitCode-e.bitCode),this.sortedByValue=Object.values(this.codes).sort((t,e)=>t.value-e.value),this.sortedValuesByBitCode=this.sortedCodes.map(t=>t.value),this.sortedBitCodes=this.sortedCodes.map(t=>t.bitCode),this.sortedBitLengthsByBitCode=this.sortedCodes.map(t=>t.bitLength);const t=Math.max(...this.sortedBitCodes);this.bitCodeToValue=new Array(t+1).fill(-1);for(let t=0;t<this.sortedBitCodes.length;t+=1)this.bitCodeToValue[this.sortedCodes[t].bitCode]=t}decode(t,e,n,r){return this._decode(t,e,r.coreBlock)}_decodeZeroLengthCode(){return this.sortedCodes[0].value}_decode(t,e,n){const i=e.content;let o=0,a=0;for(let t=0;t<this.sortedCodes.length;t+=1){const e=this.sortedCodes[t].bitLength;a<<=e-o,a|=this._getBits(i,n,e-o),o=e;{const n=this.bitCodeToValue[a];if(n>-1&&this.sortedBitLengthsByBitCode[n]===e)return this.sortedValuesByBitCode[n];for(let n=t;this.sortedCodes[n+1].bitLength===e&&n<this.sortedCodes.length;n+=1)t+=1}}throw new r("Huffman symbol not found.")}}},function(t,e,n){const{CramUnimplementedError:r,CramMalformedError:i,CramBufferOverrunError:o}=n(0),a=n(6),{parseItf8:s}=n(8);t.exports=class extends a{constructor(t={},e){if(super(t,e),"int"===this.dataType)this._decodeData=this._decodeInt;else{if("byte"!==this.dataType)throw new r(`${this.dataType} decoding not yet implemented by EXTERNAL codec`);this._decodeData=this._decodeByte}}decode(t,e,n,r){const{blockContentId:o}=this.parameters,a=n[o];if(!a)throw new i(`no block found with content ID ${o}`);const s=r.externalBlocks.getCursor(o);return this._decodeData(a,s)}_decodeInt(t,e){const[n,r]=s(t.content,e.bytePosition);return e.bytePosition+=r,n}_decodeByte(t,e){if(e.bytePosition>=t.content.length)throw new o("attempted to read beyond end of block. this file seems truncated.");const n=t.content[e.bytePosition];return e.bytePosition+=1,n}}},function(t,e,n){const{CramBufferOverrunError:r,CramMalformedError:i}=n(0),o=n(6);t.exports=class extends o{constructor(t={},e){if(super(t,e),"byteArray"!==e)throw new TypeError(`byteArrayStop codec does not support data type ${e}`);this._decode=this._decodeByteArray}decode(t,e,n,r){const{blockContentId:o}=this.parameters,a=n[o];if(!a)throw new i(`no block found with content ID ${o}`);const s=r.externalBlocks.getCursor(o);return this._decode(a,s)}_decodeByteArray(t,e){const n=t.content,{stopByte:i}=this.parameters,o=e.bytePosition;let a=e.bytePosition;for(;n[a]!==i&&a<n.length;){if(a===n.length)throw new r("byteArrayStop reading beyond length of data buffer?");a+=1}return e.bytePosition=a+1,n.slice(o,a)}}},function(t,e,n){const{tinyMemoize:r}=n(8),i=n(6);class o extends i{constructor(t={},e,n){if(super(t,e),this.instantiateCodec=n,"byteArray"!==e)throw new TypeError(`byteArrayLength does not support data type ${e}`)}decode(t,e,n,r){const i=this._getLengthCodec().decode(t,e,n,r),o=this._getDataCodec(),a=new Array(i);for(let s=0;s<i;s+=1)a[s]=o.decode(t,e,n,r);return a}_getLengthCodec(){const t=this.parameters.lengthsEncoding;return this.instantiateCodec(t,"int")}_getDataCodec(){const t=this.parameters.valuesEncoding;return this.instantiateCodec(t,"byte")}}"_getLengthCodec _getDataCodec".split(" ").forEach(t=>r(o,t)),t.exports=o},function(t,e,n){const{CramUnimplementedError:r}=n(0),i=n(6);t.exports=class extends i{constructor(t={},e){if(super(t,e),"int"!==this.dataType)throw new r(`${this.dataType} decoding not yet implemented by BETA codec`)}decode(t,e,n,r){return this._getBits(e.content,r.coreBlock,this.parameters.length)-this.parameters.offset}}},function(t,e,n){const{CramUnimplementedError:r}=n(0),i=n(6);t.exports=class extends i{constructor(t={},e){if(super(t,e),"int"!==this.dataType)throw new r(`${this.dataType} decoding not yet implemented by GAMMA codec`)}decode(t,e,n,r){let i=1;for(;0===this._getBits(e.content,r.coreBlock,1);)i+=1;return(this._getBits(e.content,r.coreBlock,i-1)|1<<i-1)-this.parameters.offset}}},function(t,e,n){const{CramUnimplementedError:r}=n(0),i=n(6);t.exports=class extends i{constructor(t={},e){if(super(t,e),"int"!==this.dataType)throw new r(`${this.dataType} decoding not yet implemented by SUBEXP codec`)}decode(t,e,n,r){let i,o,a=0;for(;this._getBits(e.content,r.coreBlock,1);)a+=1;return 0===a?(i=this.parameters.K,o=this._getBits(e.content,r.coreBlock,i)):o=1<<(i=a+this.parameters.K-1)|this._getBits(e.content,r.coreBlock,i),o-this.parameters.offset}}},function(t,e,n){var r=n(88),i=n(90);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=w,e.resolve=function(t,e){return w(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?w(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=w(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(h),u=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(91);function w(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(s);h[0]=h[0].replace(/\\/g,"/");var w=t=h.join(s);if(w=w.trim(),!n&&1===t.split("#").length){var b=c.exec(w);if(b)return this.path=w,this.href=w,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=a.exec(w);if(x){var k=(x=x[0]).toLowerCase();this.protocol=k,w=w.substr(x.length)}if(n||x||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===w.substr(0,2);!S||x&&m[x]||(w=w.substr(2),this.slashes=!0)}if(!m[x]&&(S||x&&!v[x])){for(var C,_,R=-1,T=0;T<f.length;T++)-1!==(E=w.indexOf(f[T]))&&(-1===R||E<R)&&(R=E);for(-1!==(_=-1===R?w.lastIndexOf("@"):w.lastIndexOf("@",R))&&(C=w.slice(0,_),w=w.slice(_+1),this.auth=decodeURIComponent(C)),R=-1,T=0;T<u.length;T++){var E;-1!==(E=w.indexOf(u[T]))&&(-1===R||E<R)&&(R=E)}-1===R&&(R=w.length),this.host=w.slice(0,R),w=w.slice(R),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var L=this.hostname.split(/\./),I=(T=0,L.length);T<I;T++){var M=L[T];if(M&&!M.match(p)){for(var D="",B=0,F=M.length;B<F;B++)M.charCodeAt(B)>127?D+="x":D+=M[B];if(!D.match(p)){var N=L.slice(0,T),O=L.slice(T+1),P=M.match(d);P&&(N.push(P[1]),O.unshift(P[2])),O.length&&(w="/"+O.join(".")+w),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var z=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+z,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!g[k])for(T=0,I=l.length;T<I;T++){var U=l[T];if(-1!==w.indexOf(U)){var H=encodeURIComponent(U);H===U&&(H=escape(U)),w=w.split(U).join(H)}}var j=w.indexOf("#");-1!==j&&(this.hash=w.substr(j),w=w.slice(0,j));var V=w.indexOf("?");if(-1!==V?(this.search=w.substr(V),this.query=w.substr(V+1),e&&(this.query=y.parse(this.query)),w=w.slice(0,V)):e&&(this.search="",this.query={}),w&&(this.pathname=w),v[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var q=this.search||"";this.path=z+q}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(w(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),h=0;h<c.length;h++){var l=c[h];"protocol"!==l&&(n[l]=t[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var u=Object.keys(t),f=0;f<u.length;f++){var p=u[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var w=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||w||n.host&&t.pathname,k=x,S=n.pathname&&n.pathname.split("/")||[],C=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),x=x&&(""===d[0]||""===S[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return C&&(n.hostname=n.host=S.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var _=S.slice(-1)[0],R=(n.host||t.host||S.length>1)&&("."===_||".."===_)||""===_,T=0,E=S.length;E>=0;E--)"."===(_=S[E])?S.splice(E,1):".."===_?(S.splice(E,1),T++):T&&(S.splice(E,1),T--);if(!x&&!k)for(;T--;T)S.unshift("..");!x||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),R&&"/"!==S.join("/").substr(-1)&&S.push("");var A,L=""===S[0]||S[0]&&"/"===S[0].charAt(0);return C&&(n.hostname=n.host=L?"":S.length?S.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),(x=x||n.host&&S.length)&&!L&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,c=2147483647,h=36,l=/^xn--/,u=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function m(t){throw new RangeError(p[t])}function v(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function y(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+v((t=t.replace(f,".")).split("."),e).join(".")}function w(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return v(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+g(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;r+=h)t=d(t/35);return d(r+36*t/(t+38))}function S(t){var e,n,r,i,o,a,s,l,u,f,p,g=[],v=t.length,y=0,w=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&m("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=y,a=1,s=h;i>=v&&m("invalid-input"),((l=(p=t.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:h)>=h||l>d((c-y)/a))&&m("overflow"),y+=l*a,!(l<(u=s<=x?1:s>=x+26?26:s-x));s+=h)a>d(c/(f=h-u))&&m("overflow"),a*=f;x=k(y-o,e=g.length+1,0==o),d(y/e)>c-w&&m("overflow"),w+=d(y/e),y%=e,g.splice(y++,0,w)}return b(g)}function C(t){var e,n,r,i,o,a,s,l,u,f,p,v,y,b,S,C=[];for(v=(t=w(t)).length,e=128,n=0,o=72,a=0;a<v;++a)(p=t[a])<128&&C.push(g(p));for(r=i=C.length,i&&C.push("-");r<v;){for(s=c,a=0;a<v;++a)(p=t[a])>=e&&p<s&&(s=p);for(s-e>d((c-n)/(y=r+1))&&m("overflow"),n+=(s-e)*y,e=s,a=0;a<v;++a)if((p=t[a])<e&&++n>c&&m("overflow"),p==e){for(l=n,u=h;!(l<(f=u<=o?1:u>=o+26?26:u-o));u+=h)S=l-f,b=h-f,C.push(g(x(f+S%b,0))),l=d(S/b);C.push(g(x(l,0))),o=k(n,y,r==i),n=0,++r}++n,++e}return C.join("")}s={version:"1.4.1",ucs2:{decode:w,encode:b},decode:S,encode:C,toASCII:function(t){return y(t,(function(t){return u.test(t)?"xn--"+C(t):t}))},toUnicode:function(t){return y(t,(function(t){return l.test(t)?S(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(89)(t),n(2))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){e.decode=e.parse=n(92),e.encode=e.stringify=n(93)},function(t,e,n){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var h=t.length;c>0&&h>c&&(h=c);for(var l=0;l<h;++l){var u,f,p,d,g=t[l].replace(s,"%20"),m=g.indexOf(n);m>=0?(u=g.substr(0,m),f=g.substr(m+1)):(u=g,f=""),p=decodeURIComponent(u),d=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),(function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(r(t))})).join(e):s+encodeURIComponent(r(t[a]))})).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){(function(e){const r=n(95),i=n(96);t.exports=class{constructor(t){this.position=0,this.url=t,this.cache=new i({fetch:(t,e)=>this._fetch(t,e)})}async _fetch(t,n){const i={};n<1/0?i.range=`bytes=${t}-${t+n}`:n===1/0&&0!==t&&(i.range=`bytes=${t}-`);const o=await r(this.url,{method:"GET",headers:i,redirect:"follow",mode:"cors"});if(200===o.status&&0===t||206===o.status){const t=e.from(await o.arrayBuffer()),n=/\/(\d+)$/.exec(o.headers.get("content-range"));return n&&n[1]?this._stat={size:parseInt(n[1],10)}:this._stat={size:void 0},t}throw new Error(`HTTP ${o.status} fetching ${this.url}`)}read(t,e=0,n=1/0,r=0){let i=r;return null===r&&(i=this.position,this.position+=n),this.cache.get(t,e,n,r)}async readFile(){const t=await r(this.url,{method:"GET",redirect:"follow",mode:"cors"});return e.from(await t.arrayBuffer())}async stat(){if(!this._stat){const t=e.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}}}).call(this,n(1).Buffer)},function(t,e){var n=function(t){function e(){this.fetch=!1}return e.prototype=t,new e}("undefined"!=typeof self?self:this);!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function g(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n,r=p(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=d(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=h(t),e=l(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype.delete=function(t){delete this.map[h(t)]},f.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},f.prototype.set=function(t,e){this.map[h(t)]=l(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),u(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),u(t)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){var n,r,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},v.call(w.prototype),v.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];x.redirect=function(t,e){if(-1===k.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(t,n){return new Promise((function(r,o){var a=new w(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new x(i,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",c)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=f,t.Request=w,t.Response=x),e.Headers=f,e.Request=w,e.Response=x,e.fetch=S}({})}(n),delete n.fetch.polyfill,t.exports=e=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,e.default=n.fetch},function(t,e,n){const r=n(30);t.exports=class{constructor({fetch:t,size:e=1e7,chunkSize:n=32768}){if(!t)throw new Error("fetch function required");this.fetch=t,this.chunkSize=n,this.lruCache=new r({maxSize:Math.floor(e/n)})}async get(t,e,n,r){if(t.length<e+n)throw new Error("output buffer not big enough for request");const i=Math.floor(r/this.chunkSize),o=Math.floor((r+n)/this.chunkSize),a=new Array(o-i+1);for(let t=i;t<=o;t+=1)a[t-i]=this._getChunk(t).then(e=>({data:e,chunkNumber:t}));const s=await Promise.all(a),c=r-s[0].chunkNumber*this.chunkSize;s.forEach(({data:a,chunkNumber:s})=>{const h=s*this.chunkSize;let l=0,u=this.chunkSize,f=e+(s-i)*this.chunkSize-c;s===i&&(f=e,l=c),s===o&&(u=r+n-h),a.copy(t,f,l,u)})}_getChunk(t){const e=this.lruCache.get(t);if(e)return e;const n=this.fetch(t*this.chunkSize,this.chunkSize);return this.lruCache.set(t,n),n}}},function(t,e,n){const{promisify:r}=n(34),i=null,o=i,a=i,s=i,c=i;t.exports=class{constructor(t){this.position=0,this.filename=t,this.fd=o(this.filename,"r")}async read(t,e=0,n,r){let i=r;return null===r&&(i=this.position,this.position+=n),a(await this.fd,t,e,n,r)}async readFile(){return c(await this.fd)}async stat(){return this._stat||(this._stat=await s(await this.fd)),this._stat}}},function(t,e){t.exports={parseHeaderText:function(t){const e=t.split(/\r?\n/),n=[];return e.forEach(t=>{const[e,...r]=t.split(/\t/),i=r.map(t=>{const[e,n]=t.split(":",2);return{tag:e,value:n}});e&&n.push({tag:e.substr(1),data:i})}),n}}},function(t,e,n){const{CramUnimplementedError:r,CramSizeLimitError:i}=n(0),o=n(18);t.exports=class{constructor(t){if(t.cram?this.cram=t.cram:this.cram=new o({url:t.cramUrl,path:t.cramPath,filehandle:t.cramFilehandle,seqFetch:t.seqFetch,checkSequenceMD5:t.checkSequenceMD5,cacheSize:t.cacheSize}),!(this.cram instanceof o))throw new Error("invalid arguments: no cramfile");if(this.index=t.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=t.fetchSizeLimit||3e6}async getRecordsForRange(t,e,n,o={}){if(o.viewAsPairs=o.viewAsPairs||!1,o.pairAcrossChr=o.pairAcrossChr||!1,o.maxInsertSize=o.maxInsertSize||2e5,"string"==typeof t)throw new r("string sequence names not yet supported");const a=t,s=await this.index.getEntriesForRange(a,e,n),c=s.map(t=>t.sliceBytes).reduce((t,e)=>t+e,0);if(c>this.fetchSizeLimit)throw new i(`data size of ${c.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);const h=r=>r.sequenceId===t&&r.alignmentStart<=n&&r.alignmentStart+r.lengthOnRef>=e,l=await Promise.all(s.map(t=>this.getRecordsInSlice(t,h)));let u=Array.prototype.concat(...l);if(o.viewAsPairs){const t={},e={};for(let n=0;n<u.length;n+=1){const r=u[n].readName,i=u[n].uniqueId;t[r]||(t[r]=0),t[r]+=1,e[i]=1}const n={};Object.entries(t).forEach(([t,e])=>{1===e&&(n[t]=!0)});const r=[];for(let t=0;t<u.length;t+=1){const e=u[t].readName;if(n[e]&&u[t].mate&&(u[t].mate.sequenceId===a||o.pairAcrossChr)&&Math.abs(u[t].alignmentStart-u[t].mate.alignmentStart)<o.maxInsertSize){const e=this.index.getEntriesForRange(u[t].mate.sequenceId,u[t].mate.alignmentStart,u[t].mate.alignmentStart+1);r.push(e)}}const i=await Promise.all(r);let s=[];for(let t=0;t<i.length;t+=1)s.push(...i[t]);s=s.sort((t,e)=>t.toString().localeCompare(e.toString())).filter((t,e,n)=>!e||t.toString()!==n[e-1].toString());const c=[],h=[],l=s.map(t=>t.sliceBytes).reduce((t,e)=>t+e,0);if(l>this.fetchSizeLimit)throw new Error(`mate data size of ${l.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);s.forEach(t=>{let r=this.cram.featureCache.get(t.toString());r||(r=this.getRecordsInSlice(t,()=>!0),this.cram.featureCache.set(t.toString(),r)),c.push(r);const i=r.then(t=>{const r=[];for(let i=0;i<t.length;i+=1){const o=t[i];n[o.readName]&&!e[o.uniqueId]&&r.push(o)}return r});h.push(i)});const f=await Promise.all(h);if(f.length){const t=f.reduce((t,e)=>t.concat(e));u=u.concat(t)}}return u}getRecordsInSlice({containerStart:t,sliceStart:e,sliceBytes:n},r){return this.cram.getContainerAtPosition(t).getSlice(e,n).getRecords(r)}hasDataForReferenceSequence(t){return this.index.hasDataForReferenceSequence(t)}}},function(t,e,n){const{promisify:r}=n(34),i=r(n(20).gunzip),{open:o}=n(33),{CramMalformedError:a}=n(0);class s{constructor(t){Object.assign(this,t)}toString(){return`${this.start}:${this.span}:${this.containerStart}:${this.sliceStart}:${this.sliceBytes}`}}function c(t,e){if(e.some(t=>void 0===t))throw new a("invalid .crai index file");const[n,r,i,o,c,h]=e;t[n]||(t[n]=[]),t[n].push(new s({start:r,span:i,containerStart:o,sliceStart:c,sliceBytes:h}))}t.exports=class{constructor(t){const e=o(t.url,t.path,t.filehandle);this.readFile=e.readFile.bind(e),this.index=this.parseIndex()}parseIndex(){const t={};return this.readFile().then(t=>31===t[0]&&139===t[1]?i(t):t).then(e=>{let n=[],r="";for(let i=0;i<e.length;i+=1){const o=e[i];if(o>=48&&o<=57||!r&&45===o)r+=String.fromCharCode(o);else if(9===o)n.push(Number.parseInt(r,10)),r="";else if(10===o)n.push(Number.parseInt(r,10)),r="",c(t,n),n=[];else if(13!==o&&32!==o)throw new a("invalid .crai index file")}return r&&n.push(Number.parseInt(r,10)),6===n.length&&c(t,n),Object.entries(t).forEach(([e,n])=>{t[e]=n.sort((t,e)=>t.start-e.start||t.span-e.span)}),t})}getIndex(){return this.index}async hasDataForReferenceSequence(t){return!!(await this.index)[t]}async getEntriesForRange(t,e,n){const r=(await this.index)[t];if(!r)return[];const i=r.length,o=t=>{const r=t.start,i=t.start+t.span;return r>=n?-1:i<=e?1:0};let a,s=0,c=i-1;for(;s<=c;){const t=o(r[a=Math.round((c+s)/2)]);if(t>0)s=a+1;else{if(!(t<0))break;c=a-1}}let h=a;for(;h&&!o(r[h-1]);)h-=1;let l=a;for(;l<i-1&&!o(r[l+1]);)l+=1;const u=r[h].start;return r[l].start+r[l].span>=e&&n>=u?r.slice(h,l+1):[]}}}]);const Da=function(t,e,n){this.config=t,this.browser=n,this.genome=e,this.cramFile=new Ma.CramFile({filehandle:new Fa(t.url,t),seqFetch:t.seqFetch||Ba.bind(this),checkSequenceMD5:void 0===t.checkSequenceMD5||t.checkSequenceMD5});const r=new Fa(t.indexURL,t);this.indexedCramFile=new Ma.IndexedCramFile({cram:this.cramFile,index:new Ma.CraiIndex({filehandle:r}),fetchSizeLimit:3e7}),va.setReaderDefaults(this,t)};function Ba(t,e,n){const r=this.genome.sequence,i=this.genome;return this.getHeader().then((function(o){const a=i.getChromosomeName(o.chrNames[t]);return r.getSequence(a,e-1,n)}))}Da.prototype.getHeader=function(){if(this.header)return Promise.resolve(this.header);{const t=this,e=this.genome;return this.cramFile.getSamHeader().then((function(n){const r={},i=[],o={},a=[];for(let t of n)if("SQ"===t.tag){for(let n of t.data)if("SN"===n.tag){const t=n.value;if(r[t]=i.length,i.push(t),e){o[e.getChromosomeName(t)]=t}break}}else"RG"===t.tag&&a.push(t.data);return t.header={chrNames:i,chrToIndex:r,chrAliasTable:o,readGroups:a},t.header}))}},Da.prototype.readAlignments=function(t,e,n){var r=this;const i=this.browser;return this.getHeader().then((function(o){const a=o.chrAliasTable.hasOwnProperty(t)?o.chrAliasTable[t]:t,s=o.chrToIndex[a],c=new ta(t,e,n,r.samplingWindowSize,r.samplingDepth,r.pairsSupported,r.alleleFreqThreshold);return void 0===s?Promise.resolve(c):r.indexedCramFile.getRecordsForRange(s,e,n).then((function(t){for(let r of t){const t=r.sequenceId,i=r.alignmentStart,a=i+r.lengthOnRef;if(t<0)continue;if(t>s||i>n)return;if(t<s)continue;if(a<e)continue;const l=h(r,o.chrNames);c.push(l)}return c.finish(),c})).catch((function(t){let e=t.message;throw e&&e.indexOf("MD5")>=0&&(e="Sequence mismatch. Is this the correct genome for the loaded CRAM?"),i.presentAlert(e),t}));function h(t,e){const n=new sa;if(n.chr=e[t.sequenceId],n.start=t.alignmentStart-1,n.lengthOnRef=t.lengthOnRef,n.flags=t.flags,n.strand=!(16&t.flags),n.fragmentLength=t.templateLength||t.templateSize,n.mq=t.mappingQuality,n.end=t.alignmentStart+t.lengthOnRef,n.readGroupId=t.readGroupId,t.mate&&void 0!==t.mate.sequenceId){const r=void 0!==t.mate.flags?!(1&t.mate.flags):!(32&t.flags);n.mate={chr:e[t.mate.sequenceId],position:t.mate.alignmentStart,strand:r}}return n.seq=t.getReadBases(),n.qual=t.qualityScores,n.tagDict=t.tags,n.readName=t.readName,function(t,e){const n=[];let r,i,o=0,a="";if(e.scStart=e.start,e.scLengthOnRef=e.lengthOnRef,t.readFeatures)for(let s of t.readFeatures){const t=s.code,c=s.data,h=s.pos-1,l=s.refPos-1;switch(t){case"S":case"I":case"i":case"N":case"D":if(h>o){const t=h-o;n.push(new fa({start:l-t,seqOffset:o,len:t,type:"M"})),o+=t,a+=t+"M"}if("S"===t){let r=l;e.scLengthOnRef+=c.length,0===h&&(e.scStart-=c.length,r-=c.length);const i=c.length;n.push(new fa({start:r,seqOffset:o,len:i,type:"S"})),o+=i,a+=i+t}else if("I"===t||"i"===t){void 0===r&&(r=[]);const e="i"===t?1:c.length;r.push(new fa({start:l-1,len:e,seqOffset:o,type:"I"})),o+=e,a+=e+t}else"D"!==t&&"N"!==t||(i||(i=[]),i.push({start:l,len:c,type:t}),a+=c+t);break;case"H":case"P":a+=c+t}}const s=t.readLength-o;s>0&&(n.push(new fa({start:t.alignmentStart+t.lengthOnRef-s-1,seqOffset:o,len:s,type:"M"})),a+=s+"M");e.blocks=n,e.insertions=r,e.gaps=i,e.cigar=a}(t,n),n.mate&&n.start>n.mate.position&&n.fragmentLength>0&&(n.fragmentLength=-n.fragmentLength),va.setPairOrientation(n),n}}))};class Fa{constructor(t,e){this.position=0,this.url=t,this.config=e,this.cache=new Na({fetch:(t,e)=>this._fetch(t,e)})}async _fetch(t,e){const n={start:t,size:e};this._stat={size:void 0};const r=await zn.loadArrayBuffer(this.url,un(this.config,{range:n}));return Buffer.from(r)}async read(t,e=0,n=1/0,r=0){let i=r;return null===r&&(i=this.position,this.position+=n),this.cache.get(t,e,n,r)}async readFile(){const t=await zn.loadArrayBuffer(this.url,un(this.config));return Buffer.from(t)}async stat(){if(!this._stat){const t=Buffer.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}}class Na{constructor({fetch:t,size:e=1e7,chunkSize:n=32768}){this.fetch=t,this.chunkSize=n,this.lruCache=new Oa({maxSize:Math.floor(e/n)})}async get(t,e,n,r){if(t.length<e+n)throw new Error("output buffer not big enough for request");const i=Math.floor(r/this.chunkSize),o=Math.floor((r+n)/this.chunkSize),a=new Array(o-i+1);for(let t=i;t<=o;t+=1)a[t-i]=this._getChunk(t).then(e=>({data:e,chunkNumber:t}));const s=await Promise.all(a),c=r-s[0].chunkNumber*this.chunkSize;s.forEach(({data:a,chunkNumber:s})=>{const h=s*this.chunkSize;let l=0,u=this.chunkSize,f=e+(s-i)*this.chunkSize-c;s===i&&(f=e,l=c),s===o&&(u=r+n-h),a.copy(t,f,l,u)})}_getChunk(t){const e=this.lruCache.get(t);if(e)return e;const n=this.fetch(t*this.chunkSize,this.chunkSize);return this.lruCache.set(t,n),n}}class Oa{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const e=this.oldCache.get(t);return this._set(t,e),e}}set(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){return this.cache.has(t)?this.cache.get(t):this.oldCache.has(t)?this.oldCache.get(t):void 0}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[e]=t;this.cache.has(e)||(yield t)}}get size(){let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return this._size+t}}var Pa={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"};const za=function(t,e){this.config=t,this.genome=e,this.url=t.url,this.filter=new pa(t.filter),this.readGroupSetIds=t.readGroupSetIds,this.authKey=t.authKey,this.samplingWindowSize=void 0===t.samplingWindowSize?100:t.samplingWindowSize,this.samplingDepth=void 0===t.samplingDepth?1e3:t.samplingDepth,t.viewAsPairs?this.pairsSupported=!0:this.pairsSupported=void 0===t.pairsSupported||t.pairsSupported};za.prototype.readAlignments=function(t,e,n){const r=this.genome,i=this;return(i.chrAliasTable?Promise.resolve(i.chrAliasTable):i.readMetadata().then((function(t){if(i.chrAliasTable={},r&&t.readGroups&&t.readGroups.length>0){var e=t.readGroups[0].referenceSetId;return e?Ji({url:i.url+"/references/search",body:{referenceSetId:e},decode:function(t){return t.references}}).then((function(t){return t.forEach((function(t){var e=t.name,n=r.getChromosomeName(e);i.chrAliasTable[n]=e})),i.chrAliasTable})):(function(t,e){var n;if("461916304629"===e||"337315832689"===e){for(n=1;n<23;n++)t["chr"+n]=n;t.chrX="X",t.chrY="Y",t.chrM="MT"}}(i.chrAliasTable,i.config.datasetId),i.chrAliasTable)}return i.chrAliasTable}))).then((function(r){var a=r.hasOwnProperty(t)?r[t]:t;return Ji({url:i.url+"/reads/search",body:{readGroupSetIds:[i.readGroupSetIds],referenceName:a,start:e,end:n,pageSize:"10000"},decode:o,results:new ta(t,e,n,i.samplingWindowSize,i.samplingDepth,i.pairsSupported,i.alleleFreqThreshold)})}));function o(t){var e,n,o,a,s,c=t.alignments,h=c.length,l=[];for(e=0;e<h;e++){let t=c[e];(n=new sa).readName=t.fragmentName,n.properPlacement=t.properPlacement,n.duplicateFragment=t.duplicateFragment,n.numberReads=t.numberReads,n.fragmentLength=t.fragmentLength,n.readNumber=t.readNumber,n.failedVendorQualityChecks=t.failedVendorQualityChecks,n.secondaryAlignment=t.secondaryAlignment,n.supplementaryAlignment=t.supplementaryAlignment,n.seq=t.alignedSequence,n.qual=t.alignedQuality,n.matePos=t.nextMatePosition,n.tagDict=t.info,n.flags=0,t.alignment?(n.mapped=!0,n.chr=t.alignment.position.referenceName,r&&(n.chr=r.getChromosomeName(n.chr)),n.start=parseInt(t.alignment.position.position),n.strand=!t.alignment.position.reverseStrand,n.mq=t.alignment.mappingQuality,n.cigar=u(t.alignment.cigar),o=f(t.alignment.cigar),n.lengthOnRef=o.lengthOnRef,s=p(n,o.array),n.blocks=s.blocks,n.insertions=s.insertions):n.mapped=!1,(a=t.nextMatePosition)&&(n.mate={chr:a.referenceFrame,position:parseInt(a.position),strand:!a.reverseStrand}),i.filter.pass(n)&&l.push(n)}return l;function u(t){var e="";return t.forEach((function(t){var n=Pa[t.operation],r=t.operationLength;e+=r+n})),e}function f(t){var e,n,r,i,o=0,a=[];for(i=0;i<t.length;i++)e=t[i],r=Pa[e.operation],n=parseInt(e.operationLength),"M"!==r&&"EQ"!==r&&"X"!==r&&"D"!==r&&"N"!==r&&"="!==r||(o+=n),a.push({len:n,ltr:r});return{lengthOnRef:o,array:a}}function p(t,e){for(var n,r,i,o=[],a=0,s=t.start,c=e.length,h=0;h<c;h++){var l=e[h];switch(l.ltr){case"H":case"P":break;case"S":a+=l.len,i="S";break;case"N":case"D":void 0===n&&(n=[]),n.push({start:s,len:l.len,type:l.ltr}),s+=l.len;break;case"I":void 0===r&&(r=[]),r.push(new fa({start:s,len:l.len,seqOffset:a})),a+=l.len;break;case"M":case"EQ":case"=":case"X":o.push(new fa({start:s,len:l.len,seqOffset:a,gapType:i})),a+=l.len,s+=l.len}}return{blocks:o,insertions:r,gaps:n}}}},za.prototype.readMetadata=function(){return Qi({url:this.url,entity:"readgroupsets",entityId:this.readGroupSetIds})};const $a=function(){this.alignments=[],this.score=void 0};$a.prototype.findAlignment=function(t){var e,n,r;for(r=0;r<this.alignments.length;r++)if(i(n=this.alignments[r],t)){n.paired?n.firstAlignment&&i(n.firstAlignment,t)?e=n.firstAlignment:n.secondAlignment&&i(n.secondAlignment,t)&&(e=n.secondAlignment):e=n;break}return e;function i(t,e){return e>=t.start&&e<t.start+t.lengthOnRef}},$a.prototype.updateScore=function(t,e){this.score=this.calculateScore(t,e)},$a.prototype.calculateScore=function(t,e){const n=Math.floor(t.position),r=t.sortOption,i=t.direction,o=this.findAlignment(n);if(void 0===o)return i?Number.MAX_VALUE:-Number.MAX_VALUE;let a;switch(r){case"NUCLEOTIDE":{const t=o.readBaseAt(n),r=o.readBaseQualityAt(n);return t?function(t,e,n,r){var i,o,a;(i=Math.floor(r)-n.start)<n.sequence.length&&(o=n.sequence.charAt(i));if(!o)return;if(void 0===t)return Number.MAX_VALUE;if("N"===t)return 2;if(o===t||"="===t)return 4-e/1e3;if("X"===t||o!==t)return(i=Math.floor(r)-n.coverageMap.bpStart)>0&&i<n.coverageMap.coverage.length?(a=n.coverageMap.coverage[i],-(a["pos"+t]+a["neg"+t]+e/1e3)):-(1+e/1e3);return 0}(t,r,e,n):i?Number.MAX_VALUE:-Number.MAX_VALUE}case"STRAND":return o.strand?1:-1;case"START":return o.start;case"TAG":{const e=t.tag,n=o.tags()[e];return void 0!==n?We(n)?Ye(n):n:Number.MAX_VALUE}case"INSERT_SIZE":return-Math.abs(o.fragmentLength);case"MATE_CHR":return a=o.mate,a?a.chr===o.chr?Number.MAX_VALUE-1:Ye(a.chr):Number.MAX_VALUE;case"MQ":return void 0===o.mq?Number.MAX_VALUE:-o.mq;default:return Number.MAX_VALUE}};const Ua=function(t,e){const n=e.genome;if(this.config=t,this.genome=n,this.alignmentContainer=void 0,We(t.url)&&t.url.startsWith("data:")){if("cram"===t.format)throw"CRAM data uris are not supported";this.config.indexed=!1}"ga4gh"===t.sourceType?this.bamReader=new za(t,n):"pysam"===t.sourceType?this.bamReader=new Ea(t,n):"htsget"===t.sourceType?this.bamReader=new La(t,n):"shardedBam"===t.sourceType?this.bamReader=new Ta(t,n):"cram"===t.format?this.bamReader=new Da(t,n,e):!1===this.config.indexed?this.bamReader=new ka(t,n):this.bamReader=new Sa(t,n),this.viewAsPairs=t.viewAsPairs,this.showSoftClips=t.showSoftClips};function Ha(t){const e=[];for(let n of t)for(let t of n.alignments)t instanceof Qo?(t.firstAlignment&&e.push(t.firstAlignment),t.secondAlignment&&e.push(t.secondAlignment)):e.push(t);return e}function ja(t){return t.isPaired()&&t.isMateMapped()&&t.chr===t.mate.chr&&(t.isFirstOfPair()||t.isSecondOfPair())&&!(t.isSecondary()||t.isSupplementary())}function Va(t,e,n,r){if(t){if(0===t.length)return[];{t.sort((function(t,e){return r?t.scStart-e.scStart:t.start-e.start}));const i=t[0];let o=Math.max(e,r?i.scStart:i.start),a=o;const s=[];for(let e of t){const t=r?e.scStart:e.start,n=Math.max(0,t-o);void 0===s[n]&&(s[n]=[]),s[n].push(e)}let c=0,h=0;const l=[],u=2;try{for(;c<t.length;){const t=new $a;for(;a<=n;){let e,i=void 0;for(;!i&&a<=n;)e=a-o,void 0===s[e]?++a:i=s[e];if(!i)break;const h=i.pop();0===i.length&&(s[e]=void 0),t.alignments.push(h),a=r?h.scStart+h.scLengthOnRef+u:h.start+h.lengthOnRef+u,++c}if(t.alignments.length>0&&l.push(t),a=o,c===h)break;h=c}}catch(t){throw console.error(t),t}return l}}}Ua.prototype.setViewAsPairs=function(t){if(this.viewAsPairs!==t&&(this.viewAsPairs=t,this.alignmentContainer)){var e,n=this.alignmentContainer;e=t?function(t){const e={},n=[];for(let r of t)for(let t of r.alignments)if(ja(t)){let r=e[t.readName];r?(r.setSecondAlignment(t),e[t.readName]=void 0):(r=new Qo(t),e[t.readName]=r,n.push(r))}else n.push(t);return n}(n.packedAlignmentRows):Ha(n.packedAlignmentRows),n.packedAlignmentRows=Va(e,n.start,n.end)}},Ua.prototype.setShowSoftClips=function(t){if(this.showSoftClips!==t&&(this.showSoftClips=t,this.alignmentContainer)){const e=function(t){let e=[];for(let n of t)for(let t of n.alignments)e.push(t);return e}(this.alignmentContainer.packedAlignmentRows),n=this.alignmentContainer;n.packedAlignmentRows=Va(e,n.start,n.end,t)}},Ua.prototype.getAlignments=async function(t,e,n){try{const r=this.genome,i=this.showSoftClips;if(this.alignmentContainer&&this.alignmentContainer.contains(t,e,n))return this.alignmentContainer;{const o=await this.bamReader.readAlignments(t,e,n);let a=o.alignments;this.viewAsPairs||(a=Ha([{alignments:a}]));const s=a.length>0;if(o.packedAlignmentRows=Va(a,o.start,o.end,i),o.alignments=void 0,this.alignmentContainer=o,!s)return o;{const e=await r.sequence.getSequence(t,o.start,o.end);if(e)return o.coverageMap.refSeq=e,o.sequence=e,o;console.error("No sequence for: "+t+":"+o.start+"-"+o.end)}}}catch(t){throw console.error(t),t}};const qa=hn(wi,(function(t,e){if(this.type="alignment",void 0===t.height&&(t.height=300),wi.call(this,t,e),void 0===t.coverageTrackHeight&&(t.coverageTrackHeight=50),this.featureSource=new Ua(t,e),this.coverageTrack=new Wa(t,this),this.alignmentTrack=new Za(t,this),this.visibilityWindow=t.visibilityWindow||3e4,this.viewAsPairs=t.viewAsPairs,this.pairsSupported=void 0===t.pairsSupported,this.showSoftClips=t.showSoftClips,this.showAllBases=t.showAllBases,this.color=t.color||"rgb(185, 185, 185)",this.coverageColor=t.coverageColor||"rgb(150, 150, 150)",this.minFragmentLength=t.minFragmentLength,this.maxFragmentLength=t.maxFragmentLength,this.sortObjects={},t.sort){if(Array.isArray(t.sort))for(let e of t.sort)n(this.sortObjects,e);else n(this.sortObjects,t.sort);t.sort=void 0}function n(t,n){const r=function(t){const e=t.split(":"),n=e[1].split("-"),r={chr:e[0],start:Number.parseInt(n[0].replace(/,/g,""))-1};return n.length>1?r.end=Number.parseInt(n[1].replace(/,/g,"")):r.end=r.start+1,r}(n.locus);for(let i of e.genomicStateList)if(i.chromosome.name===r.chr&&r.start>=i.start&&r.start<=i.end){t[i.id]={chr:r.chr,position:r.start,sortOption:n.option||"NUCLEOTIDE",direction:void 0===n.direction||"ASC"===n.direction,tag:n.tag?n.tag.toUpperCase():void 0};break}}}));function Ga(t,e){let n,r;if(n=t<5?.1:Math.max(.1,Math.min(1,.1+.9*(t-5)/15)),n=Math.round(10*n)/10,n>=1)r=Oe[e];else{const t=Ne[e];if(!t)return;r="rgba("+t[0]+","+t[1]+","+t[2]+","+n+")"}return r}qa.prototype.getFeatures=async function(t,e,n,r,i){const o=this,a=await this.featureSource.getAlignments(t,e,n);a.alignments&&a.alignments.length>99&&(void 0===o.minFragmentLength&&(o.minFragmentLength=a.pairedEndStats.lowerFragmentLength),void 0===o.maxFragmentLength&&(o.maxFragmentLength=a.pairedEndStats.upperFragmentLength));const s=o.sortObjects[i.genomicState.id];return s&&(s.chr===t&&s.position>=e&&s.position<=n?(o.alignmentTrack.sortAlignmentRows(s,a),o.trackView.repaintViews()):delete o.sortObjects[i.genomicState.id]),a},qa.filters={noop:function(){return function(t){return!1}},strand:function(t){return function(e){return e.strand===t}},mappingQuality:function(t,e){return function(n){return!!(t&&n.mq<t)||!!(e&&n.mq>e)}}},qa.prototype.computePixelHeight=function(t){return this.coverageTrack.computePixelHeight(t)+this.alignmentTrack.computePixelHeight(t)+15},qa.prototype.draw=function(t){vr.fillRect(t.context,0,t.pixelTop,t.pixelWidth,t.pixelHeight,{fillStyle:"rgb(255, 255, 255)"}),this.coverageTrack.height>0&&this.coverageTrack.draw(t),this.alignmentTrack.draw(t)},qa.prototype.paintAxis=function(t,e,n){this.browser.isMultiLocusMode()?t.clearRect(0,0,e,n):this.coverageTrack.paintAxis(t,e,this.coverageTrack.height)},qa.prototype.contextMenuItemList=function(t){return this.alignmentTrack.contextMenuItemList(t)},qa.prototype.popupData=function(t){return t.y>=this.coverageTrack.top&&t.y<this.coverageTrack.height?this.coverageTrack.popupData(t):this.alignmentTrack.popupData(t)},qa.prototype.menuItemList=function(){const t=this,e=[],n=pe('<div class="igv-track-menu-category igv-track-menu-border-top">');n.text("Color by"),e.push({name:void 0,object:n,click:void 0,init:void 0});const r=[{key:"strand",label:"read strand"}];t.alignmentTrack.hasPairs&&(r.push({key:"firstOfPairStrand",label:"first-of-pair strand"}),r.push({key:"pairOrientation",label:"pair orientation"}),r.push({key:"fragmentLength",label:"insert size (TLEN)"}));const i="tag"+(t.alignmentTrack.colorByTag?" ("+t.alignmentTrack.colorByTag+")":"");return r.push({key:"tag",label:i}),r.forEach((function(n){const r=t.alignmentTrack.colorBy===n.key;e.push(function(e,n){const r=Ie(e.label,n);return{name:void 0,object:r,click:function(){if(e.key===t.alignmentTrack.colorBy)t.alignmentTrack.colorBy="none",t.config.colorBy="none",t.trackView.repaintViews();else if("tag"===e.key){const e=function(){t.alignmentTrack.colorBy="tag",t.config.colorBy="tag";const e=t.browser.inputDialog.$input.val().trim();e!==t.alignmentTrack.colorByTag&&(t.alignmentTrack.colorByTag=e,t.config.colorByTag=e,t.alignmentTrack.tagColors=new ze("Set1"),pe("#color-by-tag").text(t.alignmentTrack.colorByTag)),t.trackView.repaintViews()},n={label:"Tag Name",input:t.alignmentTrack.colorByTag?t.alignmentTrack.colorByTag:"",click:e};t.browser.inputDialog.configure(n),t.browser.inputDialog.present(pe(t.trackView.trackDiv))}else t.alignmentTrack.colorBy=e.key,t.config.colorBy=e.key,t.trackView.repaintViews()},init:void 0}}(n,r))})),e.push({object:pe('<div class="igv-track-menu-border-top">')}),e.push({object:Ie("Show all bases",t.showAllBases),click:function(){t.showAllBases=!t.showAllBases,t.config.showAllBases=t.showAllBases,t.trackView.updateViews(!0)}}),e.push({object:pe('<div class="igv-track-menu-border-top">')}),t.pairsSupported&&t.alignmentTrack.hasPairs&&e.push({object:Ie("View as pairs",t.viewAsPairs),click:function(){t.viewAsPairs=!t.viewAsPairs,t.config.viewAsPairs=t.viewAsPairs,t.featureSource.setViewAsPairs(t.viewAsPairs),t.trackView.updateViews(!0)}}),e.push({object:Ie("Show soft clips",t.showSoftClips),click:function(){t.showSoftClips=!t.showSoftClips,t.config.showSoftClips=t.showSoftClips,t.featureSource.setShowSoftClips(t.showSoftClips),t.trackView.updateViews(!0)}}),e},qa.prototype.dispose=function(){this.trackView=void 0},qa.prototype.getState=function(){const t=Object.assign({},this.config);t.sort=void 0;for(let e of this.browser.genomicStateList){const n=this.sortObjects[e.id];n&&(t.sort=t.sort||[],t.sort.push({locus:n.chr+":"+(n.position+1),option:n.sortOption,direction:n.direction?"ASC":"DESC",tag:n.tag}))}return t};var Wa=function(t,e){this.parent=e,this.featureSource=e.featureSource,this.top=0,this.height=t.coverageTrackHeight,this.dataRange={min:0},this.paintAxis=qo};Wa.prototype.computePixelHeight=function(t){return this.height},Wa.prototype.draw=function(t){const e=t.context;this.top&&e.translate(0,top);t.top,t.pixelHeight;const n=t.features.coverageMap;let r;this.dataRange.max=n.maximum,n.refSeq&&(r=n.refSeq.toUpperCase());const i=t.bpPerPixel,o=t.bpStart,a=o+t.pixelWidth*i+1;let s=this.parent.coverageColor;"rgb(185, 185, 185)"!==this.parent.color&&(s=Qe.darkenLighten(this.parent.color,-35)),vr.setProperties(e,{fillStyle:s,strokeStyle:s});const c=Math.max(1,Math.ceil(1/i));for(let t=0,r=n.coverage.length;t<r;t++){const r=n.bpStart+t;if(r<o)continue;if(r>a)break;const s=n.coverage[t];if(!s)continue;const h=Math.round(s.total/this.dataRange.max*this.height),l=this.height-h,u=Math.floor((r-o)/i);vr.fillRect(e,u,l,c,h)}if(r)for(let t=0,s=n.coverage.length;t<s;t++){const s=n.bpStart+t;if(s<o)continue;if(s>a)break;const h=n.coverage[t];if(!h)continue;const l=h.total/this.dataRange.max*this.height;let u=this.height-l;const f=Math.floor((s-o)/i),p=r[t];if(h.isMismatch(p)){vr.setProperties(e,{fillStyle:Oe[p]}),vr.fillRect(e,f,u,c,l);let t=0;for(let n of["A","C","T","G"]){const r=(h["pos"+n]+h["neg"+n])/this.dataRange.max*this.height;u=this.height-r-t,t+=r,vr.setProperties(e,{fillStyle:Oe[n]}),vr.fillRect(e,f,u,c,r)}}}},Wa.prototype.popupData=function(t){let e=t.viewport.getCachedFeatures();if(!e||0===e.length)return;let n=Math.floor(t.genomicLocation),r=t.viewport.genomicState.referenceFrame,i=e.coverageMap,o=[],a=Math.floor(n-i.bpStart),s=i.coverage[a];if(s){o.push(r.chrName+":"+Ze(1+n)),o.push({name:"Total Count",value:s.total});let t=s.posA+s.negA;t>0&&(t=t.toString()+" ("+Math.round(t/s.total*100)+"%, "+s.posA+"+, "+s.negA+"- )"),o.push({name:"A",value:t}),t=s.posC+s.negC,t>0&&(t=t.toString()+" ("+Math.round(t/s.total*100)+"%, "+s.posC+"+, "+s.negC+"- )"),o.push({name:"C",value:t}),t=s.posG+s.negG,t>0&&(t=t.toString()+" ("+Math.round(t/s.total*100)+"%, "+s.posG+"+, "+s.negG+"- )"),o.push({name:"G",value:t}),t=s.posT+s.negT,t>0&&(t=t.toString()+" ("+Math.round(t/s.total*100)+"%, "+s.posT+"+, "+s.negT+"- )"),o.push({name:"T",value:t}),t=s.posN+s.negN,t>0&&(t=t.toString()+" ("+Math.round(t/s.total*100)+"%, "+s.posN+"+, "+s.negN+"- )"),o.push({name:"N",value:t}),o.push("<HR/>"),o.push({name:"DEL",value:s.del.toString()}),o.push({name:"INS",value:s.ins.toString()})}return o};var Za=function(t,e){this.parent=e,this.browser=e.browser,this.featureSource=e.featureSource,this.top=0===t.coverageTrackHeight?0:t.coverageTrackHeight+5,this.alignmentRowHeight=t.alignmentRowHeight||14,this.negStrandColor=t.negStrandColor||"rgba(150, 150, 230, 0.75)",this.posStrandColor=t.posStrandColor||"rgba(230, 150, 150, 0.75)",this.insertionColor=t.insertionColor||"rgb(138, 94, 161)",this.deletionColor=t.deletionColor||"black",this.skippedColor=t.skippedColor||"rgb(150, 170, 170)",this.pairConnectorColor=t.pairConnectorColor,this.smallFragmentLengthColor=t.smallFragmentLengthColor||"rgb(0, 0, 150)",this.largeFragmentLengthColor=t.largeFragmentLengthColor||"rgb(200, 0, 0)",this.pairOrientation=t.pairOrienation||"fr",this.pairColors={},this.pairColors.RL=t.rlColor||"rgb(0, 150, 0)",this.pairColors.RR=t.rrColor||"rgb(20, 50, 200)",this.pairColors.LL=t.llColor||"rgb(0, 150, 150)",this.colorBy=t.colorBy||"pairOrientation",this.colorByTag=t.colorByTag?t.colorByTag.toUpperCase():void 0,this.bamColorTag=void 0===t.bamColorTag?"YC":t.bamColorTag,this.hideSmallIndels=t.hideSmallIndels,this.indelSizeThreshold=t.indelSizeThreshold||1,this.hasPairs=!1};Za.prototype.computePixelHeight=function(t){if(t.packedAlignmentRows){var e=0;return t.hasDownsampledIntervals()&&(e+=10),e+this.alignmentRowHeight*t.packedAlignmentRows.length+5}return this.height},Za.prototype.draw=function(t){const e=t.features,n=t.context,r=t.bpPerPixel,i=t.bpStart,o=t.pixelWidth,a=i+o*r+1,s=e.packedAlignmentRows,c=this.parent.showSoftClips,h=this.parent.showAllBases;t.top,t.pixelHeight;let l=e.sequence;l&&(l=l.toUpperCase());let u=0;if(n.save(),this.top&&n.translate(0,this.top),e.hasDownsampledIntervals()?(u=10,e.downsampledIntervals.forEach((function(t){var e=(t.start-i)/r,o=(t.end-i)/r;o-e>5&&(e+=1,o-=1),vr.fillRect(n,e,2,o-e,3,{fillStyle:"black"})}))):u=0,this.alignmentsYOffset=u,s){const t=s.length;for(let e=0;e<t;e++){const t=s[e],n=u+this.alignmentRowHeight*e,r=this.alignmentRowHeight<=4?this.alignmentRowHeight:this.alignmentRowHeight-2;for(let e of t.alignments)if(this.hasPairs=this.hasPairs||e.isPaired(),!(e.start+e.lengthOnRef<i)){if(e.start>a)break;!0!==e.hidden&&(e instanceof Qo?(f.call(this,e,n,r),p.call(this,e.firstAlignment,n,r),e.secondAlignment&&p.call(this,e.secondAlignment,n,r)):p.call(this,e,n,r))}}}function f(t,e,o){var s=this.getConnectorColor(t.firstAlignment),c=(t.connectingStart-i)/r,h=(t.connectingEnd-i)/r,l=e+o/2;t.connectingEnd<i||t.connectingStart>a||(t.mq<=0&&(s=Qe.addAlpha(s,.15)),vr.setProperties(n,{fillStyle:s,strokeStyle:s}),vr.strokeLine(n,c,l,h,l))}function p(t,o,s){if(t.start+t.lengthOnRef<i||t.start>a)return;const u=c?t.blocks:t.blocks.filter(t=>"S"!==t.type);let f=this.getAlignmentColor(t);const p=f;t.mq<=0&&(f=Qe.addAlpha(f,.15)),vr.setProperties(n,{fillStyle:f,strokeStyle:p});for(let t=0;t<u.length;t++){const e=u[t];if(!(t!==u.length-1&&u[t+1].start<i)&&(d.call(this,e,t),e.start+e.len>a))break}if(t.insertions){let e=-1;for(let c of t.insertions){if(this.hideSmallIndels&&c.len<=this.indelSizeThreshold)continue;if(c.start<i)continue;if(c.start>a)break;const t=(c.start-i)/r-1;if(t-e>2){const r=3;vr.fillRect(n,t,o-1,r,s+2,{fillStyle:this.insertionColor}),e=t}}}if(t.gaps){const e=o+s/2;for(let o of t.gaps){const t=(o.start-i)/r,a=(o.start+o.len-i)/r,s="D"===o.type?this.deletionColor:this.skippedColor;vr.strokeLine(n,t,e,a,e,{strokeStyle:s})}}function d(a,c){const d=a.start-e.start,m=(a.start-i)/r,v=(a.start+a.len-i)/r,y=Math.max(1,v-m),w=this.alignmentRowHeight/2,b="S"===a.type,x=t.mq<=0||this.highlightedAlignmentReadNamed===t.readName||b;let k=p;this.highlightedAlignmentReadNamed===t.readName?k="red":b&&(k="rgb(50,50,50)");const S=!0===t.strand&&c===u.length-1,C=!1===t.strand&&0===c;if(S|C){let t,e;S?(t=[m,v,v+w,v,m,m],e=[o,o,o+s/2,o+s,o+s,o]):C&&(t=[v,m,m-w,m,v,v],e=[o,o,o+s/2,o+s,o+s,o]),vr.fillPolygon(n,t,e,{fillStyle:f}),x&&vr.strokePolygon(n,t,e,{strokeStyle:k})}else vr.fillRect(n,m,o,y,s,{fillStyle:f}),x&&(n.save(),n.strokeStyle=k,n.strokeRect(m,o,y,s),n.restore());if(b||h||l&&t.seq&&"*"!==t.seq){const e=t.seq?t.seq.toUpperCase():void 0,c=t.qual,u=a.seqOffset;for(let t=0,f=a.len;t<f;t++){if(d+t<0)continue;let f=e?e.charAt(u+t):"";const p=l.charAt(d+t);if("="===f&&(f=p),"X"===f||p!==f||b||h){let e;if(!b&&void 0!==c&&c.length>u+t){e=Ga(c[u+t],f,a.start)}else e=Oe[f];if(e){const c=(a.start+t-i)/r,h=Math.max(1,1/r);g(n,r,{x:c,y:o,width:h,height:s},e,f)}}}}}function g(t,e,n,r,i){var o;if(.1,e<=.1&&n.height>=8){const e=Math.min(10,n.height);t.font=e+"px sans-serif",o=n.x+n.width/2,vr.strokeText(t,i,o-t.measureText(i).width/2,e-1+n.y,{strokeStyle:r})}else vr.fillRect(t,n.x,n.y,n.width,n.height,{fillStyle:r})}}n.restore()},Za.prototype.sortAlignmentRows=function(t,e){const n=t.direction;null===e&&(e=this.featureSource.alignmentContainer);for(let n of e.packedAlignmentRows)n.updateScore(t,e);e.packedAlignmentRows.sort((function(t,e){const r=t.score>e.score?1:t.score<e.score?-1:0;return!0===n?r:-r}))},Za.prototype.popupData=function(t){const e=this.getClickedObject(t.viewport,t.y,t.genomicLocation);return e?e.popupData(t.genomicLocation):void 0},Za.prototype.contextMenuItemList=function(t){const e=this,n=t.viewport,r=t.viewport.genomicState,i=this.getClickedObject(t.viewport,t.y,t.genomicLocation),o=i&&!i.paired&&"function"==typeof i.isPaired,a=[];return a.push("<b>Sort by...</b>"),a.push({label:"&nbsp; base",click:()=>s("NUCLEOTIDE")}),a.push({label:"&nbsp; read strand",click:()=>s("STRAND")}),a.push({label:"&nbsp; insert size",click:()=>s("INSERT_SIZE")}),a.push({label:"&nbsp; chromosome of mate",click:()=>s("MATE_CHR")}),a.push({label:"&nbsp; mapping quality",click:()=>s("MQ")}),a.push({label:"&nbsp; tag",click:function(){const n={label:"Tag Name",input:e.sortByTag?e.sortByTag:"",click:function(){const n=e.browser.inputDialog.$input.val().trim();e.sortByTag=n,c({chr:r.referenceFrame.chrName,position:Math.floor(t.genomicLocation),sortOption:"TAG",tag:n})}};e.browser.inputDialog.configure(n),e.browser.inputDialog.present(pe(e.parent.trackView.trackDiv))}}),a.push("<hr/>"),o&&i.isMateMapped()&&a.push({label:"View mate in split screen",click:function(){i.mate&&(e.highlightedAlignmentReadNamed=i.readName,e.browser.presentSplitScreenMultiLocusPanel(i,t.viewport.genomicState))},init:void 0}),a.push({label:"View read sequence",click:function(){const t=i;if(!t)return;const n=t.seq;n&&"*"!==n?e.browser.presentAlert(n):e.browser.presentAlert("Read sequence: *")}}),a.push("<hr/>"),a;function s(e){c({chr:r.referenceFrame.chrName,position:Math.floor(t.genomicLocation),sortOption:e})}function c(r){if(!t.viewport.tile)return;const i=e.parent.sortObjects,o=i[n.genomicState.id];r.direction=!o||!o.direction,e.sortAlignmentRows(r,t.viewport.getCachedFeatures()),e.parent.trackView.repaintViews(),i[n.genomicState.id]=r}},Za.prototype.getClickedObject=function(t,e,n){const r=this.parent.showSoftClips;let i=t.getCachedFeatures();if(!i||0===i.length)return;let o=i.packedAlignmentRows,a=i.downsampledIntervals,s=Math.floor((e-this.top-this.alignmentsYOffset)/this.alignmentRowHeight);if(s<0){for(let t=0;t<a.length;t++)if(a[t].start<=n&&a[t].end>=n)return a[t]}else if(s<o.length){let t=o[s].alignments.filter((function(t){const e=r?t.scStart:t.start,i=r?t.scLengthOnRef:t.lengthOnRef;return n>=e&&n<=e+i}));if(t.length>0)return t[0]}},Za.prototype.getConnectorColor=function(t){if(this.pairConnectorColor)return this.pairConnectorColor;switch(this.colorBy){case"strand":case"firstOfPairStrand":case"pairOrientation":case"tag":return this.parent.color||"rgb(200, 200, 200)";default:return this.getAlignmentColor(t)}},Za.prototype.getAlignmentColor=function(t){const e=this;let n=e.parent.color;let r;switch(e.colorBy){case"strand":n=t.strand?e.posStrandColor:e.negStrandColor;break;case"firstOfPairStrand":t instanceof Qo?n=t.firstOfPairStrand()?e.posStrandColor:e.negStrandColor:t.isPaired()&&(t.isFirstOfPair()?n=t.strand?e.posStrandColor:e.negStrandColor:t.isSecondOfPair()?n=t.strand?e.negStrandColor:e.posStrandColor:console.error("ERROR. Paired alignments are either first or second."));break;case"pairOrientation":if(t.mate&&t.isMateMapped()&&t.mate.chr!==t.chr)n=Xa(t.mate.chr);else if(e.pairOrientation&&t.pairOrientation){var i=Ka[e.pairOrientation];if(i){var o=e.pairColors[i[t.pairOrientation]];o&&(n=o)}}break;case"fragmentLength":t.mate&&t.isMateMapped()&&t.mate.chr!==t.chr?n=Xa(t.mate.chr):e.parent.minFragmentLength&&Math.abs(t.fragmentLength)<e.parent.minFragmentLength?n=e.smallFragmentLengthColor:e.parent.maxFragmentLength&&Math.abs(t.fragmentLength)>e.parent.maxFragmentLength&&(n=e.largeFragmentLengthColor);break;case"tag":r=t.tags()[e.colorByTag],void 0!==r&&(e.bamColorTag===e.colorByTag?n="rgb("+r+")":(e.tagColors||(e.tagColors=new ze("Set1")),n=e.tagColors.getColor(r)));break;default:n=e.parent.color}return n};var Ka={fr:{F1R2:"LR",F2R1:"LR",F1F2:"LL",F2F1:"LL",R1R2:"RR",R2R1:"RR",R1F2:"RL",R2F1:"RL"},rf:{R1F2:"LR",R2F1:"LR",R1R2:"LL",R2R1:"LL",F1F2:"RR",F2F1:"RR",F1R2:"RL",F2R1:"RL"},ff:{F2F1:"LR",R1R2:"LR",F2R1:"LL",R1F2:"LL",R2F1:"RR",F1R2:"RR",R2R1:"RL",F1F2:"RL"}};function Xa(t){if(Ya[t])return Ya[t];if(Ya["chr"+t]){const e=Ya["chr"+t];return Ya[t]=e,e}{const e=Qe.randomRGB();return Ya[t]=e,e}}const Ya={chrX:"rgb(204, 153, 0)",chrY:"rgb(153, 204, 0",chrUn:"rgb(50, 50, 50)",chr1:"rgb(80, 80, 255)",chrI:"rgb(139, 155, 187)",chr2:"rgb(206, 61, 50)",chrII:"rgb(206, 61, 50)",chr2a:"rgb(216, 71, 60)",chr2b:"rgb(226, 81, 70)",chr3:"rgb(116, 155, 88)",chrIII:"rgb(116, 155, 88)",chr4:"rgb(240, 230, 133)",chrIV:"rgb(240, 230, 133)",chr5:"rgb(70, 105, 131)",chr6:"rgb(186, 99, 56)",chr7:"rgb(93, 177, 221)",chr8:"rgb(128, 34, 104)",chr9:"rgb(107, 215, 107)",chr10:"rgb(213, 149, 167)",chr11:"rgb(146, 72, 34)",chr12:"rgb(131, 123, 141)",chr13:"rgb(199, 81, 39)",chr14:"rgb(213, 143, 92)",chr15:"rgb(122, 101, 165)",chr16:"rgb(228, 175, 105)",chr17:"rgb(59, 27, 83)",chr18:"rgb(205, 222, 183)",chr19:"rgb(97, 42, 121)",chr20:"rgb(174, 31, 99)",chr21:"rgb(231, 199, 111)",chr22:"rgb(90, 101, 94)",chr23:"rgb(204, 153, 0)",chr24:"rgb(153, 204, 0)",chr25:"rgb(51, 204, 0)",chr26:"rgb(0, 204, 51)",chr27:"rgb(0, 204, 153)",chr28:"rgb(0, 153, 204)",chr29:"rgb(10, 71, 255)",chr30:"rgb(71, 117, 255)",chr31:"rgb(255, 194, 10)",chr32:"rgb(255, 209, 71)",chr33:"rgb(153, 0, 51)",chr34:"rgb(153, 26, 0)",chr35:"rgb(153, 102, 0)",chr36:"rgb(128, 153, 0)",chr37:"rgb(51, 153, 0)",chr38:"rgb(0, 153, 26)",chr39:"rgb(0, 153, 102)",chr40:"rgb(0, 128, 153)",chr41:"rgb(0, 51, 153)",chr42:"rgb(26, 0, 153)",chr43:"rgb(102, 0, 153)",chr44:"rgb(153, 0, 128)",chr45:"rgb(214, 0, 71)",chr46:"rgb(255, 20, 99)",chr47:"rgb(0, 214, 143)",chr48:"rgb(20, 255, 177)"},Qa=hn(wi,(function(t,e){wi.call(this,t,e),this.theta=t.theta||Math.PI/4,this.sinTheta=Math.sin(this.theta),this.cosTheta=Math.cos(this.theta),this.height=t.height||250,this.autoHeight=!0,this.arcOrientation=void 0===t.arcOrientation||t.arcOrientation,this.thickness=t.thickness||2,this.color=t.color||"rgb(180,25,137)",this.visibilityWindow=-1,this.colorAlphaCache={}}));function Ja(t,e){let n=this.colorAlphaCache[t];return n||(n=Qe.addAlpha(t,e),this.colorAlphaCache[t]=n),n}Qa.prototype.getState=function(){var t=this.config||{};return t.arcOrientation=this.arcOrientation,t.thickness=this.thickness,t.color=this.color,t},Qa.prototype.getFeatures=function(t,e,n){const r=this,i=this.browser.genome;if(r.featureCache)return Promise.resolve(r.featureCache.queryFeatures(t,e,n));{const o=un(r.config);return zn.loadString(r.config.url,o).then((function(o){const a=new qr("bedpe"),s=(a.parseHeader(o),a.parseFeatures(o));return r.featureCache=new Ni(s,i),r.featureCache.queryFeatures(t,e,n)}))}},Qa.prototype.draw=function(t){const e=this,n=t.context,r=t.pixelWidth,i=t.pixelHeight,o=t.viewportWidth,a=t.bpPerPixel,s=t.bpStart,c=a;vr.fillRect(n,0,t.pixelTop,r,i,{fillStyle:"rgb(255, 255, 255)"});const h=t.features;h&&(!function(){let t=0;h.forEach((function(e){let n=(e.start-s)/c,i=(e.end-s)/c;i>=0&&n<=r&&(t=Math.max(t,i-n))}));let n=Math.min(o,t)/2;if(t>0){let t=i/n;e.theta=function(t){let e,n=[.01570925532366355,.15838444032453644,.3249196962329063,.5095254494944288,.7265425280053609,.9999999999999999],r=[.031415926535897934,.3141592653589793,.6283185307179586,.9424777960769379,1.2566370614359172,1.5707963267948966];for(e=0;e<n.length&&!(n[e]>t);e++);let i=0===e?0:n[e-1],o=(t-i)/((e<n.length?n[e]:1)-i),a=0===e?0:r[e-1],s=e<r.length?r[e]:Math.PI/2;return a+o*(s-a)}(t),e.sinTheta=Math.sin(e.theta),e.cosTheta=Math.cos(e.theta)}}(),h.forEach((function(t){let r=Math.round((t.m1-s)/c),i=Math.round((t.m2-s)/c),a=e.arcOrientation,h=i-r;h<3&&(h=3,r--);const l=h/2,u=l/e.sinTheta,f=e.cosTheta*u,p=r+l;let d,g,m;a?(d=e.height+f,g=Math.PI+Math.PI/2-e.theta,m=Math.PI+Math.PI/2+e.theta):(d=-f,g=Math.PI/2-e.theta,m=Math.PI/2+e.theta);let v=t.color||e.color;v&&h>o&&(v=Ja.call(e,v,"0.1")),n.strokeStyle=v,n.lineWidth=t.thickness||e.thicknewss||1,n.beginPath(),n.arc(p,d,u,g,m,!1),n.stroke()})))},Qa.prototype.menuItemList=function(){var t=this;return[{name:"Toggle arc direction",click:function(){t.arcOrientation=!t.arcOrientation,t.trackView.repaintViews()}},{name:"Set track color",click:function(){t.trackView.presentColorPicker()}}]};const ts=hn(wi,(function(t,e){this.type="variant",this.visibilityWindow=t.visibilityWindow,wi.call(this,t,e),this.displayMode=t.displayMode||"EXPANDED",this.labelDisplayMode=t.labelDisplayMode,this.variantHeight=t.variantHeight||10,this.squishedCallHeight=t.squishedCallHeight||1,this.expandedCallHeight=t.expandedCallHeight||10,this.expandedVGap=void 0!==t.expandedVGap?t.expandedVGap:2,this.squishedVGap=void 0!==t.squishedVGap?t.squishedVGap:1,this.expandedGroupGap=t.expandedGroupGap||10,this.squishedGroupGap=t.squishedGroupGap||5,this.featureHeight=t.featureHeight||14,this.visibilityWindow=t.visibilityWindow,this.featureSource=new io(t,e.genome),this.nonRefColor=t.nonRefColor||"rgb(200, 200, 215)",this.mixedColor=t.mixedColor||"rgb(200, 220, 200)",this.homrefColor=t.homrefColor||"rgb(200, 200, 200)",this.homvarColor=t.homvarColor||"rgb(17,248,254)",this.hetvarColor=t.hetvarColor||"rgb(34,12,253)",this.sortDirection="ASC",this.nRows=1}));function es(t,e,n,r){var i,o="";let a=[];i=[];const s=e.alternateBases.split(",");if(t.genotype.forEach((function(t){if(0===t)o+=e.referenceBases;else{let e=s[t-1].replace("<","&lt;");o+=e}})),void 0!==t.callSetName&&i.push({name:"Name",value:t.callSetName}),i.push({name:"Genotype",value:o}),void 0!==t.phaseset&&i.push({name:"Phase set",value:t.phaseset}),void 0!==t.genotypeLikelihood&&i.push({name:"genotypeLikelihood",value:t.genotypeLikelihood.toString()}),r){var c=r.getAttributes(t.callSetName);c&&Object.keys(c).forEach((function(t){var e=t.replace(/([A-Z])/g," $1");e=e.charAt(0).toUpperCase()+e.slice(1),i.push({name:e,value:c[t]})}))}var h=Object.keys(t.info);return h.length&&i.push("<hr>"),h.forEach((function(e){i.push({name:e,value:t.info[e]})})),a.length>0&&(i.push("<HR/>"),i=i.concat(a)),i}ts.prototype.postInit=async function(){await this.getFileHeader();if(void 0===this.visibilityWindow){const t=this.config.url instanceof File?this.config.url.name:this.config.url;if(We(t)&&t.toLowerCase().includes("gnomad"))this.visibilityWindow=1e3;else if(this.callSets){const t=this.callSets.length;this.visibilityWindow=Math.max(1e3,1e6-1e4*t)}else this.visibilityWindow=1e6}return this},ts.prototype.getFileHeader=async function(){if(this.header)return this.header;if("function"==typeof this.featureSource.getFileHeader){const t=await this.featureSource.getFileHeader();return t&&(t.name&&!this.config.name&&(this.name=t.name),t.color&&!this.config.color&&(this.color="rgb("+t.color+")"),this.callSets=t.callSets||[]),this.header=t,t}this.callSets=[]},ts.prototype.getCallsetsLength=function(){return this.callSets.length},ts.prototype.getFeatures=async function(t,e,n,r){return void 0===this.header&&(this.header=await this.getFileHeader()),this.featureSource.getFeatures(t,e,n,r,this.visibilityWindow)},ts.prototype.computePixelHeight=function(t){if("COLLAPSED"===this.displayMode)return this.nRows=1,10+this.variantHeight;{var e=0;if(t)for(let n of t)n.row&&n.row>e&&(e=n.row);const n="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;this.nRows=e+1;const r=10+this.nRows*(this.variantHeight+n);this.variantBandHeight=r;const i="EXPANDED"===this.displayMode?this.expandedCallHeight:this.squishedCallHeight;return r+n+(this.getCallsetsLength()*this.nRows+1)*(i+n)}},ts.prototype.draw=function(t){const e=t.context,n=this.callSets,r=this.getCallsetsLength(),i=t.pixelWidth,o=t.pixelHeight,a="EXPANDED"===this.displayMode?this.expandedCallHeight:this.squishedCallHeight,s=t.bpPerPixel,c=t.bpStart,h=c+i*s+1;vr.fillRect(e,0,t.pixelTop,i,o,{fillStyle:"rgb(255, 255, 255)"});const l="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;n&&r>0&&"COLLAPSED"!==this.displayMode&&vr.strokeLine(e,0,this.variantBandHeight,i,this.variantBandHeight,{strokeStyle:"rgb(224,224,224) "});const u=t.features;if(u)for(let t of u){if(t.end<c)continue;if(t.start>h)break;const i=10+("COLLAPSED"===this.displayMode?0:t.row*(this.variantHeight+l)),o=this.variantHeight;let u=Math.round((t.start-c)/s),f=Math.round((t.end-c)/s),p=Math.max(1,f-u);if(p<3?(p=3,u-=1):p>5&&(u+=1,p-=2),"NONVARIANT"===t.type?e.fillStyle=this.nonRefColor:"MIXED"===t.type?e.fillStyle=this.mixedColor:e.fillStyle=this.color,e.fillRect(u,i,p,o),r>0&&t.calls&&"COLLAPSED"!==this.displayMode){let r=0;for(let i of n){const n=t.calls[i.id];if(n){const i=this.variantBandHeight+l+(r+t.row)*(a+l);let o=!0,s=!0;n.genotype.forEach((function(t){0!==t&&(s=!1),0===t&&(o=!1)})),e.fillStyle=s?this.homrefColor:o?this.homvarColor:this.hetvarColor,e.fillRect(u,i,p,a)}r++}}}},ts.prototype.popupData=function(t,e){e||(e=this.clickedFeatures(t));const n=t.genomicLocation,r=this.browser.genome.id,i=[],o=this.browser.sampleInformation;for(let a of e)if(i.length>0&&i.push("<HR>"),"COLLAPSED"===this.displayMode)Array.prototype.push.apply(i,a.popupData(n,this.type));else{const e=t.y,s="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;if(e<=this.variantBandHeight){const t=Math.floor((e-10)/(this.variantHeight+s));a.row===t&&Array.prototype.push.apply(i,a.popupData(n,r),this.type)}else{const t=this.callSets;if(t&&a.calls){const n=this.nRows*("SQUISHED"===this.displayMode?this.squishedCallHeight:this.expandedCallHeight),c=Math.floor((e-this.variantBandHeight)/(n+s));if(c>=0&&c<t.length){const e=t[c],n=a.calls[e.id];Array.prototype.push.apply(i,es(n,a,r,o))}}}}return i},ts.prototype.menuItemList=function(){var t=this,e=[];return e.push({object:pe('<div class="igv-track-menu-border-top">')}),["COLLAPSED","SQUISHED","EXPANDED"].forEach((function(n){e.push({object:Ie({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[n],n===t.displayMode),click:function(){t.displayMode=n,t.trackView.checkContentHeight(),t.trackView.repaintViews()}})})),e};const ns=Ae.dataRangeMenuItem,rs=hn(wi,(function(t,e){var n=t.url,r=t.name;this.config=t,this.url=n,this.name=r,this.pValueField=t.pValueField||"pValue",this.geneField=t.geneField||"geneSymbol",this.snpField=t.snpField||"snp";const i=t.minLogP||t.min,o=t.maxLogP||t.max;this.dataRange={min:i||3.5,max:o||25},this.autoscale=!o||t.autoscale,this.autoscalePercentile=void 0===t.autoscalePercentile?98:t.autoscalePercentile,this.background=t.background,this.divider=t.divider||"rgb(225,225,225)",this.dotSize=t.dotSize||2,this.height=t.height||100,this.autoHeight=!1,this.disableButtons=t.disableButtons,this.visibilityWindow=void 0===t.visibilityWindow?2e6:t.visibilityWindow>=0?Math.min(2e6,t.visibilityWindow):2e6,this.featureSource=new io(t,e.genome),xo.gtexLoaded=!0}));rs.prototype.paintAxis=function(t,e,n){var r=(this.dataRange.max-this.dataRange.min)/n,i={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};vr.fillRect(t,0,0,e,n,{fillStyle:"rgb(255, 255, 255)"});for(var o=Math.ceil(10*(this.dataRange.max-this.dataRange.min)/n),a=4;a<=this.dataRange.max;a+=o){var s,c,h,l,u;s=(u=.85*e)-5,c=u,h=l=n-Math.round((a-this.dataRange.min)/r),vr.strokeLine(t,s,h,c,l,i),h>8&&vr.fillText(t,a,s-1,h+2,i)}i.textAlign="center",vr.fillText(t,"-log10(pvalue)",e/4,n/2,i,{rotate:{angle:-90}})},rs.prototype.getFeatures=function(t,e,n){const r=this.pValueField;return this.featureSource.getFeatures(t,e,n).then((function(t){return t.forEach((function(t){t.value=t[r]})),t}))},rs.prototype.draw=function(t){var e=this,n=t.features,r=t.context,i=t.bpPerPixel,o=t.bpStart,a=t.pixelWidth,s=t.pixelHeight,c=(e.dataRange.max-e.dataRange.min)/s,h=t.genomicState.selection;if(this.background&&vr.fillRect(r,0,0,a,s,{fillStyle:this.background}),vr.strokeLine(r,0,s-1,a,s-1,{strokeStyle:this.divider}),r){var l=n.length;r.save(),u(!1),u(!0),r.restore()}function u(t){var u,f,p,d,g,m,v,y,w,b=t?2*e.dotSize:e.dotSize;for(f=0;f<l;f++)if(u=n[f],!((p=Math.round(u.position-o+.5)/i)<0)){if(p>a)break;if(v=u.snp.toUpperCase(),y=u[e.geneField].toUpperCase(),m=h&&(h.snp===v||h.gene===y),!t||m){h&&h.snp===v&&h.addGene(y);var x=-Math.log(u[e.pValueField])/Math.LN10;x>=e.dataRange.min&&(x>e.dataRange.max?(x=e.dataRange.max,w=!0):w=!1,d=Math.max(0+b,s-Math.round((x-e.dataRange.min)/c)),u.px=p,u.py=d,t&&h?(g=h.colorForGene(y),vr.setProperties(r,{fillStyle:g,strokeStyle:"black"})):(g=w?"rgb(150, 150, 150)":"rgb(180, 180, 180)",vr.setProperties(r,{fillStyle:g,strokeStyle:g})),vr.fillCircle(r,p,d,b),vr.strokeCircle(r,p,d,b))}}}},rs.prototype.popupData=function(t){let e=t.viewport.getCachedFeatures();if(!e||0===e.length)return[];let n=t.genomicLocation,r=(t.x,t.y),i=t.viewport.genomicState.referenceFrame,o=2*this.dotSize*i.bpPerPixel,a=this.dotSize,s=this.name,c=[];return e.forEach((function(t){t.end>=n-o&&t.start<=n+o&&t.py-r<2*a&&(c.length>0&&c.push("<hr>"),c.push({name:"snp id",value:t.snp},{name:"gene id",value:t.geneId},{name:"gene name",value:t.geneName},{name:"p value",value:t.pValue},{name:"tissue",value:s}))})),c},rs.prototype.menuItemList=function(){var t=this,e=[];return e.push(ns(this.trackView)),e.push({object:Ie("Autoscale",t.autoscale),click:function(){t.autoscale=!t.autoscale,t.config.autoscale=t.autoscale,t.trackView.setDataRange(void 0,void 0,t.autoscale)}}),e},rs.prototype.doAutoscale=function(t){if(t.length>0){var e=t.map((function(t){return-Math.log(t.value)/Math.LN10}));this.dataRange.max=Ue(e,this.autoscalePercentile)}else{const t=this.config.maxLogP||this.config.max;this.dataRange.max=t||25}return this.dataRange};const is=function(t){this.config=t,this.url=t.url,this.trait=t.trait,this.dataset=t.dataset,this.pvalue=t.pvalue,void 0===t.valueThreshold&&(t.valueThreshold=.05),void 0===t.dataset?(this.queryJson=t.queryJson||cs,this.jsonToVariants=t.jsonToVariants||hs):(this.queryJson=t.queryJson||ss,this.jsonToVariants=t.jsonToVariants||as)};is.prototype.getFeatures=function(t,e,n){const r=this;this.genome;return new Promise((function(i,o){if(r.cache&&r.cache.chr===t&&r.cache.end>n&&r.cache.start<e)i(r.cache.featuresBetween(e,n));else{var a=Math.max(n-e,1e7)/2,s=(n+e)/2,c=t.startsWith("chr")?t.substring(3):t,h=Math.max(0,s-a),l=s+a,u=r.config.proxy?r.config.proxy:r.url,f=r.queryJson(c,h,l,r.config);zn.loadJson(u,{sendData:f,withCredentials:r.config.withCredentials}).then((function(e){var n;e?e.error_code?(On.presentAlert("Error querying trait "+r.trait+"  (error_code="+e.error_code+")",void 0),i(null)):((n=r.jsonToVariants(e,r.config)).sort((function(t,e){return t.POS-e.POS})),r.cache=new os(t,h,l,n),i(n)):i(null)})).catch(o)}}))};var os=function(t,e,n,r){var i,o,a;for(this.chr=t,this.start=e,this.end=n,this.binSize=(n-e)/100,this.binIndeces=[0],this.features=r,a=0,i=0;i<r.length;i++)(o=Math.max(0,Math.floor((r[i].POS-this.start)/this.binSize)))>a&&(this.binIndeces.push(i),a=o)};function as(t,e){var n=[];return t.variants.forEach((function(t){var r={};t.forEach((function(t){for(var e in t)t.hasOwnProperty(e)&&("POS"===e&&(r.start=t[e]-1),r[e]=t[e])})),r.pvalue=r[e.pvalue][e.dataset][e.trait],r[e.pvalue]=void 0,n.push(r)})),n}function ss(t,e,n,r){var i=r.trait,o=r.pvalue,a=r.dataset,s={passback:"x",entity:"variant",properties:{cproperty:["VAR_ID","DBSNP_ID","CHROM","POS"],orderBy:["CHROM"],dproperty:{},pproperty:JSON.parse('{"'+o+'": {"'+a+'": ["'+i+'"]}}')},filters:[{dataset_id:"x",phenotype:"x",operand:"CHROM",operator:"EQ",value:t,operand_type:"STRING"},{dataset_id:"x",phenotype:"x",operand:"POS",operator:"GTE",value:e,operand_type:"INTEGER"},{dataset_id:"x",phenotype:"x",operand:"POS",operator:"LTE",value:n,operand_type:"INTEGER"},{dataset_id:a,phenotype:i,operand:o,operator:"LT",value:r.valueThreshold,operand_type:"FLOAT"}]};return JSON.stringify(s)}function cs(t,e,n,r){var i=r.url.includes("variant")?"VARIANT":"TRAIT",o=r.pvalue?r.pvalue:"PVALUE",a={user_group:"ui",filters:[{operand:"CHROM",operator:"EQ",value:t,filter_type:"STRING"},{operand:"POS",operator:"GT",value:e,filter_type:"FLOAT"},{operand:"POS",operator:"LT",value:n,filter_type:"FLOAT"},{operand:o,operator:"LTE",value:r.valueThreshold,filter_type:"FLOAT"}],columns:"TRAIT"===i?["CHROM","POS","DBSNP_ID","PVALUE","ZSCORE"]:["CHROM","POS",o,"DBSNP_ID"]};return"TRAIT"===i&&(a.trait=r.trait),r.proxy?"url="+r.url+"&data="+JSON.stringify(a):JSON.stringify(a)}function hs(t,e){return t.variants.forEach((function(t){t.chr=t.CHROM,t.start=t.POS-1})),t.variants}os.prototype.featuresBetween=function(t,e){var n=Math.max(0,Math.min(Math.floor((t-this.start)/this.binSize)-1,this.binIndeces.length-1)),r=Math.max(0,Math.min(Math.floor((e-this.start)/this.binSize),this.binIndeces.length-1));this.binIndeces[n],this.binIndeces[r];return this.features};const ls=hn(wi,(function(t,e){this.config=t,this.url=t.url,this.name=t.name,this.trait=t.trait,this.height=t.height||100,this.minLogP=t.minLogP||0,this.maxLogP=t.maxLogP||15,this.background=t.background,this.divider=t.divider||"rgb(225,225,225)",this.dotSize=t.dotSize||4,this.popoverWindow=void 0===t.popoverWindow?1e8:t.popoverWindow,this.description=t.description,this.proxy=t.proxy,this.portalURL=t.portalURL?t.portalURL:window.location.origin,this.variantURL=t.variantURL||"http://www.type2diabetesgenetics.org/variant/variantInfo/",this.traitURL=t.traitURL||"http://www.type2diabetesgenetics.org/trait/traitInfo/";var n=t.colorScale||{thresholds:[5e-8,5e-4,.5],colors:["rgb(255,50,50)","rgb(251,100,100)","rgb(251,170,170)","rgb(227,238,249)"]};this.pvalue=t.pvalue?t.pvalue:"PVALUE",this.colorScale=new Zo(n),t.format&&"gtexgwas"===t.format.toLowerCase()?this.featureSource=new io(t,e.genome):this.featureSource=new is(t,e.genome)}));ls.prototype.getFeatures=function(t,e,n){return this.featureSource.getFeatures(t,e,n)},ls.prototype.draw=function(t){var e,n,r,i,o,a,s,c,h,l=t.features,u=t.context,f=t.bpPerPixel,p=t.bpStart,d=t.pixelWidth,g=t.pixelHeight,m=p+d*f+1,v=(this.maxLogP-this.minLogP)/g,y=m-p<1e8;if(this.po=y?[]:void 0,this.background&&vr.fillRect(u,0,0,d,g,{fillStyle:this.background}),vr.strokeLine(u,0,g-1,d,g-1,{strokeStyle:this.divider}),l){r=l.length;for(var w=0;w<r;w++)if(!((n=(e=l[w]).start)<p)){if(n>m)break;(c=e.pvalue||e[this.pvalue])&&(s=this.colorScale.getColor(c),h=-Math.log(c)/2.302585092994046,i=f,o=Math.round((n-p)/i),a=Math.max(this.dotSize,g-Math.round((h-this.minLogP)/v)),s&&vr.setProperties(u,{fillStyle:s,strokeStyle:"black"}),vr.fillCircle(u,o,a,this.dotSize),y&&this.po.push({x:o,y:a,feature:e}))}}},ls.prototype.paintAxis=function(t,e,n){var r=(this.maxLogP-this.minLogP)/n,i={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};vr.fillRect(t,0,0,e,n,{fillStyle:"rgb(255, 255, 255)"});for(var o=2;o<this.maxLogP;o+=2){var a=n-Math.round((o-this.minLogP)/r);vr.strokeLine(t,45,a-2,50,a-2,i),vr.fillText(t,o,44,a+2,i)}i.textAlign="center",vr.fillText(t,"-log10(pvalue)",e/2,n/2,i,{rotate:{angle:-90}})},ls.prototype.popupData=function(t){t.genomicLocation;var e,n,r,i,o,a,s,c,h=t.x,l=t.y,u=(t.viewport.genomicState.referenceFrame,[]);if(this.po)for(e=0,n=this.po.length;e<n;e++)r=this.po[e],Math.abs(h-r.x)<this.dotSize&&Math.abs(l-r.y)<=this.dotSize&&(a=r.feature.CHROM||r.feature.chr,s=r.feature.POS||r.feature.start,c=r.feature[this.pvalue]||r.feature.pvalue,(i=r.feature.DBSNP_ID)&&(o=this.variantURL.startsWith("http")?this.variantURL:this.portalURL+"/"+this.variantURL,u.push("<a target='_blank' href='"+o+(o.endsWith("/")?"":"/")+i+"' >"+i+"</a>")),u.push(a+":"+s.toString()),u.push({name:"p-value",value:c}),r.feature.ZSCORE&&u.push({name:"z-score",value:r.feature.ZSCORE}),i&&(o=this.traitURL.startsWith("http")?this.traitURL:this.portalURL+"/"+this.traitURL,u.push("<a target='_blank' href='"+o+(o.endsWith("/")?"":"/")+i+"'>see all available statistics for this variant</a>")),e<n-1&&u.push("<p/>"));else u.push("Popover not available at this resolution.");return u};const us=Ae.dataRangeMenuItem,fs=hn(wi,(function(t,e){wi.call(this,t,e),this.autoscale=t.autoscale||void 0===t.max,this.dataRange={min:t.min||0,max:t.max},this.windowFunction=t.windowFunction||"mean",this.paintAxis=qo,this.graphType=t.graphType||"bar",this.featureSource=new io(this.config,e.genome)}));fs.prototype.postInit=async function(){this.header=await this.featureSource.getFileHeader()},fs.prototype.menuItemList=function(){const t=this,e=[];return e.push(us(this.trackView)),e.push({object:Ie("Autoscale",t.autoscale),click:function(){t.autoscale=!t.autoscale,t.config.autoscale=t.autoscale,t.trackView.setDataRange(void 0,void 0,t.autoscale)}}),e},fs.prototype.getFeatures=async function(t,e,n){const r=await this.featureSource.getFeatures(t,0,Number.MAX_VALUE);let i=void 0,o=void 0;for(let t=1;t<r.length-1;t++)if(void 0===i&&r[t].end>e&&(i=t-1),void 0===o&&r[t].start>n){o=t+1;break}return void 0===i&&(i=0),void 0===o&&(o=r.length),r.slice(i,o)},fs.prototype.draw=function(t){let e=this;const n=t.features,r=t.context,i=t.bpPerPixel,o=t.bpStart,a=(t.pixelWidth,t.pixelHeight),s=t=>(e.dataRange.max-t)/(e.dataRange.max-e.dataRange.min)*a,c=function(t){let e=Math.floor((t-o)/i);return isNaN(e)&&console.warn("isNaN(x). feature start "+Ze(t)+" bp start "+Ze(o)),e};if(n&&n.length>0&&(void 0===e.dataRange.min&&(e.dataRange.min=0),e.dataRange.max>e.dataRange.min)){const t=this.config.highlightSamples;let i=-1,o={},a=[],h=[];this.clickDetectorCache={};for(let l of n){const n=c(l.start),u=c(l.end),f=i>=0?c(i):n;if(!isNaN(n)&&!isNaN(u)&&!(n-f<1&&u-n<1)){this.clickDetectorCache[n]=[],this.clickDetectorCache[u]=[];for(let i=0;i<l.values.length;i++){const c=e.header[i],p=l.values[i],d=s(p);if(n-f>=1){const e=o[c],i=s(e),h=t&&t[c];h?a.push([f,i,n,d,h]):vr.strokeLine(r,f,i,n,d,{strokeStyle:"#D9D9D9"}),this.clickDetectorCache[n].push([f,i,n,d,c,h||"gray"])}if(u-n>=1){const e=t&&t[c];e?h.push([n,d,u,d,e]):vr.strokeLine(r,n,d,u,d,{strokeStyle:"gray"}),this.clickDetectorCache[u].push([n,d,u,d,c,e||"gray"])}o[c]=p}i=l.end}}for(let t of a)vr.strokeLine(r,t[0],t[1],t[2],t[3],{strokeStyle:t[4],lineWidth:1.3});for(let t of h)vr.strokeLine(r,t[0],t[1],t[2],t[3],{strokeStyle:t[4],lineWidth:2})}!function(t){if(e.config.hasOwnProperty("guideLines"))for(let n of e.config.guideLines)if(n.hasOwnProperty("color")&&n.hasOwnProperty("y")&&n.hasOwnProperty("dotted")){let e=s(n.y),r={strokeStyle:n.color,strokeWidth:2};n.dotted?vr.dashedLine(t.context,0,e,t.pixelWidth,e,5,r):vr.strokeLine(t.context,0,e,t.pixelWidth,e,r)}}(t)},fs.prototype.doAutoscale=function(t){let e,n;return t.length>0?(e=Number.MAX_VALUE,n=-Number.MAX_VALUE,t.forEach((function(t){e=Math.min(e,...t.values),n=Math.max(n,...t.values)})),e-=.01,n+=.01):(e=0,n=100),{min:e,max:n}};const ps=(t,e,n,r,i,o)=>{const a=i-n,s=o-r,c=Math.abs(a*(r-e)-(n-t)*s),h=Math.sqrt(a*a+s*s);return h>0?c/h:0};fs.prototype.clickedFeatures=function(t){const e=t.canvasX,n=t.canvasY;let r=null;for(r of Object.keys(this.clickDetectorCache))if(r=parseInt(r),r>=e)break;if(r){let t=Number.MAX_VALUE,i=[];const o=this.clickDetectorCache[r];for(let r of o){const o=r[0],a=r[2];if(e<o||e>a)return[];const s=r[1],c=r[3];if(n<Math.min(s,c)-10||n>Math.max(s,c)+10)continue;const h=ps(e,n,o,s,a,c);h<t&&(i=[{name:r[4],color:r[5]}],t=h)}if(t<5)return i}return[]},fs.prototype.popupData=function(t,e){e||(e=this.clickedFeatures(t));const n=[];return e.forEach((function(t){for(let e of Object.keys(t))ln(t[e])&&n.push({name:e,value:t[e]})})),n},fs.prototype.contextMenuItemList=function(t){t.viewport.genomicState.referenceFrame,t.genomicLocation;return[]},fs.prototype.getState=function(){let t=this.config;return t.autoscale=this.autoscale,!this.autoscale&&this.dataRange&&(t.min=this.dataRange.min,t.max=this.dataRange.max),t},fs.prototype.supportsWholeGenome=function(){return!1};const ds=hn(wi,(function(t,e){wi.call(this,t,e),t.height||(this.height=300),this.arcOrientation=!1,this.theta=Math.PI/2,t.format,this.featureSource=new ms(t,e.genome)}));function gs(t,e){t.sort((function(t,n){const r=void 0===t.score?-Number.MAX_VALUE:t.score,i=void 0===n.score?-Number.MAX_VALUE:n.score;return(void 0===e?1:e)*(r-i)}))}function ms(t,e){this.config=t,this.genome=e}ds.prototype.getFeatures=function(t,e,n){return this.featureSource.getFeatures(t,e,n)},ds.prototype.draw=function(t){const e=this,n=Math.PI/2,r=t.context,i=t.pixelWidth,o=t.pixelHeight,a=(t.viewportWidth,t.bpPerPixel),s=t.bpStart,c=a,h=e.arcOrientation;vr.fillRect(r,0,t.pixelTop,i,o,{fillStyle:"rgb(255, 255, 255)"});const l=t.features;l&&(gs(l,1),l.forEach((function(t){if(t.startLeft){let i=Math.round((t.startLeft-s)/c),o=Math.round((t.startRight-s)/c),a=Math.round((t.endLeft-s)/c),l=Math.round((t.endRight-s)/c);r.fillStyle=t.color,r.strokeStyle=t.color,r.beginPath();let u=(i+l)/2,f=(l-i)/2,p=e.height,d=Math.PI+(Math.PI/2-n),g=2*Math.PI-(Math.PI/2-n);h?(p=0,r.arc(u,p,f,g,d),r.lineTo(l,p)):(r.arc(u,p,f,d,g),r.lineTo(a,p));const m=(o+a)/2,v=(a-o)/2,y=p;h?(r.arc(m,y,v,d,g,!0),r.lineTo(a,y)):(r.arc(m,y,v,g,d,!0),r.lineTo(i,y)),r.stroke(),r.fill(),t.drawState={x1:u,y1:p,r1:f,x2:m,y2:y,r2:v,sa:d,ea:g}}else{let i=Math.round((t.start-s)/c),o=Math.round((t.end-s)/c);r.strokeStyle=t.color,r.beginPath();let a=(i+o)/2,l=(o-i)/2,u=e.height,f=Math.PI+(Math.PI/2-n),p=2*Math.PI-(Math.PI/2-n);h?(u=0,r.arc(a,u,l,p,f)):r.arc(a,u,l,f,p),r.stroke(),t.drawState={x1:a,y1:u,r1:l,sa:f,ea:p}}})))},ds.prototype.clickedFeatures=function(t){let e=wi.prototype.clickedFeatures.call(this,t);const n=[];gs(e,-1);for(let r of e){const e=r.drawState,i=t.canvasX-e.x1,o=t.canvasY-e.y1,a=Math.sqrt(i*i+o*o),s=e.r1+3;let c,h;if(void 0===e.x2)c=a,h=e.r1-3;else{const n=t.canvasX-e.x2,r=t.canvasY-e.y2;c=Math.sqrt(n*n+r*r),h=e.r2-3}if(a<s&&c>h){n.push(r);break}}return n},ds.prototype.popupData=function(t,e){if(e||(e=this.clickedFeatures(t)),e&&e.length>0)return wi.extractPopupData(e[0],this.getGenomeId())},ds.prototype.menuItemList=function(){var t=this;return[{name:"Toggle arc direction",click:function(){t.arcOrientation=!t.arcOrientation,t.trackView.repaintViews()}}]},ds.prototype.getState=function(){var t=this._super.getState.call(this);return t.arcOrientation=this.arcOrientation,t.thickness=this.thickness,t.color=this.color,t},ms.prototype.getFeatures=function(t,e,n){const r=this,i=this.genome;if(this.featureCache)return Promise.resolve(r.featureCache.queryFeatures(t,e,n));{const o=un(this.config);return zn.loadString(r.config.url,o).then((function(o){return r.featureCache=new Ni(function(t){if(!t)return null;const e=Br(t);let n,r=!0;const i=[],o=[],a=[];for(;n=e.nextLine();){const t=n.split("\t");if(r&&n.startsWith("color:")){const e="rgb("+t[1]+","+t[2]+","+t[3]+")";i.push(e),t.length>4&&o.push(t[4])}else{r=!1;const e=t[0],n=Number.parseInt(t[1])-1,c=Number.parseInt(t[2])-1,h=Number.parseInt(t[3]),l=Number.parseInt(t[4]);var s=Number.parseInt(t[5]);const u=i[s];let f;f=n<=l?{chr:e,startLeft:Math.min(n,c),startRight:Math.max(n,c),endLeft:Math.min(h,l),endRight:Math.max(h,l),color:u,score:s}:{chr:e,startLeft:Math.min(h,l),startRight:Math.max(h,l),endLeft:Math.min(n,c),endRight:Math.max(n,c),color:u,score:s},f.start=f.startLeft,f.end=f.endRight,o.length>s&&(f.description=o[s]),a.push(f)}}return a}(o),i),r.featureCache.queryFeatures(t,e,n)}))}};const vs={sequence:(t,e)=>new Bo(t,e),feature:(t,e)=>new So(t,e),seg:(t,e)=>new Xo(t,e),wig:(t,e)=>new Wo(t,e),merged:(t,e)=>new Yo(t,e),alignment:(t,e)=>new qa(t,e),interaction:(t,e)=>new Qa(t,e),variant:(t,e)=>new ts(t,e),eqtl:(t,e)=>new rs(t,e),gwas:(t,e)=>new ls(t,e),arc:(t,e)=>new ds(t,e),gcnv:(t,e)=>new fs(t,e)};const ys=function(t,e){this.config=t,this.name=t.name,this.roiSource=new io(t,e),this.color=t.color||"rgba(68, 134, 247, 0.25)"};function ws(t,e,n){var r,i;return r=Math.round((t.start-e)/n),(i=Math.round((t.end-e)/n)-r)<3&&(i=3,r-=1),{x:r,width:i}}ys.prototype.getFeatures=function(t,e,n){return this.roiSource.getFeatures(t,e,n)},ys.prototype.draw=function(t){var e,n,r,i;if(i=t.features){e=t.bpStart+(t.pixelWidth*t.bpPerPixel+1);for(var o=0,a=i.length;o<a;o++)if(!((n=i[o]).end<t.bpStart)){if(n.start>e)break;r=ws(n,t.bpStart,t.bpPerPixel),vr.fillRect(t.context,r.x,0,r.width,t.pixelHeight,{fillStyle:this.color})}}};const bs=function(t,e){this.geneColors={},this.gene=null,this.snp=null,this.genesCount=0,t&&(this.gene=t.toUpperCase(),this.geneColors[this.gene]=xs[this.genesCount++]),e&&(this.snp=e.toUpperCase())};bs.prototype.addGene=function(t){this.geneColors[t.toUpperCase()]||(this.geneColors[t.toUpperCase()]=xs[this.genesCount++])},bs.prototype.colorForGene=function(t){return this.geneColors[t.toUpperCase()]};var xs=new Array;xs.push("rgb(228,26,28)"),xs.push("rgb(55,126,184)"),xs.push("rgb(77,175,74)"),xs.push("rgb(166,86,40)"),xs.push("rgb(152,78,163)"),xs.push("rgb(255,127,0)"),xs.push("rgb(247,129,191)"),xs.push("rgb(153,153,153)"),xs.push("rgb(255,255,51)"),xs.push("rgb(102, 194, 165"),xs.push("rgb(252, 141, 98"),xs.push("rgb(141, 160, 203"),xs.push("rgb(231, 138, 195"),xs.push("rgb(166, 216, 84"),xs.push("rgb(255, 217, 47"),xs.push("rgb(229, 196, 148"),xs.push("rgb(179, 179, 179"),xs.push("rgb( 141, 211, 199"),xs.push("rgb(255, 255, 179"),xs.push("rgb(190, 186, 218"),xs.push("rgb(251, 128, 114"),xs.push("rgb(128, 177, 211"),xs.push("rgb(253, 180, 98"),xs.push("rgb(179, 222, 105"),xs.push("rgb(252, 205, 229"),xs.push("rgb(217, 217, 217"),xs.push("rgb(188, 128, 189"),xs.push("rgb(204, 235, 197"),xs.push("rgb(255, 237, 111");const ks=function(t,e){var n,r,i,o=this;n=new DOMParser,r=n.parseFromString(t,"text/xml"),function(){var t,n,i,a,s;!(t=r.getElementsByTagName("Session"))||t.length;n=t.item(0),i=n.getAttribute("genome"),a=n.getAttribute("locus"),s=n.getAttribute("ucscID"),e&&e.hasOwnProperty(i)?o.genome=i:(o.reference={fastaURL:i},s&&(o.reference.id=s));a&&(o.locus=a)}(),i=r.getElementsByTagName("Resource"),o.tracks=[];var a={};function s(t,e){var n,r,i,o,a,s,c,h,l,u;e.name=t.getAttribute("name"),(n=t.getAttribute("color"))&&(e.color="rgb("+n+")"),o=t.getAttribute("altColor"),n&&(e.altColor="rgb("+o+")"),(r=t.getAttribute("height"))&&(e.height=parseInt(r)),(i=t.getAttribute("autoScale"))&&(e.autoScale="true"===i),(u=t.getAttribute("autoscaleGroup"))&&(e.autoscaleGroup=u),(c=t.getAttribute("windowFunction"))&&(e.windowFunction=c),(h=t.getAttribute("visibilityWindow")||t.getAttribute("featureVisibilityWindow"))&&(e.visibilityWindow=h),(l=t.getAttribute("indexed"))&&(e.indexed="true"===l),(s=t.getElementsByTagName("DataRange")).length>0&&(a=s.item(0),i||(e.min=parseInt(a.getAttribute("minimum")),e.max=parseInt(a.getAttribute("maximum"))),e.logScale="LOG"===a.getAttribute("type"))}Array.from(i).forEach((function(t,e){var n={url:t.getAttribute("path"),indexURL:t.getAttribute("index"),order:e};o.tracks.push(n),a[n.url]=n})),(i=r.getElementsByTagName("Track"))&&i.length>0&&(o.tracks=[],Array.from(i).forEach((function(t){var e,n,r,i;(r=t.getElementsByTagName("Track"))&&r.length>0?(s(t,i={type:"merged",tracks:[]}),o.tracks.push(i),Array.from(r).forEach((function(t){var e,n;t.processed=!0,e=t.getAttribute("id"),(n=a[e])&&(i.tracks.push(n),s(t,n),n.autoscale=!1,i.height=n.height)}))):t.processed||(e=t.getAttribute("id"),(n=a[e])&&(o.tracks.push(n),s(t,n)))})))},Ss=function(){this.attributes={},this.plinkLoaded=!1};Ss.prototype.loadPlinkFile=async function(t,e){e||(e={});var n=un(e);const r=await zn.loadString(t,n);var i=Ke(r);for(let t of i){var o=t.split(" ");this.attributes[o[1]]={familyId:o[0],fatherId:o[2],motherId:o[3],sex:o[4],phenotype:o[5]}}return this.plinkLoaded=!0,this},Ss.prototype.getAttributes=function(t){return this.attributes[t]},Ss.prototype.getAttributeNames=function(){return this.hasAttributes()?Object.keys(this.attributes[Object.keys(this.attributes)[0]]):[]},Ss.prototype.hasAttributes=function(){return Object.keys(this.attributes).length>0};const Cs=function(t,e,n){this.browser=n,this.$parent=t,this.buildPanels(t,e)};function _s(t,e,n){var r;const i=this.browser;return(r={}).genomicState=e,r.$ideogram=pe('<div class="igv-ideogram-content"></div>'),t.append(r.$ideogram),function(t,e,n){e<n&&1+e!==n?t.addClass("igv-ideogram-content-border-right"):t.removeClass("igv-ideogram-content-border-right")}(r.$ideogram,i.genomicStateList.indexOf(e),i.genomicStateList.length),r.$ideogram.outerWidth(n),r.$canvas=pe("<canvas>"),r.$ideogram.append(r.$canvas),As(r),r.ideograms={},r.$ideogram.on("click",(function(t){!function(t,e,n){const r=nn(n,e.$ideogram.get(0));let i=e.genomicState.referenceFrame;const o=i.bpPerPixel*e.$ideogram.width(),a=t.genome.getChromosome(i.chrName),s=o/a.bpLength;let c=r.x/e.$ideogram.width();c-s/2<0&&(c=s/2);c+s/2>1&&(c=1-s/2);const h=Math.round((c-s/2)*a.bpLength),l=Math.round((c+s/2)*a.bpLength);i.start=Math.round((c-s/2)*a.bpLength),i.bpPerPixel=(l-h)/e.$ideogram.width(),t.updateLocusSearchWidget(e.genomicState),t.updateViews()}(i,r,t)})),r}function Rs(t){t.forEach((function(e,n){1===t.length||1+n===t.length?e.$ideogram.removeClass("igv-ideogram-content-border-right"):e.$ideogram.addClass("igv-ideogram-content-border-right")}))}function Ts({ctx:t,width:e,height:n,genome:r,referenceFrame:i,ideogramWidth:o}){if(!(e>0&&n>0))return;if(!(r&&i&&r.getChromosome(i.chrName)&&n>0))return;if(vr.fillRect(t,0,0,e,n,{fillStyle:Qe.greyScale(255)}),"all"===i.chrName.toLowerCase())return;!function({ctx:t,referenceFrame:e,genome:n,width:r,height:i,stainColors:o}){var a,s,c,h,l,u,f,p,d,g;if(1,.5,0,void 0===n)return;if(vr.fillRect(t,0,0,r,i,{fillStyle:Qe.greyScale(255)}),a=n.getCytobands(e.chrName)){if(c=0+i/2,h=[],l=[],0===a.length)return;for(u=a[a.length-1].end,f=r/u,t.beginPath(),vr.roundRect(t,.5,.5,r-1,i-1,(i-1)/2,0,1),t.clip(),g=0;g<a.length;g++)s=a[g],p=f*s.start,d=f*s.end,"c"===s.type?("p"===s.name.charAt(0)?(h[0]=p,l[0]=i+0,h[1]=p,l[1]=0,h[2]=d,l[2]=c):(h[0]=d,l[0]=i+0,h[1]=d,l[1]=0,h[2]=p,l[2]=c),t.fillStyle="rgb(150, 0, 0)",t.strokeStyle="rgb(150, 0, 0)",vr.polygon(t,h,l,1,0)):(t.fillStyle=Es(o,s),vr.fillRect(t,p,1,d-p,i-2))}t.strokeStyle=Qe.greyScale(41),vr.roundRect(t,.5,.5,r-1,i-1,(i-1)/2,0,1)}({ctx:t,referenceFrame:i,genome:r,width:e,height:n,stainColors:[]});const a=r.getChromosome(i.chrName),s=Math.round(i.bpPerPixel*o),c=i.start;let h=a.bpLength;const l=r.getCytobands(i.chrName);if(l&&l.length>0&&(h=Math.max(h,l[l.length-1].end)),s<h){const r=s/h,i=c/h;let o=Math.floor(i*e),a=Math.floor(r*e);o=Math.max(0,o),o=Math.min(e-a,o),t.save(),t.strokeStyle="red",t.lineWidth=a<2?1:2;const l=o+t.lineWidth/2;a=a<2?1:a-t.lineWidth;const u=t.lineWidth/2,f=n-t.lineWidth;t.strokeRect(l,u,a,f),t.restore()}}function Es(t,e){if("c"===e.type)return"rgb(150, 10, 10)";var n=e.stain,r=230;"p"===e.type&&(r=Math.floor(230-n/100*230));var i=t[r];return i||(i="rgb("+r+","+r+","+r+")",t[r]=i),i}function As(t){var e=t.$canvas.get(0),n=+t.$ideogram.width(),r=+t.$ideogram.height();e.style.width=n+"px",e.style.height=r+"px",e.width=window.devicePixelRatio*n,e.height=window.devicePixelRatio*r,t.ctx=e.getContext("2d"),t.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}Cs.prototype.renderSVGContext=function(t,e){let n=this;this.panels.forEach((r,i)=>{const o=r.$ideogram.get(0).getBoundingClientRect(),a=e.deltaX+i*(r.$canvas.width()+t.multiLocusGap),s=e.deltaY;t.addTrackGroupWithTranslationAndClipRect("ideogram",a,s,o.width,o.height,0),t.save(),Ts({ctx:t,width:r.$canvas.width(),height:r.$canvas.height(),genome:n.browser.genome,referenceFrame:r.genomicState.referenceFrame,ideogramWidth:r.$ideogram.width()}),t.restore()})},Cs.prototype.buildPanels=function(t,e){var n=this;t.append(pe('<div class="igv-ideogram-shim"></div>')),this.panels=this.browser.genomicStateList.map((function(r){return _s.call(n,t,r,e)}))},Cs.prototype.setWidth=function(t,e){this.panels.forEach((function(e){e.$ideogram.outerWidth(t),As(e),e.ideograms={}})),!0===e&&this.repaint()},Cs.prototype.resize=function(){this.setWidth(this.browser.viewportContainerWidth()/this.browser.genomicStateList.length,!0)},Cs.prototype.repaint=function(){let t=this;this.panels.forEach(e=>{Ts({ctx:e.ctx,width:e.$canvas.width(),height:e.$canvas.height(),genome:t.browser.genome,referenceFrame:e.genomicState.referenceFrame,ideogramWidth:e.$ideogram.width()})})},Cs.prototype.discardPanels=function(){this.panels.forEach((function(t){t.$ideogram.remove()})),this.panels=void 0},Cs.prototype.addPanelWithGenomicStateAtIndex=function(t,e,n){var r;r=_s.call(this,this.$parent,t,n),e===this.panels.length?this.panels.push(r):(this.panels.splice(e,0,r),r.$ideogram.detach().insertAfter(this.panels[e-1].$ideogram)),Rs(this.panels)},Cs.prototype.removePanelWithLocusIndex=function(t){this.panels[t].$ideogram.remove(),this.panels.splice(t,1),Rs(this.panels)},Cs.prototype.repaintPanelWithGenomicState=function(t){let e=this.panels[this.browser.genomicStateList.indexOf(t)];Ts({ctx:e.ctx,width:e.$canvas.width(),height:e.$canvas.height(),genome:this.browser.genome,referenceFrame:e.genomicState.referenceFrame,ideogramWidth:e.$ideogram.width()})};const Ls=function(t,e,n,r,i){this.genome=t,this.chrName=e,this.start=n,this.initialEnd=r,this.bpPerPixel=i};Ls.prototype.calculateEnd=function(t){return this.start+this.bpPerPixel*t},Ls.prototype.calculateBPP=function(t,e){return(t-this.start)/e},Ls.prototype.set=function(t){this.chrName=t.chrName,this.start=t.start,this.bpPerPixel=t.bpPerPixel},Ls.prototype.toPixels=function(t){return t/this.bpPerPixel},Ls.prototype.toBP=function(t){return this.bpPerPixel*t},Ls.prototype.shiftPixels=function(t,e){const n=this.start;return this.start+=t*this.bpPerPixel,this.clamp(e),n!==this.start},Ls.prototype.clamp=function(t){const e=this.genome.getChromosome(this.chrName).bpStart||0;if(this.start=Math.max(e,this.start),t){var n=this.genome.getChromosome(this.chrName).bpLength-t*this.bpPerPixel;this.start>n&&(this.start=n)}},Ls.prototype.getChromosome=function(){return this.genome.getChromosome(this.chrName)},Ls.prototype.showLocus=function(t){if("all"===this.chrName.toLowerCase())return this.chrName.toLowerCase();{const e=Ze(Math.floor(this.start)+1),n=Ze(Math.round(this.start+this.bpPerPixel*t));return this.chrName+":"+e+"-"+n}},Ls.prototype.description=function(){return"ReferenceFrame "+this.chrName+" "+Ze(Math.floor(this.start))+" bpp "+this.bpPerPixel};const Is=function(t,e){this.guid=rn(),this.namespace=".browser_"+this.guid,this.config=t,this.parent=e,this.$root=pe('<div class="igv-root-div">'),pe(e).append(this.$root),this.$content=pe('<div class="igv-content-div">'),this.$root.append(this.$content),this.$contentHeader=pe("<div>",{class:"igv-content-header"}),this.$content.append(this.$contentHeader);const n=pe('<div class="igv-track-container-div">');this.$content.append(n),this.trackContainerDiv=n.get(0),Ms.call(this,t),this.trackViews=[],this.trackLabelsVisible=!0,this.isCenterGuideVisible=!1,this.cursorGuideVisible=!1,this.featureDB={},this.constants={dragThreshold:3,scrollThreshold:5,defaultColor:"rgb(0,0,150)",doubleClickDelay:t.doubleClickDelay||500},this.eventHandlers={},this.$spinner=pe('<div class="igv-track-container-spinner">'),n.append(this.$spinner),this.$spinner.append(Me("spinner")),this.stopSpinner(),Fs.call(this)};function Ms(t){t.gtex&&(xo.gtexLoaded=!0),this.flanking=t.flanking,this.crossDomainProxy=t.crossDomainProxy,this.formats=t.formats,this.trackDefaults=t.trackDefaults,t.search?this.searchConfig={type:"json",url:t.search.url,coords:void 0===t.search.coords?1:t.search.coords,chromosomeField:t.search.chromosomeField||"chromosome",startField:t.search.startField||"start",endField:t.search.endField||"end",geneField:t.search.geneField||"gene",snpField:t.search.snpField||"snp",resultsField:t.search.resultsField}:(t.reference&&t.reference.id?t.reference.id:t.genome?t.genome:"hg19",this.searchConfig={type:"plain",url:"https://igv.org/genomes/locus.php?genome=$GENOME$&name=$FEATURE$",coords:0,chromosomeField:"chromosome",startField:"start",endField:"end",geneField:"gene",snpField:"snp"})}function Ds(t,e){for(let n of t)for(let t of n.viewports)t.$trackLabel&&(0===n.viewports.indexOf(t)&&!0===e?t.$trackLabel.show():t.$trackLabel.hide())}function Bs(t){We(t)&&(t=JSON.parse(t));const e=t.url;t.features;return void 0===e||We(e)||e instanceof File}function Fs(){var t=this;function e(e){var n,r,i,o;if(e.preventDefault(),!t.loadInProgress()&&(n=en(e),t.vpMouseDown)){const e=Math.abs(n.x-t.vpMouseDown.mouseDownX)>Math.abs(n.y-t.vpMouseDown.mouseDownY);if(i=(r=t.vpMouseDown.viewport).$viewport.width(),o=r.genomicState.referenceFrame,!t.dragObject&&!t.isScrolling)if(e)t.vpMouseDown.mouseDownX&&Math.abs(n.x-t.vpMouseDown.mouseDownX)>t.constants.dragThreshold&&(t.dragObject={viewport:r,start:o.start});else if(t.vpMouseDown.mouseDownY&&Math.abs(n.y-t.vpMouseDown.mouseDownY)>t.constants.scrollThreshold){t.isScrolling=!0;const e=r.trackView,n=e.$viewportContainer.height(),i=e.maxContentHeight();t.vpMouseDown.r=n/i}if(t.dragObject){o.shiftPixels(t.vpMouseDown.lastMouseX-n.x,i)&&(t.updateLocusSearchWidget(t.vpMouseDown.genomicState),t.updateViews()),t.fireEvent("trackdrag")}if(t.isScrolling){const e=t.vpMouseDown.r*(t.vpMouseDown.lastMouseY-n.y);t.vpMouseDown.viewport.trackView.scrollBy(e)}t.vpMouseDown.lastMouseX=n.x,t.vpMouseDown.lastMouseY=n.y}}function n(e){t.cancelTrackPan(),t.endTrackDrag()}pe(window).on("resize"+this.namespace,(function(){t.resize()})),pe(this.root).on("mouseup",n),pe(this.root).on("mouseleave",n),pe(this.trackContainerDiv).on("mousemove",e),pe(this.trackContainerDiv).on("touchmove",e),pe(this.trackContainerDiv).on("mouseleave",n),pe(this.trackContainerDiv).on("mouseup",n),pe(this.trackContainerDiv).on("touchend",n)}Is.prototype.startSpinner=function(){const t=this.$spinner;t&&(t.addClass("igv-fa5-spin"),t.show())},Is.prototype.stopSpinner=function(){const t=this.$spinner;t&&(t.hide(),t.removeClass("igv-fa5-spin"))},Is.prototype.isMultiLocusMode=function(){return this.genomicStateList&&this.genomicStateList.length>1},Is.prototype.isMultiLocusWholeGenomeView=function(){if(void 0===this.genomicStateList||1===this.genomicStateList.length)return!1;for(let t of this.genomicStateList){if("all"===t.referenceFrame.chrName.toLowerCase())return!0}return!1},Is.prototype.toSVG=function(){const t=this.trackContainerDiv.getBoundingClientRect(),e=this.trackViews[0].$viewportContainer.get(0).getBoundingClientRect(),n=this.ideoPanel?this.ideoPanel.panels[0].$ideogram.get(0).getBoundingClientRect():{height:0,width:0},r=t.width+8*(this.genomicStateList.length-1),i=t.height+n.height;let o=new Se({width:r,height:8e3,backdropColor:"white",multiLocusGap:8,viewbox:{x:0,y:0,width:r,height:8e3}});const a=e.x-t.x;this.ideoPanel&&this.ideoPanel.renderSVGContext(o,{deltaX:a,deltaY:0});for(let e of this.trackViews)e.renderSVGContext(o,{deltaX:a,deltaY:n.height-t.y});return o.setHeight(i),o.getSerializedSvg(!0)},Is.prototype.renderSVG=function(t){let e=this.toSVG();if(t.$container){const n=this.trackContainerDiv.getBoundingClientRect();t.$container.empty(),t.$container.width(n.width),t.$container.append(e)}fn(t.filename||"igv.svg",URL.createObjectURL(new Blob([e],{type:"application/octet-stream"})))},Is.prototype.loadSession=async function(t){let e;return e=t.url||t.file?await async function(t){const e=t.url||t.file;if(t.url&&(t.url.startsWith("blob:")||t.url.startsWith("data:"))){var n=Is.uncompressSession(t.url);return JSON.parse(n)}{let n=t.filename;if(n||(n=t.url?An(t.url):t.file.name),n.endsWith(".xml")){const t=await Kn.getKnownGenomes(),n=await zn.loadString(e);return new ks(n,t)}return n.endsWith(".json")?zn.loadJson(e):void 0}}(t):t,this.loadSessionObject(e)},Is.prototype.loadSessionObject=async function(t){this.removeAllTracks(!0);const e=await this.loadGenome(t.reference||t.genome,t.locus);if(t.gtexSelections){const e={};for(let t of this.genomicStateList)e[t.locusSearchString]=t;for(let n of Object.getOwnPropertyNames(t.gtexSelections)){const r=e[n];if(r){const e=t.gtexSelections[n].gene,i=t.gtexSelections[n].snp;r.selection=new bs(e,i)}}}if(t.roi){this.roi=[];for(let n of t.roi)this.roi.push(new ys(n,e))}var n;t.tracks||(t.tracks=[]),0===t.tracks.filter(t=>"sequence"===t.type).length&&t.tracks.push({type:"sequence",order:-Number.MAX_VALUE}),await this.loadTrackList(t.tracks),!1===t.showIdeogram||this.ideoPanel||(n=this.viewportContainerWidth()/this.genomicStateList.length,this.ideoPanel=new Cs(this.$contentHeader,n,this),this.ideoPanel.repaint()),this.updateLocusSearchWidget(this.genomicStateList[0]),this.windowSizePanel.updateWithGenomicState(this.genomicStateList[0]),this.resize()},Is.prototype.loadGenome=async function(t,e){if(We(t)&&t.startsWith("{"))try{t=JSON.parse(t)}catch(t){}const n=await async function(t){var e;We(t)?e=t:t.genome?e=t.genome:void 0!==t.id&&void 0===t.fastaURL&&(e=t.id);if(e){var n=(await Kn.getKnownGenomes())[e];return n||this.presentAlert("Uknown genome id: "+e,void 0),n}return t}.call(this,t),r=await Kn.loadGenome(n),i=this.genome&&this.genome.id!==r.id;let o;this.genome=r,this.$current_genome.text(r.id||""),this.$current_genome.attr("title",r.id||""),this.chromosomeSelectWidget.update(r),i&&this.removeAllTracks(),this.genome=r;try{o=await this.search(function(t,e){var n=[];n=t?Array.isArray(t)?t.join(" "):t:e.getHomeChromosomeName();return n}(e,r),!0)}catch(t){console.error(t),o=await this.search(this.genome.getHomeChromosomeName())}if(this.genomicStateList=o,this.genomicStateList.length>0)this.rulerTrack||!1===this.config.showRuler||(this.rulerTrack=new wr(this),this.addTrack(this.rulerTrack));else{const t="Unrecognized locus "+this.config.locus;this.presentAlert(t,void 0)}return n.tracks&&await this.loadTrackList(n.tracks),this.resize(),this.genome},Is.prototype.updateUIWithGenomicStateListChange=function(t){const e=this.isMultiLocusWholeGenomeView()||Kn.isWholeGenomeView(t[0].referenceFrame);e||this.isMultiLocusMode()?this.centerGuide.forcedHide():this.centerGuide.forcedShow(),this.navbarManager.navbarDidResize(this.$navigation.width(),e),Ds(this.trackViews,this.trackLabelsVisible)},Is.prototype.setTrackLabelName=function(t,e){t.viewports.forEach(t=>{t.setTrackLabel(e)})},Is.prototype.hideTrackLabels=function(){this.trackLabelsVisible=!1,Ds(this.trackViews,this.trackLabelsVisible)},Is.prototype.showTrackLabels=function(){this.trackLabelsVisible=!0,Ds(this.trackViews,this.trackLabelsVisible)},Is.prototype.hideCursorGuide=function(){this.cursorGuide.$guide.hide(),this.cursorGuideVisible=!1},Is.prototype.showCursorGuide=function(){this.cursorGuide.$guide.show(),this.cursorGuideVisible=!0},Is.prototype.setCustomCursorGuideMouseHandler=function(t){this.cursorGuide.customMouseHandler=t},Is.prototype.hideCenterGuide=function(){this.centerGuide.$container.hide(),this.isCenterGuideVisible=!1},Is.prototype.showCenterGuide=function(){this.centerGuide.$container.show(),this.centerGuide.resize(),this.isCenterGuideVisible=!0},Is.prototype.loadTrackList=async function(t){const e=this,n=t.filter((function(t){return!Bs(t)}));if(n.length>0){let t="The following tracks could not be loaded.  Are these local files?";n.forEach((function(e){t+=", "+e.name})),e.presentAlert(t)}try{this.startSpinner();const n=[];t.filter(Bs).forEach((function(t){t.noSpinner=!0,n.push(e.loadTrack(t))}));const r=await Promise.all(n),i=e.trackViews.filter((function(t){return t.track.autoscaleGroup}));return i.length>0&&e.updateViews(e.genomicStateList[0],i),r}finally{this.stopSpinner()}},Is.prototype.loadROI=async function(t){if(this.roi||(this.roi=[]),Array.isArray(t))for(let e of t)this.roi.push(new ys(e,this.genome));else this.roi.push(new ys(t,this.genome));await this.updateViews(void 0,void 0,!0)},Is.prototype.removeROI=function(t){for(let e=0;e<this.roi.length;e++)if(this.roi[e].name===t.name){this.roi.splice(e,1);break}for(let t of this.trackViews)t.updateViews(!0)},Is.prototype.loadTrack=async function(t){if(We(t)&&(t=JSON.parse(t)),We(t.url)&&(t.url=t.url.trim()),t.indexURL&&We(t.indexURL)&&(t.indexURL=t.indexURL.trim()),Bs(t)){if(We(t.url)&&t.url.startsWith("https://drive.google.com")){const e=await bn.getDriveFileInfo(t.url);t.url="https://www.googleapis.com/drive/v3/files/"+e.id+"?alt=media",t.filename||(t.filename=e.originalFileName||e.name),t.format||(t.format=$r(t.filename)),t.indexURL&&t.indexURL.startsWith("https://drive.google.com")&&(t.indexURL=bn.driveDownloadURL(t.indexURL))}else t.url&&!t.filename&&(t.filename=An(t.url));if(zr(t),this.trackDefaults&&t.type){const e=this.trackDefaults[t.type];if(e)for(let n in e)e.hasOwnProperty(n)&&void 0===t[n]&&(t[n]=e[n])}try{t.noSpinner||this.startSpinner();const e=this.createTrack(t);return void 0===e?(this.presentAlert("Unknown file type: "+t.url,void 0),e):(void 0===e.order&&(e.order=this.trackViews.length),"function"==typeof e.postInit&&await e.postInit(),t.sync?await this.addTrack(e):this.addTrack(e),e)}catch(e){const n={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};console.error(e);let r=e.message||e.toString();n.hasOwnProperty(r)&&(r=n[r]+": "+t.url),this.presentAlert(r,void 0)}finally{t.noSpinner||this.stopSpinner()}}else this.presentAlert("The following track could not be loaded.  Is this a local file? "+t.name)},Is.prototype.createTrack=function(t){t.format&&(t.format=t.format.toLowerCase());let e=void 0===t.type?"unknown_type":t.type.toLowerCase();"data"===e&&(e="wig");let n,r=Object.assign({},t);switch(r.browser=this,e){case"annotation":case"genes":case"fusionjuncspan":case"junctions":case"splicejunctions":case"snp":n=vs.feature(r,this);break;default:n=vs.hasOwnProperty(e)?vs[e](r,this):void 0}if(t.roi&&n){n.roi=[];for(let e of t.roi)n.roi.push(new ys(e,this.genome))}return n},Is.prototype.addTrack=async function(t){var e;if(e=new Rr(this,pe(this.trackContainerDiv),t),this.trackViews.push(e),Ds(this.trackViews,this.trackLabelsVisible),this.reorderTracks(),!t.autoscaleGroup)return e.updateViews()},Is.prototype.reorderTracks=function(){var t=this;this.trackViews.sort((function(t,e){return(t.track.order||0)-(e.track.order||0)})),pe(this.trackContainerDiv).children("igv-track-div").detach(),this.trackViews.forEach((function(e){t.trackContainerDiv.appendChild(e.trackDiv)}))},Is.prototype.removeTrackByName=function(t){const e=this.trackViews.slice();for(let n of e)t===n.track.name&&this.removeTrack(n.track)},Is.prototype.removeTrack=function(t){for(var e,n=0;n<this.trackViews.length;n++)if(t===this.trackViews[n].track){e=this.trackViews[n];break}e&&(this.trackViews.splice(n,1),pe(e.trackDiv).remove(),this.fireEvent("trackremoved",[e.track]),e.dispose())},Is.prototype.removeAllTracks=function(t){var e=[];for(let n of this.trackViews)!t&&"sequence"===n.track.id||"ruler"===n.track.id?e.push(n):(this.trackContainerDiv.removeChild(n.trackDiv),this.fireEvent("trackremoved",[n.track]),n.dispose());this.trackViews=e},Is.prototype.findTracks=function(t,e){var n=[];return this.trackViews.forEach((function(r){e===r.track[t]&&n.push(r.track)})),n},Is.prototype.setTrackHeight=function(t){this.trackHeight=t,this.trackViews.forEach((function(e){e.setTrackHeight(t)}))},Is.prototype.visibilityChange=function(){this.resize()},Is.prototype.resize=async function(){const t=this,e=this.viewportWidth();if(0!==e){if(this.genomicStateList&&e>0){const t=this.isMultiLocusWholeGenomeView()||Kn.isWholeGenomeView(this.genomicStateList[0].referenceFrame);t||this.isMultiLocusMode()?this.centerGuide.forcedHide():this.centerGuide.forcedShow(),this.navbarManager.navbarDidResize(this.$navigation.width(),t),this.genomicStateList.forEach((function(t){const n=t.referenceFrame;isFinite(n.bpPerPixel)||void 0===n.initialEnd||(n.bpPerPixel=(n.initialEnd-n.start)/e)}))}this.genomicStateList&&1===this.genomicStateList.length&&function(e){const n=t.viewportContainerWidth(),r=e.referenceFrame.bpPerPixel;return n*r>e.chromosome.bpLength}(this.genomicStateList[0])?this.search(this.genomicStateList[0].chromosome.name):(this.ideoPanel&&this.ideoPanel.resize(),this.centerGuide&&this.centerGuide.resize(),this.trackViews.forEach((function(t){t.resize()}))),this.genomicStateList&&this.genomicStateList.length>0&&(this.updateLocusSearchWidget(this.genomicStateList[0]),this.windowSizePanel.updateWithGenomicState(this.genomicStateList[0])),await this.updateViews()}},Is.prototype.updateViews=async function(t,e,n){var r,i;if(e||(e=this.trackViews),!t&&this.genomicStateList&&1==this.genomicStateList.length&&(t=this.genomicStateList[0]),t&&(this.updateLocusSearchWidget(t),this.windowSizePanel.updateWithGenomicState(t)),this.ideoPanel&&this.ideoPanel.repaint(),this.centerGuide&&this.centerGuide.repaint(),this.dragObject)for(let t of e)await t.updateViews();else{r={},i=[],e.forEach((function(t){var e=t.track.autoscaleGroup;if(e){var n=r[e];n||(n=[],r[e]=n),n.push(t)}else i.push(t)}));const t=Object.keys(r);for(let e of t){var o,a;o=r[e],a=[],o.forEach((function(t){a.push(t.getInViewFeatures())}));const t=await Promise.all(a);var s,c=[];for(let e of t)c=c.concat(e);s=pn(c);for(let t of o)t.track.dataRange=s,t.track.autoscale=!1,await t.updateViews()}for(let t of i)await t.updateViews(n)}},Is.prototype.loadInProgress=function(){var t;for(t=0;t<this.trackViews.length;t++)if(this.trackViews[t].isLoading())return!0;return!1},Is.prototype.updateLocusSearchWidget=function(t){var e,n,r,i,o,a;this.rulerTrack&&this.rulerTrack.updateLocusLabel(),0===this.genomicStateList.indexOf(t)&&1===this.genomicStateList.length?t.locusSearchString&&"all"===t.locusSearchString.toLowerCase()?(this.$searchInput.val(t.locusSearchString),this.chromosomeSelectWidget.$select.val("all")):(e=t.referenceFrame,this.chromosomeSelectWidget.$select.val(e.chrName),this.$searchInput&&(o=e.start+e.bpPerPixel*(this.viewportContainerWidth()/this.genomicStateList.length),this.genome&&(a=this.genome.getChromosome(e.chrName))&&(o=Math.min(o,a.bpLength)),n=Ze(Math.floor(e.start+1)),r=Ze(Math.floor(o)),i=e.chrName+":"+n+"-"+r,this.$searchInput.val(i)),this.fireEvent("locuschange",[{chr:e.chrName,start:n,end:r,label:i}])):(this.$searchInput.val(""),this.chromosomeSelectWidget.$select.val(""))},Is.prototype.viewportContainerWidth=function(){return this.trackViews&&this.trackViews.length>0?this.trackViews[0].$viewportContainer.width():function(){var t,e,n;return t=pe('<div class="igv-track-div">'),pe(this.trackContainerDiv).append(t),e=pe('<div class="igv-viewport-container">'),t.append(e),n=e.width(),t.remove(),n}.call(this)},Is.prototype.viewportWidth=function(){var t;return t=this.viewportContainerWidth(),void 0===this.genomicStateList||1===this.genomicStateList.length?t:Math.round(t/this.genomicStateList.length)},Is.prototype.minimumBases=function(){return this.config.minimumBases},Is.prototype.updateZoomSlider=function(t){const e=this.trackViews[0].viewports[0],n=e.genomicState.referenceFrame,r=e.$viewport.width()*n.bpPerPixel,i=n.getChromosome().bpLength,o=(i-r)/(i-this.minimumBases()),a=Math.round(100*o);t.val(a)},Is.prototype.zoom=function(t){this.zoomWithScaleFactor(t)},Is.prototype.zoomIn=function(){this.zoomWithScaleFactor(.5)},Is.prototype.zoomOut=function(){this.zoomWithScaleFactor(2)},Is.prototype.zoomWithRangePercentage=function(t){if(this.loadInProgress())return;let e=this;this.trackViews[0].viewports.forEach(n=>{const r=n.genomicState.referenceFrame,i=r.start+r.toBP(n.$viewport.width()/2),o=r.getChromosome(),a=(s=(o.bpLength-o.bpStart)/n.$viewport.width(),c=this.minimumBases()/n.$viewport.width(),(1-(h=t))*s+h*c);var s,c,h;const l=a*n.$viewport.width();r.start=i-l/2,r.bpPerPixel=a,e.updateViews(n.genomicState)})},Is.prototype.zoomWithScaleFactor=function(t,e,n){let r=n?[n]:this.trackViews[0].viewports;for(let n of r){const r=n.genomicState.referenceFrame,i=r.getChromosome(),o=r.start,a=r.bpPerPixel,s=i.bpLength-i.bpStart,c=t<1?this.minimumBases()/n.$viewport.width():s/n.$viewport.width(),h=void 0===e?r.start+r.toBP(n.$viewport.width()/2):e;let l;l=t<1?Math.max(r.bpPerPixel*t,c):Math.min(r.bpPerPixel*t,c);const u=l*n.$viewport.width();r.start=h-u/2,r.bpPerPixel=l,r.clamp(n.$viewport.width()),(o!==r.start||a!==r.bpPerPixel)&&this.updateViews(n.genomicState)}},Is.prototype.presentSplitScreenMultiLocusPanel=function(t,e){const n=this.genome;var r,i,o,a;i=this.viewportContainerWidth()/(1+this.genomicStateList.length),r=(o=e).referenceFrame;const s=n.getChromosomeName(t.chr);o.referenceFrame=h(s,r.bpPerPixel,i,t.start,t.lengthOnRef);const c=n.getChromosomeName(t.mate.chr);function h(t,e,r,i,o){var a;return new Ls(n,t,a=(i+(i+o))/2-e*(r/2),a+e*r,e)}(a={}).chromosome=o.chromosome,a.referenceFrame=h(c,r.bpPerPixel,i,t.mate.position,t.lengthOnRef),this.addMultiLocusPanelWithGenomicStateAtIndex(a,1+this.genomicStateList.indexOf(o),i)},Is.prototype.selectMultiLocusPanelWithGenomicState=function(t){var e=this;this.genomicStateList.filter((function(e){return t!==e})).forEach((function(t){e.removeMultiLocusPanelWithGenomicState(t,!1)})),this.resize()},Is.prototype.removeMultiLocusPanelWithGenomicState=function(t,e){const n=this.genome;var r,i,o,a=this;r=this.genomicStateList.indexOf(t),this.ideoPanel&&this.ideoPanel.removePanelWithLocusIndex(r),this.trackViews.forEach((function(t){t.removeViewportWithLocusIndex(r)})),i=this.viewportContainerWidth(),o=this.genomicStateList.length,this.genomicStateList.splice(r,1),this.genomicStateList.forEach((function(t,e){const r=t.referenceFrame.calculateEnd(i/o),s=t.referenceFrame.calculateBPP(r,i/a.genomicStateList.length);a.genomicStateList[e].referenceFrame=new Ls(n,t.chromosome.name,t.referenceFrame.start,r,s)})),this.updateUIWithGenomicStateListChange(this.genomicStateList),!0===e&&this.resize()},Is.prototype.addMultiLocusPanelWithGenomicStateAtIndex=function(t,e,n){e===this.genomicStateList.length?(this.genomicStateList.push(t),this.ideoPanel&&this.ideoPanel.addPanelWithGenomicStateAtIndex(t,e,n),this.trackViews.forEach((function(e){var r;r=new Qn(e,e.$viewportContainer,t,n),e.viewports.push(r),e.decorateViewports(),e.configureViewportContainer(e.$viewportContainer,e.viewports)}))):(this.genomicStateList.splice(e,0,t),this.ideoPanel&&this.ideoPanel.addPanelWithGenomicStateAtIndex(t,e,n),this.trackViews.forEach((function(r){var i;i=new Qn(r,r.$viewportContainer,t,n),r.viewports.splice(e,0,i),i.$viewport.detach().insertAfter(r.viewports[e-1].$viewport),r.decorateViewports(),r.configureViewportContainer(r.$viewportContainer,r.viewports)}))),this.rulerTrack&&this.rulerTrack.updateLocusLabel(),this.updateUIWithGenomicStateListChange(this.genomicStateList),this.resize()},Is.prototype.emptyViewportContainers=function(){for(let t of this.trackViews){t.$outerScroll&&t.$outerScroll.remove();for(let e of t.viewports)e.rulerSweeper&&e.rulerSweeper.$rulerSweeper.remove(),e.popover&&(e.popover.$popover.off(),e.popover.$popover.empty(),e.popover.$popover.remove()),e.$viewport.remove();delete t.viewports,t.viewports=[],delete t.scrollbar}this.$contentHeader.empty()},Is.prototype.buildViewportsWithGenomicStateList=function(t){var e;e=this.viewportContainerWidth()/this.genomicStateList.length,this.trackViews.forEach((function(n){t.forEach((function(t){var r;r=new Qn(n,n.$viewportContainer,t,e),n.viewports.push(r)})),n.decorateViewports(),n.configureViewportContainer(n.$viewportContainer,n.viewports)}))},Is.prototype.getViewportWithGUID=function(t){let e=void 0;for(let n of this.trackViews)for(let r of n.viewports)t===r.guid&&(e=r);return e},Is.prototype.goto=function(t,e,n){return this.search(t+":"+e+"-"+n)},Is.prototype.search=async function(t,e){const n=this,r=this.genome;t&&"all"===t.trim().toLowerCase()&&(t="all");const i=t.split(" ");let o=await a(i);if(o&&0!==o.length||(o=await a([t])),!(o.length>0))throw new Error("Unrecognized locus "+t);this.emptyViewportContainers(),this.genomicStateList=o,this.buildViewportsWithGenomicStateList(o);for(let t of o)t.id=rn();if(this.ideoPanel){this.ideoPanel.discardPanels();const t=n.viewportContainerWidth()/o.length;this.ideoPanel.buildPanels(this.$contentHeader,t)}return this.updateUIWithGenomicStateListChange(o),e||this.updateViews(),o;async function a(t){let e=n.searchConfig,i=[];for(let e of t){let t=c(e,n.genome);if(t)t.locusSearchString=e,i.push(t);else{const r=n.featureDB[e.toUpperCase()];if(r){const o=n.genome.getChromosome(r.chr);o&&(t={chromosome:o,start:r.start,end:r.end,locusSearchString:e},dn(t.chromosome.bpLength,t,n.minimumBases()),i.push(t))}else{let t=await a(e);const n=s(t.result,t.locusSearchString);n&&i.push(n)}}o(i)}return i;function o(t){const e=n.viewportContainerWidth()/t.length;return t.forEach((function(t){t.referenceFrame=new Ls(r,t.chromosome.name,t.start,t.end,(t.end-t.start)/e)})),t}async function a(t){let r=e.url.replace("$FEATURE$",t.toUpperCase());return r.indexOf("$GENOME$")>-1&&(r=r.replace("$GENOME$",n.genome.id?n.genome.id:"hg19")),{result:await zn.loadString(r),locusSearchString:t}}function s(t,r){let i;if(i="plain"===e.type?function(t){const e=[],r=[];return Ke(t).forEach((function(t){""===t||e.push(t)})),e.forEach((function(t){var e,i,o,a,s=t.split("\t");s.length>=3&&(o=(i=s[1].split(":"))[1].split("-"),e=s[2].trim(),a={gene:s[0],chromosome:n.genome.getChromosomeName(i[0].trim()),start:parseInt(o[0].replace(/,/g,"")),end:parseInt(o[1].replace(/,/g,"")),type:"gtex"===e?"snp":"gene"},r.push(a))})),r}(t):JSON.parse(t),e.resultsField&&(i=i[e.resultsField]),i&&0!==i.length){const t=i[0];if(!t.hasOwnProperty(e.chromosomeField)||!t.hasOwnProperty(e.startField))return;const o=t[e.chromosomeField];let a=t[e.startField]-e.coords,s=t[e.endField];void 0===s&&(s=a+1),n.flanking&&(a=Math.max(0,a-n.flanking),s+=n.flanking);const c=Object.assign({},t);return c.chromosome=n.genome.getChromosome(o),c.start=a,c.end=s,c.locusSearchString=r,c.selection=new bs(t[e.geneField],t[e.snpField]),c}return}function c(t,e){var r,i,o,a,s,c;if(c={},a=(r=t.split(":"))[0],s=e.getChromosome(a)){if(c.chromosome=s,c.start=0,c.end=s.bpLength,1===r.length)return c;if(!((i=r[1].split("-")).length>2||(c.start=c.end=void 0,o=i[0].replace(/,/g,""),isNaN(o)||(c.start=parseInt(o,10)-1,isNaN(c.start))))){if(2===i.length){if(o=i[1].replace(/,/g,""),isNaN(o))return!1;c.end=parseInt(o,10)}return dn(c.chromosome.bpLength,c,n.minimumBases()),c}}}}},Is.prototype.loadSampleInformation=async function(t){var e=t;t instanceof File&&(e=t.name),"fam"===e.substr(e.lastIndexOf(".")+1)&&(this.sampleInformation=await function(t,e){return(new Ss).loadPlinkFile(t,e)}(t))},Is.prototype.on=function(t,e){this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)},Is.prototype.un=function(t,e){if(this.eventHandlers[t]){var n=this.eventHandlers[t].indexOf(e);-1!==n&&this.eventHandlers[t].splice(n,1)}},Is.prototype.off=function(t,e){if(t)if(e){const n=this.eventHandlers[t].indexOf(e);-1!==n&&this.eventHandlers[t].splice(n,1)}else this.eventHandlers[t]=[];else this.eventHandlers={}},Is.prototype.fireEvent=function(t,e,n){var r,i=this.eventHandlers[t];if(void 0!==i&&0!==i.length)return r=n||window,i.map((function(t){return t.apply(r,e)}))[0]},Is.prototype.dispose=function(){pe(window).off(this.namespace),pe(document).off(this.namespace),this.eventHandlers=void 0,this.trackViews.forEach((function(t){t.dispose()}))},Is.prototype.toJSON=function(){var t,e;t={reference:this.genome.toJSON()};const n=[],r={};return this.trackViews[0].viewports.forEach((function(t){const e=t.genomicState,i=t.$viewport[0].clientWidth,o=e.referenceFrame.showLocus(i);if(n.push(o),e.selection){const t={gene:e.selection.gene,snp:e.selection.snp};r[o]=t}})),t.locus=n,Object.getOwnPropertyNames(r).length>0&&(t.gtexSelections=r),e=[],this.trackViews.forEach((function(t){var n,r;(r="function"==typeof(n=t.track).getState?n.getState():n.config)&&(r.browser&&delete r.browser,r.order=n.order,e.push(r))})),t.tracks=e,t},Is.prototype.compressedSession=function(){return function(t){const e=[];for(var n=0;n<t.length;n++)e.push(t.charCodeAt(n));const r=new qe.RawDeflate(e).compress(),i=String.fromCharCode.apply(null,r);return btoa(i).replace(/\+/g,".").replace(/\//g,"_").replace(/=/g,"-")}(JSON.stringify(this.toJSON()))},Is.uncompressSession=function(t){let e;if(t.indexOf("/gzip;base64")>0){e=In(t);let n="";for(let t of e)n+=String.fromCharCode(t);return n}return function(t){t=t.replace(/\./g,"+").replace(/_/g,"/").replace(/-/g,"=");const e=atob(t),n=[];for(let t=0;t<e.length;t++)n.push(e.charCodeAt(t));const r=new qe.RawInflate(n).decompress();let i="";for(let t of r)i+=String.fromCharCode(t);return i}(t.substring(5))},Is.prototype.sessionURL=function(){var t,e;return((e=(t=window.location.href.slice()).indexOf("?"))>0?t.substring(0,e):t)+"?sessionURL=data:"+this.compressedSession()},Is.prototype.presentAlert=function(t){this.alertDialog.present(t)},Is.prototype.mouseDownOnViewport=function(t,e){var n;n=en(t),this.vpMouseDown={viewport:e,lastMouseX:n.x,mouseDownX:n.x,lastMouseY:n.y,mouseDownY:n.y,genomicState:e.genomicState,referenceFrame:e.genomicState.referenceFrame}},Is.prototype.cancelTrackPan=function(){const t=this.dragObject;this.dragObject=void 0,this.isScrolling=!1,this.vpMouseDown=void 0,t&&t.viewport.genomicState.referenceFrame.start!==t.start&&(this.updateViews(),this.fireEvent("trackdragend"))},Is.prototype.startTrackDrag=function(t){this.dragTrack=t},Is.prototype.updateTrackDrag=function(t){if(t&&this.dragTrack){const e=this.dragTrack,n=this.trackViews.indexOf(t),r=this.trackViews.indexOf(e),i=this.trackViews;i[n]=e,i[r]=t;const o=this.trackViews[n].track.order;this.trackViews[r].track.order=o;const a=i.length;let s=o;if(n<r)for(let t=n+1;t<a;t++){const e=i[t].track;if(!(e.order<=s))break;e.order=Math.min(Number.MAX_VALUE,s+1),s=e.order}else for(let t=n-1;t>0;t--){const e=i[t].track;if(!(e.order>=s))break;e.order=Math.max(-Number.MAX_VALUE,s-1),s=e.order}this.reorderTracks()}},Is.prototype.endTrackDrag=function(){this.dragTrack&&this.dragTrack.$trackDragScrim.hide(),this.dragTrack=void 0};const Ns=function(t,e){this.$content=pe('<div class="igv-windowsizepanel-content-div">'),t.append(this.$content),this.browser=e};Ns.prototype.show=function(){this.$content.show()},Ns.prototype.hide=function(){this.$content.hide()},Ns.prototype.updateWithGenomicState=function(t){this.$content.text(function(t){var e,n,r;if(!(t>1e7))return t>1e4?(n=" kb",r=t/(e=1e3),Ze(Math.floor(r))+n):Ze(t)+" bp";e=1e6,n=" mb";return r=t/e,Math.floor(r).toString()+n}(Math.round(this.browser.viewportWidth()*t.referenceFrame.bpPerPixel)))};const Os=function(t){var e,n,r=this;this.$container=pe("<div>",{class:"igv-generic-dialog-container"}),t.append(this.$container),this.$container.offset({left:0,top:0}),e=pe("<div>",{class:"igv-generic-dialog-header"}),this.$container.append(e),Je(e,(function(){r.$input.val(void 0),r.$container.offset({left:0,top:0}),r.$container.hide()})),this.$label=pe("<div>",{class:"igv-generic-dialog-one-liner"}),this.$container.append(this.$label),this.$label.text("Unlabeled"),this.$input_container=pe("<div>",{class:"igv-generic-dialog-input"}),this.$container.append(this.$input_container),this.$input=pe("<input>"),this.$input_container.append(this.$input),n=pe("<div>",{class:"igv-generic-dialog-ok-cancel"}),this.$container.append(n),this.$ok=pe("<div>"),n.append(this.$ok),this.$ok.text("OK"),this.$cancel=pe("<div>"),n.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",(function(){r.$input.val(void 0),r.$container.offset({left:0,top:0}),r.$container.hide()})),_e(this.$container.get(0),e.get(0)),this.$container.hide()};Os.prototype.configure=function(t){var e=this;this.$label.text(t.label),this.$input.val(t.input),this.$input.unbind(),this.$input.on("keyup",(function(n){13===n.keyCode&&(t.click(),e.$input.val(void 0),e.$container.offset({left:0,top:0}),e.$container.hide())})),this.$ok.unbind(),this.$ok.on("click",(function(){t.click(),e.$input.val(void 0),e.$container.offset({left:0,top:0}),e.$container.hide()}))},Os.prototype.present=function(t){var e,n;e=t.offset().top,n=pe("body").scrollTop(),this.$container.offset({left:t.width()-this.$container.width(),top:e+n}),this.$container.show()};const Ps=function(t,e){var n,r,i,o=this;this.browser=e,this.$container=pe("<div>",{class:"igv-generic-dialog-container"}),t.append(this.$container),this.$container.offset({left:0,top:0}),n=pe("<div>",{class:"igv-generic-dialog-header"}),this.$container.append(n),Je(n,(function(){o.$minimum_input.val(void 0),o.$maximum_input.val(void 0),o.$container.offset({left:0,top:0}),o.$container.hide()})),this.$minimum=pe("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$minimum),(i=pe("<div>")).text("Minimum"),this.$minimum.append(i),this.$minimum_input=pe("<input>"),this.$minimum.append(this.$minimum_input),this.$maximum=pe("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$maximum),(i=pe("<div>")).text("Maximum"),this.$maximum.append(i),this.$maximum_input=pe("<input>"),this.$maximum.append(this.$maximum_input),r=pe("<div>",{class:"igv-generic-dialog-ok-cancel"}),this.$container.append(r),this.$ok=pe("<div>"),r.append(this.$ok),this.$ok.text("OK"),this.$cancel=pe("<div>"),r.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",(function(){o.$minimum_input.val(void 0),o.$maximum_input.val(void 0),o.$container.offset({left:0,top:0}),o.$container.hide()})),_e(this.$container.get(0),n.get(0)),this.$container.hide()};function zs(t){var e,n;e=parseFloat(this.$minimum_input.val()),n=parseFloat(this.$maximum_input.val()),isNaN(e)||isNaN(n)?this.browser.presentAlert("Must input numeric values",void 0):(!0===t.trackView.track.autoscale&&pe("#datarange-autoscale").trigger("click"),t.trackView.setDataRange(e,n,!1)),this.$minimum_input.val(void 0),this.$maximum_input.val(void 0),this.$container.offset({left:0,top:0}),this.$container.hide()}Ps.prototype.configure=function(t){var e,n,r,i=this;(e=t.trackView.dataRange())?(n=e.min,r=e.max):(n=0,r=100),this.$minimum_input.val(n),this.$maximum_input.val(r),this.$minimum_input.unbind(),this.$minimum_input.on("keyup",(function(e){13===e.keyCode&&zs.call(i,t)})),this.$maximum_input.unbind(),this.$maximum_input.on("keyup",(function(e){13===e.keyCode&&zs.call(i,t)})),this.$ok.unbind(),this.$ok.on("click",(function(){zs.call(i,t)}))},Ps.prototype.present=function(t){var e,n;e=t.offset().top,n=pe("body").scrollTop(),this.$container.offset({left:t.width()-this.$container.width(),top:e+n}),this.$container.show()};const $s=function(t){var e,n,r=this;this.$container=pe("<div>",{class:"igv-generic-dialog-container"}),t.append(this.$container),this.$container.offset({left:0,top:0}),e=pe("<div>",{class:"igv-generic-dialog-header"}),this.$container.append(e),Je(e,(function(){r.$track_name.text(void 0),r.$container.offset({left:0,top:0}),r.$container.hide()})),this.$label=pe("<div>",{class:"igv-generic-dialog-one-liner"}),this.$container.append(this.$label),this.$label.text("Remove track:"),this.$track_name=pe("<div>",{class:"igv-generic-dialog-one-liner igv-ellipsis"}),this.$container.append(this.$track_name),n=pe("<div>",{class:"igv-generic-dialog-ok-cancel"}),this.$container.append(n),this.$ok=pe("<div>"),n.append(this.$ok),this.$ok.text("OK"),this.$cancel=pe("<div>"),n.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",(function(){r.$track_name.text(void 0),r.$container.offset({left:0,top:0}),r.$container.hide()})),_e(this.$container.get(0),e.get(0)),this.$container.hide()};$s.prototype.configure=function(t){var e=this;this.$track_name.text(t.name||"unnamed"),this.$ok.unbind(),this.$ok.on("click",(function(){t.click(),e.$track_name.text(void 0),e.$container.offset({left:0,top:0}),e.$container.hide()}))},$s.prototype.present=function(t){var e,n;e=t.offset().top,n=pe("body").scrollTop(),this.$container.offset({left:t.width()-this.$container.width(),top:e+n}),this.$container.show()};const Us=function(t){this.$container=pe('<div class="igv-user-feedback">'),t.append(this.$container);let e=pe("<div>");this.$container.append(e);let n=pe("<div>");e.append(n);let r=Me("exclamation-triangle","red");n.append(r);let i=pe("<div>");e.append(i);let o=Me("times-circle","grey");i.append(o);let a=pe("<div>");this.$container.append(a);let s=pe("<div>");a.append(s),s.text("i am user feedback"),i.click((function(){s.html(""),(void 0).$container.hide()}))};Us.prototype.show=function(){this.$container.show()},Us.prototype.hide=function(){this.$container.hide()};const Hs=function(t,e){let n=pe('<div class="igv-nav-bar-button">');t.append(n),n.text("Save SVG"),n.on("click.svg-save-control",()=>{e.renderSVG({})})},js=function(t,e){let n;this.$zoomContainer=pe('<div class="igv-zoom-widget">'),e.append(this.$zoomContainer),n=pe("<div>"),this.$zoomContainer.append(n),n.append(Me("minus-circle")),n.on("click",(function(){t.zoomOut()})),n=pe("<div>"),this.$zoomContainer.append(n),this.$slider=pe('<input type="range"/>'),n.append(this.$slider),this.$slider.on("change",(function(e){t.zoomWithRangePercentage(e.target.value/100)})),n=pe("<div>"),this.$zoomContainer.append(n),n.append(Me("plus-circle")),n.on("click",(function(){t.zoomIn()})),this.currentChr=void 0;let r=this;t.on("locuschange",(function(){t.updateZoomSlider(r.$slider)}))};js.prototype.hide=function(){this.$zoomContainer.hide()},js.prototype.show=function(){this.$zoomContainer.show()},js.prototype.hideSlider=function(){this.$slider.hide()},js.prototype.showSlider=function(){this.$slider.show()};const Vs=function(t,e){this.showAllChromosomes=t.config.showAllChromosomes,this.$container=pe("<div>",{class:"igv-chromosome-select-widget-container"}),e.append(this.$container),this.$select=pe("<select>",{name:"chromosome-select-widget"}),this.$container.append(this.$select),this.$select.on("change",(function(){""!==pe(this).val()&&(t.search(pe(this).val()),pe(this).blur())}))};Vs.prototype.update=function(t){this.$select.empty();const e=this.showAllChromosomes?t.chromosomeNames.slice():t.wgChromosomeNames.slice();t.showWholeGenomeView()&&(e.unshift("all"),e.unshift(""));for(let t of e){var n;n=pe("<option>",{value:t}),this.$select.append(n),n.text(t)}};const qs=function(t,e){var n=this;this.browser=e,this.$button=pe('<div class="igv-nav-bar-button">'),t.append(this.$button),this.$button.text("track labels"),this.$button.on("click",(function(){!0===e.trackLabelsVisible?n.doHide():n.doShow()}))};qs.prototype.doHide=function(){this.$button.removeClass("igv-nav-bar-button-clicked"),this.browser.hideTrackLabels()},qs.prototype.doShow=function(){this.$button.addClass("igv-nav-bar-button-clicked"),this.browser.showTrackLabels()},qs.prototype.setState=function(t){!0===t?this.$button.addClass("igv-nav-bar-button-clicked"):this.$button.removeClass("igv-nav-bar-button-clicked")},qs.prototype.disable=function(){this.doHide(),this.$button.hide()},qs.prototype.enable=function(){this.$button.show()};const Gs=function(t,e,n,r){const i=this;this.browser=r,this.$container=pe('<div class="igv-center-guide igv-center-guide-thin">'),t.append(this.$container),!0===n.showCenterGuideButton&&(this.$centerGuideToggle=pe('<div class="igv-nav-bar-button">'),e.append(this.$centerGuideToggle),this.$centerGuideToggle.text("center line"),this.$centerGuideToggle.on("click",(function(){!0===r.isCenterGuideVisible?i.doHide():i.doShow()})))};Gs.prototype.doHide=function(){this.$centerGuideToggle&&this.$centerGuideToggle.removeClass("igv-nav-bar-button-clicked"),this.browser.hideCenterGuide()},Gs.prototype.doShow=function(){this.$centerGuideToggle&&this.$centerGuideToggle.addClass("igv-nav-bar-button-clicked"),this.browser.showCenterGuide()},Gs.prototype.setState=function(t){this.$centerGuideToggle&&(!0===t?this.$centerGuideToggle.addClass("igv-nav-bar-button-clicked"):this.$centerGuideToggle.removeClass("igv-nav-bar-button-clicked"))},Gs.prototype.forcedHide=function(){this.$centerGuideToggle&&this.$centerGuideToggle.hide(),!0===this.browser.isCenterGuideVisible&&this.$container.hide()},Gs.prototype.forcedShow=function(){this.$centerGuideToggle&&this.$centerGuideToggle.show(),!0===this.browser.isCenterGuideVisible&&this.$container.show()},Gs.prototype.repaint=function(){var t,e,n,r,i,o,a;this.browser.genomicStateList&&(1/(a=this.browser.genomicStateList[0].referenceFrame).bpPerPixel>1?(t=this.browser.trackViews[0].$viewportContainer.position(),e=Math.round(this.browser.trackViews[0].$viewportContainer.width()/2),r=t.left+e-.5*(n=a.toPixels(1)),i=Math.round(r).toString()+"px",o=Math.round(n).toString()+"px",this.$container.css({left:i,width:o}),this.$container.removeClass("igv-center-guide-thin"),this.$container.addClass("igv-center-guide-wide")):(this.$container.css({left:"50%",width:"1px"}),this.$container.removeClass("igv-center-guide-wide"),this.$container.addClass("igv-center-guide-thin")))},Gs.prototype.resize=function(){this.repaint()};const Ws=function(t,e,n,r){const i=this;this.browser=r,this.$guide=pe('<div class="igv-cursor-tracking-guide">'),t.append(this.$guide),t.on("mousemove.cursor-guide",e=>{e.preventDefault();const n=pe(document.elementFromPoint(e.clientX,e.clientY)),i=n.parent();let o=void 0;i.hasClass("igv-viewport-content-div")?o=i.parent():i.hasClass("igv-viewport-div")&&n.hasClass("igv-viewport-content-div")?o=i:i.hasClass("igv-viewport-container")&&n.hasClass("igv-viewport-div")&&(o=n);const[a,s]=[n.attr("class")||"noclass",i.attr("class")||"noclass"];if(o){const n=Zs(e,o,this.$guide,t,r);if(n){const{bp:t,start:e,end:r,interpolant:i}=n;this.customMouseHandler&&this.customMouseHandler({bp:t,start:e,end:r,interpolant:i})}}}),!0===n.showCursorTrackingGuideButton&&(this.$button=pe('<div class="igv-nav-bar-button">'),e.append(this.$button),this.$button.text("cursor guide"),this.$button.on("click",(function(){!0===r.cursorGuideVisible?i.doHide():i.doShow()})))};let Zs=(t,e,n,r,i)=>{const{x:o}=Ks(r.get(0),t),a=`${o}px`;n.css({left:a});const s=Ks(e.get(0),t),c=e.data("viewportGUID"),h=i.getViewportWithGUID(c);if(void 0===h)return;const{referenceFrame:l}=h.genomicState,u=l.start,f=1+l.start+s.width*l.bpPerPixel,p=Math.round(u+s.x*l.bpPerPixel),d=e.closest(".igv-track-container-div");Ks(d.get(0),t);return{$host:d,host_css_left:a,bp:p,start:u,end:f,interpolant:s.xNormalized}};function Ks(t,e){const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top,xNormalized:(e.clientX-n.left)/n.width,yNormalized:(e.clientY-n.top)/n.height,width:n.width,height:n.height}}Ws.prototype.doHide=function(){this.$button&&this.$button.removeClass("igv-nav-bar-button-clicked"),this.browser.hideCursorGuide()},Ws.prototype.doShow=function(){this.$button.addClass("igv-nav-bar-button-clicked"),this.browser.showCursorGuide()},Ws.prototype.setState=function(t){this.$button&&(!0===t?this.$button.addClass("igv-nav-bar-button-clicked"):this.$button.removeClass("igv-nav-bar-button-clicked"))},Ws.prototype.disable=function(){this.doHide(),this.$guide.hide()},Ws.prototype.enable=function(){this.$button&&this.$button.show()};const Xs=function(t){this.browser=t};function Ys(t){this.browser.$toggle_button_container.removeClass(),this.browser.$toggle_button_container.addClass(t.$toggle_button_container),this.browser.zoomWidget.$zoomContainer.removeClass(),this.browser.zoomWidget.$zoomContainer.addClass(t.$zoomContainer)}function Qs(t,e){let n={};return e?this.browser.windowSizePanel.hide():this.browser.windowSizePanel.show(),t>990?(n.$toggle_button_container="igv-nav-bar-toggle-button-container",n.$zoomContainer="igv-zoom-widget"):t>860?(n.$toggle_button_container="igv-nav-bar-toggle-button-container",n.$zoomContainer="igv-zoom-widget-900"):t>540?(n.$toggle_button_container="igv-nav-bar-toggle-button-container-750",n.$zoomContainer="igv-zoom-widget-900"):(n.$toggle_button_container="igv-nav-bar-toggle-button-container-750",n.$zoomContainer="igv-zoom-widget-900",this.browser.windowSizePanel.hide()),e&&(n.$zoomContainer="igv-zoom-widget-hidden"),n}Xs.prototype.navbarDidResize=function(t,e){Ys.call(this,Qs.call(this,t,e))};let Js=[];const tc=zn,ec=Qe,nc=vr;var rc;(rc=document.createElement("style")).setAttribute("type","text/css"),rc.innerHTML='.igv-user-feedback {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 512px;\n  height: 360px;\n  z-index: 2048;\n  background-color: white;\n  border-color: #a2a2a2;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  color: #444;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-user-feedback div:first-child {\n    position: relative;\n    height: 24px;\n    width: 100%;\n    background-color: white;\n    border-bottom-color: #a2a2a2;\n    border-bottom-style: solid;\n    border-bottom-width: thin; }\n    .igv-user-feedback div:first-child div {\n      position: absolute;\n      top: 2px;\n      width: 16px;\n      height: 16px;\n      background-color: transparent; }\n    .igv-user-feedback div:first-child div:first-child {\n      left: 8px; }\n    .igv-user-feedback div:first-child div:last-child {\n      cursor: pointer;\n      right: 8px; }\n  .igv-user-feedback div:last-child {\n    width: 100%;\n    height: calc(100% - 24px);\n    border-width: 0; }\n    .igv-user-feedback div:last-child div {\n      width: auto;\n      height: auto;\n      margin: 8px; }\n\n.igv-color-swatch {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  width: 32px;\n  height: 32px;\n  border-style: solid;\n  border-width: 2px;\n  border-color: white;\n  border-radius: 4px; }\n\n.igv-colorpicker-menu-close-button {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 32px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n  padding-right: 8px; }\n  .igv-colorpicker-menu-close-button i.fa {\n    display: block;\n    margin-left: 4px;\n    margin-right: 4px;\n    color: #5f5f5f; }\n  .igv-colorpicker-menu-close-button i.fa:hover,\n  .igv-colorpicker-menu-close-button i.fa:focus,\n  .igv-colorpicker-menu-close-button i.fa:active {\n    cursor: pointer;\n    color: #0f0f0f; }\n\n.igv-alert-dialog-container {\n  position: absolute;\n  z-index: 2048;\n  top: 30%;\n  left: 50%;\n  margin: -150px 0 0 -150px;\n  width: 300px;\n  height: 256px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-alert-dialog-container div:first-child {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-alert-dialog-container div:first-child div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-alert-dialog-container div:first-child div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-alert-dialog-container #igv-alert-dialog-body {\n    color: #373737;\n    width: 100%;\n    height: calc(100% - 24px - 64px);\n    overflow-y: scroll; }\n    .igv-alert-dialog-container #igv-alert-dialog-body #igv-alert-dialog-body-copy {\n      cursor: pointer;\n      margin: 16px;\n      width: auto;\n      height: auto;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      background-color: white;\n      border: unset; }\n  .igv-alert-dialog-container div:last-child {\n    width: 100%;\n    height: 64px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-items: center; }\n    .igv-alert-dialog-container div:last-child div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: #2B81AF;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-alert-dialog-container div:last-child div:hover {\n      cursor: pointer;\n      border-color: #25597f;\n      background-color: #25597f; }\n\n.igv-generic-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-generic-container div:first-child i {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-generic-dialog-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-dialog-container .igv-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-generic-dialog-container .igv-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-generic-dialog-container .igv-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 128px;\n  z-index: 4096;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background-color: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: none; }\n\n.igv-popover-header {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee; }\n  .igv-popover-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-popover-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-popover-track-popup-content {\n  position: relative;\n  top: 0;\n  left: 0;\n  max-height: 384px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  background-color: white; }\n  .igv-popover-track-popup-content div {\n    margin-left: 4px;\n    background-color: white; }\n  .igv-popover-track-popup-content div:hover {\n    cursor: pointer;\n    background-color: #efefef; }\n\n.igv-popover-name-value {\n  cursor: default;\n  text-wrap: none;\n  white-space: nowrap;\n  max-width: 384px; }\n\n.igv-popover-name {\n  font-weight: bold;\n  padding-right: 4px;\n  float: left; }\n\n.igv-popover-value {\n  padding-left: 4px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 256px;\n  display: inline-block; }\n\n.igv-trackgear-container {\n  position: relative;\n  width: 20px;\n  height: 20px;\n  margin-left: 4px;\n  color: #7F7F7F; }\n\n.igv-trackgear-container:hover {\n  cursor: pointer;\n  color: #444; }\n\n.igv-trackgear-popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 132px;\n  z-index: 4096;\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  text-align: left; }\n  .igv-trackgear-popover > div:not(:first-child) {\n    width: 100%; }\n    .igv-trackgear-popover > div:not(:first-child) > div {\n      background: white; }\n    .igv-trackgear-popover > div:not(:first-child) > div:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      border-bottom-color: transparent;\n      border-bottom-style: solid;\n      border-bottom-width: thin; }\n    .igv-trackgear-popover > div:not(:first-child) > div:hover {\n      background: #efefef; }\n\n.igv-trackgear-popover-shim {\n  padding-left: 8px;\n  padding-right: 8px; }\n\n.igv-trackgear-popover-header {\n  position: relative;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-color: transparent;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center; }\n  .igv-trackgear-popover-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-trackgear-popover-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-trackgear-popover-check-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 20px;\n  background-color: transparent; }\n  .igv-trackgear-popover-check-container div {\n    padding-top: 2px;\n    padding-left: 8px; }\n  .igv-trackgear-popover-check-container div:first-child {\n    position: relative;\n    width: 12px;\n    height: 12px; }\n    .igv-trackgear-popover-check-container div:first-child svg {\n      position: absolute;\n      width: 12px;\n      height: 12px; }\n\n.igvControlDiv {\n  position: relative; }\n\n.igv-content-header {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  margin-top: 10px;\n  height: 16px;\n  width: 100%; }\n  .igv-content-header .igv-ideogram-shim {\n    height: 100%;\n    width: 50px;\n    background-color: white; }\n  .igv-content-header .igv-ideogram-content {\n    height: 100%;\n    background-color: white; }\n  .igv-content-header .igv-ideogram-content-border-right {\n    border-right-color: #292929;\n    border-right-style: solid;\n    border-right-width: 1px; }\n\n.igv-multi-locus-panel-border {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 1px;\n  background-color: green;\n  border-right-color: #ff0000;\n  border-right-style: solid;\n  border-right-width: 1px; }\n\n.igv-navbar {\n  position: relative;\n  padding-left: 8px;\n  padding-right: 8px;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  color: #444;\n  font-size: 12px;\n  font-family: "Open Sans", sans-serif;\n  font-weight: 400;\n  line-height: 32px;\n  margin-top: 2px;\n  margin-bottom: 4px;\n  height: 32px;\n  border-style: solid;\n  border-radius: 3px;\n  border-width: thin;\n  border-color: #bfbfbf;\n  background-color: #f3f3f3; }\n\n.igv-nav-bar-left-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  line-height: 32px; }\n  .igv-nav-bar-left-container .igv-logo {\n    width: 34px;\n    height: 32px;\n    margin-top: 6px;\n    margin-right: 8px; }\n  .igv-nav-bar-left-container .igv-current-genome {\n    height: 32px;\n    width: 40px;\n    margin-left: 4px;\n    margin-right: 4px;\n    user-select: none;\n    line-height: 32px;\n    vertical-align: middle;\n    text-align: center; }\n\n.igv-nav-bar-genomic-location {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 100%; }\n\n.igv-chromosome-select-widget-container {\n  height: 100%;\n  width: 125px;\n  margin-right: 4px;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: space-around;\n  align-items: center; }\n  .igv-chromosome-select-widget-container select {\n    display: block;\n    cursor: pointer;\n    width: 100px;\n    height: 75%;\n    outline: none;\n    font-size: 12px;\n    font-family: "Open Sans", sans-serif;\n    font-weight: 400; }\n\n.igv-locus-size-group {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  margin-left: 8px;\n  height: calc(32px - 10px); }\n  .igv-locus-size-group .igv-search-container {\n    width: 200px;\n    height: calc(32px - 10px);\n    line-height: calc(32px - 10px);\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-locus-size-group .igv-search-container input {\n      cursor: text;\n      width: 85%;\n      height: calc(32px - 10px);\n      line-height: calc(32px - 10px);\n      font-size: 12px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      text-align: left;\n      padding-left: 8px;\n      margin-right: 8px;\n      outline: none;\n      border-style: solid;\n      border-radius: 3px;\n      border-width: thin;\n      border-color: #bfbfbf;\n      background-color: white; }\n    .igv-locus-size-group .igv-search-container div {\n      cursor: pointer;\n      height: 16px;\n      width: 16px; }\n  .igv-locus-size-group .igv-windowsizepanel-content-div {\n    margin-left: 4px;\n    user-select: none; }\n\n.igv-nav-bar-right-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  line-height: 32px; }\n  .igv-nav-bar-right-container .igv-nav-bar-toggle-button-container {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center;\n    height: 100%; }\n    .igv-nav-bar-right-container .igv-nav-bar-toggle-button-container div {\n      margin-left: 0;\n      margin-right: 4px; }\n    .igv-nav-bar-right-container .igv-nav-bar-toggle-button-container div:last-child {\n      margin-left: 0;\n      margin-right: 0; }\n  .igv-nav-bar-right-container .igv-nav-bar-toggle-button-container-750 {\n    display: none; }\n  .igv-nav-bar-right-container .igv-zoom-widget {\n    color: #737373;\n    font-size: 18px;\n    height: 32px;\n    line-height: 32px;\n    margin-left: 8px;\n    user-select: none;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center; }\n    .igv-nav-bar-right-container .igv-zoom-widget div {\n      cursor: pointer;\n      margin-left: unset;\n      margin-right: unset; }\n    .igv-nav-bar-right-container .igv-zoom-widget div:first-child {\n      height: 24px;\n      width: 24px;\n      margin-left: unset;\n      margin-right: 8px; }\n    .igv-nav-bar-right-container .igv-zoom-widget div:last-child {\n      height: 24px;\n      width: 24px;\n      margin-left: 8px;\n      margin-right: unset; }\n    .igv-nav-bar-right-container .igv-zoom-widget div:nth-child(even) {\n      display: block;\n      height: fit-content; }\n    .igv-nav-bar-right-container .igv-zoom-widget input {\n      display: block;\n      width: 125px; }\n    .igv-nav-bar-right-container .igv-zoom-widget svg {\n      display: block; }\n  .igv-nav-bar-right-container .igv-zoom-widget-900 {\n    color: #737373;\n    font-size: 18px;\n    height: 32px;\n    line-height: 32px;\n    margin-left: 8px;\n    user-select: none;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 div {\n      cursor: pointer;\n      margin-left: unset;\n      margin-right: unset; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 div:first-child {\n      height: 24px;\n      width: 24px;\n      margin-left: unset;\n      margin-right: 8px; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 div:last-child {\n      height: 24px;\n      width: 24px;\n      margin-left: 8px;\n      margin-right: unset; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 div:nth-child(even) {\n      width: 0;\n      height: 0;\n      display: none; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 input {\n      width: 0;\n      height: 0;\n      display: none; }\n    .igv-nav-bar-right-container .igv-zoom-widget-900 svg {\n      display: block; }\n  .igv-nav-bar-right-container .igv-zoom-widget-hidden {\n    display: none; }\n\n.igv-nav-bar-button {\n  box-sizing: unset;\n  padding-left: 6px;\n  padding-right: 6px;\n  height: 18px;\n  text-transform: capitalize;\n  user-select: none;\n  line-height: 18px;\n  text-align: center;\n  vertical-align: middle;\n  font-family: "Open Sans", sans-serif;\n  font-size: 11px;\n  font-weight: 200;\n  color: #737373;\n  background-color: #f3f3f3;\n  border-color: #737373;\n  border-style: solid;\n  border-width: thin;\n  border-radius: 6px; }\n\n.igv-nav-bar-button-clicked {\n  color: white;\n  background-color: #737373; }\n\n.igv-nav-bar-button:hover {\n  cursor: pointer; }\n\n.igv-logo-nonav {\n  margin-left: 4px;\n  margin-top: 12px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 34px;\n  height: 16px; }\n\n.igv-search-results {\n  position: absolute;\n  top: 32px;\n  left: 2px;\n  height: 320px;\n  width: 213px;\n  background-color: white;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 9999; }\n  .igv-search-results tr {\n    font-family: "Open Sans", sans-serif;\n    font-size: small;\n    font-weight: 400;\n    color: #444; }\n  .igv-search-results tr:hover,\n  .igv-search-results tr:focus,\n  .igv-search-results tr:active {\n    cursor: pointer;\n    font-weight: 700;\n    color: #141414; }\n\n.igv-root-div {\n  position: relative;\n  left: 0;\n  right: 0;\n  height: auto;\n  margin-left: 10px;\n  margin-right: 10px;\n  padding-top: 4px; }\n\n.igv-content-div {\n  position: relative;\n  width: 100%;\n  height: 100%; }\n\n.igv-track-container-div {\n  user-select: none;\n  position: relative;\n  clear: both; }\n\n.igv-track-div {\n  position: relative;\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 5px; }\n\n.igv-viewport-container {\n  position: absolute;\n  left: 50px;\n  right: 50px;\n  height: 100%;\n  white-space: nowrap;\n  overflow-x: hidden;\n  overflow-y: hidden; }\n\n.igv-viewport-div {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: hidden; }\n\n.igv-viewport-content-div {\n  position: absolute;\n  width: 100%; }\n\n.igv-viewport-message {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: rgba(0, 0, 0, 0.15);\n  font-family: "Open Sans", sans-serif;\n  font-size: 25px;\n  font-weight: bold;\n  user-select: none; }\n\n.igv-whole-genome-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n  background-color: white; }\n  .igv-whole-genome-container div {\n    font-family: "Open Sans", sans-serif;\n    font-size: 10px;\n    font-weight: 400;\n    color: #444;\n    height: 100%;\n    text-align: center;\n    border-right-color: #bfbfbf;\n    border-right-style: solid;\n    border-right-width: thin; }\n    .igv-whole-genome-container div span {\n      display: block;\n      padding-top: 6px;\n      text-overflow: ellipsis; }\n  .igv-whole-genome-container div:last-child {\n    border-right-color: transparent; }\n  .igv-whole-genome-container div:hover,\n  .igv-whole-genome-container div:focus,\n  .igv-whole-genome-container div:active {\n    cursor: pointer;\n    background-color: #efefef; }\n\n.igv-viewport-div-border-right {\n  border-right-color: #292929;\n  border-right-style: solid;\n  border-right-width: 1px; }\n\n.igv-multi-locus-panel-close-container {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 16px;\n  height: 16px;\n  color: #666666;\n  z-index: 1000; }\n\n.igv-multi-locus-panel-close-container:hover {\n  cursor: pointer;\n  color: #434343; }\n\n.igv-multi-locus-panel-label-div {\n  position: absolute;\n  left: 50%;\n  top: 25%;\n  transform: translate(-50%, -25%);\n  font-family: "Open Sans", sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  text-align: center;\n  min-width: 16px;\n  z-index: 64;\n  color: #373737;\n  background-color: white;\n  padding: 1px; }\n\n.igv-multi-locus-panel-label-div:hover {\n  cursor: pointer; }\n\n.igv-viewport-ruler {\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: 10px;\n  font-weight: 200;\n  text-align: center; }\n  .igv-viewport-ruler > div {\n    height: 100%; }\n\n.igv-viewport-sequence {\n  font-family: "Open Sans", sans-serif;\n  font-size: 8px;\n  font-weight: 200;\n  text-align: center; }\n\n.igv-viewport-spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-track-container-spinner {\n  position: absolute;\n  top: 90%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-ruler-sweeper-div {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n  z-index: 99999;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-right-hand-gutter {\n  position: absolute;\n  right: 0;\n  width: 36px;\n  height: 100%;\n  background: white; }\n\n.igv-left-hand-gutter {\n  position: absolute;\n  left: 0;\n  width: 50px;\n  height: 100%; }\n  .igv-left-hand-gutter canvas {\n    position: absolute; }\n\n.igv-track-menu-border-top {\n  border-top-color: #a2a2a2;\n  border-top-style: solid;\n  border-top-width: thin; }\n\n.igv-track-menu-category {\n  padding-left: 4px;\n  font-weight: 400; }\n\n.igv-track-drag-scrim {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 256;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-track-manipulation-handle {\n  cursor: pointer;\n  position: absolute;\n  right: 36px;\n  width: 12px;\n  margin-left: 2px;\n  height: 100%;\n  box-sizing: border-box;\n  font-size: medium;\n  border-color: #c4c4c4;\n  border-style: solid;\n  border-width: thin;\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  z-index: 512;\n  background-color: #c4c4c4; }\n\n.igv-track-manipulation-handle:hover,\n.igv-track-manipulation-handle:focus,\n.igv-track-manipulation-handle:active {\n  border-color: #7e7e7e;\n  background-color: #7e7e7e; }\n\n.igv-track-label {\n  position: absolute;\n  left: 8px;\n  top: 4px;\n  width: auto;\n  height: auto;\n  max-width: 200px;\n  padding-left: 4px;\n  padding-right: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  text-align: center;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: white;\n  z-index: 128;\n  cursor: pointer; }\n\n.igv-track-label:hover,\n.igv-track-label:focus,\n.igv-track-label:active {\n  background-color: rgba(0, 0, 0, 0.05); }\n\n.igv-scrollbar-outer-div {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 14px;\n  height: 100%;\n  background-color: white; }\n  .igv-scrollbar-outer-div div {\n    position: absolute;\n    top: 0;\n    left: 3px;\n    width: 8px;\n    border-style: solid;\n    border-width: thin;\n    border-color: #c4c4c4;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n    background-color: white; }\n  .igv-scrollbar-outer-div div:hover,\n  .igv-scrollbar-outer-div div:focus,\n  .igv-scrollbar-outer-div div:active {\n    cursor: pointer;\n    background-color: #c4c4c4; }\n\n.zoom-in-notice-container {\n  position: absolute;\n  top: 10px;\n  left: 50%; }\n  .zoom-in-notice-container div {\n    position: relative;\n    left: -50%;\n    font-family: "Open Sans", sans-serif;\n    font-size: medium;\n    font-weight: 400;\n    color: #3f3f3f;\n    background-color: rgba(255, 255, 255, 0.51);\n    z-index: 64; }\n\n.igv-center-guide {\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 8px;\n  z-index: 8;\n  display: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-left-style: dashed;\n  border-left-width: thin;\n  border-right-style: dashed;\n  border-right-width: thin; }\n\n.igv-center-guide-wide {\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(127, 127, 127, 0.51); }\n\n.igv-center-guide-thin {\n  left: 50%;\n  width: 1px;\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(0, 0, 0, 0);\n  /*background-color: rgba(127, 127, 127, 0.51);*/\n  /*border-left-color: rgba(0,0,0,0);*/\n  /*border-right-color: rgba(0,0,0,0);*/ }\n\n.igv-cursor-tracking-guide {\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 1px;\n  z-index: 1;\n  border-left-style: dotted;\n  border-left-width: thin;\n  border-left-color: rgba(127, 127, 127, 0.76);\n  display: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none; }\n\n.igv-clickable {\n  cursor: pointer;\n  background-color: white; }\n\n#color-by-tag {\n  color: #444; }\n\n#color-by-tag:hover,\n#color-by-tag:focus,\n#color-by-tag:active {\n  cursor: pointer;\n  padding-left: 2px;\n  padding-right: 2px;\n  color: white;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: #7f7f7f; }\n\n.igv-ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis; }\n\n.igv-spinner-container {\n  color: #3f3f3f;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  padding-top: 8px;\n  font-size: 24px;\n  z-index: 512; }\n\n.igv-fa-check-visible {\n  color: inherit;\n  padding-right: 2px; }\n\n.igv-fa-check-hidden {\n  color: transparent;\n  padding-right: 2px; }\n\n.validateTips {\n  border: 1px solid transparent;\n  padding: 0.3em; }\n  .validateTips fieldset {\n    border: 0; }\n\n.igv-spacer-10 {\n  height: 10px;\n  width: 100%;\n  font-size: 0;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  display: block; }\n\n.igv-fa5-spin {\n  -webkit-animation: igv-fa5-spin 2s infinite linear;\n  animation: igv-fa5-spin 2s infinite linear; }\n\n@-webkit-keyframes igv-fa5-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n@keyframes igv-fa5-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n\n/*# sourceMappingURL=igv.css.map */\n',document.head.insertBefore(rc,document.head.childNodes[document.head.childNodes.length-1]);var ic={createBrowser:async function(t,e){var n,r;On.init(pe(t)),void 0===e&&(e={}),Kn.genomeList=e.genomeList||"https://s3.amazonaws.com/igv.org.genomes/genomes.json",function(t){void 0===t.promisified&&(t.promisified=!1);void 0===t.minimumBases&&(t.minimumBases=40);void 0===t.showIdeogram&&(t.showIdeogram=!0);void 0===t.showCursorTrackingGuideButton&&(t.showCursorTrackingGuideButton=!0);void 0===t.showCenterGuideButton&&(t.showCenterGuideButton=!0);void 0===t.showSVGButton&&(t.showSVGButton=!0);void 0===t.showTrackLabelButton&&(t.showTrackLabelButton=!0);void 0===t.showCursorTrackingGuide&&(t.showCursorTrackingGuide=!1);void 0===t.showCenterGuide&&(t.showCenterGuide=!1);void 0===t.showTrackLabels&&(t.showTrackLabels=!0);void 0===t.showControls&&(t.showControls=!0);void 0===t.showNavigation&&(t.showNavigation=!0);void 0===t.showRuler&&(t.showRuler=!0);void 0===t.showSequence&&(t.showSequence=!0);void 0===t.flanking&&(t.flanking=1e3);void 0===t.pairsSupported&&(t.pairsSupported=!0);t.tracks||(t.tracks=[]);t.showSequence&&t.tracks.push({type:"sequence",order:-Number.MAX_VALUE})}(e),!1!==e.queryParametersSupported&&function(t){var e,n,r,i,o,a,s,c,h,l;let u,f;if(c=window.location.href,a={},e=c.indexOf("?"),n=c.lastIndexOf("#"),e>=0)for(n<0&&(n=c.length),r=e+1;r<n;)(i=c.indexOf("&",r))<0&&(i=n),o=c.substring(r,i),2===(s=o.split("=",2)).length&&(h=s[0],l=decodeURIComponent(s[1]),"file"===h?u=l.split(","):"index"===h?f=l.split(","):t[h]=l,r=i+1);if(u){t.tracks||(t.tracks=[]);for(let e=0;e<u.length;e++){if(u[e].endsWith(".xml")||u[e].endsWith(".json")){t.sessionURL=u[e];break}const n={url:u[e]};f&&f.length>e&&(n.indexURL=f[e]),t.tracks.push(n)}}}(e),r=1,(n=e).tracks&&n.tracks.forEach((function(t){void 0===t.order&&(t.order=r++)}));const i=new Is(e,t);return function(t,e){var n;n=e.createControls?e.createControls(t,e):function(t,e){var n,r,i,o,a,s,c,h,l,u,f;l=pe("<div>",{class:"igvControlDiv"}),u=pe("<div>",{class:"igv-navbar"}),l.append(u),t.$navigation=u,t.navbarManager=new Xs(t),r=pe("<div>",{class:"igv-nav-bar-left-container"}),u.append(r),c=pe("<div>",{class:"igv-logo"}),(h=function(){return pe('<svg width="690px" height="324px" viewBox="0 0 690 324" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>IGV</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="IGV" fill="#666666"><polygon id="Path" points="379.54574 8.00169252 455.581247 8.00169252 515.564813 188.87244 532.884012 253.529506 537.108207 253.529506 554.849825 188.87244 614.833392 8.00169252 689.60164 8.00169252 582.729511 320.722144 486.840288 320.722144"></polygon><path d="M261.482414,323.793286 C207.975678,323.793286 168.339046,310.552102 142.571329,284.069337 C116.803612,257.586572 103.919946,217.158702 103.919946,162.784513 C103.919946,108.410325 117.437235,67.8415913 144.472217,41.0770945 C171.507199,14.3125977 212.903894,0.930550071 268.663545,0.930550071 C283.025879,0.930550071 298.232828,1.84616386 314.284849,3.6774189 C330.33687,5.50867394 344.839793,7.97378798 357.794056,11.072835 L357.794056,68.968378 C339.48912,65.869331 323.578145,63.5450806 310.060654,61.9955571 C296.543163,60.4460336 284.574731,59.6712835 274.154998,59.6712835 C255.850062,59.6712835 240.502308,61.4320792 228.111274,64.9537236 C215.720241,68.4753679 205.793482,74.2507779 198.330701,82.2801269 C190.867919,90.309476 185.587729,100.87425 182.48997,113.974767 C179.392212,127.075284 177.843356,143.345037 177.843356,162.784513 C177.843356,181.942258 179.251407,198.000716 182.067551,210.960367 C184.883695,223.920018 189.671068,234.41436 196.429813,242.443709 C203.188559,250.473058 212.059279,256.178037 223.042241,259.558815 C234.025202,262.939594 247.683295,264.629958 264.01693,264.629958 C268.241146,264.629958 273.098922,264.489094 278.590403,264.207362 C284.081883,263.925631 289.643684,263.50304 295.275972,262.939577 L295.275972,159.826347 L361.595831,159.826347 L361.595831,308.579859 C344.698967,313.087564 327.239137,316.750019 309.215815,319.567334 C291.192494,322.38465 275.281519,323.793286 261.482414,323.793286 L261.482414,323.793286 L261.482414,323.793286 Z" id="Path"></path>;<polygon id="Path" points="0.81355666 5.00169252 73.0472883 5.00169252 73.0472883 317.722144 0.81355666 317.722144"></polygon></g> </g> </svg>')}()).css("width","34px"),h.css("height","32px"),c.append(h),r.append(c),t.$current_genome=pe("<div>",{class:"igv-current-genome"}),r.append(t.$current_genome),t.$current_genome.text(""),o=pe("<div>",{class:"igv-nav-bar-genomic-location"}),r.append(o),t.chromosomeSelectWidget=new Vs(t,o),void 0===e.showChromosomeWidget&&(e.showChromosomeWidget=!0);!0===e.showChromosomeWidget?t.chromosomeSelectWidget.$container.show():t.chromosomeSelectWidget.$container.hide();a=pe("<div>",{class:"igv-locus-size-group"}),o.append(a),f=pe("<div>",{class:"igv-search-container"}),a.append(f),t.$searchInput=pe('<input type="text" placeholder="Locus Search">'),f.append(t.$searchInput),t.$searchInput.change((function(e){t.search(pe(this).val()).catch((function(e){t.presentAlert(e)}))})),n=pe("<div>"),f.append(n),n.append(Me("search")),n.click((function(){t.search(t.$searchInput.val())})),t.windowSizePanel=new Ns(a,t),i=pe('<div class="igv-nav-bar-right-container">'),u.append(i),s=pe('<div class="igv-nav-bar-toggle-button-container">'),i.append(s),t.$toggle_button_container=s,t.cursorGuide=new Ws(t.$content,s,e,t),t.centerGuide=new Gs(pe(t.trackContainerDiv),s,e,t),!0===e.showTrackLabelButton&&(t.trackLabelControl=new qs(s,t));e.showSVGButton&&(t.svgSaveControl=new Hs(s,t));t.zoomWidget=new js(t,i),!1===e.showNavigation&&t.$navigation.hide();return l.get(0)}(t,e),pe(n).insertBefore(t.$content),!1===e.showControls&&pe(n).hide()}(i,e),i.userFeedback=new Us(i.$content),i.userFeedback.hide(),i.alertDialog=new Fn(i.$content),i.inputDialog=new Os(i.$root),i.trackRemovalDialog=new $s(i.$root),i.dataRangeDialog=new Ps(i.$root,i),e.apiKey&&bn.setApiKey(e.apiKey),e.oauthToken&&kn.setToken(e.oauthToken),function(t){return t.sessionURL?i.loadSession({url:t.sessionURL}):i.loadSessionObject(t)}(e).then((function(t){!1===e.showTrackLabels?i.hideTrackLabels():(i.showTrackLabels(),i.trackLabelControl&&i.trackLabelControl.setState(i.trackLabelsVisible)),!1===e.showCursorTrackingGuide?i.cursorGuide.doHide():i.cursorGuide.doShow(),!1===e.showCenterGuide?i.centerGuide.doHide():i.centerGuide.doShow();const n=i.isMultiLocusWholeGenomeView()||Kn.isWholeGenomeView(i.genomicStateList[0].referenceFrame);return i.isMultiLocusMode()||n?i.centerGuide.forcedHide():i.centerGuide.forcedShow(),zn.startup(),i.navbarManager.navbarDidResize(i.$navigation.width(),n),i})).then((function(t){return Js.push(t),t}))},removeBrowser:function(t){t.dispose(),t.$root.remove(),Js=Js.filter(e=>e!==t),"undefined"!=typeof igv&&t===igv.browser&&(igv.browser=void 0)},visibilityChange:function(){Js.forEach((function(t){t.visibilityChange()}))},setGoogleOauthToken:function(t){return kn.setToken(t)},oauth:kn,version:function(){return"2.3.5 (195a47778339f77b881e4e9752f2d263a9fe4658)"},download:fn,getBrowser:function(){return Js[0]},doAutoscale:pn,graphics:nc,createTrack:function(t,e){return Is.prototype.createTrack.call(e,t)},getFilename:An,getExtension:function(t){if(void 0===t.url)return;let e=(Ln(t.url)?t.url.name:t.url).toLowerCase(),n=e.indexOf("?");return n>0&&(e=e.substr(0,n)),e.endsWith(".gz")?e=e.substr(0,e.length-3):(e.endsWith(".txt")||e.endsWith(".tab")||e.endsWith(".bgz"))&&(e=e.substr(0,e.length-4)),n=e.lastIndexOf("."),n<0?e:e.substr(1+n)},isFilePath:Ln,inferFileFormat:$r,inferTrackTypes:zr,knownFileExtensions:Pr,appendRightHandGutter:function(t){Rr.prototype.appendRightHandGutter.call(this,t)},attachDialogCloseHandlerWithParent:Je,guid:rn,pageCoordinates:en,translateMouseCoordinates:nn,createIcon:Me,GtexUtils:xo,xhr:tc,Color:ec,splitLines:Ke,isString:We,numberFormatter:Ze,getDataWrapper:Br,setApiKey:function(t){return bn.setApiKey(t)},createColorSwatchSelector:tn,makeDraggable:_e,GenericContainer:_r,Popover:an,AlertDialog:Fn,InputDialog:Os,TrackRemovalDialog:$s,DataRangeDialog:Ps,MenuUtils:Ae,Alert:On,google:bn},oc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ac(t,e){return t(e={exports:{}},e.exports),e.exports}var sc=function(t){return t&&t.Math==Math&&t},cc=sc("object"==typeof globalThis&&globalThis)||sc("object"==typeof window&&window)||sc("object"==typeof self&&self)||sc("object"==typeof oc&&oc)||Function("return this")(),hc=function(t){try{return!!t()}catch(t){return!0}},lc=!hc((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),uc={}.propertyIsEnumerable,fc=Object.getOwnPropertyDescriptor,pc={f:fc&&!uc.call({1:2},1)?function(t){var e=fc(this,t);return!!e&&e.enumerable}:uc},dc=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},gc={}.toString,mc=function(t){return gc.call(t).slice(8,-1)},vc="".split,yc=hc((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==mc(t)?vc.call(t,""):Object(t)}:Object,wc=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},bc=function(t){return yc(wc(t))},xc=function(t){return"object"==typeof t?null!==t:"function"==typeof t},kc=function(t,e){if(!xc(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!xc(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!xc(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!xc(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Sc={}.hasOwnProperty,Cc=function(t,e){return Sc.call(t,e)},_c=cc.document,Rc=xc(_c)&&xc(_c.createElement),Tc=function(t){return Rc?_c.createElement(t):{}},Ec=!lc&&!hc((function(){return 7!=Object.defineProperty(Tc("div"),"a",{get:function(){return 7}}).a})),Ac=Object.getOwnPropertyDescriptor,Lc={f:lc?Ac:function(t,e){if(t=bc(t),e=kc(e,!0),Ec)try{return Ac(t,e)}catch(t){}if(Cc(t,e))return dc(!pc.f.call(t,e),t[e])}},Ic=function(t){if(!xc(t))throw TypeError(String(t)+" is not an object");return t},Mc=Object.defineProperty,Dc={f:lc?Mc:function(t,e,n){if(Ic(t),e=kc(e,!0),Ic(n),Ec)try{return Mc(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Bc=lc?function(t,e,n){return Dc.f(t,e,dc(1,n))}:function(t,e,n){return t[e]=n,t},Fc=function(t,e){try{Bc(cc,t,e)}catch(n){cc[t]=e}return e},Nc=cc["__core-js_shared__"]||Fc("__core-js_shared__",{}),Oc=Function.toString;"function"!=typeof Nc.inspectSource&&(Nc.inspectSource=function(t){return Oc.call(t)});var Pc,zc,$c,Uc=Nc.inspectSource,Hc=cc.WeakMap,jc="function"==typeof Hc&&/native code/.test(Uc(Hc)),Vc=ac((function(t){(t.exports=function(t,e){return Nc[t]||(Nc[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),qc=0,Gc=Math.random(),Wc=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++qc+Gc).toString(36)},Zc=Vc("keys"),Kc=function(t){return Zc[t]||(Zc[t]=Wc(t))},Xc={},Yc=cc.WeakMap;if(jc){var Qc=new Yc,Jc=Qc.get,th=Qc.has,eh=Qc.set;Pc=function(t,e){return eh.call(Qc,t,e),e},zc=function(t){return Jc.call(Qc,t)||{}},$c=function(t){return th.call(Qc,t)}}else{var nh=Kc("state");Xc[nh]=!0,Pc=function(t,e){return Bc(t,nh,e),e},zc=function(t){return Cc(t,nh)?t[nh]:{}},$c=function(t){return Cc(t,nh)}}var rh,ih={set:Pc,get:zc,has:$c,enforce:function(t){return $c(t)?zc(t):Pc(t,{})},getterFor:function(t){return function(e){var n;if(!xc(e)||(n=zc(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},oh=ac((function(t){var e=ih.get,n=ih.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||Cc(i,"name")||Bc(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==cc?(a?!c&&t[e]&&(s=!0):delete t[e],s?t[e]=i:Bc(t,e,i)):s?t[e]=i:Fc(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Uc(this)}))})),ah=cc,sh=function(t){return"function"==typeof t?t:void 0},ch=function(t,e){return arguments.length<2?sh(ah[t])||sh(cc[t]):ah[t]&&ah[t][e]||cc[t]&&cc[t][e]},hh=Math.ceil,lh=Math.floor,uh=function(t){return isNaN(t=+t)?0:(t>0?lh:hh)(t)},fh=Math.min,ph=function(t){return t>0?fh(uh(t),9007199254740991):0},dh=Math.max,gh=Math.min,mh=function(t,e){var n=uh(t);return n<0?dh(n+e,0):gh(n,e)},vh=function(t){return function(e,n,r){var i,o=bc(e),a=ph(o.length),s=mh(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},yh={includes:vh(!0),indexOf:vh(!1)},wh=yh.indexOf,bh=function(t,e){var n,r=bc(t),i=0,o=[];for(n in r)!Cc(Xc,n)&&Cc(r,n)&&o.push(n);for(;e.length>i;)Cc(r,n=e[i++])&&(~wh(o,n)||o.push(n));return o},xh=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],kh=xh.concat("length","prototype"),Sh={f:Object.getOwnPropertyNames||function(t){return bh(t,kh)}},Ch={f:Object.getOwnPropertySymbols},_h=ch("Reflect","ownKeys")||function(t){var e=Sh.f(Ic(t)),n=Ch.f;return n?e.concat(n(t)):e},Rh=function(t,e){for(var n=_h(e),r=Dc.f,i=Lc.f,o=0;o<n.length;o++){var a=n[o];Cc(t,a)||r(t,a,i(e,a))}},Th=/#|\.prototype\./,Eh=function(t,e){var n=Lh[Ah(t)];return n==Mh||n!=Ih&&("function"==typeof e?hc(e):!!e)},Ah=Eh.normalize=function(t){return String(t).replace(Th,".").toLowerCase()},Lh=Eh.data={},Ih=Eh.NATIVE="N",Mh=Eh.POLYFILL="P",Dh=Eh,Bh=Lc.f,Fh=function(t,e){var n,r,i,o,a,s=t.target,c=t.global,h=t.stat;if(n=c?cc:h?cc[s]||Fc(s,{}):(cc[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=Bh(n,r))&&a.value:n[r],!Dh(c?r:s+(h?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Rh(o,i)}(t.sham||i&&i.sham)&&Bc(o,"sham",!0),oh(n,r,o,t)}},Nh=!!Object.getOwnPropertySymbols&&!hc((function(){return!String(Symbol())})),Oh=Nh&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ph=Array.isArray||function(t){return"Array"==mc(t)},zh=function(t){return Object(wc(t))},$h=Object.keys||function(t){return bh(t,xh)},Uh=lc?Object.defineProperties:function(t,e){Ic(t);for(var n,r=$h(e),i=r.length,o=0;i>o;)Dc.f(t,n=r[o++],e[n]);return t},Hh=ch("document","documentElement"),jh=Kc("IE_PROTO"),Vh=function(){},qh=function(t){return"<script>"+t+"<\/script>"},Gh=function(){try{rh=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Gh=rh?function(t){t.write(qh("")),t.close();var e=t.parentWindow.Object;return t=null,e}(rh):((e=Tc("iframe")).style.display="none",Hh.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(qh("document.F=Object")),t.close(),t.F);for(var n=xh.length;n--;)delete Gh.prototype[xh[n]];return Gh()};Xc[jh]=!0;var Wh=Object.create||function(t,e){var n;return null!==t?(Vh.prototype=Ic(t),n=new Vh,Vh.prototype=null,n[jh]=t):n=Gh(),void 0===e?n:Uh(n,e)},Zh=Sh.f,Kh={}.toString,Xh="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Yh={f:function(t){return Xh&&"[object Window]"==Kh.call(t)?function(t){try{return Zh(t)}catch(t){return Xh.slice()}}(t):Zh(bc(t))}},Qh=Vc("wks"),Jh=cc.Symbol,tl=Oh?Jh:Jh&&Jh.withoutSetter||Wc,el=function(t){return Cc(Qh,t)||(Nh&&Cc(Jh,t)?Qh[t]=Jh[t]:Qh[t]=tl("Symbol."+t)),Qh[t]},nl={f:el},rl=Dc.f,il=function(t){var e=ah.Symbol||(ah.Symbol={});Cc(e,t)||rl(e,t,{value:nl.f(t)})},ol=Dc.f,al=el("toStringTag"),sl=function(t,e,n){t&&!Cc(t=n?t:t.prototype,al)&&ol(t,al,{configurable:!0,value:e})},cl=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},hl=function(t,e,n){if(cl(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},ll=el("species"),ul=function(t,e){var n;return Ph(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ph(n.prototype)?xc(n)&&null===(n=n[ll])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},fl=[].push,pl=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(s,c,h,l){for(var u,f,p=zh(s),d=yc(p),g=hl(c,h,3),m=ph(d.length),v=0,y=l||ul,w=e?y(s,m):n?y(s,0):void 0;m>v;v++)if((a||v in d)&&(f=g(u=d[v],v,p),t))if(e)w[v]=f;else if(f)switch(t){case 3:return!0;case 5:return u;case 6:return v;case 2:fl.call(w,u)}else if(i)return!1;return o?-1:r||i?i:w}},dl={forEach:pl(0),map:pl(1),filter:pl(2),some:pl(3),every:pl(4),find:pl(5),findIndex:pl(6)},gl=dl.forEach,ml=Kc("hidden"),vl=el("toPrimitive"),yl=ih.set,wl=ih.getterFor("Symbol"),bl=Object.prototype,xl=cc.Symbol,kl=ch("JSON","stringify"),Sl=Lc.f,Cl=Dc.f,_l=Yh.f,Rl=pc.f,Tl=Vc("symbols"),El=Vc("op-symbols"),Al=Vc("string-to-symbol-registry"),Ll=Vc("symbol-to-string-registry"),Il=Vc("wks"),Ml=cc.QObject,Dl=!Ml||!Ml.prototype||!Ml.prototype.findChild,Bl=lc&&hc((function(){return 7!=Wh(Cl({},"a",{get:function(){return Cl(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Sl(bl,e);r&&delete bl[e],Cl(t,e,n),r&&t!==bl&&Cl(bl,e,r)}:Cl,Fl=function(t,e){var n=Tl[t]=Wh(xl.prototype);return yl(n,{type:"Symbol",tag:t,description:e}),lc||(n.description=e),n},Nl=Oh?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof xl},Ol=function(t,e,n){t===bl&&Ol(El,e,n),Ic(t);var r=kc(e,!0);return Ic(n),Cc(Tl,r)?(n.enumerable?(Cc(t,ml)&&t[ml][r]&&(t[ml][r]=!1),n=Wh(n,{enumerable:dc(0,!1)})):(Cc(t,ml)||Cl(t,ml,dc(1,{})),t[ml][r]=!0),Bl(t,r,n)):Cl(t,r,n)},Pl=function(t,e){Ic(t);var n=bc(e),r=$h(n).concat(Hl(n));return gl(r,(function(e){lc&&!zl.call(n,e)||Ol(t,e,n[e])})),t},zl=function(t){var e=kc(t,!0),n=Rl.call(this,e);return!(this===bl&&Cc(Tl,e)&&!Cc(El,e))&&(!(n||!Cc(this,e)||!Cc(Tl,e)||Cc(this,ml)&&this[ml][e])||n)},$l=function(t,e){var n=bc(t),r=kc(e,!0);if(n!==bl||!Cc(Tl,r)||Cc(El,r)){var i=Sl(n,r);return!i||!Cc(Tl,r)||Cc(n,ml)&&n[ml][r]||(i.enumerable=!0),i}},Ul=function(t){var e=_l(bc(t)),n=[];return gl(e,(function(t){Cc(Tl,t)||Cc(Xc,t)||n.push(t)})),n},Hl=function(t){var e=t===bl,n=_l(e?El:bc(t)),r=[];return gl(n,(function(t){!Cc(Tl,t)||e&&!Cc(bl,t)||r.push(Tl[t])})),r};if(Nh||(oh((xl=function(){if(this instanceof xl)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Wc(t),n=function(t){this===bl&&n.call(El,t),Cc(this,ml)&&Cc(this[ml],e)&&(this[ml][e]=!1),Bl(this,e,dc(1,t))};return lc&&Dl&&Bl(bl,e,{configurable:!0,set:n}),Fl(e,t)}).prototype,"toString",(function(){return wl(this).tag})),oh(xl,"withoutSetter",(function(t){return Fl(Wc(t),t)})),pc.f=zl,Dc.f=Ol,Lc.f=$l,Sh.f=Yh.f=Ul,Ch.f=Hl,nl.f=function(t){return Fl(el(t),t)},lc&&(Cl(xl.prototype,"description",{configurable:!0,get:function(){return wl(this).description}}),oh(bl,"propertyIsEnumerable",zl,{unsafe:!0}))),Fh({global:!0,wrap:!0,forced:!Nh,sham:!Nh},{Symbol:xl}),gl($h(Il),(function(t){il(t)})),Fh({target:"Symbol",stat:!0,forced:!Nh},{for:function(t){var e=String(t);if(Cc(Al,e))return Al[e];var n=xl(e);return Al[e]=n,Ll[n]=e,n},keyFor:function(t){if(!Nl(t))throw TypeError(t+" is not a symbol");if(Cc(Ll,t))return Ll[t]},useSetter:function(){Dl=!0},useSimple:function(){Dl=!1}}),Fh({target:"Object",stat:!0,forced:!Nh,sham:!lc},{create:function(t,e){return void 0===e?Wh(t):Pl(Wh(t),e)},defineProperty:Ol,defineProperties:Pl,getOwnPropertyDescriptor:$l}),Fh({target:"Object",stat:!0,forced:!Nh},{getOwnPropertyNames:Ul,getOwnPropertySymbols:Hl}),Fh({target:"Object",stat:!0,forced:hc((function(){Ch.f(1)}))},{getOwnPropertySymbols:function(t){return Ch.f(zh(t))}}),kl){var jl=!Nh||hc((function(){var t=xl();return"[null]"!=kl([t])||"{}"!=kl({a:t})||"{}"!=kl(Object(t))}));Fh({target:"JSON",stat:!0,forced:jl},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(xc(e)||void 0!==t)&&!Nl(t))return Ph(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Nl(e))return e}),i[1]=e,kl.apply(null,i)}})}xl.prototype[vl]||Bc(xl.prototype,vl,xl.prototype.valueOf),sl(xl,"Symbol"),Xc[ml]=!0;var Vl=Dc.f,ql=cc.Symbol;if(lc&&"function"==typeof ql&&(!("description"in ql.prototype)||void 0!==ql().description)){var Gl={},Wl=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Wl?new ql(t):void 0===t?ql():ql(t);return""===t&&(Gl[e]=!0),e};Rh(Wl,ql);var Zl=Wl.prototype=ql.prototype;Zl.constructor=Wl;var Kl=Zl.toString,Xl="Symbol(test)"==String(ql("test")),Yl=/^Symbol\((.*)\)[^)]+$/;Vl(Zl,"description",{configurable:!0,get:function(){var t=xc(this)?this.valueOf():this,e=Kl.call(t);if(Cc(Gl,t))return"";var n=Xl?e.slice(7,-1):e.replace(Yl,"$1");return""===n?void 0:n}}),Fh({global:!0,forced:!0},{Symbol:Wl})}il("iterator");var Ql=function(t,e){var n=[][t];return!!n&&hc((function(){n.call(null,e||function(){throw 1},1)}))},Jl=Object.defineProperty,tu={},eu=function(t){throw t},nu=function(t,e){if(Cc(tu,t))return tu[t];e||(e={});var n=[][t],r=!!Cc(e,"ACCESSORS")&&e.ACCESSORS,i=Cc(e,0)?e[0]:eu,o=Cc(e,1)?e[1]:void 0;return tu[t]=!!n&&!hc((function(){if(r&&!lc)return!0;var t={length:-1};r?Jl(t,1,{enumerable:!0,get:eu}):t[1]=1,n.call(t,i,o)}))},ru=dl.forEach,iu=Ql("forEach"),ou=nu("forEach"),au=iu&&ou?[].forEach:function(t){return ru(this,t,arguments.length>1?arguments[1]:void 0)};Fh({target:"Array",proto:!0,forced:[].forEach!=au},{forEach:au});var su=yh.indexOf,cu=[].indexOf,hu=!!cu&&1/[1].indexOf(1,-0)<0,lu=Ql("indexOf"),uu=nu("indexOf",{ACCESSORS:!0,1:0});Fh({target:"Array",proto:!0,forced:hu||!lu||!uu},{indexOf:function(t){return hu?cu.apply(this,arguments)||0:su(this,t,arguments.length>1?arguments[1]:void 0)}});var fu=el("unscopables"),pu=Array.prototype;null==pu[fu]&&Dc.f(pu,fu,{configurable:!0,value:Wh(null)});var du,gu,mu,vu=function(t){pu[fu][t]=!0},yu={},wu=!hc((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),bu=Kc("IE_PROTO"),xu=Object.prototype,ku=wu?Object.getPrototypeOf:function(t){return t=zh(t),Cc(t,bu)?t[bu]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?xu:null},Su=el("iterator"),Cu=!1;[].keys&&("next"in(mu=[].keys())?(gu=ku(ku(mu)))!==Object.prototype&&(du=gu):Cu=!0),null==du&&(du={}),Cc(du,Su)||Bc(du,Su,(function(){return this}));var _u={IteratorPrototype:du,BUGGY_SAFARI_ITERATORS:Cu},Ru=_u.IteratorPrototype,Tu=function(){return this},Eu=function(t,e,n){var r=e+" Iterator";return t.prototype=Wh(Ru,{next:dc(1,n)}),sl(t,r,!1),yu[r]=Tu,t},Au=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Ic(n),function(t){if(!xc(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Lu=_u.IteratorPrototype,Iu=_u.BUGGY_SAFARI_ITERATORS,Mu=el("iterator"),Du=function(){return this},Bu=function(t,e,n,r,i,o,a){Eu(n,e,r);var s,c,h,l=function(t){if(t===i&&g)return g;if(!Iu&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},u=e+" Iterator",f=!1,p=t.prototype,d=p[Mu]||p["@@iterator"]||i&&p[i],g=!Iu&&d||l(i),m="Array"==e&&p.entries||d;if(m&&(s=ku(m.call(new t)),Lu!==Object.prototype&&s.next&&(ku(s)!==Lu&&(Au?Au(s,Lu):"function"!=typeof s[Mu]&&Bc(s,Mu,Du)),sl(s,u,!0))),"values"==i&&d&&"values"!==d.name&&(f=!0,g=function(){return d.call(this)}),p[Mu]!==g&&Bc(p,Mu,g),yu[e]=g,i)if(c={values:l("values"),keys:o?g:l("keys"),entries:l("entries")},a)for(h in c)!Iu&&!f&&h in p||oh(p,h,c[h]);else Fh({target:e,proto:!0,forced:Iu||f},c);return c},Fu=ih.set,Nu=ih.getterFor("Array Iterator"),Ou=Bu(Array,"Array",(function(t,e){Fu(this,{type:"Array Iterator",target:bc(t),index:0,kind:e})}),(function(){var t=Nu(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");yu.Arguments=yu.Array,vu("keys"),vu("values"),vu("entries");var Pu=[].join,zu=yc!=Object,$u=Ql("join",",");Fh({target:"Array",proto:!0,forced:zu||!$u},{join:function(t){return Pu.call(bc(this),void 0===t?",":t)}});var Uu=Math.min,Hu=[].lastIndexOf,ju=!!Hu&&1/[1].lastIndexOf(1,-0)<0,Vu=Ql("lastIndexOf"),qu=nu("indexOf",{ACCESSORS:!0,1:0}),Gu=ju||!Vu||!qu?function(t){if(ju)return Hu.apply(this,arguments)||0;var e=bc(this),n=ph(e.length),r=n-1;for(arguments.length>1&&(r=Uu(r,uh(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:Hu;Fh({target:"Array",proto:!0,forced:Gu!==[].lastIndexOf},{lastIndexOf:Gu});var Wu=Dc.f,Zu=Function.prototype,Ku=Zu.toString,Xu=/^\s*function ([^ (]*)/;!lc||"name"in Zu||Wu(Zu,"name",{configurable:!0,get:function(){try{return Ku.call(this).match(Xu)[1]}catch(t){return""}}});var Yu=hc((function(){$h(1)}));Fh({target:"Object",stat:!0,forced:Yu},{keys:function(t){return $h(zh(t))}});var Qu={};Qu[el("toStringTag")]="z";var Ju="[object z]"===String(Qu),tf=el("toStringTag"),ef="Arguments"==mc(function(){return arguments}()),nf=Ju?mc:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),tf))?n:ef?mc(e):"Object"==(r=mc(e))&&"function"==typeof e.callee?"Arguments":r},rf=Ju?{}.toString:function(){return"[object "+nf(this)+"]"};Ju||oh(Object.prototype,"toString",rf,{unsafe:!0});var of=function(){var t=Ic(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function af(t,e){return RegExp(t,e)}var sf={UNSUPPORTED_Y:hc((function(){var t=af("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:hc((function(){var t=af("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},cf=RegExp.prototype.exec,hf=String.prototype.replace,lf=cf,uf=function(){var t=/a/,e=/b*/g;return cf.call(t,"a"),cf.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),ff=sf.UNSUPPORTED_Y||sf.BROKEN_CARET,pf=void 0!==/()??/.exec("")[1];(uf||pf||ff)&&(lf=function(t){var e,n,r,i,o=this,a=ff&&o.sticky,s=of.call(o),c=o.source,h=0,l=t;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(c="(?: "+c+")",l=" "+l,h++),n=new RegExp("^(?:"+c+")",s)),pf&&(n=new RegExp("^"+c+"$(?!\\s)",s)),uf&&(e=o.lastIndex),r=cf.call(a?n:o,l),a?r?(r.input=r.input.slice(h),r[0]=r[0].slice(h),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:uf&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),pf&&r&&r.length>1&&hf.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var df=lf;Fh({target:"RegExp",proto:!0,forced:/./.exec!==df},{exec:df});var gf=function(t){return function(e,n){var r,i,o=String(wc(e)),a=uh(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},mf={codeAt:gf(!1),charAt:gf(!0)},vf=mf.charAt,yf=ih.set,wf=ih.getterFor("String Iterator");Bu(String,"String",(function(t){yf(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=wf(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=vf(n,r),e.index+=t.length,{value:t,done:!1})}));var bf=el("species"),xf=!hc((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),kf="$0"==="a".replace(/./,"$0"),Sf=el("replace"),Cf=!!/./[Sf]&&""===/./[Sf]("a","$0"),_f=!hc((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Rf=function(t,e,n,r){var i=el(t),o=!hc((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!hc((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[bf]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&(!xf||!kf||Cf)||"split"===t&&!_f){var s=/./[i],c=n(i,""[t],(function(t,e,n,r,i){return e.exec===df?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:kf,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Cf}),h=c[0],l=c[1];oh(String.prototype,t,h),oh(RegExp.prototype,i,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}r&&Bc(RegExp.prototype[i],"sham",!0)},Tf=mf.charAt,Ef=function(t,e,n){return e+(n?Tf(t,e).length:1)},Af=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==mc(t))throw TypeError("RegExp#exec called on incompatible receiver");return df.call(t,e)},Lf=Math.max,If=Math.min,Mf=Math.floor,Df=/\$([$&'`]|\d\d?|<[^>]*>)/g,Bf=/\$([$&'`]|\d\d?)/g;Rf("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=wc(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var c=n(e,t,this,r);if(c.done)return c.value}var h=Ic(t),l=String(this),u="function"==typeof r;u||(r=String(r));var f=h.global;if(f){var p=h.unicode;h.lastIndex=0}for(var d=[];;){var g=Af(h,l);if(null===g)break;if(d.push(g),!f)break;""===String(g[0])&&(h.lastIndex=Ef(l,ph(h.lastIndex),p))}for(var m,v="",y=0,w=0;w<d.length;w++){g=d[w];for(var b=String(g[0]),x=Lf(If(uh(g.index),l.length),0),k=[],S=1;S<g.length;S++)k.push(void 0===(m=g[S])?m:String(m));var C=g.groups;if(u){var _=[b].concat(k,x,l);void 0!==C&&_.push(C);var R=String(r.apply(void 0,_))}else R=s(b,l,x,k,C,r);x>=y&&(v+=l.slice(y,x)+R,y=x+b.length)}return v+l.slice(y)}];function s(t,n,r,i,o,a){var s=r+t.length,c=i.length,h=Bf;return void 0!==o&&(o=zh(o),h=Df),e.call(a,h,(function(e,a){var h;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":h=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>c){var u=Mf(l/10);return 0===u?e:u<=c?void 0===i[u-1]?a.charAt(1):i[u-1]+a.charAt(1):e}h=i[l-1]}return void 0===h?"":h}))}}));var Ff=el("match"),Nf=function(t){var e;return xc(t)&&(void 0!==(e=t[Ff])?!!e:"RegExp"==mc(t))},Of=el("species"),Pf=function(t,e){var n,r=Ic(t).constructor;return void 0===r||null==(n=Ic(r)[Of])?e:cl(n)},zf=[].push,$f=Math.min,Uf=!hc((function(){return!RegExp(4294967295,"y")}));Rf("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(wc(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Nf(t))return e.call(r,t,i);for(var o,a,s,c=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,u=new RegExp(t.source,h+"g");(o=df.call(u,r))&&!((a=u.lastIndex)>l&&(c.push(r.slice(l,o.index)),o.length>1&&o.index<r.length&&zf.apply(c,o.slice(1)),s=o[0].length,l=a,c.length>=i));)u.lastIndex===o.index&&u.lastIndex++;return l===r.length?!s&&u.test("")||c.push(""):c.push(r.slice(l)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=wc(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=Ic(t),s=String(this),c=Pf(a,RegExp),h=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Uf?"y":"g"),u=new c(Uf?a:"^(?:"+a.source+")",l),f=void 0===i?4294967295:i>>>0;if(0===f)return[];if(0===s.length)return null===Af(u,s)?[s]:[];for(var p=0,d=0,g=[];d<s.length;){u.lastIndex=Uf?d:0;var m,v=Af(u,Uf?s:s.slice(d));if(null===v||(m=$f(ph(u.lastIndex+(Uf?0:d)),s.length))===p)d=Ef(s,d,h);else{if(g.push(s.slice(p,d)),g.length===f)return g;for(var y=1;y<=v.length-1;y++)if(g.push(v[y]),g.length===f)return g;d=p=m}}return g.push(s.slice(p)),g}]}),!Uf);var Hf,jf=function(t){if(Nf(t))throw TypeError("The method doesn't accept regular expressions");return t},Vf=el("match"),qf=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Vf]=!1,"/./"[t](e)}catch(t){}}return!1},Gf=Lc.f,Wf="".startsWith,Zf=Math.min,Kf=qf("startsWith"),Xf=!(Kf||(Hf=Gf(String.prototype,"startsWith"),!Hf||Hf.writable));Fh({target:"String",proto:!0,forced:!Xf&&!Kf},{startsWith:function(t){var e=String(wc(this));jf(t);var n=ph(Zf(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Wf?Wf.call(e,r,n):e.slice(n,n+r.length)===r}});var Yf="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Qf="["+Yf+"]",Jf=RegExp("^"+Qf+Qf+"*"),tp=RegExp(Qf+Qf+"*$"),ep=function(t){return function(e){var n=String(wc(e));return 1&t&&(n=n.replace(Jf,"")),2&t&&(n=n.replace(tp,"")),n}},np={start:ep(1),end:ep(2),trim:ep(3)},rp=np.trim;Fh({target:"String",proto:!0,forced:function(t){return hc((function(){return!!Yf[t]()||"âÂá "!="âÂá "[t]()||Yf[t].name!==t}))}("trim")},{trim:function(){return rp(this)}});var ip={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var op in ip){var ap=cc[op],sp=ap&&ap.prototype;if(sp&&sp.forEach!==au)try{Bc(sp,"forEach",au)}catch(t){sp.forEach=au}}var cp=el("iterator"),hp=el("toStringTag"),lp=Ou.values;for(var up in ip){var fp=cc[up],pp=fp&&fp.prototype;if(pp){if(pp[cp]!==lp)try{Bc(pp,cp,lp)}catch(t){pp[cp]=lp}if(pp[hp]||Bc(pp,hp,up),ip[up])for(var dp in Ou)if(pp[dp]!==Ou[dp])try{Bc(pp,dp,Ou[dp])}catch(t){pp[dp]=Ou[dp]}}}var gp=function(t,e,n){var r,i;return Au&&"function"==typeof(r=e.constructor)&&r!==n&&xc(i=r.prototype)&&i!==n.prototype&&Au(t,i),t},mp=Sh.f,vp=Lc.f,yp=Dc.f,wp=np.trim,bp=cc.Number,xp=bp.prototype,kp="Number"==mc(Wh(xp)),Sp=function(t){var e,n,r,i,o,a,s,c,h=kc(t,!1);if("string"==typeof h&&h.length>2)if(43===(e=(h=wp(h)).charCodeAt(0))||45===e){if(88===(n=h.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(h.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+h}for(a=(o=h.slice(2)).length,s=0;s<a;s++)if((c=o.charCodeAt(s))<48||c>i)return NaN;return parseInt(o,r)}return+h};if(Dh("Number",!bp(" 0o1")||!bp("0b1")||bp("+0x1"))){for(var Cp,_p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof _p&&(kp?hc((function(){xp.valueOf.call(n)})):"Number"!=mc(n))?gp(new bp(Sp(e)),n,_p):Sp(e)},Rp=lc?mp(bp):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Tp=0;Rp.length>Tp;Tp++)Cc(bp,Cp=Rp[Tp])&&!Cc(_p,Cp)&&yp(_p,Cp,vp(bp,Cp));_p.prototype=xp,xp.constructor=_p,oh(cc,"Number",_p)}Fh({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var Ep=Object.assign,Ap=Object.defineProperty,Lp=!Ep||hc((function(){if(lc&&1!==Ep({b:1},Ep(Ap({},"a",{enumerable:!0,get:function(){Ap(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=Ep({},t)[n]||"abcdefghijklmnopqrst"!=$h(Ep({},e)).join("")}))?function(t,e){for(var n=zh(t),r=arguments.length,i=1,o=Ch.f,a=pc.f;r>i;)for(var s,c=yc(arguments[i++]),h=o?$h(c).concat(o(c)):$h(c),l=h.length,u=0;l>u;)s=h[u++],lc&&!a.call(c,s)||(n[s]=c[s]);return n}:Ep;Fh({target:"Object",stat:!0,forced:Object.assign!==Lp},{assign:Lp});var Ip=function(t,e,n,r,i,o,a){Number.isNaN(o)&&(o=1),void 0!==t&&(t<=e?(this.chr1=t,this.chr2=e,this.x=r,this.y=i):(this.chr1=e,this.chr2=t,this.x=i,this.y=r),this.zoom=n,this.pixelSize=o,"undefined"===a&&(a=void 0),this.normalization=a)};Ip.prototype.stringify=function(){return this.chr1+","+this.chr2+","+this.zoom+","+this.x+","+this.y+","+this.pixelSize+","+this.normalization},Ip.prototype.clone=function(){return Object.assign(new Ip,this)},Ip.prototype.equals=function(t){return JSON.stringify(this)===JSON.stringify(t)},Ip.parse=function(t){var e=t.split(",");return new Ip(parseInt(e[0]),parseInt(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5]),e.length>6?e[6]:"NONE")};var Mp=np.trim,Dp=cc.parseFloat,Bp=1/Dp(Yf+"-0")!=-1/0?function(t){var e=Mp(String(t)),n=Dp(e);return 0===n&&"-"==e.charAt(0)?-0:n}:Dp;Fh({target:"Number",stat:!0,forced:Number.parseFloat!=Bp},{parseFloat:Bp});var Fp=function(t){this.threshold=t,this.positiveScale=new Np({threshold:Math.log(t),r:255,g:0,b:0}),this.negativeScale=new Np({threshold:Math.log(t),r:0,g:0,b:255})};Fp.prototype.setThreshold=function(t){this.threshold=t,this.positiveScale.setThreshold(Math.log(t)),this.negativeScale.setThreshold(Math.log(t))},Fp.prototype.getThreshold=function(){return this.threshold},Fp.prototype.setColorComponents=function(t,e){return"-"===e?this.negativeScale.setColorComponents(t):this.positiveScale.setColorComponents(t)},Fp.prototype.getColorComponents=function(t){return"-"===t?this.negativeScale.getColorComponents():this.positiveScale.getColorComponents()},Fp.prototype.getColor=function(t){var e=Math.log(t);return e<0?this.negativeScale.getColor(-e):this.positiveScale.getColor(e)},Fp.prototype.stringify=function(){return"R:"+this.threshold+":"+this.positiveScale.stringify()+":"+this.negativeScale.stringify()};var Np=function(t){this.threshold=t.threshold,this.r=t.r,this.g=t.g,this.b=t.b,this.cache=[],this.nbins=2e3,this.binsize=this.threshold/this.nbins};Np.prototype.setThreshold=function(t){this.threshold=t,this.cache=[],this.binsize=this.threshold/this.nbins},Np.prototype.getThreshold=function(){return this.threshold},Np.prototype.setColorComponents=function(t){this.r=t.r,this.g=t.g,this.b=t.b,this.cache=[]},Np.prototype.getColorComponents=function(){return{r:this.r,g:this.g,b:this.b}},Np.prototype.equals=function(t){return JSON.stringify(this)===JSON.stringify(t)},Np.prototype.getColor=function(t){var e=Math.floor(Math.min(this.threshold,t)/this.binsize),n=this.cache[e];if(!n){t<=0?t=0:t>=this.threshold&&(t=this.threshold);var r=(t-0)/(this.threshold-0),i=Math.floor(255+r*(this.r-255)),o=Math.floor(255+r*(this.g-255)),a=Math.floor(255+r*(this.b-255));n={red:i,green:o,blue:a,rgb:"rgb("+i+","+o+","+a+")"},this.cache[e]=n}return n},Np.prototype.stringify=function(){return this.threshold+","+this.r+","+this.g+","+this.b},Np.parse=function(t){var e,n;return t.startsWith("R:")?(e=t.substring(2).split(":"),(n=new Fp(Number.parseFloat(e[0]))).positiveScale=r(e[1]),n.negativeScale=r(e[2]),n):r(t);function r(t){var e,n;return e={threshold:(n=t.split(","))[0],r:n[1],g:n[2],b:n[3]},new Np(e)}};var Op={},Pp="displayAllMatrix",zp="displayLowerMatrix",$p="displayUpperMatrix",Up={"*s3e/":"https://hicfiles.s3.amazonaws.com/external/","*s3/":"https://hicfiles.s3.amazonaws.com/","*s3e_/":"http://hicfiles.s3.amazonaws.com/external/","*s3_/":"http://hicfiles.s3.amazonaws.com/","*enc/":"https://www.encodeproject.org/files/"};function Hp(t,e,n){var r,i,o,a,s,c,h,l,u,f,p,d,g;if(r=t.hicUrl,i=t.name,o=t.state,a=t.colorScale,s=t.tracks,c=t.selectedGene,h=t.nvi,t.normVectorFiles,l=t.controlUrl,u=t.controlName,t.ratioColorScale,f=t.displayMode,p=t.controlNvi,d=t.caption,g=t.cycle,r&&(r=jp(r,n),Object.keys(Up).forEach((function(t){var e=Up[t];r.startsWith(t)&&(r=r.replace(t,e))})),e.url=r),i&&(e.name=jp(i,n)),l&&(l=jp(l,n),Object.keys(Up).forEach((function(t){var e=Up[t];l.startsWith(t)&&(l=l.replace(t,e))})),e.controlUrl=l),u&&(e.controlName=jp(u,n)),o&&(o=jp(o,n),e.state=Ip.parse(o)),a&&(a=jp(a,n),e.colorScale=Np.parse(a)),f&&(e.displayMode=jp(f,n)),s&&(s=jp(s,n),e.tracks=function(t){var n=t.split("|||"),r=[],o=!0,a=!1,s=void 0;try{for(var c,h=n[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var l=c.value,u=l.split("|"),f=u.pop(),p=u.length>1?u[0]:l;if(p&&p.trim().length>0&&"undefined"!==p){for(var d=Object.keys(Up),g=0,m=d;g<m.length;g++){var v=m[g],y=Up[v];if(p.startsWith(v)){p=p.replace(v,y);break}}if(e={url:p},u.length>1&&(i=u[1],e.name=Vp(i,"$","|")),u.length>2){var w=u[2];if(w.startsWith("-")){var b=w.substring(1).split("-");e.min=-parseFloat(b[0]),e.max=parseFloat(b[1])}else{var x=w.split("-");e.min=parseFloat(x[0]),e.max=parseFloat(x[1])}}f&&(e.color=f),r.push(e)}}}catch(t){a=!0,s=t}finally{try{o||null==h.return||h.return()}finally{if(a)throw s}}return r}(s),e.tracks&&e.oauthToken&&e.tracks.forEach((function(t){t.oauthToken=e.oauthToken}))),c&&(Op.selectedGene=c),d){d=jp(d,n);var m=document.getElementById("hic-caption");m&&(m.textContent=d)}e.cycle=g,h&&(e.nvi=jp(h,n)),p&&(e.controlNvi=jp(p,n))}function jp(t,e){if(e)return decodeURIComponent(t);var n=Vp(t,"%26","&");return n=Vp(n,"%20"," "),n=Vp(n,"+"," "),n=Vp(n,"%7C","|"),n=Vp(n,"%23","#"),n=Vp(n,"%3F","?"),n=Vp(n,"%3D","=")}function Vp(t,e,n){return t.split(e).join(n)}function qp(t){var e,n,r,i,o,a;for(o={},e=t.indexOf("?"),n=t.lastIndexOf("#"),e>t.indexOf("=")&&(e=-1),n<0&&(n=t.length),r=e+1;r<n;)(i=t.indexOf("&",r))<0&&(i=n),2===(a=t.substring(r,i).split("=",2)).length&&(o[a[0]]=a[1]),r=i+1;return o}var Gp,Wp,Zp=function(t,e,n){var r=kc(e);r in t?Dc.f(t,r,dc(0,n)):t[r]=n},Kp=ch("navigator","userAgent")||"",Xp=cc.process,Yp=Xp&&Xp.versions,Qp=Yp&&Yp.v8;Qp?Wp=(Gp=Qp.split("."))[0]+Gp[1]:Kp&&(!(Gp=Kp.match(/Edge\/(\d+)/))||Gp[1]>=74)&&(Gp=Kp.match(/Chrome\/(\d+)/))&&(Wp=Gp[1]);var Jp=Wp&&+Wp,td=el("species"),ed=function(t){return Jp>=51||!hc((function(){var e=[];return(e.constructor={})[td]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},nd=el("isConcatSpreadable"),rd=Jp>=51||!hc((function(){var t=[];return t[nd]=!1,t.concat()[0]!==t})),id=ed("concat"),od=function(t){if(!xc(t))return!1;var e=t[nd];return void 0!==e?!!e:Ph(t)};Fh({target:"Array",proto:!0,forced:!rd||!id},{concat:function(t){var e,n,r,i,o,a=zh(this),s=ul(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],od(o)){if(c+(i=ph(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,c++)n in o&&Zp(s,c,o[n])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Zp(s,c++,o)}return s.length=c,s}});var ad=dl.filter,sd=ed("filter"),cd=nu("filter");Fh({target:"Array",proto:!0,forced:!sd||!cd},{filter:function(t){return ad(this,t,arguments.length>1?arguments[1]:void 0)}});var hd=dl.find,ld=!0,ud=nu("find");"find"in[]&&Array(1).find((function(){ld=!1})),Fh({target:"Array",proto:!0,forced:ld||!ud},{find:function(t){return hd(this,t,arguments.length>1?arguments[1]:void 0)}}),vu("find");var fd=yh.includes,pd=nu("indexOf",{ACCESSORS:!0,1:0});Fh({target:"Array",proto:!0,forced:!pd},{includes:function(t){return fd(this,t,arguments.length>1?arguments[1]:void 0)}}),vu("includes");var dd=dl.map,gd=ed("map"),md=nu("map");Fh({target:"Array",proto:!0,forced:!gd||!md},{map:function(t){return dd(this,t,arguments.length>1?arguments[1]:void 0)}});var vd=cc.Promise,yd=function(t,e,n){for(var r in e)oh(t,r,e[r],n);return t},wd=el("species"),bd=function(t){var e=ch(t),n=Dc.f;lc&&e&&!e[wd]&&n(e,wd,{configurable:!0,get:function(){return this}})},xd=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},kd=el("iterator"),Sd=Array.prototype,Cd=function(t){return void 0!==t&&(yu.Array===t||Sd[kd]===t)},_d=el("iterator"),Rd=function(t){if(null!=t)return t[_d]||t["@@iterator"]||yu[nf(t)]},Td=function(t,e,n,r){try{return r?e(Ic(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&Ic(i.call(t)),e}},Ed=ac((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,i,o){var a,s,c,h,l,u,f,p=hl(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(s=Rd(t)))throw TypeError("Target is not iterable");if(Cd(s)){for(c=0,h=ph(t.length);h>c;c++)if((l=i?p(Ic(f=t[c])[0],f[1]):p(t[c]))&&l instanceof e)return l;return new e(!1)}a=s.call(t)}for(u=a.next;!(f=u.call(a)).done;)if("object"==typeof(l=Td(a,p,f.value,i))&&l&&l instanceof e)return l;return new e(!1)}).stop=function(t){return new e(!0,t)}})),Ad=el("iterator"),Ld=!1;try{var Id=0,Md={next:function(){return{done:!!Id++}},return:function(){Ld=!0}};Md[Ad]=function(){return this},Array.from(Md,(function(){throw 2}))}catch(t){}var Dd,Bd,Fd,Nd=function(t,e){if(!e&&!Ld)return!1;var n=!1;try{var r={};r[Ad]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Od=/(iphone|ipod|ipad).*applewebkit/i.test(Kp),Pd=cc.location,zd=cc.setImmediate,$d=cc.clearImmediate,Ud=cc.process,Hd=cc.MessageChannel,jd=cc.Dispatch,Vd=0,qd={},Gd=function(t){if(qd.hasOwnProperty(t)){var e=qd[t];delete qd[t],e()}},Wd=function(t){return function(){Gd(t)}},Zd=function(t){Gd(t.data)},Kd=function(t){cc.postMessage(t+"",Pd.protocol+"//"+Pd.host)};zd&&$d||(zd=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return qd[++Vd]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Dd(Vd),Vd},$d=function(t){delete qd[t]},"process"==mc(Ud)?Dd=function(t){Ud.nextTick(Wd(t))}:jd&&jd.now?Dd=function(t){jd.now(Wd(t))}:Hd&&!Od?(Fd=(Bd=new Hd).port2,Bd.port1.onmessage=Zd,Dd=hl(Fd.postMessage,Fd,1)):!cc.addEventListener||"function"!=typeof postMessage||cc.importScripts||hc(Kd)?Dd="onreadystatechange"in Tc("script")?function(t){Hh.appendChild(Tc("script")).onreadystatechange=function(){Hh.removeChild(this),Gd(t)}}:function(t){setTimeout(Wd(t),0)}:(Dd=Kd,cc.addEventListener("message",Zd,!1)));var Xd,Yd,Qd,Jd,tg,eg,ng,rg,ig={set:zd,clear:$d},og=Lc.f,ag=ig.set,sg=cc.MutationObserver||cc.WebKitMutationObserver,cg=cc.process,hg=cc.Promise,lg="process"==mc(cg),ug=og(cc,"queueMicrotask"),fg=ug&&ug.value;fg||(Xd=function(){var t,e;for(lg&&(t=cg.domain)&&t.exit();Yd;){e=Yd.fn,Yd=Yd.next;try{e()}catch(t){throw Yd?Jd():Qd=void 0,t}}Qd=void 0,t&&t.enter()},lg?Jd=function(){cg.nextTick(Xd)}:sg&&!Od?(tg=!0,eg=document.createTextNode(""),new sg(Xd).observe(eg,{characterData:!0}),Jd=function(){eg.data=tg=!tg}):hg&&hg.resolve?(ng=hg.resolve(void 0),rg=ng.then,Jd=function(){rg.call(ng,Xd)}):Jd=function(){ag.call(cc,Xd)});var pg,dg,gg,mg,vg=fg||function(t){var e={fn:t,next:void 0};Qd&&(Qd.next=e),Yd||(Yd=e,Jd()),Qd=e},yg=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=cl(e),this.reject=cl(n)},wg={f:function(t){return new yg(t)}},bg=function(t,e){if(Ic(t),xc(e)&&e.constructor===t)return e;var n=wg.f(t);return(0,n.resolve)(e),n.promise},xg=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},kg=ig.set,Sg=el("species"),Cg="Promise",_g=ih.get,Rg=ih.set,Tg=ih.getterFor(Cg),Eg=vd,Ag=cc.TypeError,Lg=cc.document,Ig=cc.process,Mg=ch("fetch"),Dg=wg.f,Bg=Dg,Fg="process"==mc(Ig),Ng=!!(Lg&&Lg.createEvent&&cc.dispatchEvent),Og=Dh(Cg,(function(){if(!(Uc(Eg)!==String(Eg))){if(66===Jp)return!0;if(!Fg&&"function"!=typeof PromiseRejectionEvent)return!0}if(Jp>=51&&/native code/.test(Eg))return!1;var t=Eg.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Sg]=e,!(t.then((function(){}))instanceof e)})),Pg=Og||!Nd((function(t){Eg.all(t).catch((function(){}))})),zg=function(t){var e;return!(!xc(t)||"function"!=typeof(e=t.then))&&e},$g=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;vg((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var s,c,h,l=r[a++],u=o?l.ok:l.fail,f=l.resolve,p=l.reject,d=l.domain;try{u?(o||(2===e.rejection&&Vg(t,e),e.rejection=1),!0===u?s=i:(d&&d.enter(),s=u(i),d&&(d.exit(),h=!0)),s===l.promise?p(Ag("Promise-chain cycle")):(c=zg(s))?c.call(s,f,p):f(s)):p(i)}catch(t){d&&!h&&d.exit(),p(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Hg(t,e)}))}},Ug=function(t,e,n){var r,i;Ng?((r=Lg.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),cc.dispatchEvent(r)):r={promise:e,reason:n},(i=cc["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=cc.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Hg=function(t,e){kg.call(cc,(function(){var n,r=e.value;if(jg(e)&&(n=xg((function(){Fg?Ig.emit("unhandledRejection",r,t):Ug("unhandledrejection",t,r)})),e.rejection=Fg||jg(e)?2:1,n.error))throw n.value}))},jg=function(t){return 1!==t.rejection&&!t.parent},Vg=function(t,e){kg.call(cc,(function(){Fg?Ig.emit("rejectionHandled",t):Ug("rejectionhandled",t,e.value)}))},qg=function(t,e,n,r){return function(i){t(e,n,i,r)}},Gg=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,$g(t,e,!0))},Wg=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw Ag("Promise can't be resolved itself");var i=zg(n);i?vg((function(){var r={done:!1};try{i.call(n,qg(Wg,t,r,e),qg(Gg,t,r,e))}catch(n){Gg(t,r,n,e)}})):(e.value=n,e.state=1,$g(t,e,!1))}catch(n){Gg(t,{done:!1},n,e)}}};Og&&(Eg=function(t){xd(this,Eg,Cg),cl(t),pg.call(this);var e=_g(this);try{t(qg(Wg,this,e),qg(Gg,this,e))}catch(t){Gg(this,e,t)}},(pg=function(t){Rg(this,{type:Cg,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=yd(Eg.prototype,{then:function(t,e){var n=Tg(this),r=Dg(Pf(this,Eg));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Fg?Ig.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&$g(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),dg=function(){var t=new pg,e=_g(t);this.promise=t,this.resolve=qg(Wg,t,e),this.reject=qg(Gg,t,e)},wg.f=Dg=function(t){return t===Eg||t===gg?new dg(t):Bg(t)},"function"==typeof vd&&(mg=vd.prototype.then,oh(vd.prototype,"then",(function(t,e){var n=this;return new Eg((function(t,e){mg.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Mg&&Fh({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return bg(Eg,Mg.apply(cc,arguments))}}))),Fh({global:!0,wrap:!0,forced:Og},{Promise:Eg}),sl(Eg,Cg,!1),bd(Cg),gg=ch(Cg),Fh({target:Cg,stat:!0,forced:Og},{reject:function(t){var e=Dg(this);return e.reject.call(void 0,t),e.promise}}),Fh({target:Cg,stat:!0,forced:Og},{resolve:function(t){return bg(this,t)}}),Fh({target:Cg,stat:!0,forced:Pg},{all:function(t){var e=this,n=Dg(e),r=n.resolve,i=n.reject,o=xg((function(){var n=cl(e.resolve),o=[],a=0,s=1;Ed(t,(function(t){var c=a++,h=!1;o.push(void 0),s++,n.call(e,t).then((function(t){h||(h=!0,o[c]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Dg(e),r=n.reject,i=xg((function(){var i=cl(e.resolve);Ed(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Zg=!hc((function(){return Object.isExtensible(Object.preventExtensions({}))})),Kg=ac((function(t){var e=Dc.f,n=Wc("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!xc(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Cc(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!Cc(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Zg&&a.REQUIRED&&i(t)&&!Cc(t,n)&&o(t),t}};Xc[n]=!0})),Xg=(Kg.REQUIRED,Kg.fastKey,Kg.getWeakData,Kg.onFreeze,Dc.f),Yg=Kg.fastKey,Qg=ih.set,Jg=ih.getterFor,tm=(function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=cc[t],s=a&&a.prototype,c=a,h={},l=function(t){var e=s[t];oh(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!xc(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!xc(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!xc(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Dh(t,"function"!=typeof a||!(i||s.forEach&&!hc((function(){(new a).entries().next()})))))c=n.getConstructor(e,t,r,o),Kg.REQUIRED=!0;else if(Dh(t,!0)){var u=new c,f=u[o](i?{}:-0,1)!=u,p=hc((function(){u.has(1)})),d=Nd((function(t){new a(t)})),g=!i&&hc((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));d||((c=e((function(e,n){xd(e,c,t);var i=gp(new a,e,c);return null!=n&&Ed(n,i[o],i,r),i}))).prototype=s,s.constructor=c),(p||g)&&(l("delete"),l("has"),r&&l("get")),(g||f)&&l(o),i&&s.clear&&delete s.clear}h[t]=c,Fh({global:!0,forced:c!=a},h),sl(c,t),i||n.setStrong(c,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){xd(t,i,e),Qg(t,{type:e,index:Wh(null),first:void 0,last:void 0,size:0}),lc||(t.size=0),null!=o&&Ed(o,t[r],t,n)})),o=Jg(e),a=function(t,e,n){var r,i,a=o(t),c=s(t,e);return c?c.value=n:(a.last=c={index:i=Yg(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=c),r&&(r.next=c),lc?a.size++:t.size++,"F"!==i&&(a.index[i]=c)),t},s=function(t,e){var n,r=o(t),i=Yg(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return yd(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,lc?t.size=0:this.size=0},delete:function(t){var e=o(this),n=s(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),lc?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=o(this),r=hl(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),yd(i.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),lc&&Xg(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=Jg(e),o=Jg(r);Bu(t,e,(function(t,e){Qg(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),bd(e)}}),Lc.f),em="".endsWith,nm=Math.min,rm=qf("endsWith"),im=!rm&&!!function(){var t=tm(String.prototype,"endsWith");return t&&!t.writable}();Fh({target:"String",proto:!0,forced:!im&&!rm},{endsWith:function(t){var e=String(wc(this));jf(t);var n=arguments.length>1?arguments[1]:void 0,r=ph(e.length),i=void 0===n?r:nm(ph(n),r),o=String(t);return em?em.call(e,o,i):e.slice(i-o.length,i)===o}}),Fh({target:"String",proto:!0,forced:!qf("includes")},{includes:function(t){return!!~String(wc(this)).indexOf(jf(t),arguments.length>1?arguments[1]:void 0)}});var om=el("iterator"),am=!hc((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[om]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),sm=function(t){var e,n,r,i,o,a,s=zh(t),c="function"==typeof this?this:Array,h=arguments.length,l=h>1?arguments[1]:void 0,u=void 0!==l,f=Rd(s),p=0;if(u&&(l=hl(l,h>2?arguments[2]:void 0,2)),null==f||c==Array&&Cd(f))for(n=new c(e=ph(s.length));e>p;p++)a=u?l(s[p],p):s[p],Zp(n,p,a);else for(o=(i=f.call(s)).next,n=new c;!(r=o.call(i)).done;p++)a=u?Td(i,l,[r.value,p],!0):r.value,Zp(n,p,a);return n.length=p,n},cm=/[^\0-\u007E]/,hm=/[.\u3002\uFF0E\uFF61]/g,lm="Overflow: input needs wider integers to process",um=Math.floor,fm=String.fromCharCode,pm=function(t){return t+22+75*(t<26)},dm=function(t,e,n){var r=0;for(t=n?um(t/700):t>>1,t+=um(t/e);t>455;r+=36)t=um(t/35);return um(r+36*t/(t+38))},gm=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,o=128,a=0,s=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(fm(n));var c=r.length,h=c;for(c&&r.push("-");h<i;){var l=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<l&&(l=n);var u=h+1;if(l-o>um((2147483647-a)/u))throw RangeError(lm);for(a+=(l-o)*u,o=l,e=0;e<t.length;e++){if((n=t[e])<o&&++a>2147483647)throw RangeError(lm);if(n==o){for(var f=a,p=36;;p+=36){var d=p<=s?1:p>=s+26?26:p-s;if(f<d)break;var g=f-d,m=36-d;r.push(fm(pm(d+g%m))),f=um(g/m)}r.push(fm(pm(f))),s=dm(a,u,h==c),a=0,++h}}++a,++o}return r.join("")},mm=function(t){var e=Rd(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return Ic(e.call(t))},vm=ch("fetch"),ym=ch("Headers"),wm=el("iterator"),bm=ih.set,xm=ih.getterFor("URLSearchParams"),km=ih.getterFor("URLSearchParamsIterator"),Sm=/\+/g,Cm=Array(4),_m=function(t){return Cm[t-1]||(Cm[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},Rm=function(t){try{return decodeURIComponent(t)}catch(e){return t}},Tm=function(t){var e=t.replace(Sm," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(_m(n--),Rm);return e}},Em=/[!'()~]|%20/g,Am={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Lm=function(t){return Am[t]},Im=function(t){return encodeURIComponent(t).replace(Em,Lm)},Mm=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:Tm(r.shift()),value:Tm(r.join("="))}))},Dm=function(t){this.entries.length=0,Mm(this.entries,t)},Bm=function(t,e){if(t<e)throw TypeError("Not enough arguments")},Fm=Eu((function(t,e){bm(this,{type:"URLSearchParamsIterator",iterator:mm(xm(t).entries),kind:e})}),"Iterator",(function(){var t=km(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),Nm=function(){xd(this,Nm,"URLSearchParams");var t,e,n,r,i,o,a,s,c,h=arguments.length>0?arguments[0]:void 0,l=this,u=[];if(bm(l,{type:"URLSearchParams",entries:u,updateURL:function(){},updateSearchParams:Dm}),void 0!==h)if(xc(h))if("function"==typeof(t=Rd(h)))for(n=(e=t.call(h)).next;!(r=n.call(e)).done;){if((a=(o=(i=mm(Ic(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");u.push({key:a.value+"",value:s.value+""})}else for(c in h)Cc(h,c)&&u.push({key:c,value:h[c]+""});else Mm(u,"string"==typeof h?"?"===h.charAt(0)?h.slice(1):h:h+"")},Om=Nm.prototype;yd(Om,{append:function(t,e){Bm(arguments.length,2);var n=xm(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){Bm(arguments.length,1);for(var e=xm(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){Bm(arguments.length,1);for(var e=xm(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){Bm(arguments.length,1);for(var e=xm(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){Bm(arguments.length,1);for(var e=xm(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){Bm(arguments.length,1);for(var n,r=xm(this),i=r.entries,o=!1,a=t+"",s=e+"",c=0;c<i.length;c++)(n=i[c]).key===a&&(o?i.splice(c--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=xm(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=xm(this).entries,r=hl(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new Fm(this,"keys")},values:function(){return new Fm(this,"values")},entries:function(){return new Fm(this,"entries")}},{enumerable:!0}),oh(Om,wm,Om.entries),oh(Om,"toString",(function(){for(var t,e=xm(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(Im(t.key)+"="+Im(t.value));return n.join("&")}),{enumerable:!0}),sl(Nm,"URLSearchParams"),Fh({global:!0,forced:!am},{URLSearchParams:Nm}),am||"function"!=typeof vm||"function"!=typeof ym||Fh({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(e=arguments[1],xc(e)&&(n=e.body,"URLSearchParams"===nf(n)&&((r=e.headers?new ym(e.headers):new ym).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=Wh(e,{body:dc(0,String(n)),headers:dc(0,r)}))),i.push(e)),vm.apply(this,i)}});var Pm,zm={URLSearchParams:Nm,getState:xm},$m=mf.codeAt,Um=cc.URL,Hm=zm.URLSearchParams,jm=zm.getState,Vm=ih.set,qm=ih.getterFor("URL"),Gm=Math.floor,Wm=Math.pow,Zm=/[A-Za-z]/,Km=/[\d+\-.A-Za-z]/,Xm=/\d/,Ym=/^(0x|0X)/,Qm=/^[0-7]+$/,Jm=/^\d+$/,tv=/^[\dA-Fa-f]+$/,ev=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,nv=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,rv=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,iv=/[\u0009\u000A\u000D]/g,ov=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(n=sv(e.slice(1,-1))))return"Invalid host";t.host=n}else if(gv(t)){if(e=function(t){var e,n,r=[],i=t.toLowerCase().replace(hm,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(cm.test(n)?"xn--"+gm(n):n);return r.join(".")}(e),ev.test(e))return"Invalid host";if(null===(n=av(e)))return"Invalid host";t.host=n}else{if(nv.test(e))return"Invalid host";for(n="",r=sm(e),i=0;i<r.length;i++)n+=pv(r[i],hv);t.host=n}},av=function(t){var e,n,r,i,o,a,s,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(e=c.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=c[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=Ym.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?Jm:8==o?Qm:tv).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=Wm(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*Wm(256,3-r);return s},sv=function(t){var e,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],h=0,l=null,u=0,f=function(){return t.charAt(u)};if(":"==f()){if(":"!=t.charAt(1))return;u+=2,l=++h}for(;f();){if(8==h)return;if(":"!=f()){for(e=n=0;n<4&&tv.test(f());)e=16*e+parseInt(f(),16),u++,n++;if("."==f()){if(0==n)return;if(u-=n,h>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;u++}if(!Xm.test(f()))return;for(;Xm.test(f());){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;u++}c[h]=256*c[h]+i,2!=++r&&4!=r||h++}if(4!=r)return;break}if(":"==f()){if(u++,!f())return}else if(f())return;c[h++]=e}else{if(null!==l)return;u++,l=++h}}if(null!==l)for(a=h-l,h=7;0!=h&&a>0;)s=c[h],c[h--]=c[l+a-1],c[l+--a]=s;else if(8!=h)return;return c},cv=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=Gm(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},hv={},lv=Lp({},hv,{" ":1,'"':1,"<":1,">":1,"`":1}),uv=Lp({},lv,{"#":1,"?":1,"{":1,"}":1}),fv=Lp({},uv,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),pv=function(t,e){var n=$m(t,0);return n>32&&n<127&&!Cc(e,t)?t:encodeURIComponent(t)},dv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},gv=function(t){return Cc(dv,t.scheme)},mv=function(t){return""!=t.username||""!=t.password},vv=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},yv=function(t,e){var n;return 2==t.length&&Zm.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},wv=function(t){var e;return t.length>1&&yv(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},bv=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&yv(e[0],!0)||e.pop()},xv=function(t){return"."===t||"%2e"===t.toLowerCase()},kv={},Sv={},Cv={},_v={},Rv={},Tv={},Ev={},Av={},Lv={},Iv={},Mv={},Dv={},Bv={},Fv={},Nv={},Ov={},Pv={},zv={},$v={},Uv={},Hv={},jv=function(t,e,n,r){var i,o,a,s,c,h=n||kv,l=0,u="",f=!1,p=!1,d=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(rv,"")),e=e.replace(iv,""),i=sm(e);l<=i.length;){switch(o=i[l],h){case kv:if(!o||!Zm.test(o)){if(n)return"Invalid scheme";h=Cv;continue}u+=o.toLowerCase(),h=Sv;break;case Sv:if(o&&(Km.test(o)||"+"==o||"-"==o||"."==o))u+=o.toLowerCase();else{if(":"!=o){if(n)return"Invalid scheme";u="",h=Cv,l=0;continue}if(n&&(gv(t)!=Cc(dv,u)||"file"==u&&(mv(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=u,n)return void(gv(t)&&dv[t.scheme]==t.port&&(t.port=null));u="","file"==t.scheme?h=Fv:gv(t)&&r&&r.scheme==t.scheme?h=_v:gv(t)?h=Av:"/"==i[l+1]?(h=Rv,l++):(t.cannotBeABaseURL=!0,t.path.push(""),h=$v)}break;case Cv:if(!r||r.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==o){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,h=Hv;break}h="file"==r.scheme?Fv:Tv;continue;case _v:if("/"!=o||"/"!=i[l+1]){h=Tv;continue}h=Lv,l++;break;case Rv:if("/"==o){h=Iv;break}h=zv;continue;case Tv:if(t.scheme=r.scheme,o==Pm)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==o||"\\"==o&&gv(t))h=Ev;else if("?"==o)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",h=Uv;else{if("#"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),h=zv;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",h=Hv}break;case Ev:if(!gv(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,h=zv;continue}h=Iv}else h=Lv;break;case Av:if(h=Lv,"/"!=o||"/"!=u.charAt(l+1))continue;l++;break;case Lv:if("/"!=o&&"\\"!=o){h=Iv;continue}break;case Iv:if("@"==o){f&&(u="%40"+u),f=!0,a=sm(u);for(var g=0;g<a.length;g++){var m=a[g];if(":"!=m||d){var v=pv(m,fv);d?t.password+=v:t.username+=v}else d=!0}u=""}else if(o==Pm||"/"==o||"?"==o||"#"==o||"\\"==o&&gv(t)){if(f&&""==u)return"Invalid authority";l-=sm(u).length+1,u="",h=Mv}else u+=o;break;case Mv:case Dv:if(n&&"file"==t.scheme){h=Ov;continue}if(":"!=o||p){if(o==Pm||"/"==o||"?"==o||"#"==o||"\\"==o&&gv(t)){if(gv(t)&&""==u)return"Invalid host";if(n&&""==u&&(mv(t)||null!==t.port))return;if(s=ov(t,u))return s;if(u="",h=Pv,n)return;continue}"["==o?p=!0:"]"==o&&(p=!1),u+=o}else{if(""==u)return"Invalid host";if(s=ov(t,u))return s;if(u="",h=Bv,n==Dv)return}break;case Bv:if(!Xm.test(o)){if(o==Pm||"/"==o||"?"==o||"#"==o||"\\"==o&&gv(t)||n){if(""!=u){var y=parseInt(u,10);if(y>65535)return"Invalid port";t.port=gv(t)&&y===dv[t.scheme]?null:y,u=""}if(n)return;h=Pv;continue}return"Invalid port"}u+=o;break;case Fv:if(t.scheme="file","/"==o||"\\"==o)h=Nv;else{if(!r||"file"!=r.scheme){h=zv;continue}if(o==Pm)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==o)t.host=r.host,t.path=r.path.slice(),t.query="",h=Uv;else{if("#"!=o){wv(i.slice(l).join(""))||(t.host=r.host,t.path=r.path.slice(),bv(t)),h=zv;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",h=Hv}}break;case Nv:if("/"==o||"\\"==o){h=Ov;break}r&&"file"==r.scheme&&!wv(i.slice(l).join(""))&&(yv(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),h=zv;continue;case Ov:if(o==Pm||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&yv(u))h=zv;else if(""==u){if(t.host="",n)return;h=Pv}else{if(s=ov(t,u))return s;if("localhost"==t.host&&(t.host=""),n)return;u="",h=Pv}continue}u+=o;break;case Pv:if(gv(t)){if(h=zv,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Pm&&(h=zv,"/"!=o))continue}else t.fragment="",h=Hv;else t.query="",h=Uv;break;case zv:if(o==Pm||"/"==o||"\\"==o&&gv(t)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=u).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(bv(t),"/"==o||"\\"==o&&gv(t)||t.path.push("")):xv(u)?"/"==o||"\\"==o&&gv(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&yv(u)&&(t.host&&(t.host=""),u=u.charAt(0)+":"),t.path.push(u)),u="","file"==t.scheme&&(o==Pm||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",h=Uv):"#"==o&&(t.fragment="",h=Hv)}else u+=pv(o,uv);break;case $v:"?"==o?(t.query="",h=Uv):"#"==o?(t.fragment="",h=Hv):o!=Pm&&(t.path[0]+=pv(o,hv));break;case Uv:n||"#"!=o?o!=Pm&&("'"==o&&gv(t)?t.query+="%27":t.query+="#"==o?"%23":pv(o,hv)):(t.fragment="",h=Hv);break;case Hv:o!=Pm&&(t.fragment+=pv(o,lv))}l++}},Vv=function(t){var e,n,r=xd(this,Vv,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(t),a=Vm(r,{type:"URL"});if(void 0!==i)if(i instanceof Vv)e=qm(i);else if(n=jv(e={},String(i)))throw TypeError(n);if(n=jv(a,o,null,e))throw TypeError(n);var s=a.searchParams=new Hm,c=jm(s);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(s)||null},lc||(r.href=Gv.call(r),r.origin=Wv.call(r),r.protocol=Zv.call(r),r.username=Kv.call(r),r.password=Xv.call(r),r.host=Yv.call(r),r.hostname=Qv.call(r),r.port=Jv.call(r),r.pathname=ty.call(r),r.search=ey.call(r),r.searchParams=ny.call(r),r.hash=ry.call(r))},qv=Vv.prototype,Gv=function(){var t=qm(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,c=t.fragment,h=e+":";return null!==i?(h+="//",mv(t)&&(h+=n+(r?":"+r:"")+"@"),h+=cv(i),null!==o&&(h+=":"+o)):"file"==e&&(h+="//"),h+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(h+="?"+s),null!==c&&(h+="#"+c),h},Wv=function(){var t=qm(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&gv(t)?e+"://"+cv(t.host)+(null!==n?":"+n:""):"null"},Zv=function(){return qm(this).scheme+":"},Kv=function(){return qm(this).username},Xv=function(){return qm(this).password},Yv=function(){var t=qm(this),e=t.host,n=t.port;return null===e?"":null===n?cv(e):cv(e)+":"+n},Qv=function(){var t=qm(this).host;return null===t?"":cv(t)},Jv=function(){var t=qm(this).port;return null===t?"":String(t)},ty=function(){var t=qm(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},ey=function(){var t=qm(this).query;return t?"?"+t:""},ny=function(){return qm(this).searchParams},ry=function(){var t=qm(this).fragment;return t?"#"+t:""},iy=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(lc&&Uh(qv,{href:iy(Gv,(function(t){var e=qm(this),n=String(t),r=jv(e,n);if(r)throw TypeError(r);jm(e.searchParams).updateSearchParams(e.query)})),origin:iy(Wv),protocol:iy(Zv,(function(t){var e=qm(this);jv(e,String(t)+":",kv)})),username:iy(Kv,(function(t){var e=qm(this),n=sm(String(t));if(!vv(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=pv(n[r],fv)}})),password:iy(Xv,(function(t){var e=qm(this),n=sm(String(t));if(!vv(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=pv(n[r],fv)}})),host:iy(Yv,(function(t){var e=qm(this);e.cannotBeABaseURL||jv(e,String(t),Mv)})),hostname:iy(Qv,(function(t){var e=qm(this);e.cannotBeABaseURL||jv(e,String(t),Dv)})),port:iy(Jv,(function(t){var e=qm(this);vv(e)||(""==(t=String(t))?e.port=null:jv(e,t,Bv))})),pathname:iy(ty,(function(t){var e=qm(this);e.cannotBeABaseURL||(e.path=[],jv(e,t+"",Pv))})),search:iy(ey,(function(t){var e=qm(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",jv(e,t,Uv)),jm(e.searchParams).updateSearchParams(e.query)})),searchParams:iy(ny),hash:iy(ry,(function(t){var e=qm(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",jv(e,t,Hv)):e.fragment=null}))}),oh(qv,"toJSON",(function(){return Gv.call(this)}),{enumerable:!0}),oh(qv,"toString",(function(){return Gv.call(this)}),{enumerable:!0}),Um){var oy=Um.createObjectURL,ay=Um.revokeObjectURL;oy&&oh(Vv,"createObjectURL",(function(t){return oy.apply(Um,arguments)})),ay&&oh(Vv,"revokeObjectURL",(function(t){return ay.apply(Um,arguments)}))}sl(Vv,"URL"),Fh({global:!0,forced:!am,sham:!lc},{URL:Vv}),Fh({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});ac((function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n,r){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),a=new k(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var h={};function l(){}function u(){}function f(){}var p={};p[i]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(S([])));g&&g!==e&&n.call(g,i)&&(p=g);var m=f.prototype=l.prototype=Object.create(p);function v(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function y(t){var e;this._invoke=function(r,i){function o(){return new Promise((function(e,o){!function e(r,i,o,a){var s=c(t[r],t,i);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){h.value=t,o(h)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}(r,i,e,o)}))}return e=e?e.then(o,o):o()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return u.prototype=m.constructor=f,f.constructor=u,f[a]=u.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===u||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(y.prototype),y.prototype[o]=function(){return this},t.AsyncIterator=y,t.async=function(e,n,r,i){var o=new y(s(e,n,r,i));return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},v(m),m[a]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function sy(t){return(sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cy(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function hy(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){cy(o,r,i,a,s,"next",t)}function s(t){cy(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ly(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fy(t,e,n){return e&&uy(t.prototype,e),n&&uy(t,n),t}function py(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var dy={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};dy.Zip.CompressionMethod={STORE:0,DEFLATE:8},dy.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},dy.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},dy.Zip.FileHeaderSignature=[80,75,1,2],dy.Zip.LocalFileHeaderSignature=[80,75,3,4],dy.Zip.CentralDirectorySignature=[80,75,5,6],dy.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var n,r=t.length,i=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof e.compressionMethod&&(e.compressionMethod=dy.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case dy.Zip.CompressionMethod.STORE:break;case dy.Zip.CompressionMethod.DEFLATE:i=dy.CRC32.calc(t),t=this.deflateWithOption(t,e),n=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:n,encrypted:!1,size:r,crc32:i})},dy.Zip.prototype.setPassword=function(t){this.password=t},dy.Zip.prototype.compress=function(){var t,e,n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b,x,k,S,C,_,R=this.files,T=0,E=0;for(k=0,S=R.length;k<S;++k){if(p=(t=R[k]).option.filename?t.option.filename.length:0,d=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=dy.CRC32.calc(t.buffer),t.option.compressionMethod){case dy.Zip.CompressionMethod.STORE:break;case dy.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(x=this.createEncryptionKey(t.option.password||this.password),w=t.buffer,(b=new Uint8Array(w.length+12)).set(w,12),w=b,C=0;C<12;++C)w[C]=this.encode(x,11===k?255&t.crc32:256*Math.random()|0);for(_=w.length;C<_;++C)w[C]=this.encode(x,w[C]);t.buffer=w}T+=30+p+t.buffer.length,E+=46+p+g}for(o=22+(this.comment?this.comment.length:0),e=new Uint8Array(T+E+o),n=0,i=(r=T)+E,k=0,S=R.length;k<S;++k)p=(t=R[k]).option.filename?t.option.filename.length:0,d=0,g=t.option.comment?t.option.comment.length:0,a=n,e[n++]=dy.Zip.LocalFileHeaderSignature[0],e[n++]=dy.Zip.LocalFileHeaderSignature[1],e[n++]=dy.Zip.LocalFileHeaderSignature[2],e[n++]=dy.Zip.LocalFileHeaderSignature[3],e[r++]=dy.Zip.FileHeaderSignature[0],e[r++]=dy.Zip.FileHeaderSignature[1],e[r++]=dy.Zip.FileHeaderSignature[2],e[r++]=dy.Zip.FileHeaderSignature[3],20,e[r++]=20,e[r++]=t.option.os||dy.Zip.OperatingSystem.MSDOS,e[n++]=e[r++]=20,e[n++]=e[r++]=0,s=0,(t.option.password||this.password)&&(s|=dy.Zip.Flags.ENCRYPT),e[n++]=e[r++]=255&s,e[n++]=e[r++]=s>>8&255,c=t.option.compressionMethod,e[n++]=e[r++]=255&c,e[n++]=e[r++]=c>>8&255,h=t.option.date||new Date,e[n++]=e[r++]=(7&h.getMinutes())<<5|h.getSeconds()/2|0,e[n++]=e[r++]=h.getHours()<<3|h.getMinutes()>>3,e[n++]=e[r++]=(h.getMonth()+1&7)<<5|h.getDate(),e[n++]=e[r++]=(h.getFullYear()-1980&127)<<1|h.getMonth()+1>>3,l=t.crc32,e[n++]=e[r++]=255&l,e[n++]=e[r++]=l>>8&255,e[n++]=e[r++]=l>>16&255,e[n++]=e[r++]=l>>24&255,u=t.buffer.length,e[n++]=e[r++]=255&u,e[n++]=e[r++]=u>>8&255,e[n++]=e[r++]=u>>16&255,e[n++]=e[r++]=u>>24&255,f=t.size,e[n++]=e[r++]=255&f,e[n++]=e[r++]=f>>8&255,e[n++]=e[r++]=f>>16&255,e[n++]=e[r++]=f>>24&255,e[n++]=e[r++]=255&p,e[n++]=e[r++]=p>>8&255,e[n++]=e[r++]=255&d,e[n++]=e[r++]=d>>8&255,e[r++]=255&g,e[r++]=g>>8&255,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,(m=t.option.filename)&&(e.set(m,n),e.set(m,r),n+=p,r+=p),(v=t.option.extraField)&&(e.set(v,n),e.set(v,r),n+=d,r+=d),(y=t.option.comment)&&(e.set(y,r),r+=g),e.set(t.buffer,n),n+=t.buffer.length;return e[i++]=dy.Zip.CentralDirectorySignature[0],e[i++]=dy.Zip.CentralDirectorySignature[1],e[i++]=dy.Zip.CentralDirectorySignature[2],e[i++]=dy.Zip.CentralDirectorySignature[3],e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&S,e[i++]=S>>8&255,e[i++]=255&S,e[i++]=S>>8&255,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=E>>16&255,e[i++]=E>>24&255,e[i++]=255&T,e[i++]=T>>8&255,e[i++]=T>>16&255,e[i++]=T>>24&255,g=this.comment?this.comment.length:0,e[i++]=255&g,e[i++]=g>>8&255,this.comment&&(e.set(this.comment,i),i+=g),e},dy.Zip.prototype.deflateWithOption=function(t,e){return new dy.RawDeflate(t,e.deflateOption).compress()},dy.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},dy.Zip.prototype.encode=function(t,e){var n=this.getByte(t);return this.updateKeys(t,e),n^e},dy.Zip.prototype.updateKeys=function(t,e){t[0]=dy.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=dy.CRC32.single(t[2],t[1]>>>24)},dy.Zip.prototype.createEncryptionKey=function(t){var e,n,r=[305419896,591751049,878082192];for(r=new Uint32Array(r),e=0,n=t.length;e<n;++e)this.updateKeys(r,255&t[e]);return r},dy.Huffman.buildHuffmanTable=function(t){var e,n,r,i,o,a,s,c,h,l,u,f=t.length,p=0,d=Number.POSITIVE_INFINITY;for(c=0,h=f;c<h;++c)t[c]>p&&(p=t[c]),t[c]<d&&(d=t[c]);for(e=1<<p,n=new Uint32Array(e),r=1,i=0,o=2;r<=p;){for(c=0;c<f;++c)if(t[c]===r){for(a=0,s=i,l=0;l<r;++l)a=a<<1|1&s,s>>=1;for(u=r<<16|c,l=a;l<e;l+=o)n[l]=u;++i}++r,i<<=1,o<<=1}return[n,p,d]};var gy=dy.Huffman.buildHuffmanTable;dy.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=dy.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case dy.RawInflate.BufferType.BLOCK:this.op=dy.RawInflate.MaxBackwardLength,this.output=new Uint8Array(dy.RawInflate.MaxBackwardLength+this.bufferSize+dy.RawInflate.MaxCopyLength);break;case dy.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},dy.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},dy.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case dy.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case dy.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},dy.RawInflate.MaxBackwardLength=32768,dy.RawInflate.MaxCopyLength=258,dy.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dy.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),dy.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),dy.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),dy.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),dy.RawInflate.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return gy(n)}(),dy.RawInflate.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return gy(n)}(),dy.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},dy.RawInflate.prototype.readBits=function(t){var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,o=this.ip;if(o+(t-r+7>>3)>=i.length)throw new Error("input buffer is broken");for(;r<t;)n|=i[o++]<<r,r+=8;return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=o,e},dy.RawInflate.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,o=this.input,a=this.ip,s=o.length,c=t[0],h=t[1];i<h&&!(a>=s);)r|=o[a++]<<i,i+=8;if((n=(e=c[r&(1<<h)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=a,65535&e},dy.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,n=this.input,r=this.ip,i=this.output,o=this.op,a=n.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,r+1>=a)throw new Error("invalid uncompressed block header: LEN");if(t=n[r++]|n[r++]<<8,r+1>=a)throw new Error("invalid uncompressed block header: NLEN");if(t===~(n[r++]|n[r++]<<8))throw new Error("invalid uncompressed block header: length verify");if(r+t>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case dy.RawInflate.BufferType.BLOCK:for(;o+t>i.length;)t-=e=s-o,i.set(n.subarray(r,r+e),o),o+=e,r+=e,this.op=o,i=this.expandBufferBlock(),o=this.op;break;case dy.RawInflate.BufferType.ADAPTIVE:for(;o+t>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(n.subarray(r,r+t),o),o+=t,r+=t,this.ip=r,this.op=o,this.output=i},dy.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case dy.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(dy.RawInflate.FixedLiteralLengthTable,dy.RawInflate.FixedDistanceTable);break;case dy.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(dy.RawInflate.FixedLiteralLengthTable,dy.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},dy.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i,o,a,s,c,h=this.readBits(5)+257,l=this.readBits(5)+1,u=this.readBits(4)+4,f=new Uint8Array(dy.RawInflate.Order.length);for(s=0;s<u;++s)f[dy.RawInflate.Order[s]]=this.readBits(3);for(t=gy(f),r=new Uint8Array(h+l),s=0,c=h+l;s<c;)switch(i=this.readCodeByTable(t)){case 16:for(a=3+this.readBits(2);a--;)r[s++]=o;break;case 17:for(a=3+this.readBits(3);a--;)r[s++]=0;o=0;break;case 18:for(a=11+this.readBits(7);a--;)r[s++]=0;o=0;break;default:r[s++]=i,o=i}switch(e=gy(r.subarray(0,h)),n=gy(r.subarray(h)),this.bufferType){case dy.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,n);break;case dy.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,n);break;default:throw new Error("invalid inflate mode")}},dy.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,o,a,s,c=n.length-dy.RawInflate.MaxCopyLength,h=dy.RawInflate.LengthCodeTable,l=dy.RawInflate.LengthExtraTable,u=dy.RawInflate.DistCodeTable,f=dy.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=c&&(this.op=r,n=this.expandBufferBlock(),r=this.op),n[r++]=i;else for(s=h[o=i-257],l[o]>0&&(s+=this.readBits(l[o])),a=u[i=this.readCodeByTable(e)],f[i]>0&&(a+=this.readBits(f[i])),r>=c&&(this.op=r,n=this.expandBufferBlock(),r=this.op);s--;)n[r]=n[r++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},dy.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,o,a,s,c=n.length,h=dy.RawInflate.LengthCodeTable,l=dy.RawInflate.LengthExtraTable,u=dy.RawInflate.DistCodeTable,f=dy.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=c&&(c=(n=this.expandBufferAdaptive()).length),n[r++]=i;else for(s=h[o=i-257],l[o]>0&&(s+=this.readBits(l[o])),a=u[i=this.readCodeByTable(e)],f[i]>0&&(a+=this.readBits(f[i])),r+s>c&&(c=(n=this.expandBufferAdaptive()).length);s--;)n[r]=n[r++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},dy.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-dy.RawInflate.MaxBackwardLength),n=this.op-dy.RawInflate.MaxBackwardLength,r=this.output;return e.set(r.subarray(dy.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,r.set(r.subarray(n,n+dy.RawInflate.MaxBackwardLength)),this.op=dy.RawInflate.MaxBackwardLength,r},dy.RawInflate.prototype.expandBufferAdaptive=function(t){var e,n,r,i=this.input.length/this.ip+1|0,o=this.input,a=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(o.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<a.length?a.length+r:a.length<<1:a.length*i,(e=new Uint8Array(n)).set(a),this.output=e,this.output},dy.RawInflate.prototype.concatBufferBlock=function(){var t,e,n,r,i,o=0,a=this.totalpos+(this.op-dy.RawInflate.MaxBackwardLength),s=this.output,c=this.blocks,h=new Uint8Array(a);if(0===c.length)return this.output.subarray(dy.RawInflate.MaxBackwardLength,this.op);for(e=0,n=c.length;e<n;++e)for(r=0,i=(t=c[e]).length;r<i;++r)h[o++]=t[r];for(e=dy.RawInflate.MaxBackwardLength,n=this.op;e<n;++e)h[o++]=s[e];return this.blocks=[],this.buffer=h,this.buffer},dy.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};gy=dy.Huffman.buildHuffmanTable;dy.RawInflateStream=function(t,e,n){this.blocks=[],this.bufferSize=n||ZLIB_STREAM_RAW_INFLATE_BUFFER_SIZE,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=dy.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},dy.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},dy.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},dy.RawInflateStream.prototype.decompress=function(t,e){var n=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!n;)switch(this.status){case dy.RawInflateStream.Status.INITIALIZED:case dy.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(n=!0);break;case dy.RawInflateStream.Status.BLOCK_HEADER_END:case dy.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case dy.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(n=!0);break;case dy.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(n=!0);break;case dy.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(n=!0)}break;case dy.RawInflateStream.Status.BLOCK_BODY_END:case dy.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case dy.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(n=!0);break;case dy.RawInflateStream.BlockType.FIXED:case dy.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(n=!0)}break;case dy.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?n=!0:this.status=dy.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},dy.RawInflateStream.MaxBackwardLength=32768,dy.RawInflateStream.MaxCopyLength=258,dy.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dy.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),dy.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),dy.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),dy.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),dy.RawInflateStream.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return gy(n)}(),dy.RawInflateStream.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return gy(n)}(),dy.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=dy.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=dy.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=dy.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=dy.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=dy.RawInflateStream.Status.BLOCK_HEADER_END},dy.RawInflateStream.prototype.readBits=function(t){for(var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,o=this.ip;r<t;){if(i.length<=o)return-1;n|=(e=i[o++])<<r,r+=8}return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=o,e},dy.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,o=this.input,a=this.ip,s=t[0],c=t[1];i<c;){if(o.length<=a)return-1;r|=o[a++]<<i,i+=8}if((n=(e=s[r&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=a,65535&e},dy.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,n=this.ip;if(this.status=dy.RawInflateStream.Status.BLOCK_BODY_START,n+4>=e.length)return-1;if((t=e[n++]|e[n++]<<8)===~(e[n++]|e[n++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=n,this.blockLength=t,this.status=dy.RawInflateStream.Status.BLOCK_BODY_END},dy.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,n=this.output,r=this.op,i=this.blockLength;for(this.status=dy.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(r===n.length&&(n=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=r,this.blockLength=i+1,-1;n[r++]=t[e++]}return i<0&&(this.status=dy.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=r,0},dy.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=dy.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=dy.RawInflateStream.FixedLiteralLengthTable,this.distTable=dy.RawInflateStream.FixedDistanceTable,this.status=dy.RawInflateStream.Status.BLOCK_BODY_END,0},dy.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},dy.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},dy.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i=new Uint8Array(dy.RawInflateStream.Order.length);if(this.status=dy.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,n=this.readBits(4)+4,t<0||e<0||n<0)return this.restore_(),-1;try{(function(){var o,a,s,c,h,l,u=0;for(h=0;h<n;++h){if((o=this.readBits(3))<0)throw new Error("not enough input");i[dy.RawInflateStream.Order[h]]=o}for(r=gy(i),c=new Uint8Array(t+e),h=0,l=t+e;h<l;){if((a=this.readCodeByTable(r))<0)throw new Error("not enough input");switch(a){case 16:if((o=this.readBits(2))<0)throw new Error("not enough input");for(s=3+o;s--;)c[h++]=u;break;case 17:if((o=this.readBits(3))<0)throw new Error("not enough input");for(s=3+o;s--;)c[h++]=0;u=0;break;case 18:if((o=this.readBits(7))<0)throw new Error("not enough input");for(s=11+o;s--;)c[h++]=0;u=0;break;default:c[h++]=a,u=a}}this.litlenTable=gy(c.subarray(0,t)),this.distTable=gy(c.subarray(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=dy.RawInflateStream.Status.BLOCK_BODY_END,0},dy.RawInflateStream.prototype.decodeHuffman=function(){var t,e,n,r,i,o=this.output,a=this.op,s=this.litlenTable,c=this.distTable,h=o.length;for(this.status=dy.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(s))<0)return this.op=a,this.restore_(),-1;if(256===t)break;if(t<256)a===h&&(h=(o=this.expandBuffer()).length),o[a++]=t;else{if(e=t-257,r=dy.RawInflateStream.LengthCodeTable[e],dy.RawInflateStream.LengthExtraTable[e]>0){if((i=this.readBits(dy.RawInflateStream.LengthExtraTable[e]))<0)return this.op=a,this.restore_(),-1;r+=i}if((t=this.readCodeByTable(c))<0)return this.op=a,this.restore_(),-1;if(n=dy.RawInflateStream.DistCodeTable[t],dy.RawInflateStream.DistExtraTable[t]>0){if((i=this.readBits(dy.RawInflateStream.DistExtraTable[t]))<0)return this.op=a,this.restore_(),-1;n+=i}for(a+r>=h&&(h=(o=this.expandBuffer()).length);r--;)o[a]=o[a++-n];if(this.ip===this.input.length)return this.op=a,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=a,this.status=dy.RawInflateStream.Status.DECODE_BLOCK_END},dy.RawInflateStream.prototype.expandBuffer=function(t){var e,n,r,i=this.input.length/this.ip+1|0,o=this.input,a=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(o.length-this.ip)/this.litlenTable[2]/2*258|0)<a.length?a.length+r:a.length<<1:a.length*i,(e=new Uint8Array(n)).set(a),this.output=e,this.output},dy.RawInflateStream.prototype.concatBuffer=function(){var t,e,n=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,n)):this.output.subarray(this.sp,n),this.sp=n,n>dy.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=dy.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+dy.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(n-dy.RawInflateStream.MaxBackwardLength,n))),t},dy.Inflate=function(t,e){var n,r;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),n=t[this.ip++],r=t[this.ip++],15&n){case dy.CompressionMethod.DEFLATE:this.method=dy.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.rawinflate=new dy.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},dy.Inflate.BufferType=dy.RawInflate.BufferType,dy.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==dy.Adler32(t))throw new Error("invalid adler-32 checksum");return t},dy.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new dy.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},dy.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var n=new Uint8Array(this.input.length+t.length);n.set(this.input,0),n.set(t,this.input.length),this.input=n}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},dy.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,n=e[t++],r=e[t++];if(void 0===n||void 0===r)return-1;switch(15&n){case dy.CompressionMethod.DEFLATE:this.method=dy.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.ip=t},dy.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},dy.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},dy.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},dy.Gunzip.prototype.decodeMember=function(){var t,e,n,r,i,o,a,s,c,h=new dy.GunzipMember,l=this.input,u=this.ip;if(h.id1=l[u++],h.id2=l[u++],31!==h.id1||139!==h.id2)throw new Error("invalid file signature:"+h.id1+","+h.id2);switch(h.cm=l[u++],h.cm){case 8:break;default:throw new Error("unknown compression method: "+h.cm)}if(h.flg=l[u++],s=l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24,h.mtime=new Date(1e3*s),h.xfl=l[u++],h.os=l[u++],(h.flg&dy.Gzip.FlagsMask.FEXTRA)>0&&(h.xlen=l[u++]|l[u++]<<8,u=this.decodeSubField(u,h.xlen)),(h.flg&dy.Gzip.FlagsMask.FNAME)>0){for(a=[],o=0;(i=l[u++])>0;)a[o++]=String.fromCharCode(i);h.name=a.join("")}if((h.flg&dy.Gzip.FlagsMask.FCOMMENT)>0){for(a=[],o=0;(i=l[u++])>0;)a[o++]=String.fromCharCode(i);h.comment=a.join("")}if((h.flg&dy.Gzip.FlagsMask.FHCRC)>0&&(h.crc16=65535&dy.CRC32.calc(l,0,u),h.crc16!==(l[u++]|l[u++]<<8)))throw new Error("invalid header crc16");if(t=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24,l.length-u-4-4<512*t&&(r=t),e=new dy.RawInflate(l,{index:u,bufferSize:r}),h.data=n=e.decompress(),u=e.ip,h.crc32=c=(l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24)>>>0,dy.CRC32.calc(n)!==c)throw new Error("invalid CRC-32 checksum: 0x"+dy.CRC32.calc(n).toString(16)+" / 0x"+c.toString(16));if(h.isize=t=(l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24)>>>0,(4294967295&n.length)!==t)throw new Error("invalid input size: "+(4294967295&n.length)+" / "+t);this.member.push(h),this.ip=u},dy.Gunzip.prototype.decodeSubField=function(t,e){return t+e},dy.Gunzip.prototype.concatMember=function(){var t,e,n,r=this.member,i=0,o=0;for(t=0,e=r.length;t<e;++t)o+=r[t].data.length;for(n=new Uint8Array(o),t=0;t<e;++t)n.set(r[t].data,i),i+=r[t].data.length;return n},dy.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},dy.GunzipMember.prototype.getName=function(){return this.name},dy.GunzipMember.prototype.getData=function(){return this.data},dy.GunzipMember.prototype.getMtime=function(){return this.mtime},dy.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},dy.Gzip.DefaultBufferSize=32768,dy.Gzip.prototype.compress=function(){var t,e,n,r,i,o,a,s,c=new Uint8Array(dy.Gzip.DefaultBufferSize),h=0,l=this.input,u=this.ip,f=this.filename,p=this.comment;if(c[h++]=31,c[h++]=139,c[h++]=8,t=0,this.flags.fname&&(t|=dy.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=dy.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=dy.Gzip.FlagsMask.FHCRC),c[h++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,c[h++]=255&e,c[h++]=e>>>8&255,c[h++]=e>>>16&255,c[h++]=e>>>24&255,c[h++]=0,c[h++]=dy.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(a=0,s=f.length;a<s;++a)(o=f.charCodeAt(a))>255&&(c[h++]=o>>>8&255),c[h++]=255&o;c[h++]=0}if(this.flags.comment){for(a=0,s=p.length;a<s;++a)(o=p.charCodeAt(a))>255&&(c[h++]=o>>>8&255),c[h++]=255&o;c[h++]=0}return this.flags.fhcrc&&(n=65535&dy.CRC32.calc(c,0,h),c[h++]=255&n,c[h++]=n>>>8&255),this.deflateOptions.outputBuffer=c,this.deflateOptions.outputIndex=h,c=(i=new dy.RawDeflate(l,this.deflateOptions)).compress(),(h=i.op)+8>c.buffer.byteLength?(this.output=new Uint8Array(h+8),this.output.set(new Uint8Array(c.buffer)),c=this.output):c=new Uint8Array(c.buffer),r=dy.CRC32.calc(l),c[h++]=255&r,c[h++]=r>>>8&255,c[h++]=r>>>16&255,c[h++]=r>>>24&255,s=l.length,c[h++]=255&s,c[h++]=s>>>8&255,c[h++]=s>>>16&255,c[h++]=s>>>24&255,this.ip=u,h<c.length&&(this.output=c=c.subarray(0,h)),c},dy.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},dy.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},dy.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},dy.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},dy.Heap.prototype.getChild=function(t){return 2*t+2},dy.Heap.prototype.push=function(t,e){var n,r,i,o=this.buffer;for(n=this.length,o[this.length++]=e,o[this.length++]=t;n>0&&(r=this.getParent(n),o[n]>o[r]);)i=o[n],o[n]=o[r],o[r]=i,i=o[n+1],o[n+1]=o[r+1],o[r+1]=i,n=r;return this.length},dy.Heap.prototype.pop=function(){var t,e,n,r,i,o=this.buffer;for(e=o[0],t=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],i=0;!((r=this.getChild(i))>=this.length)&&(r+2<this.length&&o[r+2]>o[r]&&(r+=2),o[r]>o[i]);)n=o[i],o[i]=o[r],o[r]=n,n=o[i+1],o[i+1]=o[r+1],o[r+1]=n,i=r;return{index:t,value:e,length:this.length}},dy.RawDeflate=function(t,e){this.compressionType=dy.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},dy.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},dy.RawDeflate.Lz77MinLength=3,dy.RawDeflate.Lz77MaxLength=258,dy.RawDeflate.WindowSize=32768,dy.RawDeflate.MaxCodeLength=16,dy.RawDeflate.HUFMAX=286,dy.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),dy.RawDeflate.prototype.compress=function(){var t,e,n,r=this.input;switch(this.compressionType){case dy.RawDeflate.CompressionType.NONE:for(e=0,n=r.length;e<n;)e+=(t=r.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===n);break;case dy.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(r,!0),this.op=this.output.length;break;case dy.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(r,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},dy.RawDeflate.prototype.makeNocompressBlock=function(t,e){var n,r,i,o,a=this.output,s=this.op;for(a=new Uint8Array(this.output.buffer);a.length<=s+t.length+5;)a=new Uint8Array(a.length<<1);return a.set(this.output),n=e?1:0,r=dy.RawDeflate.CompressionType.NONE,a[s++]=n|r<<1,o=65536+~(i=t.length)&65535,a[s++]=255&i,a[s++]=i>>>8&255,a[s++]=255&o,a[s++]=o>>>8&255,a.set(t,s),s+=t.length,a=a.subarray(0,s),this.op=s,this.output=a,a},dy.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var n,r,i,o=new dy.BitStream(new Uint8Array(this.output.buffer),this.op);return n=e?1:0,r=dy.RawDeflate.CompressionType.FIXED,o.writeBits(n,1,!0),o.writeBits(r,2,!0),i=this.lz77(t),this.fixedHuffman(i,o),o.finish()},dy.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w=new dy.BitStream(new Uint8Array(this.output.buffer),this.op),b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(n=e?1:0,r=dy.RawDeflate.CompressionType.DYNAMIC,w.writeBits(n,1,!0),w.writeBits(r,2,!0),i=this.lz77(t),c=this.getLengths_(this.freqsLitLen,15),h=this.getCodesFromLengths_(c),l=this.getLengths_(this.freqsDist,7),u=this.getCodesFromLengths_(l),o=286;o>257&&0===c[o-1];o--);for(a=30;a>1&&0===l[a-1];a--);for(f=this.getTreeSymbols_(o,c,a,l),p=this.getLengths_(f.freqs,7),v=0;v<19;v++)x[v]=p[b[v]];for(s=19;s>4&&0===x[s-1];s--);for(d=this.getCodesFromLengths_(p),w.writeBits(o-257,5,!0),w.writeBits(a-1,5,!0),w.writeBits(s-4,4,!0),v=0;v<s;v++)w.writeBits(x[v],3,!0);for(v=0,y=f.codes.length;v<y;v++)if(g=f.codes[v],w.writeBits(d[g],p[g],!0),g>=16){switch(v++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}w.writeBits(f.codes[v],m,!0)}return this.dynamicHuffman(i,[h,c],[u,l],w),w.finish()},dy.RawDeflate.prototype.dynamicHuffman=function(t,e,n,r){var i,o,a,s,c,h,l,u;for(c=e[0],h=e[1],l=n[0],u=n[1],i=0,o=t.length;i<o;++i)if(a=t[i],r.writeBits(c[a],h[a],!0),a>256)r.writeBits(t[++i],t[++i],!0),s=t[++i],r.writeBits(l[s],u[s],!0),r.writeBits(t[++i],t[++i],!0);else if(256===a)break;return r},dy.RawDeflate.prototype.fixedHuffman=function(t,e){var n,r,i;for(n=0,r=t.length;n<r;n++)if(i=t[n],dy.BitStream.prototype.writeBits.apply(e,dy.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++n],t[++n],!0),e.writeBits(t[++n],5),e.writeBits(t[++n],t[++n],!0);else if(256===i)break;return e},dy.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},dy.RawDeflate.Lz77Match.LengthCodeTable=function(t){return new Uint32Array(t)}(function(){var t,e,n=[];for(t=3;t<=258;t++)e=r(t),n[t]=e[2]<<24|e[1]<<16|e[0];function r(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return n}()),dy.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},dy.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,n=this.backwardDistance,r=[],i=0;return t=dy.RawDeflate.Lz77Match.LengthCodeTable[e],r[i++]=65535&t,r[i++]=t>>16&255,r[i++]=t>>24,t=this.getDistanceCode_(n),r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],r},dy.RawDeflate.prototype.lz77=function(t){var e,n,r,i,o,a,s,c,h,l={},u=dy.RawDeflate.WindowSize,f=new Uint16Array(2*t.length),p=0,d=0,g=new Uint32Array(286),m=new Uint32Array(30),v=this.lazy;function y(t,e){var n,r,i=t.toLz77Array();for(n=0,r=i.length;n<r;++n)f[p++]=i[n];g[i[0]]++,m[i[3]]++,d=t.length+e-1,c=null}for(g[256]=1,e=0,n=t.length;e<n;++e){for(o=0,r=0,i=dy.RawDeflate.Lz77MinLength;r<i&&e+r!==n;++r)o=o<<8|t[e+r];if(void 0===l[o]&&(l[o]=[]),a=l[o],d-- >0)a.push(e);else{for(;a.length>0&&e-a[0]>u;)a.shift();if(e+dy.RawDeflate.Lz77MinLength>=n){for(c&&y(c,-1),r=0,i=n-e;r<i;++r)h=t[e+r],f[p++]=h,++g[h];break}a.length>0?(s=this.searchLongestMatch_(t,e,a),c?c.length<s.length?(h=t[e-1],f[p++]=h,++g[h],y(s,0)):y(c,-1):s.length<v?c=s:y(s,0)):c?y(c,-1):(h=t[e],f[p++]=h,++g[h]),a.push(e)}}return f[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=m,f.subarray(0,p)},dy.RawDeflate.prototype.searchLongestMatch_=function(t,e,n){var r,i,o,a,s,c,h=0,l=t.length;t:for(a=0,c=n.length;a<c;a++){if(r=n[c-a-1],o=dy.RawDeflate.Lz77MinLength,h>dy.RawDeflate.Lz77MinLength){for(s=h;s>dy.RawDeflate.Lz77MinLength;s--)if(t[r+s-1]!==t[e+s-1])continue t;o=h}for(;o<dy.RawDeflate.Lz77MaxLength&&e+o<l&&t[r+o]===t[e+o];)++o;if(o>h&&(i=r,h=o),o===dy.RawDeflate.Lz77MaxLength)break}return new dy.RawDeflate.Lz77Match(h,e-i)},dy.RawDeflate.prototype.getTreeSymbols_=function(t,e,n,r){var i,o,a,s,c,h,l=new Uint32Array(t+n),u=new Uint32Array(316),f=new Uint8Array(19);for(o=0,i=0;i<t;i++)l[o++]=e[i];for(i=0;i<n;i++)l[o++]=r[i];for(c=0,i=0,s=l.length;i<s;i+=o){for(o=1;i+o<s&&l[i+o]===l[i];++o);if(a=o,0===l[i])if(a<3)for(;a-- >0;)u[c++]=0,f[0]++;else for(;a>0;)(h=a<138?a:138)>a-3&&h<a&&(h=a-3),h<=10?(u[c++]=17,u[c++]=h-3,f[17]++):(u[c++]=18,u[c++]=h-11,f[18]++),a-=h;else if(u[c++]=l[i],f[l[i]]++,--a<3)for(;a-- >0;)u[c++]=l[i],f[l[i]]++;else for(;a>0;)(h=a<6?a:6)>a-3&&h<a&&(h=a-3),u[c++]=16,u[c++]=h-3,f[16]++,a-=h}return{codes:u.subarray(0,c),freqs:f}},dy.RawDeflate.prototype.getLengths_=function(t,e){var n,r,i,o,a,s=t.length,c=new dy.Heap(2*dy.RawDeflate.HUFMAX),h=new Uint8Array(s);for(o=0;o<s;++o)t[o]>0&&c.push(o,t[o]);if(n=new Array(c.length/2),r=new Uint32Array(c.length/2),1===n.length)return h[c.pop().index]=1,h;for(o=0,a=c.length/2;o<a;++o)n[o]=c.pop(),r[o]=n[o].value;for(i=this.reversePackageMerge_(r,r.length,e),o=0,a=n.length;o<a;++o)h[n[o].index]=i[o];return h},dy.RawDeflate.prototype.reversePackageMerge_=function(t,e,n){var r,i,o,a,s,c=new Uint16Array(n),h=new Uint8Array(n),l=new Uint8Array(e),u=new Array(n),f=new Array(n),p=new Array(n),d=(1<<n)-e,g=1<<n-1;function m(t){var n=f[t][p[t]];n===e?(m(t+1),m(t+1)):--l[n],++p[t]}for(c[n-1]=e,i=0;i<n;++i)d<g?h[i]=0:(h[i]=1,d-=g),d<<=1,c[n-2-i]=(c[n-1-i]/2|0)+e;for(c[0]=h[0],u[0]=new Array(c[0]),f[0]=new Array(c[0]),i=1;i<n;++i)c[i]>2*c[i-1]+h[i]&&(c[i]=2*c[i-1]+h[i]),u[i]=new Array(c[i]),f[i]=new Array(c[i]);for(r=0;r<e;++r)l[r]=n;for(o=0;o<c[n-1];++o)u[n-1][o]=t[o],f[n-1][o]=o;for(r=0;r<n;++r)p[r]=0;for(1===h[n-1]&&(--l[0],++p[n-1]),i=n-2;i>=0;--i){for(r=0,a=0,s=p[i+1],o=0;o<c[i];o++)(a=u[i+1][s]+u[i+1][s+1])>t[r]?(u[i][o]=a,f[i][o]=e,s+=2):(u[i][o]=t[r],f[i][o]=r,++r);p[i]=0,1===h[i]&&m(i)}return l},dy.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,n,r,i,o=new Uint16Array(t.length),a=[],s=[],c=0;for(e=0,n=t.length;e<n;e++)a[t[e]]=1+(0|a[t[e]]);for(e=1,n=dy.RawDeflate.MaxCodeLength;e<=n;e++)s[e]=c,c+=0|a[e],c<<=1;for(e=0,n=t.length;e<n;e++)for(c=s[t[e]],s[t[e]]+=1,o[e]=0,r=0,i=t[e];r<i;r++)o[e]=o[e]<<1|1&c,c>>>=1;return o},dy.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},dy.Unzip.CompressionMethod=dy.Zip.CompressionMethod,dy.Unzip.FileHeaderSignature=dy.Zip.FileHeaderSignature,dy.Unzip.LocalFileHeaderSignature=dy.Zip.LocalFileHeaderSignature,dy.Unzip.CentralDirectorySignature=dy.Zip.CentralDirectorySignature,dy.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},dy.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==dy.Unzip.FileHeaderSignature[0]||t[e++]!==dy.Unzip.FileHeaderSignature[1]||t[e++]!==dy.Unzip.FileHeaderSignature[2]||t[e++]!==dy.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},dy.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},dy.Unzip.LocalFileHeader.Flags=dy.Zip.Flags,dy.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==dy.Unzip.LocalFileHeaderSignature[0]||t[e++]!==dy.Unzip.LocalFileHeaderSignature[1]||t[e++]!==dy.Unzip.LocalFileHeaderSignature[2]||t[e++]!==dy.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},dy.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===dy.Unzip.CentralDirectorySignature[0]&&e[t+1]===dy.Unzip.CentralDirectorySignature[1]&&e[t+2]===dy.Unzip.CentralDirectorySignature[2]&&e[t+3]===dy.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},dy.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==dy.Unzip.CentralDirectorySignature[0]||e[t++]!==dy.Unzip.CentralDirectorySignature[1]||e[t++]!==dy.Unzip.CentralDirectorySignature[2]||e[t++]!==dy.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},dy.Unzip.prototype.parseFileHeader=function(){var t,e,n,r,i=[],o={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,n=0,r=this.totalEntries;n<r;++n)(e=new dy.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,i[n]=e,o[e.filename]=n;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=o}},dy.Unzip.prototype.getFileData=function(t,e){e=e||{};var n,r,i,o,a,s,c,h,l=this.input,u=this.fileHeaderList;if(u||this.parseFileHeader(),void 0===u[t])throw new Error("wrong index");if(r=u[t].relativeOffset,(n=new dy.Unzip.LocalFileHeader(this.input,r)).parse(),r+=n.length,i=n.compressedSize,0!=(n.flags&dy.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(e.password||this.password),c=r,h=r+12;c<h;++c)this.decode(s,l[c]);for(c=r+=12,h=r+(i-=12);c<h;++c)l[c]=this.decode(s,l[c])}switch(n.compression){case dy.Unzip.CompressionMethod.STORE:o=this.input.subarray(r,r+i);break;case dy.Unzip.CompressionMethod.DEFLATE:o=new dy.RawInflate(this.input,{index:r,bufferSize:n.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(a=dy.CRC32.calc(o),n.crc32!==a))throw new Error("wrong crc: file=0x"+n.crc32.toString(16)+", data=0x"+a.toString(16));return o},dy.Unzip.prototype.getFilenames=function(){var t,e,n,r=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(n=this.fileHeaderList).length;t<e;++t)r[t]=n[t].filename;return r},dy.Unzip.prototype.decompress=function(t,e){var n;if(this.filenameToIndex||this.parseFileHeader(),void 0===(n=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(n,e)},dy.Unzip.prototype.setPassword=function(t){this.password=t},dy.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},dy.Unzip.prototype.updateKeys=dy.Zip.prototype.updateKeys,dy.Unzip.prototype.createDecryptionKey=dy.Zip.prototype.createEncryptionKey,dy.Unzip.prototype.getByte=dy.Zip.prototype.getByte,dy.Util.stringToByteArray=function(t){var e,n,r=t.split("");for(e=0,n=r.length;e<n;e++)r[e]=(255&r[e].charCodeAt(0))>>>0;return r},dy.Adler32=function(t){return"string"==typeof t&&(t=dy.Util.stringToByteArray(t)),dy.Adler32.update(1,t)},dy.Adler32.update=function(t,e){for(var n,r=65535&t,i=t>>>16&65535,o=e.length,a=0;o>0;){o-=n=o>dy.Adler32.OptimizationParameter?dy.Adler32.OptimizationParameter:o;do{i+=r+=e[a++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},dy.Adler32.OptimizationParameter=1024,dy.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(dy.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},dy.BitStream.DefaultBlockSize=32768,dy.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,n=new Uint8Array(e<<1);return n.set(t),this.buffer=n},dy.BitStream.prototype.writeBits=function(t,e,n){var r,i=this.buffer,o=this.index,a=this.bitindex,s=i[o];if(n&&e>1&&(t=e>8?function(t){return dy.BitStream.ReverseTable[255&t]<<24|dy.BitStream.ReverseTable[t>>>8&255]<<16|dy.BitStream.ReverseTable[t>>>16&255]<<8|dy.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:dy.BitStream.ReverseTable[t]>>8-e),e+a<8)s=s<<e|t,a+=e;else for(r=0;r<e;++r)s=s<<1|t>>e-r-1&1,8==++a&&(a=0,i[o++]=dy.BitStream.ReverseTable[s],s=0,o===i.length&&(i=this.expandBuffer()));i[o]=s,this.buffer=i,this.bitindex=a,this.index=o},dy.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=dy.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},dy.BitStream.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,n=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--n;return(e<<n&255)>>>0}(t);return e}(),dy.CRC32.calc=function(t,e,n){return dy.CRC32.update(t,0,e,n)},dy.CRC32.update=function(t,e,n,r){var i=dy.CRC32.Table,o="number"==typeof n?n:n=0,a="number"==typeof r?r:t.length;for(e^=4294967295,o=7&a;o--;++n)e=e>>>8^i[255&(e^t[n])];for(o=a>>3;o--;n+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^i[255&(e^t[n])])>>>8^i[255&(e^t[n+1])])>>>8^i[255&(e^t[n+2])])>>>8^i[255&(e^t[n+3])])>>>8^i[255&(e^t[n+4])])>>>8^i[255&(e^t[n+5])])>>>8^i[255&(e^t[n+6])])>>>8^i[255&(e^t[n+7])];return(4294967295^e)>>>0},dy.CRC32.single=function(t,e){return(dy.CRC32.Table[255&(t^e)]^t>>>8)>>>0},dy.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],dy.CRC32.Table=new Uint32Array(dy.CRC32.Table_),dy.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(dy.Deflate.DefaultBufferSize),this.compressionType=dy.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var n,r={};for(n in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)r[n]=e[n];r.outputBuffer=this.output,this.rawDeflate=new dy.RawDeflate(this.input,r)},dy.Deflate.DefaultBufferSize=32768,dy.Deflate.CompressionType=dy.RawDeflate.CompressionType,dy.Deflate.compress=function(t,e){return new dy.Deflate(t,e).compress()},dy.Deflate.prototype.compress=function(){var t,e,n,r,i,o,a,s=0;switch(a=this.output,t=dy.CompressionMethod.DEFLATE){case dy.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(dy.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(n=e<<4|t,a[s++]=n,0,t){case dy.CompressionMethod.DEFLATE:switch(this.compressionType){case dy.Deflate.CompressionType.NONE:i=0;break;case dy.Deflate.CompressionType.FIXED:i=1;break;case dy.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return r=i<<6|0,r|=31-(256*n+r)%31,a[s++]=r,o=dy.Adler32(this.input),this.rawDeflate.op=s,s=(a=this.rawDeflate.compress()).length,(a=new Uint8Array(a.buffer)).length<=s+4&&(this.output=new Uint8Array(a.length+4),this.output.set(a),a=this.output),(a=a.subarray(0,s+4))[s++]=o>>24&255,a[s++]=o>>16&255,a[s++]=o>>8&255,a[s++]=255&o,a};const my="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node?require("node-fetch"):fetch;class vy{constructor(t){this.file=t}async read(t,e){const n=this.file;return new Promise((function(r,i){const o=new FileReader;if(o.onload=function(t){r(o.result)},o.onerror=function(t){console.err("Error reading local file "+n.name),i(null,o)},void 0!==t){const r=n.slice(t,t+e);o.readAsArrayBuffer(r)}else o.readAsArrayBuffer(n)}))}}let yy,wy,by;if("undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node){const t=require("util");yy=require("fs"),wy=yy&&t.promisify(yy.open),by=yy&&t.promisify(yy.read)}class xy{constructor(t){this.path=t.path}async read(t,e){const n=Buffer.alloc(e),r=await wy(this.path,"r"),i=await by(r,n,0,e,t);return yy.close(r,(function(t){})),i.buffer.buffer}}const ky="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;class Sy{constructor(t){var e;this.config=t,this.url=(e=t.path||t.url).includes("//www.dropbox.com")?e.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):e.startsWith("ftp://ftp.ncbi.nlm.nih.gov")?e.replace("ftp://","https://"):e}async read(t,e){const n=this.config.headers||{},r="bytes="+t+"-"+(t+e-1);n.Range=r;let i=this.url.slice();if(ky)n["User-Agent"]="straw";else{if(this.config.oauthToken){const t=async function(t){return"function"==typeof t?await Promise.resolve(t()):t}(this.config.oauthToken);n.Authorization=`Bearer ${t}`}0==navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent);const t=navigator.userAgent.indexOf("Chrome")>-1,e=this.url.indexOf("X-Amz-Signature")>-1;t&&!e&&(i=Cy(i,"randomSeed",Math.random().toString(36)))}this.config.apiKey&&(i=Cy(i,"key",this.config.apiKey));const o=await my(i,{method:"GET",headers:n,redirect:"follow",mode:"cors"}),a=o.status;if(a>=400){const t=Error(o.statusText);throw t.code=a,t}return o.arrayBuffer()}}function Cy(t,e,n){const r=t.includes("?")?"&":"?";return t+r+e+"="+n}class _y{constructor(t,e){this.file=t,this.rateLimiter=e}async read(t,e){const n=this.file,r=this.rateLimiter;return new Promise((function(i,o){r.limiter((async function(n){try{const r=await n.read(t,e);i(r)}catch(t){o(t)}}))(n)}))}}class Ry{constructor(t){this.file=t.file,this.size=t.size||64e3,this.position=0,this.bufferStart=0,this.bufferLength=0,this.buffer=void 0}async read(t,e){const n=t,r=t+e,i=this.bufferStart,o=this.bufferStart+this.bufferLength;if(e>this.size)return this.buffer=void 0,this.bufferStart=0,this.bufferLength=0,this.file.read(t,e);if(n>=i&&r<=o){const t=n-i,r=t+e;return this.buffer.slice(t,r)}if(n<i&&r>i){const r=i-n,o=await this.file.read(t,r),a=e-r;if(a>0){const t=this.buffer.slice(0,a);return Ty(o,t)}return o}if(!(n<o&&r>o))return this.buffer=await this.file.read(t,this.size),this.bufferStart=t,this.bufferLength=this.buffer.byteLength,this.buffer.slice(0,e);{const t=o-n,r=this.bufferLength-t,i=this.buffer.slice(r,this.bufferLength),a=e-t;if(!(a>0))return i;try{this.buffer=await this.file.read(o,this.size),this.bufferStart=o,this.bufferLength=this.buffer.byteLength;const t=this.buffer.slice(0,a);return Ty(i,t)}catch(t){if(t.code&&416===t.code)return i;throw t}}}}var Ty=function(t,e){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n.buffer};const Ey=function(t,e){this.littleEndian=void 0===e||e,this.position=0,this.view=t,this.length=t.byteLength};function Ay(t,e){this.block=t,this.offset=e}Ey.prototype.available=function(){return this.length-this.position},Ey.prototype.remLength=function(){return this.length-this.position},Ey.prototype.hasNext=function(){return this.position<this.length-1},Ey.prototype.getByte=function(){var t=this.view.getUint8(this.position,this.littleEndian);return this.position++,t},Ey.prototype.getShort=function(){var t=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,t},Ey.prototype.getUShort=function(){var t=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,t},Ey.prototype.getInt=function(){var t=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,t},Ey.prototype.getUInt=function(){var t=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,t},Ey.prototype.getLong=function(){var t=[];t[0]=this.view.getUint8(this.position),t[1]=this.view.getUint8(this.position+1),t[2]=this.view.getUint8(this.position+2),t[3]=this.view.getUint8(this.position+3),t[4]=this.view.getUint8(this.position+4),t[5]=this.view.getUint8(this.position+5),t[6]=this.view.getUint8(this.position+6),t[7]=this.view.getUint8(this.position+7);var e=0;if(this.littleEndian)for(var n=t.length-1;n>=0;n--)e=256*e+t[n];else for(n=0;n<t.length;n++)e=256*e+t[n];return this.position+=8,e},Ey.prototype.getString=function(t){for(var e,n="";0!=(e=this.view.getUint8(this.position++))&&(n+=String.fromCharCode(e),!t||n.length!=t););return n},Ey.prototype.getFixedLengthString=function(t){var e,n,r="";for(e=0;e<t;e++)(n=this.view.getUint8(this.position++))>0&&(r+=String.fromCharCode(n));return r},Ey.prototype.getFixedLengthTrimmedString=function(t){var e,n,r="";for(e=0;e<t;e++)(n=this.view.getUint8(this.position++))>32&&(r+=String.fromCharCode(n));return r},Ey.prototype.getFloat=function(){var t=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,t},Ey.prototype.getDouble=function(){var t=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,t},Ey.prototype.skip=function(t){return this.position+=t,this.position},Ey.prototype.getVPointer=function(){var t=this.position,e=this.view.getUint8(t+1)<<8|this.view.getUint8(t),n=4294967296*(255&this.view.getUint8(t+6))+16777216*(255&this.view.getUint8(t+5))+65536*(255&this.view.getUint8(t+4))+256*(255&this.view.getUint8(t+3))+(255&this.view.getUint8(t+2));return this.position+=8,new Ay(n,e)},Ay.prototype.isLessThan=function(t){return this.block<t.block||this.block===t.block&&this.offset<t.offset},Ay.prototype.isGreaterThan=function(t){return this.block>t.block||this.block===t.block&&this.offset>t.offset},Ay.prototype.print=function(){return this.block+":"+this.offset};class Ly{constructor(t,e,n){const r=this;this.chr1=t,this.chr2=e,this.bpZoomData=[],this.fragZoomData=[],n.forEach((function(t){"BP"===t.zoom.unit?r.bpZoomData.push(t):r.fragZoomData.push(t)}))}getZoomDataByIndex(t,e){return("FRAG"===e?this.fragZoomData:this.bpZoomData)[t]}findZoomForResolution(t,e){const n="FRAG"===e?this.fragZoomData:this.bpZoomData;for(let e=1;e<n.length;e++){if(n[e].zoom.binSize<t)return e-1}return n.length-1}getZoomData(t){const e="BP"===t.unit?this.bpZoomData:this.fragZoomData;for(let r=0;r<e.length;r++){var n=e[r];if(t.binSize===n.zoom.binSize)return n}}}class Iy{constructor(t,e,n,r,i,o,a){this.chr1=t,this.chr2=e,this.zoom=n,this.blockBinCount=r,this.blockColumnCount=i,this.chr1Sites=o,this.chr2Sites=a}getKey(){return this.chr1.name+"_"+this.chr2.name+"_"+this.zoom.unit+"_"+this.zoom.binSize}}class My{constructor(t,e,n,r,i){var o,a=function(t){var e,n=0,r=0;for(e=0;e<t.length;e++)isNaN(t[e])||(n+=t[e],r++);return r>0?n/r:0}(i);if(a>0)for(o=0;o<i.length;o++)i[o]/=a;this.type=t,this.chrIdx=e,this.unit=n,this.resolution=r,this.data=i}getKey(){return My.getKey(this.type,this.chrIdx,this.unit,this.resolution)}static getNormalizationVectorKey(t,e,n,r){return t+"_"+e+"_"+n+"_"+r}}class Dy{constructor(t,e,n){this.bin1=t,this.bin2=e,this.counts=n}getKey(){return this.bin1+"_"+this.bin2}}const By="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,Fy=new class{constructor(t){this.wait=void 0===t?100:t,this.isCalled=!1,this.calls=[]}limiter(t){const e=this;let n=function(){e.calls.length&&!e.isCalled&&(e.isCalled=!0,e.calls.shift().call(),setTimeout((function(){e.isCalled=!1,n()}),e.wait))};return function(){e.calls.push(t.bind(this,...arguments)),n()}}}(100);class Ny{constructor(t,e,n,r){this.blockNumber=t,this.zoomData=e,this.records=n,this.idx=r}}class Oy{constructor(t){if(this.config=t,this.loadFragData=t.loadFragData,this.fragmentSitesCache={},this.normVectorCache={},this.normalizationTypes=["NONE"],t.file)this.file=t.file;else if(t.blob)this.file=new vy(t.blob);else if(t.url||t.path&&!By){this.url=t.url||this.path,this.remote=!0;const n=new Sy(t);(e=this.url).indexOf("drive.google.com")>=0||e.indexOf("www.googleapis.com/drive")>0?this.file=new _y(n,Fy):this.file=n}else{if(!t.path)throw Error("Arguments must include file, blob, url, or path");this.file=new xy({path:t.path})}var e}async init(){this.initialized||(await this.readHeader(),await this.readFooter(),this.initialized=!0)}async getMetaData(){return await this.init(),this.meta}async readHeader(){const t=await this.file.read(0,64e3);if(!t)return;const e=new Ey(new DataView(t));this.magic=e.getString(),this.version=e.getInt(),this.masterIndexPos=e.getLong(),this.genomeId=e.getString(),this.attributes={};let n=e.getInt();for(;n-- >0;)this.attributes[e.getString()]=e.getString();this.chromosomes=[],this.chromosomeIndexMap={};let r=e.getInt(),i=0;for(;r-- >0;){const t={index:i,name:e.getString(),size:e.getInt()};"all"===t.name.toLowerCase()&&(this.wholeGenomeChromosome=t,this.wholeGenomeResolution=Math.round(2*t.size)),this.chromosomes.push(t),this.chromosomeIndexMap[t.name]=t.index,i++}this.bpResolutions=[];let o=e.getInt();for(;o-- >0;)this.bpResolutions.push(e.getInt());if(this.loadFragData){this.fragResolutions=[];let t=e.getInt();for(;t-- >0;)this.fragResolutions.push(e.getInt());if(t>0){this.sites=[];let t=e.getInt();for(;t-- >0;)this.sites.push(e.getInt())}}this.chrAliasTable={};for(let t of Object.keys(this.chromosomeIndexMap))t.startsWith("chr")?this.chrAliasTable[t.substr(3)]=t:"MT"===t?this.chrAliasTable.chrM=t:this.chrAliasTable["chr"+t]=t;this.meta={version:this.version,genome:this.genomeId,chromosomes:this.chromosomes,resolutions:this.bpResolutions}}async readFooter(){let t=await this.file.read(this.masterIndexPos,8);if(!t)return null;let e=new Ey(new DataView(t));const n=e.getInt();let r=e.getInt();const i=196*r;this.masterIndexPos,Math.min(i,n-4);for(t=await this.file.read(this.masterIndexPos+8,Math.min(i,n-4)),e=new Ey(new DataView(t)),this.masterIndex={};r-- >0;){const t=e.getString(),n=e.getLong(),r=e.getInt();this.masterIndex[t]={start:n,size:r}}return this.expectedValueVectors={},r=e.getInt(),this.normExpectedValueVectorsPosition=this.masterIndexPos+4+n,this}async readMatrix(t,e){if(await this.init(),t>e){const n=t;t=e,e=n}const n=t+"_"+e,r=this.masterIndex[n];if(!r)return;const i=await this.file.read(r.start,r.size);if(!i)return;const o=new Ey(new DataView(i)),a=o.getInt(),s=o.getInt(),c=this.chromosomes[a],h=this.chromosomes[s];let l=o.getInt();const u=[],f=await this.getSites.call(this,c.name),p=await this.getSites.call(this,h.name);let d=o.available(),g=r.start;for(;l-- >0;){const t=Py(c,h,f,p,o),e=d-o.available();t.idx={start:g,size:e},d=o.available(),u.push(t)}return new Ly(t,e,u)}async readBlockData(t,e){var n=null,r=e.blockIndexMap;if(r)n=r[t];return n?this.file.read(n.filePosition,n.size):void 0}async readBlock(t,e){var n,r,i=null,o=e.blockIndexMap;if(o)i=o[t];if(i){let o=await this.file.read(i.filePosition,i.size);if(!o)return;o=new dy.Inflate(new Uint8Array(o)).decompress().buffer;var a=new Ey(new DataView(o)),s=a.getInt(),c=[];if(this.version<7)for(n=0;n<s;n++){var h=a.getInt(),l=a.getInt(),u=a.getFloat();c.push(new Dy(h,l,u))}else{var f=a.getInt(),p=a.getInt(),d=0==a.getByte(),g=a.getByte();if(1===g){var m=a.getShort();for(n=0;n<m;n++){l=p+a.getShort();var v=a.getShort();for(r=0;r<v;r++)h=f+a.getShort(),u=d?a.getShort():a.getFloat(),c.push(new Dy(h,l,u))}}else{if(2!=g)throw new Error("Unknown block type: "+g);var y=a.getInt(),w=a.getShort();for(n=0;n<y;n++){var b=Math.floor(n/w),x=f+(n-b*w),k=p+b;d?-32768!=(u=a.getShort())&&c.push(new Dy(x,k,u)):(u=a.getFloat(),isNaN(u)||c.push(new Dy(x,k,u)))}}}return new Ny(t,e,c,i)}}async getSites(t){}async getNormalizationVector(t,e,n,r){let i;if(await this.init(),Number.isInteger(e))i=e;else{const t=this.getFileChrName(e);i=this.chromosomeIndexMap[t]}const o=function(t,e,n,r){return t+"_"+e+"_"+n+"_"+r}(t,i,n.toString(),r);if(this.normVectorCache.hasOwnProperty(o))return Promise.resolve(this.normVectorCache[o]);const a=await this.getNormVectorIndex();if(!a)return;const s=a[o];if(!s)return;const c=await this.file.read(s.filePosition,s.size);if(!c)return;const h=new Ey(new DataView(c)),l=h.getInt(),u=[];let f=!0;for(let t=0;t<l;t++)u[t]=h.getDouble(),isNaN(u[t])||(f=!1);return f?void 0:new My(t,i,n,r,u)}async getNormVectorIndex(){if(!this.normVectorIndex){if(!this.config.nvi&&this.remote&&this.url){const t=new URL(this.url),e=encodeURIComponent(t.hostname+t.pathname),n=await my("https://t5dvc6kn3f.execute-api.us-east-1.amazonaws.com/dev/nvi/"+e);if(200===n.status){const t=await n.text();t&&(this.config.nvi=t)}}if(this.config.nvi){const t=decodeURIComponent(this.config.nvi).split(","),e={start:parseInt(t[0]),size:parseInt(t[1])};return this.readNormVectorIndex(e)}try{return await this.readNormExpectedValuesAndNormVectorIndex(),this.normVectorIndex}catch(t){"416"===t.code||416===t.code?this.normExpectedValueVectorsPosition=void 0:console.error(t)}}return this.normVectorIndex}async getNormalizationOptions(){return await this.getNormVectorIndex(),this.normalizationTypes}async readNormVectorIndex(t){await this.init(),this.normalizationVectorIndexRange=t;const e=await this.file.read(t.start,t.size),n=new Ey(new DataView(e));this.normVectorIndex={};let r=n.getInt();for(;r-- >0;)this.parseNormVectorEntry(n);return this.normVectorIndex}async readNormExpectedValuesAndNormVectorIndex(){if(await this.init(),void 0===this.normExpectedValueVectorsPosition)return;const t=await this.skipExpectedValues(this.normExpectedValueVectorsPosition);let e=4,n=await this.file.read(t,4);const r=new Ey(new DataView(n)).getInt(),i={start:t+e,size:30*r};n=await this.file.read(i.start,i.size),this.normalizedExpectedValueVectors={},this.normVectorIndex={},await async function n(r,i){const o=new Ey(new DataView(i));for(;r-- >0;){if(o.available()<100){r++,e+=o.position;const i=Math.max(1e3,30*r),a={start:t+e,size:i},s=await this.file.read(a.start,a.size);return n.call(this,r,s)}this.parseNormVectorEntry(o)}e+=o.position}.call(this,r,n),this.config.nvi=t.toString()+","+e}async skipExpectedValues(t){const e=new Ry({file:this.file,size:256e3}),n={start:t,size:4},r=await e.read(n.start,n.size),i=new Ey(new DataView(r)).getInt();return 0===i?n.start+n.size:async function t(n,r){let i={start:n,size:500},o=0,a=n,s=await e.read(i.start,i.size),c=new Ey(new DataView(s));c.getString(),c.getString(),c.getInt();const h=c.getInt();o+=c.position+8*h,i={start:n+o,size:4},s=await e.read(i.start,i.size),c=new Ey(new DataView(s));const l=c.getInt();return o+=4+12*l,0===--r?Promise.resolve(a+o):t(a+o,r)}(t+4,i)}getZoomIndexForBinSize(t,e){let n;if("BP"===(e=e||"BP"))n=this.bpResolutions;else{if("FRAG"!==e)throw new Error("Invalid unit: "+e);n=this.fragResolutions}for(let e=0;e<n.length;e++)if(n[e]===t)return e;return-1}parseNormVectorEntry(t){const e=t.getString(),n=t.getInt(),r=t.getString(),i=t.getInt(),o=t.getLong(),a=t.getInt(),s=e+"_"+n+"_"+r+"_"+i;this.normalizationTypes.includes(e)||this.normalizationTypes.push(e),this.normVectorIndex[s]={filePosition:o,size:a}}getFileChrName(t){return this.chrAliasTable.hasOwnProperty(t)?this.chrAliasTable[t]:t}}function Py(t,e,n,r,i){var o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b;for(o=i.getString(),i.getInt(),a=i.getFloat(),s=i.getFloat(),c=i.getFloat(),h=i.getFloat(),u={unit:o,binSize:l=i.getInt()},f=i.getInt(),p=i.getInt(),d=new Iy(t,e,u,f,p,n,r),g=i.getInt(),m={};g-- >0;)y=i.getInt(),w=i.getLong(),b=i.getInt(),m[y]={filePosition:w,size:b};return d.blockIndexMap=m,v=a/(t.size/l)/(e.size/l),d.averageCount=v,d.sumCounts=a,d.stdDev=c,d.occupiedCellCount=s,d.percent95=h,d}class zy{constructor(t){this.config=t,this.hicFile=new Oy(t)}async getMetaData(){return await this.hicFile.getMetaData()}async getBlocks(t,e,n,r){await this.hicFile.init();const i=this.hicFile.getFileChrName(t.chr),o=this.hicFile.getFileChrName(e.chr),a=this.hicFile.chromosomeIndexMap[i],s=this.hicFile.chromosomeIndexMap[o];if(void 0===a)return[];if(void 0===s)return[];const c=void 0===t.start?void 0:t.start/r,h=void 0===t.end?void 0:t.end/r,l=void 0===e.start?void 0:e.start/r,u=void 0===e.end?void 0:e.end/r,f=await this.hicFile.readMatrix(a,s);if(!f)return[];const p=void 0===r?0:this.hicFile.getZoomIndexForBinSize(r,n);if(-1===p)throw new Error("Invalid bin size");const d=f.bpZoomData[p];if(null===d){let n=`No data avalailble for resolution: ${r}  for map ${t.chr}-${e.chr}`;throw new Error(n)}const g=d.blockBinCount,m=void 0===c?0:Math.floor(c/g),v=void 0===c?d.blockColumnCount:Math.floor(h/g),y=void 0===l?0:Math.floor(l/g),w=void 0===u?d.blockColumnCount:Math.floor(u/g),b=[],x=a===s;for(let t=y;t<=w;t++)for(let e=m;e<=v;e++){let n;n=x&&t<e?e*d.blockColumnCount+t:t*d.blockColumnCount+e,b.push(this.hicFile.readBlock(n,d))}return Promise.all(b)}async getContactRecords(t,e,n,r,i){const o=await this.getBlocks(e,n,r,i);if(!o||0===o.length)return[];const a=this.hicFile.getFileChrName(e.chr),s=this.hicFile.getFileChrName(n.chr),c=void 0===e.start?void 0:e.start/i,h=void 0===e.end?void 0:e.end/i,l=void 0===n.start?void 0:n.start/i,u=void 0===n.end?void 0:n.end/i;let f,p;const d=t&&"NONE"!==t;d&&(f=await this.hicFile.getNormalizationVector(t,a,r,i),p=a===s?f:await this.hicFile.getNormalizationVector(t,s,r,i));const g=[];for(let t of o)if(t)for(let e of t.records)if(void 0===c||e.bin1>=c&&e.bin1<=h&&e.bin2>=l&&e.bin2<=u)if(d){const t=e.bin1,n=e.bin2,r=f.data[t]*p.data[n];if(0!==r[t]&&!isNaN(r)){const i=e.counts/r;g.push(new Dy(t,n,i))}}else g.push(e);return g}async getNormalizationOptions(){return this.hicFile.getNormalizationOptions()}async getNVI(){return await this.hicFile.getNormVectorIndex(),this.hicFile.config.nvi}getFileChrName(t){return this.hicFile.chrAliasTable.hasOwnProperty(t)?this.hicFile.chrAliasTable[t]:t}}function $y(t){return function(t,e){const n=document.createElement(t);e&&(e.class&&n.classList.add(e.class),e.id&&(n.id=e.id),e.style&&function(t,e){for(let n of Object.keys(e))t.style[n]=e[n]}(n,e.style));return n}("div",t)}function Uy(t){const e=getComputedStyle(t);"none"!==e.display&&(t._initialDisplay=e.display),t.style.display="none"}function Hy(t){if("none"===getComputedStyle(t).display){const e=t._initialDisplay||"block";t.style.display=e}}function jy(t){document.querySelectorAll(t).forEach(t=>{Uy(t)})}function Vy(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function qy(t){if(t.type.startsWith("touch")){const e=t.touches[0];return{x:e.pageX,y:e.pageY}}return{x:t.pageX,y:t.pageY}}function Gy(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}const Wy={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};class Zy{constructor(t){this.container=$y({class:"igv-ui-alert-dialog-container"}),t.appendChild(this.container);let e=$y();this.container.appendChild(e);let n=$y({id:"igv-ui-alert-dialog-body"});this.container.appendChild(n),this.body=$y({id:"igv-ui-alert-dialog-body-copy"}),n.appendChild(this.body);let r=$y();this.container.appendChild(r),this.ok=$y(),r.appendChild(this.ok),this.ok.textContent="OK";const i=this;this.ok.addEventListener("click",(function(t){"function"==typeof i.callback&&(i.callback("OK"),i.callback=void 0),i.body.innerHTML="",Uy(i.container)})),Uy(this.container)}present(t,e){let n=t.message||t;Wy.hasOwnProperty(n)&&(n=Wy[n]),this.body.innerHTML=n,this.callback=e,Hy(this.container)}}let Ky;function Xy(t,e){e.addEventListener("mousedown",Yy.bind(t))}function Yy(t){t.stopPropagation(),t.preventDefault();!function(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;e.top,n.pageYOffset,e.left,n.pageXOffset}(this);const e=Qy.bind(this),n=Jy.bind(this),r=getComputedStyle(this),i=parseInt(r.top.replace("px","")),o=parseInt(r.left.replace("px",""));Ky={dragFunction:e,dragEndFunction:n,screenX:t.screenX,screenY:t.screenY,top:i,left:o},document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),document.addEventListener("mouseleave",n),document.addEventListener("mouseexit",n)}function Qy(t){if(!Ky)return void console.log("No drag data!");t.stopPropagation(),t.preventDefault();const e=t.screenX-Ky.screenX,n=t.screenY-Ky.screenY;this.style.left=`${Ky.left+e}px`,this.style.top=`${Ky.top+n}px`}function Jy(t){if(!Ky)return void console.log("No drag data!");t.stopPropagation(),t.preventDefault();const e=Ky.dragFunction,n=Ky.dragEndFunction;document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n),document.removeEventListener("mouseleave",n),document.removeEventListener("mouseexit",n),Ky=void 0}function tw(t,e){e=e||"currentColor";let n=ew[t];n||(console.error(`No icon named: ${t}`),n=ew.question);const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"viewBox","0 0 "+n[0]+" "+n[1]);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"fill",e),i.setAttributeNS(null,"d",n[4]),r.appendChild(i),r}const ew={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]},nw={licorice:"#000000",lead:"#1e1e1e",tungsten:"#3a3a3a",iron:"#545453",steel:"#6e6e6e",tin:"#878687",nickel:"#888787",aluminum:"#a09fa0",magnesium:"#b8b8b8",silver:"#d0d0d0",mercury:"#e8e8e8",snow:"white",cayenne:"#891100",mocha:"#894800",aspargus:"#888501",fern:"#458401",clover:"#028401",moss:"#018448",teal:"#008688",ocean:"#004a88",midnight:"#001888",eggplant:"#491a88",plum:"#891e88",maroon:"#891648",maraschino:"#ff2101",tangerine:"#ff8802",lemon:"#fffa03",lime:"#83f902",spring:"#05f802",seam_foam:"#03f987",turquoise:"#00fdff",aqua:"#008cff",blueberry:"#002eff",grape:"#8931ff",magenta:"#ff39ff",strawberry:"#ff2987",salmon:"#ff726e",cantaloupe:"#ffce6e",banana:"#fffb6d",honeydew:"#cefa6e",flora:"#68f96e",spindrift:"#68fbd0",ice:"#68fdff",sky:"#6acfff",orchid:"#6e76ff",lavender:"#d278ff",bubblegum:"#ff7aff",carnation:"#ff7fd3"};function rw(t,e){var n=document.createElement("div");t.appendChild(n),n.appendChild(function(t,e){return tw(t,e)}("times")),n.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e()}))}function iw(t,e,n){let r=Object.values(nw);var i;n&&"function"!=typeof n&&(r.splice(11,1),r.unshift((i=(i=n).match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===i.length?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""));for(let n of r){let r=$y({class:"igv-ui-color-swatch"});t.appendChild(r),r.style.backgroundColor=n,"white"===n||(r.onmouseenter=function(){this.style.borderColor=n},r.onmouseleave=function(){this.style.borderColor="white"},r.addEventListener("click",t=>{t.stopPropagation(),e(n)}),r.addEventListener("touchend",t=>{t.stopPropagation(),e(n)}))}}class ow{constructor(t){const e=this;this.parent=t,this.container=$y({class:"igv-ui-generic-dialog-container"}),t.appendChild(this.container);const n=$y({class:"igv-ui-generic-dialog-header"});this.container.appendChild(n),rw(n,i),this.label=$y({class:"igv-ui-generic-dialog-one-liner"}),this.container.appendChild(this.label),this.label.text="Unlabeled",this.input_container=$y({class:"igv-ui-generic-dialog-input"}),this.container.appendChild(this.input_container),this.input=document.createElement("input"),this.input_container.appendChild(this.input);const r=$y({class:"igv-ui-generic-dialog-ok-cancel"});function i(){"function"==typeof e.callback&&(e.callback(void 0),e.callback=void 0),e.input.value=void 0,Uy(e.container)}this.container.appendChild(r),this.ok=$y(),r.appendChild(this.ok),this.ok.textContent="OK",this.cancel=$y(),r.appendChild(this.cancel),this.cancel.textContent="Cancel",Xy(this.container,n),Uy(this.container),this.input.addEventListener("keyup",(function(t){13===t.keyCode&&("function"==typeof e.callback&&(e.callback(e.input.value),e.callback=void 0),e.input.value=void 0,Uy(e.container))})),this.ok.addEventListener("click",(function(){"function"==typeof e.callback&&(e.callback(e.input.value),e.callback=void 0),e.input.value=void 0,Uy(e.container)})),this.cancel.addEventListener("click",i)}present({label:t,value:e,callback:n},r){this.label.textContent=t,this.input.value=e,this.callback=n;const{x:i,y:o}=qy(r);this.clampLocation(i,o),Hy(this.container)}clampLocation(t,e){let n=this.container.getBoundingClientRect(),r=this.parent.getBoundingClientRect();const i=Math.min(Math.max(e,r.y),r.y+r.height-n.height),o=Math.min(Math.max(t,r.x),r.x+r.width-n.width);this.container.style.left=o+"px",this.container.style.top=i+"px"}}class aw{constructor({parent:t,top:e,left:n,width:r,height:i,border:o,closeHandler:a}){let s=$y({class:"igv-ui-generic-container"});t.appendChild(s),Uy(s),this.container=s,void 0!==e&&(this.container.style.width=e+"px"),void 0!==n&&(this.container.style.width=n+"px"),void 0!==r&&(this.container.style.width=r+"px"),void 0!==i&&(this.container.style.height=i+"px"),o&&(this.container.style.border=o);const c=$y();this.container.appendChild(c),rw(c,t=>{Uy(this.container),"function"==typeof a&&a(t)}),Xy(this.container,c)}show(){Hy(this.container)}hide(){Uy(this.container)}dispose(){this.container.parent&&this.container.parent.removeChild(this.container)}}class sw extends aw{constructor({parent:t,top:e,left:n,width:r,height:i,defaultColor:o,colorHandler:a}){super({parent:t,top:e,left:n,width:r||364,border:"1px solid gray"}),iw(this.container,a,o)}}class cw{constructor(t){const e=this;this.parent=t,this.popover=$y({class:"igv-ui-popover"}),t.appendChild(this.popover);const n=$y({class:"igv-ui-popover-header"});this.popover.appendChild(n),rw(n,(function(){Uy(e.popover)})),this.popoverContent=$y({class:"igv-ui-popover-track-popup-content"}),this.popover.appendChild(this.popoverContent),Xy(this.popover,n)}hide(){Uy(this.popover)}dispose(){Vy(this.popover),Object.keys(this).forEach((function(t){this[t]=void 0}))}presentMenu(t,e){const n=this.popover;if(jy(".igv-ui-popover"),Vy(this.popoverContent),e.length>0){const r=function(t,e){let n;n=t.length>0?t.map((function(t,n){let r;if("string"==typeof t)r=$y(),r.innerHTML=t;else if("Node"==typeof t)r=t;else{if("function"==typeof t.init&&t.init(),"checkbox"===t.type)r=function(t,e){const n=$y({class:"igv-ui-trackgear-popover-check-container"}),r=tw("check",!0===e?"#444":"transparent");r.style.borderColor="gray",r.style.borderWidth="1px",r.style.borderStyle="solid",n.appendChild(r);let i=$y();return i.textContent=t,n.appendChild(i),n}("Show all bases",t.value);else if("color"===t.type){const n=new sw({parent:e.parentElement,width:364,colorHandler:e=>t.click(e)});r=$y(),"string"==typeof t.label&&(r.textContent=t.label);const i=t=>{n.show(),Uy(e),t.preventDefault(),t.stopPropagation()};r.addEventListener("click",i),r.addEventListener("touchend",i),r.addEventListener("mouseup",(function(t){t.preventDefault(),t.stopPropagation()}))}else r=$y(),"string"==typeof t.label&&(r.textContent=t.label);if(t.click&&"color"!==t.type){function i(n){t.click(),Uy(e),n.preventDefault(),n.stopPropagation()}r.addEventListener("click",i),r.addEventListener("touchend",i),r.addEventListener("mouseup",(function(t){t.preventDefault(),t.stopPropagation()}))}}return{object:r,init:t.init}})):[];return n}(e,n);for(let t of r)this.popoverContent.appendChild(t.object);const i=qy(t);this.clampLocation(i.x,i.y),Hy(n)}}presentContent(t,e,n){jy(".igv-ui-popover"),void 0!==n&&(Vy(this.popoverContent),this.popoverContent.innerHTML=n,this.clampLocation(t,e),Hy(this.popover))}clampLocation(t,e){let n=this.popover.getBoundingClientRect(),r=this.parent.getBoundingClientRect();const i=Math.min(Math.max(e,r.y),r.y+r.height-n.height),o=Math.min(Math.max(t,r.x),r.x+r.width-n.width);this.popover.style.left=o+"px",this.popover.style.top=i+"px"}}let hw;const lw={init(t){hw||(hw=new Zy(t))},presentAlert:function(t,e){hw.present(t,e)}};(function(t){for(let e of document.styleSheets)if(e=e.href?e.href.replace(/^.*[\\\/]/,""):"",e===t)return!0;return!1})("igv-ui.css")||function(){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML='.igv-ui-generic-container {\n  position: absolute;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-ui-generic-container div:first-child div {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-ui-alert-dialog-container {\n  position: absolute;\n  z-index: 2048;\n  top: 50%;\n  left: 50%;\n  margin: -150px 0 0 -150px;\n  width: 300px;\n  height: 256px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-alert-dialog-container div:first-child {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-alert-dialog-container div:first-child div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-alert-dialog-container div:first-child div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-alert-dialog-container #igv-ui-alert-dialog-body {\n    color: #373737;\n    width: 100%;\n    height: calc(100% - 24px - 64px);\n    overflow-y: scroll; }\n    .igv-ui-alert-dialog-container #igv-ui-alert-dialog-body #igv-ui-alert-dialog-body-copy {\n      cursor: pointer;\n      margin: 16px;\n      width: auto;\n      height: auto;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      background-color: white;\n      border: unset; }\n  .igv-ui-alert-dialog-container div:last-child {\n    width: 100%;\n    height: 64px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-items: center; }\n    .igv-ui-alert-dialog-container div:last-child div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: #2B81AF;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-alert-dialog-container div:last-child div:hover {\n      cursor: pointer;\n      border-color: #25597f;\n      background-color: #25597f; }\n\n.igv-ui-generic-dialog-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-ui-popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 128px;\n  z-index: 4096;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background-color: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: none; }\n\n.igv-ui-popover-header {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee; }\n  .igv-ui-popover-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-ui-popover-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-ui-popover-track-popup-content {\n  position: relative;\n  top: 0;\n  left: 0;\n  max-height: 384px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  background-color: white; }\n  .igv-ui-popover-track-popup-content div {\n    margin-left: 4px;\n    background-color: white; }\n  .igv-ui-popover-track-popup-content div:hover {\n    cursor: pointer;\n    background-color: #efefef; }\n\n.igv-ui-popover-name-value {\n  cursor: default;\n  text-wrap: none;\n  white-space: nowrap;\n  max-width: 384px; }\n\n.igv-ui-popover-name {\n  font-weight: bold;\n  padding-right: 4px;\n  float: left; }\n\n.igv-ui-popover-value {\n  padding-left: 4px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 256px;\n  display: inline-block; }\n\n.igv-ui-trackgear-container {\n  position: relative;\n  width: 20px;\n  height: 20px;\n  margin-left: 4px;\n  color: #7F7F7F; }\n\n.igv-ui-trackgear-container:hover {\n  cursor: pointer;\n  color: #444; }\n\n.igv-ui-trackgear-popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 132px;\n  z-index: 4096;\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  text-align: left; }\n  .igv-ui-trackgear-popover > div:not(:first-child) {\n    width: 100%; }\n    .igv-ui-trackgear-popover > div:not(:first-child) > div {\n      background: white; }\n    .igv-ui-trackgear-popover > div:not(:first-child) > div:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      border-bottom-color: transparent;\n      border-bottom-style: solid;\n      border-bottom-width: thin; }\n    .igv-ui-trackgear-popover > div:not(:first-child) > div:hover {\n      background: #efefef; }\n\n.igv-ui-trackgear-popover-shim {\n  padding-left: 8px;\n  padding-right: 8px; }\n\n.igv-ui-trackgear-popover-header {\n  position: relative;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-color: transparent;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center; }\n  .igv-ui-trackgear-popover-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-ui-trackgear-popover-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-ui-trackgear-popover-check-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 20px;\n  background-color: transparent; }\n  .igv-ui-trackgear-popover-check-container div {\n    padding-top: 2px;\n    padding-left: 8px; }\n  .igv-ui-trackgear-popover-check-container svg:first-child {\n    position: relative;\n    width: 12px;\n    height: 12px; }\n    .igv-ui-trackgear-popover-check-container svg:first-child svg {\n      position: absolute;\n      width: 12px;\n      height: 12px; }\n\n.igv-ui-color-swatch {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  width: 32px;\n  height: 32px;\n  border-style: solid;\n  border-width: 2px;\n  border-color: white;\n  border-radius: 4px; }\n\n.igv-ui-colorpicker-menu-close-button {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 32px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n  padding-right: 8px; }\n  .igv-ui-colorpicker-menu-close-button i.fa {\n    display: block;\n    margin-left: 4px;\n    margin-right: 4px;\n    color: #5f5f5f; }\n  .igv-ui-colorpicker-menu-close-button i.fa:hover,\n  .igv-ui-colorpicker-menu-close-button i.fa:focus,\n  .igv-ui-colorpicker-menu-close-button i.fa:active {\n    cursor: pointer;\n    color: #0f0f0f; }\n\n.igv-ui-panel, .igv-ui-panel-column, .igv-ui-panel-row {\n  z-index: 2048;\n  background-color: white;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n.igv-ui-panel-column {\n  display: flex;\n  flex-direction: column; }\n\n.igv-ui-panel-row {\n  display: flex;\n  flex-direction: row; }\n\n.igv-ui-dialog {\n  z-index: 2048;\n  position: fixed;\n  width: fit-content;\n  height: fit-content;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  background-color: white;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400; }\n  .igv-ui-dialog .igv-ui-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-dialog .igv-ui-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-dialog .igv-ui-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-dialog .igv-ui-dialog-one-liner {\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin: 8px;\n    overflow-wrap: break-word;\n    background-color: white;\n    font-weight: bold; }\n  .igv-ui-dialog .igv-ui-dialog-ok-cancel {\n    width: 100%;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div {\n      margin: 16px;\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child {\n      background-color: #5ea4e0; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child {\n      background-color: #c4c4c4; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-ui-dialog .igv-ui-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-dialog .igv-ui-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-dialog .igv-ui-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-ui-textbox {\n  background-color: white;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n/*# sourceMappingURL=igv-ui.css.map */\n',document.head.insertBefore(t,document.head.childNodes[document.head.childNodes.length-1])}();const uw=function(t,e,n){return Math.min(Math.max(t,e),n)};function fw(){this.content=[]}fw.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]===t){var r=this.content.pop();if(n===e-1)break;this.content[n]=r,this.bubbleUp(n),this.sinkDown(n);break}},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t],n=e;t>0;){var r=Math.floor((t+1)/2)-1,i=this.content[r];if(n>=i)break;this.content[r]=e,this.content[t]=i,t=r}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=n;;){var i=2*(t+1),o=i-1,a=null;if(o<e){var s=this.content[o],c=s;s<r&&(a=o)}if(i<e)this.content[i]<(null==a?r:c)&&(a=i);if(null==a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};const pw={rgbListFromHSV:()=>{let t=[];for(let e=1;e>=.5;e-=.1)for(let n=0;n<1;n+=1/28){const r="rgb("+pw.hsvToRgb(n,1,e).join(",")+")";t.push(r)}return t.pop(),t.push(pw.rgbColor(16,16,16)),t},rgbToHex:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(null!==e)return"rgb("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+")"},hsvToRgb:function(t,e,n){var r,i,o,a=Math.floor(6*t),s=6*t-a,c=n*(1-e),h=n*(1-s*e),l=n*(1-(1-s)*e);switch(a%6){case 0:r=n,i=l,o=c;break;case 1:r=h,i=n,o=c;break;case 2:r=c,i=n,o=l;break;case 3:r=c,i=h,o=n;break;case 4:r=l,i=c,o=n;break;case 5:r=n,i=c,o=h}return[Math.floor(255*r),Math.floor(255*i),Math.floor(255*o)]},hslToRgb:function(t,e,n){var r,i,o;if(0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,s=2*n-a;r=pw.hue2rgb(s,a,t+1/3),i=pw.hue2rgb(s,a,t),o=pw.hue2rgb(s,a,t-1/3)}return[255*r,255*i,255*o]},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),rgbaColor:function(t,e,n,r){return"rgba("+(t=uw(t,0,255))+","+(e=uw(e,0,255))+","+(n=uw(n,0,255))+","+(r=uw(r,0,1))+")"},rgbColor:function(t,e,n){return"rgb("+(t=uw(t,0,255))+","+(e=uw(e,0,255))+","+(n=uw(n,0,255))+")"},greyScale:function(t){var e=uw(t,0,255);return"rgb("+e+","+e+","+e+")"},randomGrey:function(t,e){t=uw(t,0,255),e=uw(e,0,255);var n=Math.round(Math.random(t,e)).toString(10);return"rgb("+n+","+n+","+n+")"},randomRGB:function(t,e){return t=uw(t,0,255),e=uw(e,0,255),"rgb("+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+")"},randomRGBConstantAlpha:function(t,e,n){return t=uw(t,0,255),e=uw(e,0,255),"rgba("+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+Math.round(Math.random(t,e)).toString(10)+","+n+")"},addAlpha:function(t,e){const n=this.colorNameToHex(t);n&&(t=n);var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return t.startsWith("rgba")?t:(r&&(t=pw.hexToRgb(t)),t.startsWith("rgb")?t.replace("rgb","rgba").replace(")",", "+e+")"):t)},getCompositeColor:function(t,e,n){return"rgb("+Math.floor(n*e[0]+(1-n)*t[0])+","+Math.floor(n*e[1]+(1-n)*t[1])+","+Math.floor(n*e[2]+(1-n)*t[2])+")"},createColorString:function(t){return t.includes(",")?t.startsWith("rgb")?t:"rgb("+t+")":t},darkenLighten:function(t,e){let n,r=this.colorNameToHex(t);n=r?pw.hexToRgb(r):t.startsWith("rgb(")?t:pw.hexToRgb(t);const i=n.replace(")","").substring(4).split(","),o=Math.max(0,Math.min(255,Number.parseInt(i[0].trim())+e)),a=Math.max(0,Math.min(255,Number.parseInt(i[1].trim())+e)),s=Math.max(0,Math.min(255,Number.parseInt(i[2].trim())+e));return"rgb("+o.toString()+","+a.toString()+","+s.toString()+")"},colorNameToHex:function(t){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",darkgrey:"#a9a9a9",darkslategrey:"#2f4f4f",dimgrey:"#696969",grey:"#808080",lightgray:"#d3d3d3",lightslategrey:"#778899",slategrey:"#708090"}[t]}};function dw(t){return t instanceof File}const gw=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","vcf","bb","bigbed","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram"]);function mw(t){if(function(t){t.featureType&&(t.type=t.type||t.featureType,t.featureType=void 0);"bed"===t.type?(t.type="annotation",t.format=t.format||"bed"):"annotations"===t.type?t.type="annotation":"alignments"===t.type?t.type="alignment":"bam"===t.type?(t.type="alignment",t.format="bam"):"vcf"===t.type?(t.type="variant",t.format="vcf"):"t2d"===t.type?t.type="gwas":"FusionJuncSpan"!==t.type||t.format?"aed"===t.type&&(t.type="annotation",t.format=t.format||"aed"):t.format="fusionjuncspan"}(t),void 0===t.sourceType&&t.url&&(t.sourceType="file"),"file"===t.sourceType)if(void 0===t.format){const e=dw(t.url)?t.url.name:t.url;t.format=function(t){var e,n;if((t=t.toLowerCase()).endsWith("refgene.txt.gz")||t.endsWith("refgene.txt.bgz")||t.endsWith("refgene.txt")||t.endsWith("refgene.sorted.txt.gz")||t.endsWith("refgene.sorted.txt.bgz"))return"refgene";(e=t.indexOf("?"))>0&&(t=t.substr(0,e));t.endsWith(".gz")&&(t=t.substr(0,t.length-3));(t.endsWith(".txt")||t.endsWith(".tab")||t.endsWith(".bgz"))&&(t=t.substr(0,t.length-4));switch(e=t.lastIndexOf("."),n=e<0?t:t.substr(e+1)){case"bw":return"bigwig";case"bb":return"bigbed";default:return gw.has(n)?n:void 0}}(e)}else t.format=t.format.toLowerCase();if(void 0===t.type){if(t.type)return;if(t.format)switch(t.format.toLowerCase()){case"bw":case"bigwig":case"wig":case"bedgraph":case"tdf":t.type="wig";break;case"vcf":t.type="variant";break;case"seg":t.type="seg";break;case"bam":case"cram":t.type="alignment";break;case"bedpe":case"bedpe-loop":t.type="interaction";break;case"bp":t.type="arc";break;default:t.type="annotation"}}}const vw=function(t){var e,n;return t.length>0?(e=Number.MAX_VALUE,n=-Number.MAX_VALUE,t.forEach((function(t){Number.isNaN(t.value)||(e=Math.min(e,t.value),n=Math.max(n,t.value))})),n>0&&(e=Math.min(0,e)),n<0&&(n=0)):(e=0,n=100),{min:e,max:n}};function yw(t){return"string"==typeof t||t instanceof String}function ww(t){var e=String(t).split(/[.,]/);return e[0].split("").reverse().reduce((function(t,e,n){return n%3==0?t+","+e:t+e})).split("").reverse().join("")+(e[1]?"."+e[1]:"")}const bw=function(t){return t.split(/\n|\r\n|\r/g)};var xw={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};xw.Zip.CompressionMethod={STORE:0,DEFLATE:8},xw.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},xw.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},xw.Zip.FileHeaderSignature=[80,75,1,2],xw.Zip.LocalFileHeaderSignature=[80,75,3,4],xw.Zip.CentralDirectorySignature=[80,75,5,6],xw.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var n,r=t.length,i=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof e.compressionMethod&&(e.compressionMethod=xw.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case xw.Zip.CompressionMethod.STORE:break;case xw.Zip.CompressionMethod.DEFLATE:i=xw.CRC32.calc(t),t=this.deflateWithOption(t,e),n=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:n,encrypted:!1,size:r,crc32:i})},xw.Zip.prototype.setPassword=function(t){this.password=t},xw.Zip.prototype.compress=function(){var t,e,n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b,x,k,S,C,_,R=this.files,T=0,E=0;for(k=0,S=R.length;k<S;++k){if(p=(t=R[k]).option.filename?t.option.filename.length:0,d=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=xw.CRC32.calc(t.buffer),t.option.compressionMethod){case xw.Zip.CompressionMethod.STORE:break;case xw.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(x=this.createEncryptionKey(t.option.password||this.password),w=t.buffer,(b=new Uint8Array(w.length+12)).set(w,12),w=b,C=0;C<12;++C)w[C]=this.encode(x,11===k?255&t.crc32:256*Math.random()|0);for(_=w.length;C<_;++C)w[C]=this.encode(x,w[C]);t.buffer=w}T+=30+p+t.buffer.length,E+=46+p+g}for(o=22+(this.comment?this.comment.length:0),e=new Uint8Array(T+E+o),n=0,i=(r=T)+E,k=0,S=R.length;k<S;++k)p=(t=R[k]).option.filename?t.option.filename.length:0,d=0,g=t.option.comment?t.option.comment.length:0,a=n,e[n++]=xw.Zip.LocalFileHeaderSignature[0],e[n++]=xw.Zip.LocalFileHeaderSignature[1],e[n++]=xw.Zip.LocalFileHeaderSignature[2],e[n++]=xw.Zip.LocalFileHeaderSignature[3],e[r++]=xw.Zip.FileHeaderSignature[0],e[r++]=xw.Zip.FileHeaderSignature[1],e[r++]=xw.Zip.FileHeaderSignature[2],e[r++]=xw.Zip.FileHeaderSignature[3],20,e[r++]=20,e[r++]=t.option.os||xw.Zip.OperatingSystem.MSDOS,e[n++]=e[r++]=20,e[n++]=e[r++]=0,s=0,(t.option.password||this.password)&&(s|=xw.Zip.Flags.ENCRYPT),e[n++]=e[r++]=255&s,e[n++]=e[r++]=s>>8&255,c=t.option.compressionMethod,e[n++]=e[r++]=255&c,e[n++]=e[r++]=c>>8&255,h=t.option.date||new Date,e[n++]=e[r++]=(7&h.getMinutes())<<5|h.getSeconds()/2|0,e[n++]=e[r++]=h.getHours()<<3|h.getMinutes()>>3,e[n++]=e[r++]=(h.getMonth()+1&7)<<5|h.getDate(),e[n++]=e[r++]=(h.getFullYear()-1980&127)<<1|h.getMonth()+1>>3,l=t.crc32,e[n++]=e[r++]=255&l,e[n++]=e[r++]=l>>8&255,e[n++]=e[r++]=l>>16&255,e[n++]=e[r++]=l>>24&255,u=t.buffer.length,e[n++]=e[r++]=255&u,e[n++]=e[r++]=u>>8&255,e[n++]=e[r++]=u>>16&255,e[n++]=e[r++]=u>>24&255,f=t.size,e[n++]=e[r++]=255&f,e[n++]=e[r++]=f>>8&255,e[n++]=e[r++]=f>>16&255,e[n++]=e[r++]=f>>24&255,e[n++]=e[r++]=255&p,e[n++]=e[r++]=p>>8&255,e[n++]=e[r++]=255&d,e[n++]=e[r++]=d>>8&255,e[r++]=255&g,e[r++]=g>>8&255,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,(m=t.option.filename)&&(e.set(m,n),e.set(m,r),n+=p,r+=p),(v=t.option.extraField)&&(e.set(v,n),e.set(v,r),n+=d,r+=d),(y=t.option.comment)&&(e.set(y,r),r+=g),e.set(t.buffer,n),n+=t.buffer.length;return e[i++]=xw.Zip.CentralDirectorySignature[0],e[i++]=xw.Zip.CentralDirectorySignature[1],e[i++]=xw.Zip.CentralDirectorySignature[2],e[i++]=xw.Zip.CentralDirectorySignature[3],e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&S,e[i++]=S>>8&255,e[i++]=255&S,e[i++]=S>>8&255,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=E>>16&255,e[i++]=E>>24&255,e[i++]=255&T,e[i++]=T>>8&255,e[i++]=T>>16&255,e[i++]=T>>24&255,g=this.comment?this.comment.length:0,e[i++]=255&g,e[i++]=g>>8&255,this.comment&&(e.set(this.comment,i),i+=g),e},xw.Zip.prototype.deflateWithOption=function(t,e){return new xw.RawDeflate(t,e.deflateOption).compress()},xw.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},xw.Zip.prototype.encode=function(t,e){var n=this.getByte(t);return this.updateKeys(t,e),n^e},xw.Zip.prototype.updateKeys=function(t,e){t[0]=xw.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=xw.CRC32.single(t[2],t[1]>>>24)},xw.Zip.prototype.createEncryptionKey=function(t){var e,n,r=[305419896,591751049,878082192];for(r=new Uint32Array(r),e=0,n=t.length;e<n;++e)this.updateKeys(r,255&t[e]);return r},xw.Huffman.buildHuffmanTable=function(t){var e,n,r,i,o,a,s,c,h,l,u,f=t.length,p=0,d=Number.POSITIVE_INFINITY;for(c=0,h=f;c<h;++c)t[c]>p&&(p=t[c]),t[c]<d&&(d=t[c]);for(e=1<<p,n=new Uint32Array(e),r=1,i=0,o=2;r<=p;){for(c=0;c<f;++c)if(t[c]===r){for(a=0,s=i,l=0;l<r;++l)a=a<<1|1&s,s>>=1;for(u=r<<16|c,l=a;l<e;l+=o)n[l]=u;++i}++r,i<<=1,o<<=1}return[n,p,d]};var kw=xw.Huffman.buildHuffmanTable;xw.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=xw.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case xw.RawInflate.BufferType.BLOCK:this.op=xw.RawInflate.MaxBackwardLength,this.output=new Uint8Array(xw.RawInflate.MaxBackwardLength+this.bufferSize+xw.RawInflate.MaxCopyLength);break;case xw.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},xw.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},xw.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case xw.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case xw.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},xw.RawInflate.MaxBackwardLength=32768,xw.RawInflate.MaxCopyLength=258,xw.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xw.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),xw.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),xw.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),xw.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),xw.RawInflate.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return kw(n)}(),xw.RawInflate.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return kw(n)}(),xw.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},xw.RawInflate.prototype.readBits=function(t){var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,o=this.ip;if(o+(t-r+7>>3)>=i.length)throw new Error("input buffer is broken");for(;r<t;)n|=i[o++]<<r,r+=8;return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=o,e},xw.RawInflate.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,o=this.input,a=this.ip,s=o.length,c=t[0],h=t[1];i<h&&!(a>=s);)r|=o[a++]<<i,i+=8;if((n=(e=c[r&(1<<h)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=a,65535&e},xw.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,n=this.input,r=this.ip,i=this.output,o=this.op,a=n.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,r+1>=a)throw new Error("invalid uncompressed block header: LEN");if(t=n[r++]|n[r++]<<8,r+1>=a)throw new Error("invalid uncompressed block header: NLEN");if(t===~(n[r++]|n[r++]<<8))throw new Error("invalid uncompressed block header: length verify");if(r+t>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case xw.RawInflate.BufferType.BLOCK:for(;o+t>i.length;)t-=e=s-o,i.set(n.subarray(r,r+e),o),o+=e,r+=e,this.op=o,i=this.expandBufferBlock(),o=this.op;break;case xw.RawInflate.BufferType.ADAPTIVE:for(;o+t>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(n.subarray(r,r+t),o),o+=t,r+=t,this.ip=r,this.op=o,this.output=i},xw.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case xw.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(xw.RawInflate.FixedLiteralLengthTable,xw.RawInflate.FixedDistanceTable);break;case xw.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(xw.RawInflate.FixedLiteralLengthTable,xw.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},xw.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i,o,a,s,c,h=this.readBits(5)+257,l=this.readBits(5)+1,u=this.readBits(4)+4,f=new Uint8Array(xw.RawInflate.Order.length);for(s=0;s<u;++s)f[xw.RawInflate.Order[s]]=this.readBits(3);for(t=kw(f),r=new Uint8Array(h+l),s=0,c=h+l;s<c;)switch(i=this.readCodeByTable(t)){case 16:for(a=3+this.readBits(2);a--;)r[s++]=o;break;case 17:for(a=3+this.readBits(3);a--;)r[s++]=0;o=0;break;case 18:for(a=11+this.readBits(7);a--;)r[s++]=0;o=0;break;default:r[s++]=i,o=i}switch(e=kw(r.subarray(0,h)),n=kw(r.subarray(h)),this.bufferType){case xw.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,n);break;case xw.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,n);break;default:throw new Error("invalid inflate mode")}},xw.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,o,a,s,c=n.length-xw.RawInflate.MaxCopyLength,h=xw.RawInflate.LengthCodeTable,l=xw.RawInflate.LengthExtraTable,u=xw.RawInflate.DistCodeTable,f=xw.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=c&&(this.op=r,n=this.expandBufferBlock(),r=this.op),n[r++]=i;else for(s=h[o=i-257],l[o]>0&&(s+=this.readBits(l[o])),a=u[i=this.readCodeByTable(e)],f[i]>0&&(a+=this.readBits(f[i])),r>=c&&(this.op=r,n=this.expandBufferBlock(),r=this.op);s--;)n[r]=n[r++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},xw.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,o,a,s,c=n.length,h=xw.RawInflate.LengthCodeTable,l=xw.RawInflate.LengthExtraTable,u=xw.RawInflate.DistCodeTable,f=xw.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=c&&(c=(n=this.expandBufferAdaptive()).length),n[r++]=i;else for(s=h[o=i-257],l[o]>0&&(s+=this.readBits(l[o])),a=u[i=this.readCodeByTable(e)],f[i]>0&&(a+=this.readBits(f[i])),r+s>c&&(c=(n=this.expandBufferAdaptive()).length);s--;)n[r]=n[r++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},xw.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-xw.RawInflate.MaxBackwardLength),n=this.op-xw.RawInflate.MaxBackwardLength,r=this.output;return e.set(r.subarray(xw.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,r.set(r.subarray(n,n+xw.RawInflate.MaxBackwardLength)),this.op=xw.RawInflate.MaxBackwardLength,r},xw.RawInflate.prototype.expandBufferAdaptive=function(t){var e,n,r,i=this.input.length/this.ip+1|0,o=this.input,a=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(o.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<a.length?a.length+r:a.length<<1:a.length*i,(e=new Uint8Array(n)).set(a),this.output=e,this.output},xw.RawInflate.prototype.concatBufferBlock=function(){var t,e,n,r,i,o=0,a=this.totalpos+(this.op-xw.RawInflate.MaxBackwardLength),s=this.output,c=this.blocks,h=new Uint8Array(a);if(0===c.length)return this.output.subarray(xw.RawInflate.MaxBackwardLength,this.op);for(e=0,n=c.length;e<n;++e)for(r=0,i=(t=c[e]).length;r<i;++r)h[o++]=t[r];for(e=xw.RawInflate.MaxBackwardLength,n=this.op;e<n;++e)h[o++]=s[e];return this.blocks=[],this.buffer=h,this.buffer},xw.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};kw=xw.Huffman.buildHuffmanTable;xw.RawInflateStream=function(t,e,n){this.blocks=[],this.bufferSize=n||65e3,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=xw.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},xw.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},xw.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},xw.RawInflateStream.prototype.decompress=function(t,e){var n=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!n;)switch(this.status){case xw.RawInflateStream.Status.INITIALIZED:case xw.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(n=!0);break;case xw.RawInflateStream.Status.BLOCK_HEADER_END:case xw.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case xw.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(n=!0);break;case xw.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(n=!0);break;case xw.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(n=!0)}break;case xw.RawInflateStream.Status.BLOCK_BODY_END:case xw.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case xw.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(n=!0);break;case xw.RawInflateStream.BlockType.FIXED:case xw.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(n=!0)}break;case xw.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?n=!0:this.status=xw.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},xw.RawInflateStream.MaxBackwardLength=32768,xw.RawInflateStream.MaxCopyLength=258,xw.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xw.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),xw.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),xw.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),xw.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),xw.RawInflateStream.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return kw(n)}(),xw.RawInflateStream.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return kw(n)}(),xw.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=xw.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=xw.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=xw.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=xw.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=xw.RawInflateStream.Status.BLOCK_HEADER_END},xw.RawInflateStream.prototype.readBits=function(t){for(var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,o=this.ip;r<t;){if(i.length<=o)return-1;n|=(e=i[o++])<<r,r+=8}return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=o,e},xw.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,o=this.input,a=this.ip,s=t[0],c=t[1];i<c;){if(o.length<=a)return-1;r|=o[a++]<<i,i+=8}if((n=(e=s[r&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=a,65535&e},xw.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,n=this.ip;if(this.status=xw.RawInflateStream.Status.BLOCK_BODY_START,n+4>=e.length)return-1;if((t=e[n++]|e[n++]<<8)===~(e[n++]|e[n++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=n,this.blockLength=t,this.status=xw.RawInflateStream.Status.BLOCK_BODY_END},xw.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,n=this.output,r=this.op,i=this.blockLength;for(this.status=xw.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(r===n.length&&(n=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=r,this.blockLength=i+1,-1;n[r++]=t[e++]}return i<0&&(this.status=xw.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=r,0},xw.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=xw.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=xw.RawInflateStream.FixedLiteralLengthTable,this.distTable=xw.RawInflateStream.FixedDistanceTable,this.status=xw.RawInflateStream.Status.BLOCK_BODY_END,0},xw.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},xw.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},xw.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i=new Uint8Array(xw.RawInflateStream.Order.length);if(this.status=xw.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,n=this.readBits(4)+4,t<0||e<0||n<0)return this.restore_(),-1;try{(function(){var o,a,s,c,h,l,u=0;for(h=0;h<n;++h){if((o=this.readBits(3))<0)throw new Error("not enough input");i[xw.RawInflateStream.Order[h]]=o}for(r=kw(i),c=new Uint8Array(t+e),h=0,l=t+e;h<l;){if((a=this.readCodeByTable(r))<0)throw new Error("not enough input");switch(a){case 16:if((o=this.readBits(2))<0)throw new Error("not enough input");for(s=3+o;s--;)c[h++]=u;break;case 17:if((o=this.readBits(3))<0)throw new Error("not enough input");for(s=3+o;s--;)c[h++]=0;u=0;break;case 18:if((o=this.readBits(7))<0)throw new Error("not enough input");for(s=11+o;s--;)c[h++]=0;u=0;break;default:c[h++]=a,u=a}}this.litlenTable=kw(c.subarray(0,t)),this.distTable=kw(c.subarray(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=xw.RawInflateStream.Status.BLOCK_BODY_END,0},xw.RawInflateStream.prototype.decodeHuffman=function(){var t,e,n,r,i,o=this.output,a=this.op,s=this.litlenTable,c=this.distTable,h=o.length;for(this.status=xw.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(s))<0)return this.op=a,this.restore_(),-1;if(256===t)break;if(t<256)a===h&&(h=(o=this.expandBuffer()).length),o[a++]=t;else{if(e=t-257,r=xw.RawInflateStream.LengthCodeTable[e],xw.RawInflateStream.LengthExtraTable[e]>0){if((i=this.readBits(xw.RawInflateStream.LengthExtraTable[e]))<0)return this.op=a,this.restore_(),-1;r+=i}if((t=this.readCodeByTable(c))<0)return this.op=a,this.restore_(),-1;if(n=xw.RawInflateStream.DistCodeTable[t],xw.RawInflateStream.DistExtraTable[t]>0){if((i=this.readBits(xw.RawInflateStream.DistExtraTable[t]))<0)return this.op=a,this.restore_(),-1;n+=i}for(a+r>=h&&(h=(o=this.expandBuffer()).length);r--;)o[a]=o[a++-n];if(this.ip===this.input.length)return this.op=a,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=a,this.status=xw.RawInflateStream.Status.DECODE_BLOCK_END},xw.RawInflateStream.prototype.expandBuffer=function(t){var e,n,r,i=this.input.length/this.ip+1|0,o=this.input,a=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(o.length-this.ip)/this.litlenTable[2]/2*258|0)<a.length?a.length+r:a.length<<1:a.length*i,(e=new Uint8Array(n)).set(a),this.output=e,this.output},xw.RawInflateStream.prototype.concatBuffer=function(){var t,e,n=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,n)):this.output.subarray(this.sp,n),this.sp=n,n>xw.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=xw.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+xw.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(n-xw.RawInflateStream.MaxBackwardLength,n))),t},xw.Inflate=function(t,e){var n,r;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),n=t[this.ip++],r=t[this.ip++],15&n){case xw.CompressionMethod.DEFLATE:this.method=xw.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.rawinflate=new xw.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},xw.Inflate.BufferType=xw.RawInflate.BufferType,xw.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==xw.Adler32(t))throw new Error("invalid adler-32 checksum");return t},xw.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new xw.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},xw.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var n=new Uint8Array(this.input.length+t.length);n.set(this.input,0),n.set(t,this.input.length),this.input=n}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},xw.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,n=e[t++],r=e[t++];if(void 0===n||void 0===r)return-1;switch(15&n){case xw.CompressionMethod.DEFLATE:this.method=xw.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.ip=t},xw.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},xw.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},xw.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},xw.Gunzip.prototype.decodeMember=function(){var t,e,n,r,i,o,a,s,c,h=new xw.GunzipMember,l=this.input,u=this.ip;if(h.id1=l[u++],h.id2=l[u++],31!==h.id1||139!==h.id2)throw new Error("invalid file signature:"+h.id1+","+h.id2);switch(h.cm=l[u++],h.cm){case 8:break;default:throw new Error("unknown compression method: "+h.cm)}if(h.flg=l[u++],s=l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24,h.mtime=new Date(1e3*s),h.xfl=l[u++],h.os=l[u++],(h.flg&xw.Gzip.FlagsMask.FEXTRA)>0&&(h.xlen=l[u++]|l[u++]<<8,u=this.decodeSubField(u,h.xlen)),(h.flg&xw.Gzip.FlagsMask.FNAME)>0){for(a=[],o=0;(i=l[u++])>0;)a[o++]=String.fromCharCode(i);h.name=a.join("")}if((h.flg&xw.Gzip.FlagsMask.FCOMMENT)>0){for(a=[],o=0;(i=l[u++])>0;)a[o++]=String.fromCharCode(i);h.comment=a.join("")}if((h.flg&xw.Gzip.FlagsMask.FHCRC)>0&&(h.crc16=65535&xw.CRC32.calc(l,0,u),h.crc16!==(l[u++]|l[u++]<<8)))throw new Error("invalid header crc16");if(t=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24,l.length-u-4-4<512*t&&(r=t),e=new xw.RawInflate(l,{index:u,bufferSize:r}),h.data=n=e.decompress(),u=e.ip,h.crc32=c=(l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24)>>>0,xw.CRC32.calc(n)!==c)throw new Error("invalid CRC-32 checksum: 0x"+xw.CRC32.calc(n).toString(16)+" / 0x"+c.toString(16));if(h.isize=t=(l[u++]|l[u++]<<8|l[u++]<<16|l[u++]<<24)>>>0,(4294967295&n.length)!==t)throw new Error("invalid input size: "+(4294967295&n.length)+" / "+t);this.member.push(h),this.ip=u},xw.Gunzip.prototype.decodeSubField=function(t,e){return t+e},xw.Gunzip.prototype.concatMember=function(){var t,e,n,r=this.member,i=0,o=0;for(t=0,e=r.length;t<e;++t)o+=r[t].data.length;for(n=new Uint8Array(o),t=0;t<e;++t)n.set(r[t].data,i),i+=r[t].data.length;return n},xw.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},xw.GunzipMember.prototype.getName=function(){return this.name},xw.GunzipMember.prototype.getData=function(){return this.data},xw.GunzipMember.prototype.getMtime=function(){return this.mtime},xw.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},xw.Gzip.DefaultBufferSize=32768,xw.Gzip.prototype.compress=function(){var t,e,n,r,i,o,a,s,c=new Uint8Array(xw.Gzip.DefaultBufferSize),h=0,l=this.input,u=this.ip,f=this.filename,p=this.comment;if(c[h++]=31,c[h++]=139,c[h++]=8,t=0,this.flags.fname&&(t|=xw.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=xw.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=xw.Gzip.FlagsMask.FHCRC),c[h++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,c[h++]=255&e,c[h++]=e>>>8&255,c[h++]=e>>>16&255,c[h++]=e>>>24&255,c[h++]=0,c[h++]=xw.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(a=0,s=f.length;a<s;++a)(o=f.charCodeAt(a))>255&&(c[h++]=o>>>8&255),c[h++]=255&o;c[h++]=0}if(this.flags.comment){for(a=0,s=p.length;a<s;++a)(o=p.charCodeAt(a))>255&&(c[h++]=o>>>8&255),c[h++]=255&o;c[h++]=0}return this.flags.fhcrc&&(n=65535&xw.CRC32.calc(c,0,h),c[h++]=255&n,c[h++]=n>>>8&255),this.deflateOptions.outputBuffer=c,this.deflateOptions.outputIndex=h,c=(i=new xw.RawDeflate(l,this.deflateOptions)).compress(),(h=i.op)+8>c.buffer.byteLength?(this.output=new Uint8Array(h+8),this.output.set(new Uint8Array(c.buffer)),c=this.output):c=new Uint8Array(c.buffer),r=xw.CRC32.calc(l),c[h++]=255&r,c[h++]=r>>>8&255,c[h++]=r>>>16&255,c[h++]=r>>>24&255,s=l.length,c[h++]=255&s,c[h++]=s>>>8&255,c[h++]=s>>>16&255,c[h++]=s>>>24&255,this.ip=u,h<c.length&&(this.output=c=c.subarray(0,h)),c},xw.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},xw.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},xw.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},xw.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},xw.Heap.prototype.getChild=function(t){return 2*t+2},xw.Heap.prototype.push=function(t,e){var n,r,i,o=this.buffer;for(n=this.length,o[this.length++]=e,o[this.length++]=t;n>0&&(r=this.getParent(n),o[n]>o[r]);)i=o[n],o[n]=o[r],o[r]=i,i=o[n+1],o[n+1]=o[r+1],o[r+1]=i,n=r;return this.length},xw.Heap.prototype.pop=function(){var t,e,n,r,i,o=this.buffer;for(e=o[0],t=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],i=0;!((r=this.getChild(i))>=this.length)&&(r+2<this.length&&o[r+2]>o[r]&&(r+=2),o[r]>o[i]);)n=o[i],o[i]=o[r],o[r]=n,n=o[i+1],o[i+1]=o[r+1],o[r+1]=n,i=r;return{index:t,value:e,length:this.length}},xw.RawDeflate=function(t,e){this.compressionType=xw.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},xw.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},xw.RawDeflate.Lz77MinLength=3,xw.RawDeflate.Lz77MaxLength=258,xw.RawDeflate.WindowSize=32768,xw.RawDeflate.MaxCodeLength=16,xw.RawDeflate.HUFMAX=286,xw.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),xw.RawDeflate.prototype.compress=function(){var t,e,n,r=this.input;switch(this.compressionType){case xw.RawDeflate.CompressionType.NONE:for(e=0,n=r.length;e<n;)e+=(t=r.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===n);break;case xw.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(r,!0),this.op=this.output.length;break;case xw.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(r,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},xw.RawDeflate.prototype.makeNocompressBlock=function(t,e){var n,r,i,o,a=this.output,s=this.op;for(a=new Uint8Array(this.output.buffer);a.length<=s+t.length+5;)a=new Uint8Array(a.length<<1);return a.set(this.output),n=e?1:0,r=xw.RawDeflate.CompressionType.NONE,a[s++]=n|r<<1,o=65536+~(i=t.length)&65535,a[s++]=255&i,a[s++]=i>>>8&255,a[s++]=255&o,a[s++]=o>>>8&255,a.set(t,s),s+=t.length,a=a.subarray(0,s),this.op=s,this.output=a,a},xw.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var n,r,i,o=new xw.BitStream(new Uint8Array(this.output.buffer),this.op);return n=e?1:0,r=xw.RawDeflate.CompressionType.FIXED,o.writeBits(n,1,!0),o.writeBits(r,2,!0),i=this.lz77(t),this.fixedHuffman(i,o),o.finish()},xw.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w=new xw.BitStream(new Uint8Array(this.output.buffer),this.op),b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(n=e?1:0,r=xw.RawDeflate.CompressionType.DYNAMIC,w.writeBits(n,1,!0),w.writeBits(r,2,!0),i=this.lz77(t),c=this.getLengths_(this.freqsLitLen,15),h=this.getCodesFromLengths_(c),l=this.getLengths_(this.freqsDist,7),u=this.getCodesFromLengths_(l),o=286;o>257&&0===c[o-1];o--);for(a=30;a>1&&0===l[a-1];a--);for(f=this.getTreeSymbols_(o,c,a,l),p=this.getLengths_(f.freqs,7),v=0;v<19;v++)x[v]=p[b[v]];for(s=19;s>4&&0===x[s-1];s--);for(d=this.getCodesFromLengths_(p),w.writeBits(o-257,5,!0),w.writeBits(a-1,5,!0),w.writeBits(s-4,4,!0),v=0;v<s;v++)w.writeBits(x[v],3,!0);for(v=0,y=f.codes.length;v<y;v++)if(g=f.codes[v],w.writeBits(d[g],p[g],!0),g>=16){switch(v++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}w.writeBits(f.codes[v],m,!0)}return this.dynamicHuffman(i,[h,c],[u,l],w),w.finish()},xw.RawDeflate.prototype.dynamicHuffman=function(t,e,n,r){var i,o,a,s,c,h,l,u;for(c=e[0],h=e[1],l=n[0],u=n[1],i=0,o=t.length;i<o;++i)if(a=t[i],r.writeBits(c[a],h[a],!0),a>256)r.writeBits(t[++i],t[++i],!0),s=t[++i],r.writeBits(l[s],u[s],!0),r.writeBits(t[++i],t[++i],!0);else if(256===a)break;return r},xw.RawDeflate.prototype.fixedHuffman=function(t,e){var n,r,i;for(n=0,r=t.length;n<r;n++)if(i=t[n],xw.BitStream.prototype.writeBits.apply(e,xw.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++n],t[++n],!0),e.writeBits(t[++n],5),e.writeBits(t[++n],t[++n],!0);else if(256===i)break;return e},xw.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},xw.RawDeflate.Lz77Match.LengthCodeTable=function(t){return new Uint32Array(t)}(function(){var t,e,n=[];for(t=3;t<=258;t++)e=r(t),n[t]=e[2]<<24|e[1]<<16|e[0];function r(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return n}()),xw.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},xw.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,n=this.backwardDistance,r=[],i=0;return t=xw.RawDeflate.Lz77Match.LengthCodeTable[e],r[i++]=65535&t,r[i++]=t>>16&255,r[i++]=t>>24,t=this.getDistanceCode_(n),r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],r},xw.RawDeflate.prototype.lz77=function(t){var e,n,r,i,o,a,s,c,h,l={},u=xw.RawDeflate.WindowSize,f=new Uint16Array(2*t.length),p=0,d=0,g=new Uint32Array(286),m=new Uint32Array(30),v=this.lazy;function y(t,e){var n,r,i=t.toLz77Array();for(n=0,r=i.length;n<r;++n)f[p++]=i[n];g[i[0]]++,m[i[3]]++,d=t.length+e-1,c=null}for(g[256]=1,e=0,n=t.length;e<n;++e){for(o=0,r=0,i=xw.RawDeflate.Lz77MinLength;r<i&&e+r!==n;++r)o=o<<8|t[e+r];if(void 0===l[o]&&(l[o]=[]),a=l[o],d-- >0)a.push(e);else{for(;a.length>0&&e-a[0]>u;)a.shift();if(e+xw.RawDeflate.Lz77MinLength>=n){for(c&&y(c,-1),r=0,i=n-e;r<i;++r)h=t[e+r],f[p++]=h,++g[h];break}a.length>0?(s=this.searchLongestMatch_(t,e,a),c?c.length<s.length?(h=t[e-1],f[p++]=h,++g[h],y(s,0)):y(c,-1):s.length<v?c=s:y(s,0)):c?y(c,-1):(h=t[e],f[p++]=h,++g[h]),a.push(e)}}return f[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=m,f.subarray(0,p)},xw.RawDeflate.prototype.searchLongestMatch_=function(t,e,n){var r,i,o,a,s,c,h=0,l=t.length;t:for(a=0,c=n.length;a<c;a++){if(r=n[c-a-1],o=xw.RawDeflate.Lz77MinLength,h>xw.RawDeflate.Lz77MinLength){for(s=h;s>xw.RawDeflate.Lz77MinLength;s--)if(t[r+s-1]!==t[e+s-1])continue t;o=h}for(;o<xw.RawDeflate.Lz77MaxLength&&e+o<l&&t[r+o]===t[e+o];)++o;if(o>h&&(i=r,h=o),o===xw.RawDeflate.Lz77MaxLength)break}return new xw.RawDeflate.Lz77Match(h,e-i)},xw.RawDeflate.prototype.getTreeSymbols_=function(t,e,n,r){var i,o,a,s,c,h,l=new Uint32Array(t+n),u=new Uint32Array(316),f=new Uint8Array(19);for(o=0,i=0;i<t;i++)l[o++]=e[i];for(i=0;i<n;i++)l[o++]=r[i];for(c=0,i=0,s=l.length;i<s;i+=o){for(o=1;i+o<s&&l[i+o]===l[i];++o);if(a=o,0===l[i])if(a<3)for(;a-- >0;)u[c++]=0,f[0]++;else for(;a>0;)(h=a<138?a:138)>a-3&&h<a&&(h=a-3),h<=10?(u[c++]=17,u[c++]=h-3,f[17]++):(u[c++]=18,u[c++]=h-11,f[18]++),a-=h;else if(u[c++]=l[i],f[l[i]]++,--a<3)for(;a-- >0;)u[c++]=l[i],f[l[i]]++;else for(;a>0;)(h=a<6?a:6)>a-3&&h<a&&(h=a-3),u[c++]=16,u[c++]=h-3,f[16]++,a-=h}return{codes:u.subarray(0,c),freqs:f}},xw.RawDeflate.prototype.getLengths_=function(t,e){var n,r,i,o,a,s=t.length,c=new xw.Heap(2*xw.RawDeflate.HUFMAX),h=new Uint8Array(s);for(o=0;o<s;++o)t[o]>0&&c.push(o,t[o]);if(n=new Array(c.length/2),r=new Uint32Array(c.length/2),1===n.length)return h[c.pop().index]=1,h;for(o=0,a=c.length/2;o<a;++o)n[o]=c.pop(),r[o]=n[o].value;for(i=this.reversePackageMerge_(r,r.length,e),o=0,a=n.length;o<a;++o)h[n[o].index]=i[o];return h},xw.RawDeflate.prototype.reversePackageMerge_=function(t,e,n){var r,i,o,a,s,c=new Uint16Array(n),h=new Uint8Array(n),l=new Uint8Array(e),u=new Array(n),f=new Array(n),p=new Array(n),d=(1<<n)-e,g=1<<n-1;function m(t){var n=f[t][p[t]];n===e?(m(t+1),m(t+1)):--l[n],++p[t]}for(c[n-1]=e,i=0;i<n;++i)d<g?h[i]=0:(h[i]=1,d-=g),d<<=1,c[n-2-i]=(c[n-1-i]/2|0)+e;for(c[0]=h[0],u[0]=new Array(c[0]),f[0]=new Array(c[0]),i=1;i<n;++i)c[i]>2*c[i-1]+h[i]&&(c[i]=2*c[i-1]+h[i]),u[i]=new Array(c[i]),f[i]=new Array(c[i]);for(r=0;r<e;++r)l[r]=n;for(o=0;o<c[n-1];++o)u[n-1][o]=t[o],f[n-1][o]=o;for(r=0;r<n;++r)p[r]=0;for(1===h[n-1]&&(--l[0],++p[n-1]),i=n-2;i>=0;--i){for(r=0,a=0,s=p[i+1],o=0;o<c[i];o++)(a=u[i+1][s]+u[i+1][s+1])>t[r]?(u[i][o]=a,f[i][o]=e,s+=2):(u[i][o]=t[r],f[i][o]=r,++r);p[i]=0,1===h[i]&&m(i)}return l},xw.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,n,r,i,o=new Uint16Array(t.length),a=[],s=[],c=0;for(e=0,n=t.length;e<n;e++)a[t[e]]=1+(0|a[t[e]]);for(e=1,n=xw.RawDeflate.MaxCodeLength;e<=n;e++)s[e]=c,c+=0|a[e],c<<=1;for(e=0,n=t.length;e<n;e++)for(c=s[t[e]],s[t[e]]+=1,o[e]=0,r=0,i=t[e];r<i;r++)o[e]=o[e]<<1|1&c,c>>>=1;return o},xw.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},xw.Unzip.CompressionMethod=xw.Zip.CompressionMethod,xw.Unzip.FileHeaderSignature=xw.Zip.FileHeaderSignature,xw.Unzip.LocalFileHeaderSignature=xw.Zip.LocalFileHeaderSignature,xw.Unzip.CentralDirectorySignature=xw.Zip.CentralDirectorySignature,xw.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},xw.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==xw.Unzip.FileHeaderSignature[0]||t[e++]!==xw.Unzip.FileHeaderSignature[1]||t[e++]!==xw.Unzip.FileHeaderSignature[2]||t[e++]!==xw.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},xw.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},xw.Unzip.LocalFileHeader.Flags=xw.Zip.Flags,xw.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==xw.Unzip.LocalFileHeaderSignature[0]||t[e++]!==xw.Unzip.LocalFileHeaderSignature[1]||t[e++]!==xw.Unzip.LocalFileHeaderSignature[2]||t[e++]!==xw.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},xw.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===xw.Unzip.CentralDirectorySignature[0]&&e[t+1]===xw.Unzip.CentralDirectorySignature[1]&&e[t+2]===xw.Unzip.CentralDirectorySignature[2]&&e[t+3]===xw.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},xw.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==xw.Unzip.CentralDirectorySignature[0]||e[t++]!==xw.Unzip.CentralDirectorySignature[1]||e[t++]!==xw.Unzip.CentralDirectorySignature[2]||e[t++]!==xw.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},xw.Unzip.prototype.parseFileHeader=function(){var t,e,n,r,i=[],o={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,n=0,r=this.totalEntries;n<r;++n)(e=new xw.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,i[n]=e,o[e.filename]=n;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=o}},xw.Unzip.prototype.getFileData=function(t,e){e=e||{};var n,r,i,o,a,s,c,h,l=this.input,u=this.fileHeaderList;if(u||this.parseFileHeader(),void 0===u[t])throw new Error("wrong index");if(r=u[t].relativeOffset,(n=new xw.Unzip.LocalFileHeader(this.input,r)).parse(),r+=n.length,i=n.compressedSize,0!=(n.flags&xw.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(e.password||this.password),c=r,h=r+12;c<h;++c)this.decode(s,l[c]);for(c=r+=12,h=r+(i-=12);c<h;++c)l[c]=this.decode(s,l[c])}switch(n.compression){case xw.Unzip.CompressionMethod.STORE:o=this.input.subarray(r,r+i);break;case xw.Unzip.CompressionMethod.DEFLATE:o=new xw.RawInflate(this.input,{index:r,bufferSize:n.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(a=xw.CRC32.calc(o),n.crc32!==a))throw new Error("wrong crc: file=0x"+n.crc32.toString(16)+", data=0x"+a.toString(16));return o},xw.Unzip.prototype.getFilenames=function(){var t,e,n,r=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(n=this.fileHeaderList).length;t<e;++t)r[t]=n[t].filename;return r},xw.Unzip.prototype.decompress=function(t,e){var n;if(this.filenameToIndex||this.parseFileHeader(),void 0===(n=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(n,e)},xw.Unzip.prototype.setPassword=function(t){this.password=t},xw.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},xw.Unzip.prototype.updateKeys=xw.Zip.prototype.updateKeys,xw.Unzip.prototype.createDecryptionKey=xw.Zip.prototype.createEncryptionKey,xw.Unzip.prototype.getByte=xw.Zip.prototype.getByte,xw.Util.stringToByteArray=function(t){var e,n,r=t.split("");for(e=0,n=r.length;e<n;e++)r[e]=(255&r[e].charCodeAt(0))>>>0;return r},xw.Adler32=function(t){return"string"==typeof t&&(t=xw.Util.stringToByteArray(t)),xw.Adler32.update(1,t)},xw.Adler32.update=function(t,e){for(var n,r=65535&t,i=t>>>16&65535,o=e.length,a=0;o>0;){o-=n=o>xw.Adler32.OptimizationParameter?xw.Adler32.OptimizationParameter:o;do{i+=r+=e[a++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},xw.Adler32.OptimizationParameter=1024,xw.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(xw.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},xw.BitStream.DefaultBlockSize=32768,xw.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,n=new Uint8Array(e<<1);return n.set(t),this.buffer=n},xw.BitStream.prototype.writeBits=function(t,e,n){var r,i=this.buffer,o=this.index,a=this.bitindex,s=i[o];if(n&&e>1&&(t=e>8?function(t){return xw.BitStream.ReverseTable[255&t]<<24|xw.BitStream.ReverseTable[t>>>8&255]<<16|xw.BitStream.ReverseTable[t>>>16&255]<<8|xw.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:xw.BitStream.ReverseTable[t]>>8-e),e+a<8)s=s<<e|t,a+=e;else for(r=0;r<e;++r)s=s<<1|t>>e-r-1&1,8==++a&&(a=0,i[o++]=xw.BitStream.ReverseTable[s],s=0,o===i.length&&(i=this.expandBuffer()));i[o]=s,this.buffer=i,this.bitindex=a,this.index=o},xw.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=xw.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},xw.BitStream.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,n=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--n;return(e<<n&255)>>>0}(t);return e}(),xw.CRC32.calc=function(t,e,n){return xw.CRC32.update(t,0,e,n)},xw.CRC32.update=function(t,e,n,r){var i=xw.CRC32.Table,o="number"==typeof n?n:n=0,a="number"==typeof r?r:t.length;for(e^=4294967295,o=7&a;o--;++n)e=e>>>8^i[255&(e^t[n])];for(o=a>>3;o--;n+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^i[255&(e^t[n])])>>>8^i[255&(e^t[n+1])])>>>8^i[255&(e^t[n+2])])>>>8^i[255&(e^t[n+3])])>>>8^i[255&(e^t[n+4])])>>>8^i[255&(e^t[n+5])])>>>8^i[255&(e^t[n+6])])>>>8^i[255&(e^t[n+7])];return(4294967295^e)>>>0},xw.CRC32.single=function(t,e){return(xw.CRC32.Table[255&(t^e)]^t>>>8)>>>0},xw.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],xw.CRC32.Table=new Uint32Array(xw.CRC32.Table_),xw.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(xw.Deflate.DefaultBufferSize),this.compressionType=xw.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var n,r={};for(n in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)r[n]=e[n];r.outputBuffer=this.output,this.rawDeflate=new xw.RawDeflate(this.input,r)},xw.Deflate.DefaultBufferSize=32768,xw.Deflate.CompressionType=xw.RawDeflate.CompressionType,xw.Deflate.compress=function(t,e){return new xw.Deflate(t,e).compress()},xw.Deflate.prototype.compress=function(){var t,e,n,r,i,o,a,s=0;switch(a=this.output,t=xw.CompressionMethod.DEFLATE){case xw.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(xw.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(n=e<<4|t,a[s++]=n,0,t){case xw.CompressionMethod.DEFLATE:switch(this.compressionType){case xw.Deflate.CompressionType.NONE:i=0;break;case xw.Deflate.CompressionType.FIXED:i=1;break;case xw.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return r=i<<6|0,r|=31-(256*n+r)%31,a[s++]=r,o=xw.Adler32(this.input),this.rawDeflate.op=s,s=(a=this.rawDeflate.compress()).length,(a=new Uint8Array(a.buffer)).length<=s+4&&(this.output=new Uint8Array(a.length+4),this.output.set(a),a=this.output),(a=a.subarray(0,s+4))[s++]=o>>24&255,a[s++]=o>>16&255,a[s++]=o>>8&255,a[s++]=255&o,a},"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(t){return Buffer.from(t,"base64").toString("binary")});var Sw=ed("slice"),Cw=nu("slice",{ACCESSORS:!0,0:0,1:2}),_w=el("species"),Rw=[].slice,Tw=Math.max;Fh({target:"Array",proto:!0,forced:!Sw||!Cw},{slice:function(t,e){var n,r,i,o=bc(this),a=ph(o.length),s=mh(t,a),c=mh(void 0===e?a:e,a);if(Ph(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Ph(n.prototype)?xc(n)&&null===(n=n[_w])&&(n=void 0):n=void 0,n===Array||void 0===n))return Rw.call(o,s,c);for(r=new(void 0===n?Array:n)(Tw(c-s,0)),i=0;s<c;s++,i++)s in o&&Zp(r,i,o[s]);return r.length=i,r}});var Ew=ed("splice"),Aw=nu("splice",{ACCESSORS:!0,0:0,1:2}),Lw=Math.max,Iw=Math.min;Fh({target:"Array",proto:!0,forced:!Ew||!Aw},{splice:function(t,e){var n,r,i,o,a,s,c=zh(this),h=ph(c.length),l=mh(t,h),u=arguments.length;if(0===u?n=r=0:1===u?(n=0,r=h-l):(n=u-2,r=Iw(Lw(uh(e),0),h-l)),h+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=ul(c,r),o=0;o<r;o++)(a=l+o)in c&&Zp(i,o,c[a]);if(i.length=r,n<r){for(o=l;o<h-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:delete c[s];for(o=h;o>h-r+n;o--)delete c[o-1]}else if(n>r)for(o=h-r;o>l;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<n;o++)c[o+l]=arguments[o+2];return c.length=h-r+n,i}});var Mw=hc((function(){ku(1)}));Fh({target:"Object",stat:!0,forced:Mw,sham:!wu},{getPrototypeOf:function(t){return ku(zh(t))}});var Dw=Dc.f,Bw=Sh.f,Fw=ih.set,Nw=el("match"),Ow=cc.RegExp,Pw=Ow.prototype,zw=/a/g,$w=/a/g,Uw=new Ow(zw)!==zw,Hw=sf.UNSUPPORTED_Y;if(lc&&Dh("RegExp",!Uw||Hw||hc((function(){return $w[Nw]=!1,Ow(zw)!=zw||Ow($w)==$w||"/a/i"!=Ow(zw,"i")})))){for(var jw=function(t,e){var n,r=this instanceof jw,i=Nf(t),o=void 0===e;if(!r&&i&&t.constructor===jw&&o)return t;Uw?i&&!o&&(t=t.source):t instanceof jw&&(o&&(e=of.call(t)),t=t.source),Hw&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a=gp(Uw?new Ow(t,e):Ow(t,e),r?this:Pw,jw);return Hw&&n&&Fw(a,{sticky:n}),a},Vw=function(t){t in jw||Dw(jw,t,{configurable:!0,get:function(){return Ow[t]},set:function(e){Ow[t]=e}})},qw=Bw(Ow),Gw=0;qw.length>Gw;)Vw(qw[Gw++]);Pw.constructor=jw,jw.prototype=Pw,oh(cc,"RegExp",jw)}bd("RegExp");var Ww=RegExp.prototype,Zw=Ww.toString,Kw=hc((function(){return"/a/b"!=Zw.call({source:"a",flags:"b"})})),Xw="toString"!=Zw.name;(Kw||Xw)&&oh(RegExp.prototype,"toString",(function(){var t=Ic(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Ww)?of.call(t):n)}),{unsafe:!0}),Rf("match",1,(function(t,e,n){return[function(e){var n=wc(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=Ic(t),o=String(this);if(!i.global)return Af(i,o);var a=i.unicode;i.lastIndex=0;for(var s,c=[],h=0;null!==(s=Af(i,o));){var l=String(s[0]);c[h]=l,""===l&&(i.lastIndex=Ef(o,ph(i.lastIndex),a)),h++}return 0===h?null:c}]}));
/*!
   * jQuery JavaScript Library v3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector
   * https://jquery.com/
   *
   * Includes Sizzle.js
   * https://sizzlejs.com/
   *
   * Copyright JS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2018-01-20T17:24Z
   */
var Yw=[],Qw=window.document,Jw=Object.getPrototypeOf,tb=Yw.slice,eb=Yw.concat,nb=Yw.push,rb=Yw.indexOf,ib={},ob=ib.toString,ab=ib.hasOwnProperty,sb=ab.toString,cb=sb.call(Object),hb={},lb=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},ub=function(t){return null!=t&&t===t.window},fb={type:!0,src:!0,noModule:!0};function pb(t,e,n){var r,i=(e=e||Qw).createElement("script");if(i.text=t,n)for(r in fb)n[r]&&(i[r]=n[r]);e.head.appendChild(i).parentNode.removeChild(i)}function db(t){return null==t?t+"":"object"===sy(t)||"function"==typeof t?ib[ob.call(t)]||"object":sy(t)}var gb="3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",mb=function t(e,n){return new t.fn.init(e,n)},vb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function yb(t){var e=!!t&&"length"in t&&t.length,n=db(t);return!lb(t)&&!ub(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}mb.fn=mb.prototype={jquery:gb,constructor:mb,length:0,toArray:function(){return tb.call(this)},get:function(t){return null==t?tb.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=mb.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return mb.each(this,t)},map:function(t){return this.pushStack(mb.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(tb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:nb,sort:Yw.sort,splice:Yw.splice},mb.extend=mb.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"===sy(a)||lb(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(r=t[e])&&(h&&r&&(mb.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&mb.isPlainObject(n)?n:{},a[e]=mb.extend(h,o,r)):void 0!==r&&(a[e]=r));return a},mb.extend({expando:"jQuery"+(gb+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==ob.call(t))&&(!(e=Jw(t))||"function"==typeof(n=ab.call(e,"constructor")&&e.constructor)&&sb.call(n)===cb)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){pb(t)},each:function(t,e){var n,r=0;if(yb(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(vb,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(yb(Object(t))?mb.merge(n,"string"==typeof t?[t]:t):nb.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:rb.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(yb(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return eb.apply([],a)},guid:1,support:hb}),"function"==typeof Symbol&&(mb.fn[Symbol.iterator]=Yw[Symbol.iterator]),mb.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){ib["[object "+e+"]"]=e.toLowerCase()}));var wb=
/*!
  * Sizzle CSS Selector Engine v2.3.3
  * https://sizzlejs.com/
  *
  * Copyright jQuery Foundation and other contributors
  * Released under the MIT license
  * http://jquery.org/license
  *
  * Date: 2016-08-08
  */
function(t){var e,n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b="sizzle"+1*new Date,x=t.document,k=0,S=0,C=at(),_=at(),R=at(),T=function(t,e){return t===e&&(u=!0),0},E={}.hasOwnProperty,A=[],L=A.pop,I=A.push,M=A.push,D=A.slice,B=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",O="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",P="\\["+N+"*("+O+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+N+"*\\]",z=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",$=new RegExp(N+"+","g"),U=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),H=new RegExp("^"+N+"*,"+N+"*"),j=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),V=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),q=new RegExp(z),G=new RegExp("^"+O+"$"),W={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){f()},it=yt((function(t){return!0===t.disabled&&("form"in t||"label"in t)}),{dir:"parentNode",next:"legend"});try{M.apply(A=D.call(x.childNodes),x.childNodes),A[x.childNodes.length].nodeType}catch(t){M={apply:A.length?function(t,e){I.apply(t,D.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,s,h,l,u,d,v,y=e&&e.ownerDocument,k=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==k&&9!==k&&11!==k)return r;if(!i&&((e?e.ownerDocument||e:x)!==p&&f(e),e=e||p,g)){if(11!==k&&(u=Y.exec(t)))if(o=u[1]){if(9===k){if(!(h=e.getElementById(o)))return r;if(h.id===o)return r.push(h),r}else if(y&&(h=y.getElementById(o))&&w(e,h)&&h.id===o)return r.push(h),r}else{if(u[2])return M.apply(r,e.getElementsByTagName(t)),r;if((o=u[3])&&n.getElementsByClassName&&e.getElementsByClassName)return M.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!R[t+" "]&&(!m||!m.test(t))){if(1!==k)y=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(et,nt):e.setAttribute("id",l=b),s=(d=a(t)).length;s--;)d[s]="#"+l+" "+vt(d[s]);v=d.join(","),y=Q.test(t)&&gt(e.parentNode)||e}if(v)try{return M.apply(r,y.querySelectorAll(v)),r}catch(t){}finally{l===b&&e.removeAttribute("id")}}}return c(t.replace(U,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[b]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ut(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function pt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function dt(t){return st((function(e){return e=+e,st((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:x;return a!==p&&9===a.nodeType&&a.documentElement?(d=(p=a).documentElement,g=!o(p),x!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=X.test(p.getElementsByClassName),n.getById=ct((function(t){return d.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(J,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(J,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=X.test(p.querySelectorAll))&&(ct((function(t){d.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+N+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+N+"*(?:value|"+F+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+N+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=X.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",z)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=X.test(d.compareDocumentPosition),w=e||X.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return u=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===p||t.ownerDocument===x&&w(x,t)?-1:e===p||e.ownerDocument===x&&w(x,e)?1:l?B(l,t)-B(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===p?-1:e===p?1:i?-1:o?1:l?B(l,t)-B(l,e):0;if(i===o)return lt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?lt(a[r],s[r]):a[r]===x?-1:s[r]===x?1:0},p):p},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&f(t),e=e.replace(V,"='$1']"),n.matchesSelector&&g&&!R[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,p,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==p&&f(t),w(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==p&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&E.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(u=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(T),u){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:st,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(J,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(J,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(J,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&C(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,c){var h,l,u,f,p,d,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!c&&!s,w=!1;if(m){if(o){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&y){for(w=(p=(h=(l=(u=(f=m)[b]||(f[b]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]||[])[0]===k&&h[1])&&h[2],f=p&&m.childNodes[p];f=++p&&f&&f[g]||(w=p=0)||d.pop();)if(1===f.nodeType&&++w&&f===e){l[t]=[k,p,w];break}}else if(y&&(w=p=(h=(l=(u=(f=e)[b]||(f[b]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]||[])[0]===k&&h[1]),!1===w)for(;(f=++p&&f&&f[g]||(w=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++w||(y&&((l=(u=f[b]||(f[b]={}))[f.uniqueID]||(u[f.uniqueID]={}))[t]=[k,w]),f!==e)););return(w-=i)===r||w%r==0&&w/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[b]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st((function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=B(t,o[a])]=!(n[r]=o[a])})):function(t){return i(t,0,n)}):i}},pseudos:{not:st((function(t){var e=[],n=[],r=s(t.replace(U,"$1"));return r[b]?st((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:st((function(t){return function(e){return ot(t,e).length>0}})),contains:st((function(t){return t=t.replace(J,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}})),lang:st((function(t){return G.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(J,tt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:pt(!1),disabled:pt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:dt((function(){return[0]})),last:dt((function(t,e){return[e-1]})),eq:dt((function(t,e,n){return[n<0?n+e:n]})),even:dt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:dt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:dt((function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t})),gt:dt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ut(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ft(e);function mt(){}function vt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function yt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=S++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,c){var h,l,u,f=[k,s];if(c){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,c))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(l=(u=e[b]||(e[b]={}))[e.uniqueID]||(u[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((h=l[o])&&h[0]===k&&h[1]===s)return f[2]=h[2];if(l[o]=f,f[2]=t(e,n,c))return!0}return!1}}function wt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function bt(t,e,n,r,i){for(var o,a=[],s=0,c=t.length,h=null!=e;s<c;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),h&&e.push(s)));return a}function xt(t,e,n,r,i,o){return r&&!r[b]&&(r=xt(r)),i&&!i[b]&&(i=xt(i,o)),st((function(o,a,s,c){var h,l,u,f=[],p=[],d=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?g:bt(g,f,t,s,c),v=n?i||(o?t:d||r)?[]:a:m;if(n&&n(m,v,s,c),r)for(h=bt(v,p),r(h,[],s,c),l=h.length;l--;)(u=h[l])&&(v[p[l]]=!(m[p[l]]=u));if(o){if(i||t){if(i){for(h=[],l=v.length;l--;)(u=v[l])&&h.push(m[l]=u);i(null,v=[],h,c)}for(l=v.length;l--;)(u=v[l])&&(h=i?B(o,u):f[l])>-1&&(o[h]=!(a[h]=u))}}else v=bt(v===a?v.splice(d,v.length):v),i?i(null,a,v,c):M.apply(a,v)}))}function kt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],c=a?1:0,l=yt((function(t){return t===e}),s,!0),u=yt((function(t){return B(e,t)>-1}),s,!0),f=[function(t,n,r){var i=!a&&(r||n!==h)||((e=n).nodeType?l(t,n,r):u(t,n,r));return e=null,i}];c<o;c++)if(n=r.relative[t[c].type])f=[yt(wt(f),n)];else{if((n=r.filter[t[c].type].apply(null,t[c].matches))[b]){for(i=++c;i<o&&!r.relative[t[i].type];i++);return xt(c>1&&wt(f),c>1&&vt(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(U,"$1"),n,c<i&&kt(t.slice(c,i)),i<o&&kt(t=t.slice(i)),i<o&&vt(t))}f.push(n)}return wt(f)}return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,a=ot.tokenize=function(t,e){var n,i,o,a,s,c,h,l=_[t+" "];if(l)return e?0:l.slice(0);for(s=t,c=[],h=r.preFilter;s;){for(a in n&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(o=[])),n=!1,(i=j.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(i=W[a].exec(s))||h[a]&&!(i=h[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):_(t,c).slice(0)},s=ot.compile=function(t,e){var n,i=[],o=[],s=R[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=kt(e[n]))[b]?i.push(s):o.push(s);(s=R(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,c,l){var u,d,m,v=0,y="0",w=o&&[],b=[],x=h,S=o||i&&r.find.TAG("*",l),C=k+=null==x?1:Math.random()||.1,_=S.length;for(l&&(h=a===p||a||l);y!==_&&null!=(u=S[y]);y++){if(i&&u){for(d=0,a||u.ownerDocument===p||(f(u),s=!g);m=t[d++];)if(m(u,a||p,s)){c.push(u);break}l&&(k=C)}n&&((u=!m&&u)&&v--,o&&w.push(u))}if(v+=y,n&&y!==v){for(d=0;m=e[d++];)m(w,b,a,s);if(o){if(v>0)for(;y--;)w[y]||b[y]||(b[y]=L.call(c));b=bt(b)}M.apply(c,b),l&&!o&&b.length>0&&v+e.length>1&&ot.uniqueSort(c)}return l&&(k=C,h=x),w};return n?st(o):o}(o,i))).selector=t}return s},c=ot.select=function(t,e,n,i){var o,c,h,l,u,f="function"==typeof t&&t,p=!i&&a(t=f.selector||t);if(n=n||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(h=c[0]).type&&9===e.nodeType&&g&&r.relative[c[1].type]){if(!(e=(r.find.ID(h.matches[0].replace(J,tt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(o=W.needsContext.test(t)?0:c.length;o--&&(h=c[o],!r.relative[l=h.type]);)if((u=r.find[l])&&(i=u(h.matches[0].replace(J,tt),Q.test(c[0].type)&&gt(e.parentNode)||e))){if(c.splice(o,1),!(t=i.length&&vt(c)))return M.apply(n,i),n;break}}return(f||s(t,p))(i,e,!g,n,!e||Q.test(t)&&gt(e.parentNode)||e),n},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!u,f(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||ht(F,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),ot}(window);mb.find=wb,(mb.expr=wb.selectors)[":"]=mb.expr.pseudos,mb.uniqueSort=mb.unique=wb.uniqueSort,mb.text=wb.getText,mb.isXMLDoc=wb.isXML,mb.contains=wb.contains,mb.escapeSelector=wb.escape;var bb=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&mb(t).is(n))break;r.push(t)}return r},xb=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},kb=mb.expr.match.needsContext;function Sb(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var Cb=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function _b(t,e,n){return lb(e)?mb.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?mb.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?mb.grep(t,(function(t){return rb.call(e,t)>-1!==n})):mb.filter(e,t,n)}mb.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?mb.find.matchesSelector(r,t)?[r]:[]:mb.find.matches(t,mb.grep(e,(function(t){return 1===t.nodeType})))},mb.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(mb(t).filter((function(){for(e=0;e<r;e++)if(mb.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)mb.find(t,i[e],n);return r>1?mb.uniqueSort(n):n},filter:function(t){return this.pushStack(_b(this,t||[],!1))},not:function(t){return this.pushStack(_b(this,t||[],!0))},is:function(t){return!!_b(this,"string"==typeof t&&kb.test(t)?mb(t):t||[],!1).length}});var Rb,Tb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(mb.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||Rb,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Tb.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof mb?e[0]:e,mb.merge(this,mb.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:Qw,!0)),Cb.test(r[1])&&mb.isPlainObject(e))for(r in e)lb(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=Qw.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):lb(t)?void 0!==n.ready?n.ready(t):t(mb):mb.makeArray(t,this)}).prototype=mb.fn,Rb=mb(Qw);var Eb=/^(?:parents|prev(?:Until|All))/,Ab={children:!0,contents:!0,next:!0,prev:!0};function Lb(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}mb.fn.extend({has:function(t){var e=mb(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(mb.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&mb(t);if(!kb.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&mb.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?mb.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?rb.call(mb(t),this[0]):rb.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(mb.uniqueSort(mb.merge(this.get(),mb(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),mb.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return bb(t,"parentNode")},parentsUntil:function(t,e,n){return bb(t,"parentNode",n)},next:function(t){return Lb(t,"nextSibling")},prev:function(t){return Lb(t,"previousSibling")},nextAll:function(t){return bb(t,"nextSibling")},prevAll:function(t){return bb(t,"previousSibling")},nextUntil:function(t,e,n){return bb(t,"nextSibling",n)},prevUntil:function(t,e,n){return bb(t,"previousSibling",n)},siblings:function(t){return xb((t.parentNode||{}).firstChild,t)},children:function(t){return xb(t.firstChild)},contents:function(t){return Sb(t,"iframe")?t.contentDocument:(Sb(t,"template")&&(t=t.content||t),mb.merge([],t.childNodes))}},(function(t,e){mb.fn[t]=function(n,r){var i=mb.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=mb.filter(r,i)),this.length>1&&(Ab[t]||mb.uniqueSort(i),Eb.test(t)&&i.reverse()),this.pushStack(i)}}));var Ib=/[^\x20\t\r\n\f]+/g;function Mb(t){return t}function Db(t){throw t}function Bb(t,e,n,r){var i;try{t&&lb(i=t.promise)?i.call(t).done(e).fail(n):t&&lb(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}mb.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return mb.each(t.match(Ib)||[],(function(t,n){e[n]=!0})),e}(t):mb.extend({},t);var e,n,r,i,o=[],a=[],s=-1,c=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},h={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){mb.each(n,(function(n,r){lb(r)?t.unique&&h.has(r)||o.push(r):r&&r.length&&"string"!==db(r)&&e(r)}))}(arguments),n&&!e&&c()),this},remove:function(){return mb.each(arguments,(function(t,e){for(var n;(n=mb.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(t){return t?mb.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},mb.extend({Deferred:function(t){var e=[["notify","progress",mb.Callbacks("memory"),mb.Callbacks("memory"),2],["resolve","done",mb.Callbacks("once memory"),mb.Callbacks("once memory"),0,"resolved"],["reject","fail",mb.Callbacks("once memory"),mb.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return mb.Deferred((function(n){mb.each(e,(function(e,r){var o=lb(t[r[4]])&&t[r[4]];i[r[1]]((function(){var t=o&&o.apply(this,arguments);t&&lb(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,r){var i=0;function o(t,e,n,r){return function(){var a=this,s=arguments,c=function(){var c,h;if(!(t<i)){if((c=n.apply(a,s))===e.promise())throw new TypeError("Thenable self-resolution");h=c&&("object"===sy(c)||"function"==typeof c)&&c.then,lb(h)?r?h.call(c,o(i,e,Mb,r),o(i,e,Db,r)):(i++,h.call(c,o(i,e,Mb,r),o(i,e,Db,r),o(i,e,Mb,e.notifyWith))):(n!==Mb&&(a=void 0,s=[c]),(r||e.resolveWith)(a,s))}},h=r?c:function(){try{c()}catch(r){mb.Deferred.exceptionHook&&mb.Deferred.exceptionHook(r,h.stackTrace),t+1>=i&&(n!==Db&&(a=void 0,s=[r]),e.rejectWith(a,s))}};t?h():(mb.Deferred.getStackHook&&(h.stackTrace=mb.Deferred.getStackHook()),window.setTimeout(h))}}return mb.Deferred((function(i){e[0][3].add(o(0,i,lb(r)?r:Mb,i.notifyWith)),e[1][3].add(o(0,i,lb(t)?t:Mb)),e[2][3].add(o(0,i,lb(n)?n:Db))})).promise()},promise:function(t){return null!=t?mb.extend(t,r):r}},i={};return mb.each(e,(function(t,o){var a=o[2],s=o[5];r[o[1]]=a.add,s&&a.add((function(){n=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(o[3].fire),i[o[0]]=function(){return i[o[0]+"With"](this===i?void 0:this,arguments),this},i[o[0]+"With"]=a.fireWith})),r.promise(i),t&&t.call(i,i),i},when:function(t){var e=arguments.length,n=e,r=Array(n),i=tb.call(arguments),o=mb.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?tb.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(Bb(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||lb(i[n]&&i[n].then)))return o.then();for(;n--;)Bb(i[n],a(n),o.reject);return o.promise()}});var Fb=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;mb.Deferred.exceptionHook=function(t,e){window.console&&window.console.warn&&t&&Fb.test(t.name)&&window.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},mb.readyException=function(t){window.setTimeout((function(){throw t}))};var Nb=mb.Deferred();function Ob(){Qw.removeEventListener("DOMContentLoaded",Ob),window.removeEventListener("load",Ob),mb.ready()}mb.fn.ready=function(t){return Nb.then(t).catch((function(t){mb.readyException(t)})),this},mb.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--mb.readyWait:mb.isReady)||(mb.isReady=!0,!0!==t&&--mb.readyWait>0||Nb.resolveWith(Qw,[mb]))}}),mb.ready.then=Nb.then,"complete"===Qw.readyState||"loading"!==Qw.readyState&&!Qw.documentElement.doScroll?window.setTimeout(mb.ready):(Qw.addEventListener("DOMContentLoaded",Ob),window.addEventListener("load",Ob));var Pb=function t(e,n,r,i,o,a,s){var c=0,h=e.length,l=null==r;if("object"===db(r))for(c in o=!0,r)t(e,n,c,r[c],!0,a,s);else if(void 0!==i&&(o=!0,lb(i)||(s=!0),l&&(s?(n.call(e,i),n=null):(l=n,n=function(t,e,n){return l.call(mb(t),n)})),n))for(;c<h;c++)n(e[c],r,s?i:i.call(e[c],c,n(e[c],r)));return o?e:l?n.call(e):h?n(e[0],r):a},zb=/^-ms-/,$b=/-([a-z])/g;function Ub(t,e){return e.toUpperCase()}function Hb(t){return t.replace(zb,"ms-").replace($b,Ub)}var jb=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Vb(){this.expando=mb.expando+Vb.uid++}Vb.uid=1,Vb.prototype={cache:function(t){var e=t[this.expando];return e||(e={},jb(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[Hb(e)]=n;else for(r in e)i[Hb(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Hb(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Hb):(e=Hb(e))in r?[e]:e.match(Ib)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||mb.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!mb.isEmptyObject(e)}};var qb=new Vb,Gb=new Vb,Wb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Zb=/[A-Z]/g;function Kb(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Zb,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Wb.test(t)?JSON.parse(t):t)}(n)}catch(t){}Gb.set(t,e,n)}else n=void 0;return n}mb.extend({hasData:function(t){return Gb.hasData(t)||qb.hasData(t)},data:function(t,e,n){return Gb.access(t,e,n)},removeData:function(t,e){Gb.remove(t,e)},_data:function(t,e,n){return qb.access(t,e,n)},_removeData:function(t,e){qb.remove(t,e)}}),mb.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=Gb.get(o),1===o.nodeType&&!qb.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=Hb(r.slice(5)),Kb(o,r,i[r]));qb.set(o,"hasDataAttrs",!0)}return i}return"object"===sy(t)?this.each((function(){Gb.set(this,t)})):Pb(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=Gb.get(o,t))?n:void 0!==(n=Kb(o,t))?n:void 0;this.each((function(){Gb.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Gb.remove(this,t)}))}}),mb.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=qb.get(t,e),n&&(!r||Array.isArray(n)?r=qb.access(t,e,mb.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=mb.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=mb._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){mb.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return qb.get(t,n)||qb.access(t,n,{empty:mb.Callbacks("once memory").add((function(){qb.remove(t,[e+"queue",n])}))})}}),mb.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?mb.queue(this[0],t):void 0===e?this:this.each((function(){var n=mb.queue(this,t,e);mb._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&mb.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){mb.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=mb.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=qb.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var Xb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Yb=new RegExp("^(?:([+-])=|)("+Xb+")([a-z%]*)$","i"),Qb=["Top","Right","Bottom","Left"],Jb=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&mb.contains(t.ownerDocument,t)&&"none"===mb.css(t,"display")},tx=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};var ex={};function nx(t){var e,n=t.ownerDocument,r=t.nodeName,i=ex[r];return i||(e=n.body.appendChild(n.createElement(r)),i=mb.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ex[r]=i,i)}function rx(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=qb.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Jb(r)&&(i[o]=nx(r))):"none"!==n&&(i[o]="none",qb.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}mb.fn.extend({show:function(){return rx(this,!0)},hide:function(){return rx(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){Jb(this)?mb(this).show():mb(this).hide()}))}});var ix=/^(?:checkbox|radio)$/i,ox=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ax=/^$|^module$|\/(?:java|ecma)script/i,sx={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function cx(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&Sb(t,e)?mb.merge([t],n):n}function hx(t,e){for(var n=0,r=t.length;n<r;n++)qb.set(t[n],"globalEval",!e||qb.get(e[n],"globalEval"))}sx.optgroup=sx.option,sx.tbody=sx.tfoot=sx.colgroup=sx.caption=sx.thead,sx.th=sx.td;var lx=/<|&#?\w+;/;function ux(t,e,n,r,i){for(var o,a,s,c,h,l,u=e.createDocumentFragment(),f=[],p=0,d=t.length;p<d;p++)if((o=t[p])||0===o)if("object"===db(o))mb.merge(f,o.nodeType?[o]:o);else if(lx.test(o)){for(a=a||u.appendChild(e.createElement("div")),s=(ox.exec(o)||["",""])[1].toLowerCase(),c=sx[s]||sx._default,a.innerHTML=c[1]+mb.htmlPrefilter(o)+c[2],l=c[0];l--;)a=a.lastChild;mb.merge(f,a.childNodes),(a=u.firstChild).textContent=""}else f.push(e.createTextNode(o));for(u.textContent="",p=0;o=f[p++];)if(r&&mb.inArray(o,r)>-1)i&&i.push(o);else if(h=mb.contains(o.ownerDocument,o),a=cx(u.appendChild(o),"script"),h&&hx(a),n)for(l=0;o=a[l++];)ax.test(o.type||"")&&n.push(o);return u}!function(){var t=Qw.createDocumentFragment().appendChild(Qw.createElement("div")),e=Qw.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),hb.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",hb.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var fx=Qw.documentElement,px=/^key/,dx=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,gx=/^([^.]*)(?:\.(.+)|)/;function mx(){return!0}function vx(){return!1}function yx(){try{return Qw.activeElement}catch(t){}}function wx(t,e,n,r,i,o){var a,s;if("object"===sy(e)){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)wx(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=vx;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return mb().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=mb.guid++)),t.each((function(){mb.event.add(this,e,i,r,n)}))}mb.event={global:{},add:function(t,e,n,r,i){var o,a,s,c,h,l,u,f,p,d,g,m=qb.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&mb.find.matchesSelector(fx,i),n.guid||(n.guid=mb.guid++),(c=m.events)||(c=m.events={}),(a=m.handle)||(a=m.handle=function(e){return mb.event.triggered!==e.type?mb.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(Ib)||[""]).length;h--;)p=g=(s=gx.exec(e[h])||[])[1],d=(s[2]||"").split(".").sort(),p&&(u=mb.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,u=mb.event.special[p]||{},l=mb.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&mb.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=c[p])||((f=c[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,r,d,a)||t.addEventListener&&t.addEventListener(p,a)),u.add&&(u.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),mb.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,a,s,c,h,l,u,f,p,d,g,m=qb.hasData(t)&&qb.get(t);if(m&&(c=m.events)){for(h=(e=(e||"").match(Ib)||[""]).length;h--;)if(p=g=(s=gx.exec(e[h])||[])[1],d=(s[2]||"").split(".").sort(),p){for(u=mb.event.special[p]||{},f=c[p=(r?u.delegateType:u.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,u.remove&&u.remove.call(t,l));a&&!f.length&&(u.teardown&&!1!==u.teardown.call(t,d,m.handle)||mb.removeEvent(t,p,m.handle),delete c[p])}else for(p in c)mb.event.remove(t,p+e[h],n,r,!0);mb.isEmptyObject(c)&&qb.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=mb.event.fix(t),c=new Array(arguments.length),h=(qb.get(this,"events")||{})[s.type]||[],l=mb.event.special[s.type]||{};for(c[0]=s,e=1;e<arguments.length;e++)c[e]=arguments[e];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=mb.event.handlers.call(this,s,h),e=0;(i=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((mb.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,c))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,r,i,o,a,s=[],c=e.delegateCount,h=t.target;if(c&&h.nodeType&&!("click"===t.type&&t.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],a={},n=0;n<c;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?mb(i,this).index(h)>-1:mb.find(i,this,null,[h]).length),a[i]&&o.push(r);o.length&&s.push({elem:h,handlers:o})}return h=this,c<e.length&&s.push({elem:h,handlers:e.slice(c)}),s},addProp:function(t,e){Object.defineProperty(mb.Event.prototype,t,{enumerable:!0,configurable:!0,get:lb(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[mb.expando]?t:new mb.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==yx()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===yx()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&Sb(this,"input"))return this.click(),!1},_default:function(t){return Sb(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},mb.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},(mb.Event=function(t,e){if(!(this instanceof mb.Event))return new mb.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?mx:vx,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&mb.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[mb.expando]=!0}).prototype={constructor:mb.Event,isDefaultPrevented:vx,isPropagationStopped:vx,isImmediatePropagationStopped:vx,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=mx,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=mx,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=mx,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},mb.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&px.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&dx.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},mb.event.addProp),mb.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){mb.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||mb.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),mb.fn.extend({on:function(t,e,n,r){return wx(this,t,e,n,r)},one:function(t,e,n,r){return wx(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,mb(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===sy(t)){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=vx),this.each((function(){mb.event.remove(this,t,n,e)}))}});var bx=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,xx=/<script|<style|<link/i,kx=/checked\s*(?:[^=]|=\s*.checked.)/i,Sx=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Cx(t,e){return Sb(t,"table")&&Sb(11!==e.nodeType?e:e.firstChild,"tr")&&mb(t).children("tbody")[0]||t}function _x(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Rx(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Tx(t,e){var n,r,i,o,a,s,c,h;if(1===e.nodeType){if(qb.hasData(t)&&(o=qb.access(t),a=qb.set(e,o),h=o.events))for(i in delete a.handle,a.events={},h)for(n=0,r=h[i].length;n<r;n++)mb.event.add(e,i,h[i][n]);Gb.hasData(t)&&(s=Gb.access(t),c=mb.extend({},s),Gb.set(e,c))}}function Ex(t,e){var n=e.nodeName.toLowerCase();"input"===n&&ix.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ax(t,e,n,r){e=eb.apply([],e);var i,o,a,s,c,h,l=0,u=t.length,f=u-1,p=e[0],d=lb(p);if(d||u>1&&"string"==typeof p&&!hb.checkClone&&kx.test(p))return t.each((function(i){var o=t.eq(i);d&&(e[0]=p.call(this,i,o.html())),Ax(o,e,n,r)}));if(u&&(o=(i=ux(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=mb.map(cx(i,"script"),_x)).length;l<u;l++)c=i,l!==f&&(c=mb.clone(c,!0,!0),s&&mb.merge(a,cx(c,"script"))),n.call(t[l],c,l);if(s)for(h=a[a.length-1].ownerDocument,mb.map(a,Rx),l=0;l<s;l++)c=a[l],ax.test(c.type||"")&&!qb.access(c,"globalEval")&&mb.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?mb._evalUrl&&mb._evalUrl(c.src):pb(c.textContent.replace(Sx,""),h,c))}return t}function Lx(t,e,n){for(var r,i=e?mb.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||mb.cleanData(cx(r)),r.parentNode&&(n&&mb.contains(r.ownerDocument,r)&&hx(cx(r,"script")),r.parentNode.removeChild(r));return t}mb.extend({htmlPrefilter:function(t){return t.replace(bx,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),c=mb.contains(t.ownerDocument,t);if(!(hb.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||mb.isXMLDoc(t)))for(a=cx(s),r=0,i=(o=cx(t)).length;r<i;r++)Ex(o[r],a[r]);if(e)if(n)for(o=o||cx(t),a=a||cx(s),r=0,i=o.length;r<i;r++)Tx(o[r],a[r]);else Tx(t,s);return(a=cx(s,"script")).length>0&&hx(a,!c&&cx(t,"script")),s},cleanData:function(t){for(var e,n,r,i=mb.event.special,o=0;void 0!==(n=t[o]);o++)if(jb(n)){if(e=n[qb.expando]){if(e.events)for(r in e.events)i[r]?mb.event.remove(n,r):mb.removeEvent(n,r,e.handle);n[qb.expando]=void 0}n[Gb.expando]&&(n[Gb.expando]=void 0)}}}),mb.fn.extend({detach:function(t){return Lx(this,t,!0)},remove:function(t){return Lx(this,t)},text:function(t){return Pb(this,(function(t){return void 0===t?mb.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ax(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Cx(this,t).appendChild(t)}))},prepend:function(){return Ax(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Cx(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ax(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ax(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(mb.cleanData(cx(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return mb.clone(this,t,e)}))},html:function(t){return Pb(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!xx.test(t)&&!sx[(ox.exec(t)||["",""])[1].toLowerCase()]){t=mb.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(mb.cleanData(cx(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ax(this,arguments,(function(e){var n=this.parentNode;mb.inArray(this,t)<0&&(mb.cleanData(cx(this)),n&&n.replaceChild(e,this))}),t)}}),mb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){mb.fn[t]=function(t){for(var n,r=[],i=mb(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),mb(i[a])[e](n),nb.apply(r,n.get());return this.pushStack(r)}}));var Ix=new RegExp("^("+Xb+")(?!px)[a-z%]+$","i"),Mx=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)},Dx=new RegExp(Qb.join("|"),"i");function Bx(t,e,n){var r,i,o,a,s=t.style;return(n=n||Mx(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||mb.contains(t.ownerDocument,t)||(a=mb.style(t,e)),!hb.pixelBoxStyles()&&Ix.test(a)&&Dx.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fx(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",fx.appendChild(s).appendChild(c);var t=window.getComputedStyle(c);n="1%"!==t.top,a=12===e(t.marginLeft),c.style.right="60%",o=36===e(t.right),r=36===e(t.width),c.style.position="absolute",i=36===c.offsetWidth||"absolute",fx.removeChild(s),c=null}}function e(t){return Math.round(parseFloat(t))}var n,r,i,o,a,s=Qw.createElement("div"),c=Qw.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",hb.clearCloneStyle="content-box"===c.style.backgroundClip,mb.extend(hb,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),i}}))}();var Nx=/^(none|table(?!-c[ea]).+)/,Ox=/^--/,Px={position:"absolute",visibility:"hidden",display:"block"},zx={letterSpacing:"0",fontWeight:"400"},$x=["Webkit","Moz","ms"],Ux=Qw.createElement("div").style;function Hx(t){var e=mb.cssProps[t];return e||(e=mb.cssProps[t]=function(t){if(t in Ux)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=$x.length;n--;)if((t=$x[n]+e)in Ux)return t}(t)||t),e}function jx(t,e,n){var r=Yb.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Vx(t,e,n,r,i,o){var a="width"===e?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=mb.css(t,n+Qb[a],!0,i)),r?("content"===n&&(c-=mb.css(t,"padding"+Qb[a],!0,i)),"margin"!==n&&(c-=mb.css(t,"border"+Qb[a]+"Width",!0,i))):(c+=mb.css(t,"padding"+Qb[a],!0,i),"padding"!==n?c+=mb.css(t,"border"+Qb[a]+"Width",!0,i):s+=mb.css(t,"border"+Qb[a]+"Width",!0,i));return!r&&o>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-c-s-.5))),c}function qx(t,e,n){var r=Mx(t),i=Bx(t,e,r),o="border-box"===mb.css(t,"boxSizing",!1,r),a=o;if(Ix.test(i)){if(!n)return i;i="auto"}return a=a&&(hb.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===mb.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+Vx(t,e,n||(o?"border":"content"),a,r,i)+"px"}mb.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Bx(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=Hb(e),c=Ox.test(e),h=t.style;if(c||(e=Hx(s)),a=mb.cssHooks[e]||mb.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:h[e];"string"===(o=sy(n))&&(i=Yb.exec(n))&&i[1]&&(n=function(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return mb.css(t,e,"")},c=s(),h=n&&n[3]||(mb.cssNumber[e]?"":"px"),l=(mb.cssNumber[e]||"px"!==h&&+c)&&Yb.exec(mb.css(t,e));if(l&&l[3]!==h){for(c/=2,h=h||l[3],l=+c||1;a--;)mb.style(t,e,l+h),(1-o)*(1-(o=s()/c||.5))<=0&&(a=0),l/=o;mb.style(t,e,(l*=2)+h),n=n||[]}return n&&(l=+l||+c||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=h,r.start=l,r.end=i)),i}(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(mb.cssNumber[s]?"":"px")),hb.clearCloneStyle||""!==n||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(c?h.setProperty(e,n):h[e]=n))}},css:function(t,e,n,r){var i,o,a,s=Hb(e);return Ox.test(e)||(e=Hx(s)),(a=mb.cssHooks[e]||mb.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Bx(t,e,r)),"normal"===i&&e in zx&&(i=zx[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),mb.each(["height","width"],(function(t,e){mb.cssHooks[e]={get:function(t,n,r){if(n)return!Nx.test(mb.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?qx(t,e,r):tx(t,Px,(function(){return qx(t,e,r)}))},set:function(t,n,r){var i,o=Mx(t),a="border-box"===mb.css(t,"boxSizing",!1,o),s=r&&Vx(t,e,r,a,o);return a&&hb.scrollboxSize()===o.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Vx(t,e,"border",!1,o)-.5)),s&&(i=Yb.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=mb.css(t,e)),jx(0,n,s)}}})),mb.cssHooks.marginLeft=Fx(hb.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Bx(t,"marginLeft"))||t.getBoundingClientRect().left-tx(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),mb.each({margin:"",padding:"",border:"Width"},(function(t,e){mb.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+Qb[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(mb.cssHooks[t+e].set=jx)})),mb.fn.extend({css:function(t,e){return Pb(this,(function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Mx(t),i=e.length;a<i;a++)o[e[a]]=mb.css(t,e[a],!1,r);return o}return void 0!==n?mb.style(t,e,n):mb.css(t,e)}),t,e,arguments.length>1)}}),mb.fn.delay=function(t,e){return t=mb.fx&&mb.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=window.setTimeout(e,t);n.stop=function(){window.clearTimeout(r)}}))},function(){var t=Qw.createElement("input"),e=Qw.createElement("select").appendChild(Qw.createElement("option"));t.type="checkbox",hb.checkOn=""!==t.value,hb.optSelected=e.selected,(t=Qw.createElement("input")).value="t",t.type="radio",hb.radioValue="t"===t.value}();var Gx,Wx=mb.expr.attrHandle;mb.fn.extend({attr:function(t,e){return Pb(this,mb.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){mb.removeAttr(this,t)}))}}),mb.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?mb.prop(t,e,n):(1===o&&mb.isXMLDoc(t)||(i=mb.attrHooks[e.toLowerCase()]||(mb.expr.match.bool.test(e)?Gx:void 0)),void 0!==n?null===n?void mb.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=mb.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!hb.radioValue&&"radio"===e&&Sb(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(Ib);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),Gx={set:function(t,e,n){return!1===e?mb.removeAttr(t,n):t.setAttribute(n,n),n}},mb.each(mb.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=Wx[e]||mb.find.attr;Wx[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=Wx[a],Wx[a]=i,i=null!=n(t,e,r)?a:null,Wx[a]=o),i}}));var Zx=/^(?:input|select|textarea|button)$/i,Kx=/^(?:a|area)$/i;function Xx(t){return(t.match(Ib)||[]).join(" ")}function Yx(t){return t.getAttribute&&t.getAttribute("class")||""}function Qx(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Ib)||[]}mb.fn.extend({prop:function(t,e){return Pb(this,mb.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[mb.propFix[t]||t]}))}}),mb.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&mb.isXMLDoc(t)||(e=mb.propFix[e]||e,i=mb.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=mb.find.attr(t,"tabindex");return e?parseInt(e,10):Zx.test(t.nodeName)||Kx.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),hb.optSelected||(mb.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),mb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){mb.propFix[this.toLowerCase()]=this})),mb.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,c=0;if(lb(t))return this.each((function(e){mb(this).addClass(t.call(this,e,Yx(this)))}));if((e=Qx(t)).length)for(;n=this[c++];)if(i=Yx(n),r=1===n.nodeType&&" "+Xx(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=Xx(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,c=0;if(lb(t))return this.each((function(e){mb(this).removeClass(t.call(this,e,Yx(this)))}));if(!arguments.length)return this.attr("class","");if((e=Qx(t)).length)for(;n=this[c++];)if(i=Yx(n),r=1===n.nodeType&&" "+Xx(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=Xx(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=sy(t),r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):lb(t)?this.each((function(n){mb(this).toggleClass(t.call(this,n,Yx(this),e),e)})):this.each((function(){var e,i,o,a;if(r)for(i=0,o=mb(this),a=Qx(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=Yx(this))&&qb.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":qb.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Xx(Yx(n))+" ").indexOf(e)>-1)return!0;return!1}});var Jx=/\r/g;mb.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=lb(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,mb(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=mb.map(i,(function(t){return null==t?"":t+""}))),(e=mb.valHooks[this.type]||mb.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=mb.valHooks[i.type]||mb.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Jx,""):null==n?"":n:void 0}}),mb.extend({valHooks:{option:{get:function(t){var e=mb.find.attr(t,"value");return null!=e?e:Xx(mb.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],c=a?o+1:i.length;for(r=o<0?c:a?o:0;r<c;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!Sb(n.parentNode,"optgroup"))){if(e=mb(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=mb.makeArray(e),a=i.length;a--;)((r=i[a]).selected=mb.inArray(mb.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),mb.each(["radio","checkbox"],(function(){mb.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=mb.inArray(mb(t).val(),e)>-1}},hb.checkOn||(mb.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),hb.focusin="onfocusin"in window;var tk=/^(?:focusinfocus|focusoutblur)$/,ek=function(t){t.stopPropagation()};mb.extend(mb.event,{trigger:function(t,e,n,r){var i,o,a,s,c,h,l,u,f=[n||Qw],p=ab.call(t,"type")?t.type:t,d=ab.call(t,"namespace")?t.namespace.split("."):[];if(o=u=a=n=n||Qw,3!==n.nodeType&&8!==n.nodeType&&!tk.test(p+mb.event.triggered)&&(p.indexOf(".")>-1&&(d=p.split("."),p=d.shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,(t=t[mb.expando]?t:new mb.Event(p,"object"===sy(t)&&t)).isTrigger=r?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:mb.makeArray(e,[t]),l=mb.event.special[p]||{},r||!l.trigger||!1!==l.trigger.apply(n,e))){if(!r&&!l.noBubble&&!ub(n)){for(s=l.delegateType||p,tk.test(s+p)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(n.ownerDocument||Qw)&&f.push(a.defaultView||a.parentWindow||window)}for(i=0;(o=f[i++])&&!t.isPropagationStopped();)u=o,t.type=i>1?s:l.bindType||p,(h=(qb.get(o,"events")||{})[t.type]&&qb.get(o,"handle"))&&h.apply(o,e),(h=c&&o[c])&&h.apply&&jb(o)&&(t.result=h.apply(o,e),!1===t.result&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||l._default&&!1!==l._default.apply(f.pop(),e)||!jb(n)||c&&lb(n[p])&&!ub(n)&&((a=n[c])&&(n[c]=null),mb.event.triggered=p,t.isPropagationStopped()&&u.addEventListener(p,ek),n[p](),t.isPropagationStopped()&&u.removeEventListener(p,ek),mb.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(t,e,n){var r=mb.extend(new mb.Event,n,{type:t,isSimulated:!0});mb.event.trigger(r,null,e)}}),mb.fn.extend({trigger:function(t,e){return this.each((function(){mb.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return mb.event.trigger(t,e,n,!0)}}),hb.focusin||mb.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){mb.event.simulate(e,t.target,mb.event.fix(t))};mb.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=qb.access(r,e);i||r.addEventListener(t,n,!0),qb.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=qb.access(r,e)-1;i?qb.access(r,e,i):(r.removeEventListener(t,n,!0),qb.remove(r,e))}}}));var nk=/\[\]$/,rk=/\r?\n/g,ik=/^(?:submit|button|image|reset|file)$/i,ok=/^(?:input|select|textarea|keygen)/i;function ak(t,e,n,r){var i;if(Array.isArray(e))mb.each(e,(function(e,i){n||nk.test(t)?r(t,i):ak(t+"["+("object"===sy(i)&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==db(e))r(t,e);else for(i in e)ak(t+"["+i+"]",e[i],n,r)}mb.param=function(t,e){var n,r=[],i=function(t,e){var n=lb(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!mb.isPlainObject(t))mb.each(t,(function(){i(this.name,this.value)}));else for(n in t)ak(n,t[n],e,i);return r.join("&")},mb.fn.extend({serialize:function(){return mb.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=mb.prop(this,"elements");return t?mb.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!mb(this).is(":disabled")&&ok.test(this.nodeName)&&!ik.test(t)&&(this.checked||!ix.test(t))})).map((function(t,e){var n=mb(this).val();return null==n?null:Array.isArray(n)?mb.map(n,(function(t){return{name:e.name,value:t.replace(rk,"\r\n")}})):{name:e.name,value:n.replace(rk,"\r\n")}})).get()}}),mb.fn.extend({wrapAll:function(t){var e;return this[0]&&(lb(t)&&(t=t.call(this[0])),e=mb(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return lb(t)?this.each((function(e){mb(this).wrapInner(t.call(this,e))})):this.each((function(){var e=mb(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=lb(t);return this.each((function(n){mb(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){mb(this).replaceWith(this.childNodes)})),this}}),mb.expr.pseudos.hidden=function(t){return!mb.expr.pseudos.visible(t)},mb.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},hb.createHTMLDocument=function(){var t=Qw.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),mb.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(hb.createHTMLDocument?((r=(e=Qw.implementation.createHTMLDocument("")).createElement("base")).href=Qw.location.href,e.head.appendChild(r)):e=Qw),o=!n&&[],(i=Cb.exec(t))?[e.createElement(i[1])]:(i=ux([t],e,o),o&&o.length&&mb(o).remove(),mb.merge([],i.childNodes)));var r,i,o},mb.offset={setOffset:function(t,e,n){var r,i,o,a,s,c,h=mb.css(t,"position"),l=mb(t),u={};"static"===h&&(t.style.position="relative"),s=l.offset(),o=mb.css(t,"top"),c=mb.css(t,"left"),("absolute"===h||"fixed"===h)&&(o+c).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(c)||0),lb(e)&&(e=e.call(t,n,mb.extend({},s))),null!=e.top&&(u.top=e.top-s.top+a),null!=e.left&&(u.left=e.left-s.left+i),"using"in e?e.using.call(t,u):l.css(u)}},mb.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){mb.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===mb.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===mb.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=mb(t).offset()).top+=mb.css(t,"borderTopWidth",!0),i.left+=mb.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-mb.css(r,"marginTop",!0),left:e.left-i.left-mb.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===mb.css(t,"position");)t=t.offsetParent;return t||fx}))}}),mb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;mb.fn[t]=function(r){return Pb(this,(function(t,r,i){var o;if(ub(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),mb.each(["top","left"],(function(t,e){mb.cssHooks[e]=Fx(hb.pixelPosition,(function(t,n){if(n)return n=Bx(t,e),Ix.test(n)?mb(t).position()[e]+"px":n}))})),mb.each({Height:"height",Width:"width"},(function(t,e){mb.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){mb.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return Pb(this,(function(e,n,i){var o;return ub(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?mb.css(e,n,s):mb.style(e,n,i,s)}),e,a?i:void 0,a)}}))})),mb.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){mb.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),mb.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),mb.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),mb.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),lb(t))return r=tb.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(tb.call(arguments)))}).guid=t.guid=t.guid||mb.guid++,i},mb.holdReady=function(t){t?mb.readyWait++:mb.ready(!0)},mb.isArray=Array.isArray,mb.parseJSON=JSON.parse,mb.nodeName=Sb,mb.isFunction=lb,mb.isWindow=ub,mb.camelCase=Hb,mb.type=db,mb.now=Date.now,mb.isNumeric=function(t){var e=mb.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))};var sk=mb,ck=function(){this.subscribers={},this.stack=[]};ck.prototype.subscribe=function(t,e){var n=this.subscribers[t];null==n&&(n=[],this.subscribers[t]=n),n.push(e)},ck.prototype.post=function(t){var e=t.type;if(this._hold)this.stack.push(t);else{var n=this.subscribers[e];if(n){var r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;"function"==typeof c.receiveEvent?c.receiveEvent(t):"function"==typeof c&&c(t)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}},ck.prototype.hold=function(){this._hold=!0},ck.prototype.release=function(){this._hold=!1;var t=!0,e=!1,n=void 0;try{for(var r,i=this.stack[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.post(o)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.stack=[]},ck.globalBus=new ck;var hk=function(t,e,n){return{type:t,data:e||{},propogate:void 0===n||n}};var lk=640,uk=640,fk=new ck,pk=[];function dk(){var t=!0,e=!1,n=void 0;try{for(var r,i=pk[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.$root.remove()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}pk=[]}function gk(t,e,n){return mk.apply(this,arguments)}function mk(){return(mk=hy(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,h,l,u,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=function(){return(p=hy(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.controlUrl){t.next=4;break}return t.abrupt("return",h.loadHicControlFile({url:e.controlUrl,name:e.controlName,nvi:e.controlNvi,isControl:!0},!0));case 4:return t.abrupt("return",void 0);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)},f=function(t){return p.apply(this,arguments)},i=sk(e),Sk(n),(o=n.apiKey)&&ic.google.setApiKey(o),void 0===(a=n.queryString||n.href)&&!1!==n.initFromUrl&&(a=window.location.href),a&&(s=qp(a),c=a.includes("%2C"),Hp(s,n,c)),yw(n.state)&&(n.state=Ip.parse(n.state)),yw(n.colorScale)&&(n.colorScale=Np.parse(n.colorScale)),(h=new NS(i,n)).eventBus.hold(),pk.push(h),NS.setCurrentBrowser(h),pk.length>1&&pk.forEach((function(t){t.$browser_panel_delete_button.show()})),void 0===ic.browser&&Ck(i,h),h.inputDialog=new ow(i.get(0),h),h.trackRemovalDialog=new ic.TrackRemovalDialog(i,h),h.dataRangeDialog=new ic.DataRangeDialog(i,h),t.prev=22,h.contactMatrixView.startSpinner(),h.$user_interaction_shield.show(),void 0!==n.controlUrl,t.next=28,h.loadHicFile(n,!0);case 28:return t.next=30,f(n);case 30:return n.cycle&&(n.displayMode="A"),n.displayMode&&(h.contactMatrixView.displayMode=n.displayMode,h.eventBus.post({type:"DisplayMode",data:n.displayMode})),n.colorScale&&(h.contactMatrixView.setColorScale(n.colorScale),h.eventBus.post({type:"ColorScale",data:h.contactMatrixView.getColorScale()})),l=[],n.tracks&&l.push(h.loadTracks(n.tracks)),n.normVectorFiles&&n.normVectorFiles.forEach((function(t){l.push(h.loadNormalizationFile(t))})),t.next=38,Promise.all(l);case 38:u=h.contactMatrixView.colorScaleThresholdCache,h.eventBus.release(),h.contactMatrixView.colorScaleThresholdCache=u,n.cycle?h.controlMapWidget.toggleDisplayModeCycle():h.update(),"function"==typeof r&&r();case 43:return t.prev=43,h.contactMatrixView.stopSpinner(),h.$user_interaction_shield.hide(),t.finish(43);case 47:return t.abrupt("return",h);case 48:case"end":return t.stop()}}),t,null,[[22,,43,47]])})))).apply(this,arguments)}function vk(t,e){return t.genomeId===e.genomeId||t.compareChromosomes(e)}function yk(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function wk(t){var e,n;return dw(t)?t.name:(n=t.split("?").shift(),(e=t.lastIndexOf("/"))>0?n.substring(e+1):n)}function bk(t){t.scale(-1,1),t.rotate(Math.PI/2)}function xk(t,e){t.translate(e,0),t.scale(-1,1),t.translate(-e,0)}function kk(t){t.setTransform(1,0,0,1,0,0)}function Sk(t){!0===t.figureMode?(t.showLocusGoto=!1,t.showHicContactMapLabel=!1,t.showChromosomeSelector=!1):(void 0===t.width&&(t.width=lk),void 0===t.height&&(t.height=uk),void 0===t.showLocusGoto&&(t.showLocusGoto=!0),void 0===t.showHicContactMapLabel&&(t.showHicContactMapLabel=!0),void 0===t.showChromosomeSelector&&(t.showChromosomeSelector=!0)),t.state&&(yw(t.state)?t.state=Ip.parse(t.state):t.state=new Ip(t.state.chr1,t.state.chr2,t.state.zoom,t.state.x,t.state.y,t.state.pixelSize,t.state.normalization))}function Ck(t,e){ic.browser={constants:{defaultColor:"rgb(0,0,150)"},trackContainerDiv:e.layoutController.$x_track_container.get(0)},ic.popover=new cw(t.get(0),ic.browser),ic.alertDialog=new Zy(e.$root.get(0),e)}!function(t){t.MenuUtils.trackMenuItemList=function(t){var e,n,r=[];return r.push((e=t,(n=sk("<div>")).text("Set track color"),{object:n,click:function(){e.colorPicker.show()}})),r.push(function(t){var e=function(e){t.browser.inputDialog.present({label:"Track Name",value:t.track.name,callback:function(e){e=""===(e=e.trim())||void 0===e?"untitled":e,t.setTrackName(e)}},e)},n=sk("<div>");return n.text("Set track name"),{object:n,click:e}}(t)),"annotation"!==t.track.type&&t.track.menuItemList&&(r=r.concat(t.track.menuItemList())),r.push("<hr/>"),r.push(function(t){var e;return(e=sk("<div>")).text("Remove track"),{object:e,click:function(){t.browser.layoutController.removeTrackRendererPair(t.trackRenderPair)}}}(t)),r}}(ic);var _k=ic.google,Rk=function(t,e){var n=this;this.config=t,this.name=t.name,this.featureMap={},this.featureCount=0,this.isVisible=!0,this.displayMode=Pp,t.color&&function(t){var e=document.createElement("div");return e.style.borderColor=t,""!==e.style.borderColor}(t.color)&&(this.color=this.color=t.color),this.repColor=e.length>0?e[0].color:"black",e.forEach((function(t){n.featureCount++;var e=Ak(t.chr1,t.chr2),r=n.featureMap[e];r||(r=[],n.featureMap[e]=r),r.push(t)}))};function Tk(t){return"string"==typeof t.url?t.url.toLowerCase().indexOf(".bedpe")>0:"string"!=typeof t.name||t.name.toLowerCase().indexOf(".bedpe")>0}function Ek(t,e){if(!t)return null;var n,r,i,o,a,s=bw(t),c=s.length,h=[];a=e?10:6;var l=0;for(o=e?0:1;o<c;o++)(i=s[o].trim()).startsWith("#")||i.startsWith("track")||i.startsWith("browser")||0===i.length||((r=s[o].split("\t")).length<6&&l<=5?(5===l?console.error("..."):console.error("Could not parse line: "+i),l++):(n={chr1:r[0],x1:parseInt(r[1]),x2:parseInt(r[2]),chr2:r[3],y1:parseInt(r[4]),y2:parseInt(r[5])},r.length>a&&(n.color="rgb("+r[a]+")"),Number.isNaN(n.x1)||h.push(n)));return h}function Ak(t,e){return t>e?e+"_"+t:t+"_"+e}function Lk(t,e){var n={oauthToken:t.oauthToken,headers:t.headers,withCredentials:t.withCredentials,filename:t.filename};return Object.assign(n,e)}Rk.loadTrack2D=function(){var t=hy(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("string"==typeof(o=e.url)||o instanceof String)||!e.url.startsWith("https://drive.google.com")){t.next=7;break}return t.next=3,_k.getDriveFileInfo(e.url);case 3:n=t.sent,e.url="https://www.googleapis.com/drive/v3/files/"+n.id+"?alt=media",e.filename||(e.filename=n.originalFileName||n.name),e.name||(e.name=n.name||n.originalFileName);case 7:return t.next=9,ic.xhr.loadString(e.url,Lk(e));case 9:return r=t.sent,i=Ek(r,Tk(e)),t.abrupt("return",new Rk(e,i));case 12:case"end":return t.stop()}var o}),t)})));return function(e){return t.apply(this,arguments)}}(),Rk.prototype.getColor=function(){return this.color||this.repColor},Rk.prototype.getFeatures=function(t,e){var n=Ak(t,e);return this.featureMap[n]||this.featureMap[function(t,e){var n=t.startsWith("chr")?t.substr(3):"chr"+t,r=e.startsWith("chr")?e.substr(3):"chr"+e;return t>e?r+"_"+n:n+"_"+r}(t,e)]};var Ik={mean:function(t){var e,n=0,r=0;for(e=0;e<t.length;e++)isNaN(t[e])||(n+=t[e],r++);return r>0?n/r:0},percentile:function(t,e){if(0!==t.length){var n=Math.floor(t.length*((100-e)/100));return 0==n?(t.sort((function(t,e){return e-t})),t[0]):this.selectElement(t,n)}},selectElement:function(t,e){var n,r=new Mk;for(n=0;n<t.length;n++){var i=t[n];if(r.content.length<e||i>r.content[0]){if(r.content.length===e)r.pop();r.push(i)}}return r.content[0]}};function Mk(){this.content=[]}Mk.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]==t){var r=this.content.pop();if(n==e-1)break;this.content[n]=r,this.bubbleUp(n),this.sinkDown(n);break}},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t],n=e;t>0;){var r=Math.floor((t+1)/2)-1,i=this.content[r];if(n>=i)break;this.content[r]=e,this.content[t]=i,t=r}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=n;;){var i=2*(t+1),o=i-1,a=null;if(o<e){var s=this.content[o],c=s;s<r&&(a=o)}if(i<e)this.content[i]<(null==a?r:c)&&(a=i);if(null==a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var Dk=function(t,e,n,r,i,o){this.browser=t,this.$viewport=e,this.sweepZoom=n,this.scrollbarWidget=r,this.colorScale=i,this.ratioColorScale=o,this.$canvas=e.find("canvas"),this.ctx=this.$canvas.get(0).getContext("2d"),this.$fa_spinner=e.find(".fa-spinner"),this.spinnerCount=0,this.$x_guide=e.find("div[id$='-x-guide']"),this.$y_guide=e.find("div[id$='-y-guide']"),this.displayMode="A",this.imageTileCache={},this.imageTileCacheKeys=[],this.imageTileCacheLimit=8,this.colorScaleThresholdCache={},this.browser.eventBus.subscribe("NormalizationChange",this),this.browser.eventBus.subscribe("TrackLoad2D",this),this.browser.eventBus.subscribe("TrackState2D",this),this.browser.eventBus.subscribe("MapLoad",this),this.browser.eventBus.subscribe("LocusChange",this),this.browser.eventBus.subscribe("ControlMapLoad",this),this.browser.eventBus.subscribe("ColorChange",this),this.drawsInProgress=new Set};function Bk(t,e){return t.chr1+"_"+t.chr2+"_"+t.zoom+"_"+t.normalization+"_"+e}Dk.prototype.setColorScale=function(t){switch(this.displayMode){case"AOB":case"BOA":this.ratioColorScale=t;break;case"AMB":this.diffColorScale=t;break;default:this.colorScale=t}this.colorScaleThresholdCache[Bk(this.browser.state,this.displayMode)]=t.threshold},Dk.prototype.setColorScaleThreshold=function(){var t=hy(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.getColorScale().setThreshold(e),this.colorScaleThresholdCache[Bk(this.browser.state,this.displayMode)]=e,this.imageTileCache={},t.next=5,this.update();case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),Dk.prototype.getColorScale=function(){switch(this.displayMode){case"AOB":case"BOA":return this.ratioColorScale;case"AMB":return this.diffColorScale;default:return this.colorScale}},Dk.prototype.setDisplayMode=function(){var t=hy(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.displayMode=e,this.clearImageCaches(),t.next=4,this.update();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),Dk.prototype.clearImageCaches=function(){this.imageTileCache={},this.imageTileCacheKeys=[]},Dk.prototype.getViewDimensions=function(){return{width:this.$viewport.width(),height:this.$viewport.height()}},Dk.prototype.receiveEvent=function(){var t=hy(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("MapLoad"!==e.type&&"ControlMapLoad"!==e.type){t.next=6;break}this.mouseHandlersEnabled||(Hk.call(this,this.$viewport),Uk.call(this,this.$viewport),this.mouseHandlersEnabled=!0),this.clearImageCaches(),this.colorScaleThresholdCache={},t.next=9;break;case 6:return"LocusChange"!==e.type&&"DragStopped"!==e.type&&this.clearImageCaches(),t.next=9,this.update();case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),Dk.prototype.update=hy(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.disableUpdates){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.repaint();case 4:case"end":return t.stop()}}),t,this)}))),Dk.prototype.repaint=hy(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b,x,k,S,C,_,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(R=function(t){var e=o.dataset.getBinSizeForZoomIndex(t);if(!e)throw Error("Invalid zoom (resolution) index: "+t);var n=o.controlDataset.getZoomIndexForBinSize(e);if(n<0)throw Error('Invalid binSize for "B" map: '.concat(e));return n},this.browser.dataset){t.next=3;break}return t.abrupt("return");case 3:e=this.$viewport.width(),n=this.$viewport.height(),r=this.$canvas.width(),i=this.$canvas.height(),r===e&&i===n||(this.$canvas.width(e),this.$canvas.height(n),this.$canvas.attr("width",this.$viewport.width()),this.$canvas.attr("height",this.$viewport.height())),o=this.browser,a=o.state,t.t0=this.displayMode,t.next="A"===t.t0?13:"B"===t.t0?16:"AOB"===t.t0?19:"AMB"===t.t0?19:"BOA"===t.t0?24:28;break;case 13:return l=a.zoom,s=this.browser.dataset,t.abrupt("break",28);case 16:return l=R(a.zoom),s=this.browser.controlDataset,t.abrupt("break",28);case 19:return l=a.zoom,u=R(a.zoom),s=this.browser.dataset,c=this.browser.controlDataset,t.abrupt("break",28);case 24:l=R(a.zoom),u=a.zoom,s=this.browser.controlDataset,c=this.browser.dataset;case 28:return t.next=30,s.getMatrix(a.chr1,a.chr2);case 30:if(f=t.sent,p=f.bpZoomData[l],!c){t.next=37;break}return t.next=35,c.getMatrix(a.chr1,a.chr2);case 35:d=t.sent,h=d.bpZoomData[u];case 37:return g=p.blockBinCount,m=Math.max(1,Math.floor(a.pixelSize)),v=this.$viewport.width()/m,y=this.$viewport.height()/m,w=Math.floor(a.x/g),b=Math.floor((a.x+v)/g),x=Math.floor(a.y/g),k=Math.floor((a.y+y)/g),t.next=47,Pk.call(this,s,p,x,k,w,b,a.normalization);case 47:S=x;case 48:if(!(S<=k)){t.next=61;break}C=w;case 50:if(!(C<=b)){t.next=58;break}return t.next=53,this.getImageTile(s,c,p,h,S,C,a);case 53:_=t.sent,this.paintTile(_);case 55:C++,t.next=50;break;case 58:S++,t.next=48;break;case 61:this.genomicExtent={chr1:a.chr1,chr2:a.chr2,x:a.x*p.zoom.binSize,y:a.y*p.zoom.binSize,w:e*p.zoom.binSize/a.pixelSize,h:n*p.zoom.binSize/a.pixelSize};case 62:case"end":return t.stop()}}),t,this)})));var Fk={};function Nk(t){var e=Fk[t];if(!e){(e=document.createElement("canvas")).width=t,e.height=t;var n=e.getContext("2d");n.font="24px sans-serif",n.fillStyle="rgb(230, 230, 230)",n.fillRect(0,0,e.width,e.height),n.fillStyle="black";for(var r=100;r<t;r+=300)for(var i=100;i<t;i+=300)n.fillText("Loading...",r,i);Fk[t]=e}return e}function Ok(t,e){var n=[];return"B"===this.displayMode&&this.browser.controlDataset?n.push(this.browser.controlDataset.getMatrix(t,e)):(n.push(this.browser.dataset.getMatrix(t,e)),this.displayMode&&"A"!==this.displayMode&&this.browser.controlDataset&&n.push(this.browser.controlDataset.getMatrix(t,e))),Promise.all(n)}function Pk(t,e,n,r,i,o,a){return zk.apply(this,arguments)}function zk(){return(zk=hy(regeneratorRuntime.mark((function t(e,n,r,i,o,a,s){var c,h,l,u,f,p,d,g,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Bk(this.browser.state,this.displayMode),"AOB"!==this.displayMode&&"BOA"!==this.displayMode){t.next=3;break}return t.abrupt("return",this.ratioColorScale);case 3:if(!this.colorScaleThresholdCache[c]){t.next=10;break}return h=this.colorScale.threshold!==this.colorScaleThresholdCache[c],this.colorScale.setThreshold(this.colorScaleThresholdCache[c]),h&&this.browser.eventBus.post(hk("ColorScale",this.colorScale)),t.abrupt("return",this.colorScale);case 10:for(l=[],u=n.chr1.index===n.chr2.index,p=r;p<=i;p++)for(d=o;d<=a;d++)f=u&&p<d?d*n.blockColumnCount+p:p*n.blockColumnCount+d,l.push(e.getNormalizedBlock(n,f,s,this.browser.eventBus));return t.prev=13,this.startSpinner(),t.next=17,Promise.all(l);case 17:return g=t.sent,this.stopSpinner(),m=$k(g,95),isNaN(m)||(0===n.chr1.index&&(m*=4),this.colorScale=new Np(this.colorScale),this.colorScale.setThreshold(m),this.computeColorScale=!1,this.browser.eventBus.post(hk("ColorScale",this.colorScale))),this.colorScaleThresholdCache[c]=m,t.abrupt("return",this.colorScale);case 23:return t.prev=23,this.stopSpinner(),t.finish(23);case 26:case"end":return t.stop()}}),t,this,[[13,,23,26]])})))).apply(this,arguments)}function $k(t,e){var n=[];return t.forEach((function(t){if(t)for(var e=0;e<t.records.length;e++)n.push(t.records[e].counts)})),Ik.percentile(n,e)}function Uk(t){var e,n,r,i,o=this,a=!1,s=!1;function c(t){!0===o.isDragging&&(o.isDragging=!1,o.browser.eventBus.post(hk("DragStopped"))),a=!1,e=n=void 0}this.isDragging=!1,this.browser.isMobile||(t.dblclick((function(t){t.preventDefault(),t.stopPropagation();var e=t.offsetX||t.layerX,n=t.offsetY||t.layerX;o.browser.zoomAndCenter(1,e,n)})),t.on("mouseover",(function(t){r=!0})),t.on("mouseout",(function(t){r=void 0})),t.on("mousedown",(function(t){var r;t.preventDefault(),t.stopPropagation(),o.browser.$menu.is(":visible")&&o.browser.hideMenu(),n={x:t.offsetX,y:t.offsetY},e={x:t.offsetX,y:t.offsetY},(s=!0===t.altKey)&&(r=sk.event.fix(t),o.sweepZoom.initialize({x:r.pageX,y:r.pageY})),a=!0})),t.on("mousemove",(function(r){var i,c,h;r.preventDefault(),r.stopPropagation(),i={x:r.offsetX,y:r.offsetY},h={x:(c=sk.event.fix(r)).pageX-t.offset().left,y:c.pageY-t.offset().top};var l=t.get(0).getBoundingClientRect(),u=l.width,f=l.height;if(h.xNormalized=h.x/u,h.yNormalized=h.y/f,o.browser.eventBus.post(hk("UpdateContactMapMousePosition",h,!1)),!0===o.willShowCrosshairs&&(o.browser.updateCrosshairs(h),o.browser.showCrosshairs()),a){if(s)o.sweepZoom.update({x:c.pageX,y:c.pageY});else if(e.x&&Math.abs(i.x-e.x)>2){o.isDragging=!0;var p=n.x-i.x,d=n.y-i.y;o.updating&&function(t,e,n){var r,i=t.$canvas.width(),o=t.$canvas.height();r=t.ctx.getImageData(0,0,i,o),t.ctx.clearRect(0,0,i,o),t.ctx.putImageData(r,e,n)}(o,-p,-d),o.browser.shiftPixels(p,d)}n=i}})),t.on("mouseup",c),t.on("mouseleave",(function(){o.browser.layoutController.xAxisRuler.unhighlightWholeChromosome(),o.browser.layoutController.yAxisRuler.unhighlightWholeChromosome(),c()})),t[0].addEventListener("wheel",(function(e){e.preventDefault(),e.stopPropagation();var n=Date.now();if(void 0===i||n-i>1e3){var r=e.deltaY<0?1:-1,a=function(t,e){const{clientX:n,clientY:r}=t,{x:i,y:o}=((t,{clientX:e,clientY:n})=>{const{left:r,top:i,width:o,height:a}=t.getBoundingClientRect(),s=e-r,c=n-i;return{x:s,y:c,xNormalized:s/o,yNormalized:c/a}})(e,{clientX:n,clientY:r});return{x:i,y:o}}(e,t[0]),s=a.x,c=a.y;o.browser.wheelClickZoom(r,s,c),i=n}}),250,!1),sk(document).on("keydown.contact_matrix_view",(function(t){void 0===o.willShowCrosshairs&&!0===r&&!0===t.shiftKey&&(o.willShowCrosshairs=!0,o.browser.eventBus.post(hk("DidShowCrosshairs","DidShowCrosshairs",!1)))})),sk(document).on("keyup.contact_matrix_view",(function(t){o.browser.hideCrosshairs(),o.willShowCrosshairs=void 0,o.browser.eventBus.post(hk("DidHideCrosshairs","DidHideCrosshairs",!1))})),sk(document).on("mouseup.contact_matrix_view",(function(t){t.preventDefault(),t.stopPropagation(),s&&(s=!1,o.sweepZoom.commit())})))}function Hk(t){var e,n,r=this,i=t[0];function o(t,e){var n=sk(e);return{x:t.pageX-n.offset().left,y:t.pageY-n.offset().top}}i.ontouchstart=function(t){t.preventDefault(),t.stopPropagation();var n,a,s,c=o(t.targetTouches[0],i),h=c.x,l=c.y,u=t.targetTouches.length,f=t.timeStamp||Date.now(),p=!1;2===u&&(h=(h+(c=o(t.targetTouches[0],i)).x)/2,l=(l+c.y)/2),e&&f-e.timeStamp<300&&t.targetTouches.length>1&&1===e.count?e={x:h,y:l,timeStamp:f,count:t.targetTouches.length}:(e&&f-e.timeStamp<300&&(s=2===e.count||2===u?-1:1,n=e.x-h,a=e.y-l,Math.sqrt(n*n+a*a)<20&&(r.browser.zoomAndCenter(s,h,l),e=void 0,p=!0)),p||(e={x:h,y:l,timeStamp:f,count:t.targetTouches.length}))},i.ontouchmove=function(t,e,n){var r,i;return e||(e=200),function(){var o,a,s;o=n||this,a=+new Date,s=arguments,r&&a<r+e?(clearTimeout(i),i=setTimeout((function(){r=a,t.apply(o,s)}),e)):(r=a,t.apply(o,s))}}((function(t){var a,s,c;if(t.preventDefault(),t.stopPropagation(),2===t.targetTouches.length)a=o(t.targetTouches[0],i),s=o(t.targetTouches[1],i),c={x1:a.x,y1:a.y,x2:s.x,y2:s.y},n?n.end=c:n={start:c};else{var h=o(t.targetTouches[0],i),l=h.x,u=h.y;if(e){var f=e.x-l,p=e.y-u;isNaN(f)||isNaN(p)||(r.isDragging=!0,r.browser.shiftPixels(e.x-l,e.y-u))}e={x:l,y:u,timeStamp:t.timeStamp||Date.now(),count:t.targetTouches.length}}}),50),i.ontouchend=function(t){if(t.preventDefault(),t.stopPropagation(),n&&void 0!==n.end){var i=n.start,o=n.end,a=i.x2-i.x1,s=i.y2-i.y1,c=o.x2-o.x1,h=o.y2-o.y1,l=Math.sqrt(a*a+s*s),u=Math.sqrt(c*c+h*h)/l,f=(o.x1,o.x2,i.x1,i.x2,o.y1,o.y2,i.y1,i.y2,(i.x1+i.x2)/2),p=(i.y1+i.y2)/2;(u<.8||u>1.2)&&(e=void 0,r.browser.pinchZoom(f,p,u))}else r.isDragging&&(r.isDragging=!1,r.browser.eventBus.post(hk("DragStopped")));n=void 0}}Dk.prototype.getImageTile=function(){var t=hy(regeneratorRuntime.mark((function t(e,n,r,i,o,a,s){var c,h,l,u,f,p,d,g,m,v,y=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v=function(t,e,n,r,i,o,a){var s=4*(e+n*t.width);t.data[s+0]=r,t.data[s+1]=i,t.data[s+2]=o,t.data[s+3]=a},c=Math.max(1,Math.floor(s.pixelSize)),h=1===c,l=r.blockBinCount,u=r.chr1.name+"_"+r.chr2.name+"_"+r.zoom.binSize+"_"+r.zoom.unit+"_"+o+"_"+a+"_"+c+"_"+s.normalization+"_"+this.displayMode,!this.imageTileCache.hasOwnProperty(u)){t.next=10;break}return t.abrupt("return",this.imageTileCache[u]);case 10:if(!this.drawsInProgress.has(u)){t.next=14;break}return f=Math.ceil(l*c),p=Nk(f),t.abrupt("return",{row:o,column:a,blockBinCount:l,image:p,inProgress:!0});case 14:return this.drawsInProgress.add(u),t.prev=15,t.delegateYield(regeneratorRuntime.mark((function t(){var f,p,m,w,b,x,k,S,C,_,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y.startSpinner(),f=r.chr1.index===r.chr2.index,p=r.blockColumnCount,m=r.blockBinCount,w=f&&o<a,b=f&&o<a?a*p+o:o*p+a,t.next=8,e.getNormalizedBlock(r,b,s.normalization,y.browser.eventBus);case 8:if(x=t.sent,!i){t.next=13;break}return t.next=12,n.getNormalizedBlock(i,b,s.normalization,y.browser.eventBus);case 12:k=t.sent;case 13:return S=r.averageCount,C=i?i.averageCount:1,_=(S+C)/2,x&&x.records.length>0&&function(){var t=Math.ceil(m*c),e=x.blockNumber,n=Math.floor(e/p),i=e-n*p,o=l*i,a=l*n;(R=document.createElement("canvas")).width=t,R.height=t;var s,u=R.getContext("2d"),g={};if("AOB"===y.displayMode||"BOA"===y.displayMode||"AMB"===y.displayMode){var b=!0,T=!1,E=void 0;try{for(var A,L=k.records[Symbol.iterator]();!(b=(A=L.next()).done);b=!0){var I=A.value;g[I.getKey()]=I}}catch(t){T=!0,E=t}finally{try{b||null==L.return||L.return()}finally{if(T)throw E}}}h&&(s=u.getImageData(0,0,R.width,R.height));for(var M=0;M<x.records.length;M++){var D=x.records[M],B=Math.floor((D.bin1-o)*c),F=Math.floor((D.bin2-a)*c);if(w){var N=F;F=B,B=N}var O=void 0;switch(y.displayMode){case"AOB":case"BOA":var P=D.getKey(),z=g[P];if(!z)continue;var $=D.counts/S/(z.counts/C);O=y.ratioColorScale.getColor($);break;case"AMB":if(!(z=g[P=D.getKey()]))continue;$=_*(D.counts/S-z.counts/C),O=y.diffColorScale.getColor($);break;default:O=y.colorScale.getColor(D.counts)}h?(v(s,B,F,O.red,O.green,O.blue,255),f&&n===i&&v(s,F,B,O.red,O.green,O.blue,255)):(u.fillStyle=O.rgb,u.fillRect(B,F,c,c),f&&n===i&&u.fillRect(F,B,c,c))}h&&u.putImageData(s,0,0),u.save(),u.lineWidth=2;var U=!0,H=!1,j=void 0;try{for(var V,q=function(){var t=V.value;t.isVisible&&(d=t.getFeatures(r.chr1.name,r.chr2.name))&&d.forEach((function(e){var s,h=Math.round((e.x1/r.zoom.binSize-o)*c),l=Math.round((e.x2/r.zoom.binSize-o)*c),p=Math.round((e.y1/r.zoom.binSize-a)*c),d=Math.round((e.y2/r.zoom.binSize-a)*c),g=l-h,m=d-p;w&&(s=p,p=h,h=s,s=m,m=g,g=s);var v=Math.max(R.width,R.height);l>0&&h<v&&d>0&&p<v&&(u.strokeStyle=t.color?t.color:e.color,u.strokeRect(h,p,g,m),f&&n===i&&u.strokeRect(p,h,m,g))}))},G=y.browser.tracks2D[Symbol.iterator]();!(U=(V=G.next()).done);U=!0)q()}catch(t){H=!0,j=t}finally{try{U||null==G.return||G.return()}finally{if(H)throw j}}u.restore()}(),g={row:o,column:a,blockBinCount:l,image:R},y.imageTileCacheLimit>0&&(y.imageTileCacheKeys.length>y.imageTileCacheLimit&&(delete y.imageTileCache[y.imageTileCacheKeys[0]],y.imageTileCacheKeys.shift()),y.imageTileCache[u]=g),y.drawsInProgress.delete(u),t.abrupt("return",{v:g});case 21:case"end":return t.stop()}}),t)}))(),"t0",17);case 17:if("object"!==sy(m=t.t0)){t.next=20;break}return t.abrupt("return",m.v);case 20:return t.prev=20,this.stopSpinner(),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[15,,20,23]])})));return function(e,n,r,i,o,a,s){return t.apply(this,arguments)}}(),Dk.prototype.zoomIn=hy(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,c,h,l,u,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.browser.state,n=this.$viewport.width(),r=this.$viewport.height(),t.next=5,Ok.call(this,e.chr1,e.chr2);case 5:if(i=t.sent,!(o=i[0])){t.next=26;break}return t.next=10,o.bpZoomData[e.zoom];case 10:if(a=t.sent,!((s={x:e.x*a.zoom.binSize,y:e.y*a.zoom.binSize,w:n*a.zoom.binSize/e.pixelSize,h:r*a.zoom.binSize/e.pixelSize}).w>this.genomicExtent.w)){t.next=14;break}return t.abrupt("return");case 14:c=(s.x-this.genomicExtent.x)/this.genomicExtent.w*n,h=(s.y-this.genomicExtent.y)/this.genomicExtent.w*r,l=s.w/this.genomicExtent.w*n,u=s.h/this.genomicExtent.h*r,f=this.$canvas[0],(p=document.createElement("canvas")).width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,c,h,l,u,0,0,n,r),this.ctx.clearRect(0,0,n,r),this.ctx.drawImage(p,0,0);case 26:case"end":return t.stop()}}),t,this)}))),Dk.prototype.paintTile=function(t){var e=this.browser.state,n=this.$viewport.width(),r=this.$viewport.height(),i=t.image,o=Math.max(1,Math.floor(e.pixelSize));if(null!=i){var a=t.row,s=t.column,c=t.blockBinCount*s,h=t.blockBinCount*a,l=(c-e.x)*e.pixelSize,u=(h-e.y)*e.pixelSize,f=e.pixelSize/o,p=i.width*f,d=i.height*f;l<=n&&l+p>=0&&u<=r&&u+d>=0&&(this.ctx.clearRect(l,u,p,d),1===f?this.ctx.drawImage(i,l,u):this.ctx.drawImage(i,l,u,p,d))}},Dk.prototype.startSpinner=function(){!0===this.browser.isLoadingHICFile&&this.browser.$user_interaction_shield&&this.browser.$user_interaction_shield.show(),this.$fa_spinner.css("display","inline-block"),this.spinnerCount++},Dk.prototype.stopSpinner=function(){this.spinnerCount--,0===this.spinnerCount&&this.$fa_spinner.css("display","none"),this.spinnerCount=Math.max(0,this.spinnerCount)};var jk=function(t,e){var n=this;this.browser=t,this.$x_axis_selector=e.find("select[name='x-axis-selector']"),this.$y_axis_selector=e.find("select[name='y-axis-selector']"),this.$x_axis_selector.on("change",(function(){var t=n.$x_axis_selector.val();0===parseInt(t,10)?n.$y_axis_selector.val(t):0===parseInt(n.$y_axis_selector.val(),10)&&n.$y_axis_selector.val(t)})),this.$y_axis_selector.on("change",(function(){var t=n.$y_axis_selector.val();0===parseInt(t,10)?n.$x_axis_selector.val(t):0===parseInt(n.$x_axis_selector.val(),10)&&n.$x_axis_selector.val(t)})),this.$y_axis_selector.next("div").on("click",hy(regeneratorRuntime.mark((function e(){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(n.$x_axis_selector.find("option:selected").val(),10),i=parseInt(n.$y_axis_selector.find("option:selected").val(),10),e.next=4,t.setChromosomes(r,i);case 4:case"end":return e.stop()}}),e)})))),this.dataLoadConfig={receiveEvent:function(t){"MapLoad"===t.type&&n.respondToDataLoadWithDataset(t.data)}},t.eventBus.subscribe("MapLoad",this.dataLoadConfig),this.locusChangeConfig={receiveEvent:function(t){"LocusChange"===t.type&&n.respondToLocusChangeWithState(t.data.state)}},t.eventBus.subscribe("LocusChange",this.locusChangeConfig)};jk.prototype.respondToDataLoadWithDataset=function(t){var e,n;this.$x_axis_selector.empty(),this.$y_axis_selector.empty(),e=t.chromosomes.map((function(t,e){var n=t.name;return"<option value=".concat(e.toString(),">").concat(n,"</option>")})),this.$x_axis_selector.append(e.join("")),this.$y_axis_selector.append(e.join("")),n="option[value="+this.browser.state.chr1.toString()+"]",this.$x_axis_selector.find(n).prop("selected",!0),n="option[value="+this.browser.state.chr2.toString()+"]",this.$y_axis_selector.find(n).prop("selected",!0)},jk.prototype.respondToLocusChangeWithState=function(t){var e,n,r,i;r=this.$x_axis_selector.find("option"),i=this.$y_axis_selector.find("option"),0!==r.length&&0!==i.length&&(r=this.$x_axis_selector.find("option:selected"),i=this.$y_axis_selector.find("option:selected"),r.prop("selected",!1),i.prop("selected",!1),e="option[value="+t.chr1.toString()+"]",n="option[value="+t.chr2.toString()+"]",this.$x_axis_selector.find(e).prop("selected",!0),this.$y_axis_selector.find(n).prop("selected",!0))};var Vk=function(t,e){this.browser=t;var n=e.find("div[id$='lower-hic-nav-bar-widget-container']");this.$container=sk('<div class="hic-control-map-selector-container">'),this.$container.hide(),n.append(this.$container),this.$select=sk("<select>"),this.$select.attr("name","control_map_selector"),this.$container.append(this.$select);var r=sk("<div>");this.$container.append(r);var i,o,a=sk("<div>");this.$container.append(a),this.controlMapHash=new qk(t,this.$select,r,a,(o='<svg width="34px" height="34px" viewBox="0 0 34 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 51 (57462) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Toggle Maps</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group">\n            <rect id="Rectangle" stroke="#A6A6A6" stroke-width="1.25201381" fill="#F8F8F8" x="0.626006904" y="0.626006904" width="32.7479862" height="32.7479862" rx="3.91254315"></rect>\n            <g id="arrows" transform="translate(6.533947, 7.003452)" fill-rule="nonzero" stroke="#5F5F5F" stroke-width="0.626006904">\n                <path d="M25.9411017,8.76431329 L11.8559464,8.76431329 L11.8559464,6.88629258 C11.8559464,6.05237313 10.8440845,5.63114873 10.2529383,6.22229488 L7.12290378,9.3523294 C6.75622024,9.71905207 6.75622024,10.3136021 7.12290378,10.6802857 L10.2529383,13.8103202 C10.8409153,14.3982581 11.8559464,13.9850935 11.8559464,13.1463616 L11.8559464,11.2683409 L25.9411017,11.2683409 C26.4597093,11.2683409 26.8801121,10.8479381 26.8801121,10.3293306 L26.8801121,9.70332365 C26.8801121,9.18471605 26.4597093,8.76431329 25.9411017,8.76431329 Z" id="down-arrow" fill="#F8F8F8" transform="translate(16.864002, 10.016110) rotate(-90.000000) translate(-16.864002, -10.016110) "></path>\n                <path d="M13.1470856,8.76431329 L-0.938069748,8.76431329 L-0.938069748,6.88629258 C-0.938069748,6.05237313 -1.94993166,5.63114873 -2.5410778,6.22229488 L-5.67111233,9.3523294 C-6.03779587,9.71905207 -6.03779587,10.3136021 -5.67111233,10.6802857 L-2.5410778,13.8103202 C-1.95310082,14.3982581 -0.938069748,13.9850935 -0.938069748,13.1463616 L-0.938069748,11.2683409 L13.1470856,11.2683409 C13.6656932,11.2683409 14.086096,10.8479381 14.086096,10.3293306 L14.086096,9.70332365 C14.086096,9.18471605 13.6656932,8.76431329 13.1470856,8.76431329 Z" id="up-arrow" fill="#5F5F5F" transform="translate(4.069985, 10.016110) scale(1, -1) rotate(-90.000000) translate(-4.069985, -10.016110) "></path>\n            </g>\n        </g>\n    </g>\n</svg>'.split("\n").join(" "),sk(o)),(i='<svg width="34px" height="34px" viewBox="0 0 34 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 51 (57462) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Toggle Maps</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group">\n            <rect id="Rectangle" stroke="#A6A6A6" stroke-width="1.25201381" fill="#F8F8F8" x="0.626006904" y="0.626006904" width="32.7479862" height="32.7479862" rx="3.91254315"></rect>\n            <g id="arrows" transform="translate(6.533947, 7.003452)" fill-rule="nonzero" stroke="#5F5F5F" stroke-width="0.626006904">\n                <path d="M25.9411017,8.76431329 L11.8559464,8.76431329 L11.8559464,6.88629258 C11.8559464,6.05237313 10.8440845,5.63114873 10.2529383,6.22229488 L7.12290378,9.3523294 C6.75622024,9.71905207 6.75622024,10.3136021 7.12290378,10.6802857 L10.2529383,13.8103202 C10.8409153,14.3982581 11.8559464,13.9850935 11.8559464,13.1463616 L11.8559464,11.2683409 L25.9411017,11.2683409 C26.4597093,11.2683409 26.8801121,10.8479381 26.8801121,10.3293306 L26.8801121,9.70332365 C26.8801121,9.18471605 26.4597093,8.76431329 25.9411017,8.76431329 Z" id="down-arrow" fill="#5F5F5F" transform="translate(16.864002, 10.016110) rotate(-90.000000) translate(-16.864002, -10.016110) "></path>\n                <path d="M13.1470856,8.76431329 L-0.938069748,8.76431329 L-0.938069748,6.88629258 C-0.938069748,6.05237313 -1.94993166,5.63114873 -2.5410778,6.22229488 L-5.67111233,9.3523294 C-6.03779587,9.71905207 -6.03779587,10.3136021 -5.67111233,10.6802857 L-2.5410778,13.8103202 C-1.95310082,14.3982581 -0.938069748,13.9850935 -0.938069748,13.1463616 L-0.938069748,11.2683409 L13.1470856,11.2683409 C13.6656932,11.2683409 14.086096,10.8479381 14.086096,10.3293306 L14.086096,9.70332365 C14.086096,9.18471605 13.6656932,8.76431329 13.1470856,8.76431329 Z" id="up-arrow" fill="#F8F8F8" transform="translate(4.069985, 10.016110) scale(1, -1) rotate(-90.000000) translate(-4.069985, -10.016110) "></path>\n            </g>\n        </g>\n    </g>\n</svg>'.split("\n").join(" "),sk(i)));var s=this;t.eventBus.subscribe("ControlMapLoad",(function(e){s.controlMapHash.updateOptions(t.getDisplayMode()),s.$container.show()})),t.eventBus.subscribe("MapLoad",(function(e){t.controlDataset||s.$container.hide()})),t.eventBus.subscribe("DisplayMode",(function(t){s.controlMapHash.updateOptions(t.data)}))};Vk.prototype.toggleDisplayMode=function(){this.controlMapHash.toggleDisplayMode()},Vk.prototype.toggleDisplayModeCycle=function(){this.controlMapHash.toggleDisplayModeCycle()},Vk.prototype.getDisplayModeCycle=function(){return this.controlMapHash.cycleID};var qk=function(t,e,n,r,i,o){var a=this;this.browser=t,this.$select=e,this.$toggle=n,this.$cycle=r,this.$img_a=i,this.$toggle.append(this.$img_a),this.$img_b=o,this.$toggle.append(this.$img_b);var s,c={title:"A",value:"A",other:"B",$hidden:o,$shown:i},h={title:"B",value:"B",other:"A",$hidden:i,$shown:o},l={title:"A/B",value:"AOB",other:"BOA",$hidden:o,$shown:i},u={title:"B/A",value:"BOA",other:"AOB",$hidden:i,$shown:o};this.hash={A:c,B:h,AOB:l,BOA:u},this.$select.on("change",(function(t){var e;a.disableDisplayModeCycle(),e=sk(this).val(),a.setDisplayMode(e)})),this.$toggle.on("click",(function(t){a.disableDisplayModeCycle(),a.toggleDisplayMode()})),this.$cycle_outline=(s='<svg width="34px" height="34px" viewBox="0 0 34 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 51 (57462) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Cycle Maps</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group" fill="#F8F8F8">\n            <rect id="Rectangle" stroke="#A6A6A6" stroke-width="1.25201381" x="0.626006904" y="0.626006904" width="32.7479862" height="32.7479862" rx="3.91254315"></rect>\n            <g id="circle-notch-group" transform="translate(5.947066, 6.103567)" fill-rule="nonzero" stroke="#5F5F5F" stroke-width="0.75">\n                <path d="M12.5012159,1.07356655 L12.5012159,1.81734411 C12.5012159,2.29971235 12.8262916,2.71738683 13.2908449,2.84717621 C16.7518005,3.81392183 19.2875784,6.98762275 19.2875784,10.7595067 C19.2875784,15.2996349 15.6133435,18.9745898 11.072508,18.9745898 C6.53238683,18.9745898 2.85743758,15.3003493 2.85743758,10.7595067 C2.85743758,6.98815851 5.39276905,3.81401113 8.85408182,2.84717621 C9.31872442,2.71738683 9.64380011,2.29962306 9.64380011,1.81721016 L9.64380011,1.07392373 C9.64380011,0.372561009 8.98150471,-0.138381443 8.30233269,0.0365908983 C3.5094195,1.27117502 -0.0270343765,5.6342771 0.00015572077,10.8189768 C0.0323016485,16.9379636 4.97728293,21.8448684 11.0963496,21.8319654 C17.2005487,21.819107 22.1449942,16.8667067 22.1449942,10.7595067 C22.1449942,5.5968181 18.611621,1.2595221 13.831209,0.0336441837 C13.1565464,-0.139363681 12.5012159,0.377070376 12.5012159,1.07356655 Z" id="circle-notch---solid"></path>\n            </g>\n        </g>\n    </g>\n</svg>'.split("\n").join(" "),sk(s)),r.append(this.$cycle_outline),this.$cycle_solid=function(){var t;return t='<svg width="34px" height="34px" viewBox="0 0 34 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 51 (57462) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Cycle Maps</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group">\n            <rect id="Rectangle" stroke="#A6A6A6" stroke-width="1.25201381" fill="#F8F8F8" x="0.626006904" y="0.626006904" width="32.7479862" height="32.7479862" rx="3.91254315"></rect>\n            <g id="circle-notch-group" transform="translate(5.947066, 6.103567)" fill="#5F5F5F" fill-rule="nonzero">\n                <path d="M12.5012159,1.07356655 L12.5012159,1.81734411 C12.5012159,2.29971235 12.8262916,2.71738683 13.2908449,2.84717621 C16.7518005,3.81392183 19.2875784,6.98762275 19.2875784,10.7595067 C19.2875784,15.2996349 15.6133435,18.9745898 11.072508,18.9745898 C6.53238683,18.9745898 2.85743758,15.3003493 2.85743758,10.7595067 C2.85743758,6.98815851 5.39276905,3.81401113 8.85408182,2.84717621 C9.31872442,2.71738683 9.64380011,2.29962306 9.64380011,1.81721016 L9.64380011,1.07392373 C9.64380011,0.372561009 8.98150471,-0.138381443 8.30233269,0.0365908983 C3.5094195,1.27117502 -0.0270343765,5.6342771 0.00015572077,10.8189768 C0.0323016485,16.9379636 4.97728293,21.8448684 11.0963496,21.8319654 C17.2005487,21.819107 22.1449942,16.8667067 22.1449942,10.7595067 C22.1449942,5.5968181 18.611621,1.2595221 13.831209,0.0336441837 C13.1565464,-0.139363681 12.5012159,0.377070376 12.5012159,1.07356655 Z" id="circle-notch---solid"></path>\n            </g>\n        </g>\n    </g>\n</svg>'.split("\n").join(" "),sk(t)}(),r.append(this.$cycle_solid),this.$cycle_solid.hide(),r.on("click",(function(){a.toggleDisplayModeCycle()})),r.hide()};function Gk(t){this.hash[t].$hidden.hide(),this.hash[t].$shown.show(),this.$cycle.show(),this.$toggle.show()}qk.prototype.disableDisplayModeCycle=function(){this.cycleID&&(clearTimeout(this.cycleID),this.cycleID=void 0,this.$cycle_solid.hide(),this.$cycle_outline.show())},qk.prototype.toggleDisplayModeCycle=function(){var t=this;this.cycleID?this.disableDisplayModeCycle():(!function e(){t.cycleID=setTimeout(hy(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.toggleDisplayMode();case 2:e();case 3:case"end":return n.stop()}}),n)}))),2500)}(),this.$cycle_solid.show(),this.$cycle_outline.hide())},qk.prototype.toggleDisplayMode=hy(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.browser.getDisplayMode(),n=this.hash[e].other,t.next=4,this.browser.setDisplayMode(n);case 4:this.hash[n].$hidden.hide(),this.hash[n].$shown.show(),r="option[value="+n+"]",this.$select.find(r).prop("selected",!0);case 8:case"end":return t.stop()}}),t,this)}))),qk.prototype.setDisplayMode=function(t){Gk.call(this,t),this.browser.setDisplayMode(t)},qk.prototype.updateOptions=function(t){var e=this;this.$img_a.hide(),this.$img_b.hide(),this.$select.empty(),Object.keys(this.hash).forEach((function(n){var r,i;r=e.hash[n],i=sk("<option>").attr("title",r.title).attr("value",r.value).text(r.title),t===r.value&&(i.attr("selected",!0),r.$shown.show(),Gk.call(e,t)),e.$select.append(i)}))};var Wk=function(t,e){this.browser=t;var n=e.find("div[id$='upper-hic-nav-bar-widget-container']");this.$container=sk("<div>",{class:"hic-chromosome-goto-container",title:"Chromosome Goto"}),n.append(this.$container),this.$resolution_selector=sk('<input type="text" placeholder="chr-x-axis chr-y-axis">'),this.$container.append(this.$resolution_selector),this.$resolution_selector.on("change",(function(e){t.parseGotoInput(sk(this).val()),sk(this).blur()})),this.browser.eventBus.subscribe("LocusChange",this)};Wk.prototype.receiveEvent=function(t){var e,n,r,i,o,a,s,c,h,l,u;"LocusChange"===t.type&&(h=t.data.state||this.browser.state,"All",l=this.browser.dataset.chromosomes[h.chr1],u=this.browser.dataset.chromosomes[h.chr2],e=this.browser.dataset.bpResolutions[h.zoom],r=this.browser.contactMatrixView.getViewDimensions(),n=h.pixelSize,i=1+Math.round(h.x*e),o=1+Math.round(h.y*e),a=Math.min(l.size,Math.round(r.width/n*e)+i-1),s=Math.min(u.size,Math.round(r.height/n*e)+o-1),c=l.name+":"+ww(i)+"-"+ww(a)+" "+u.name+":"+ww(o)+"-"+ww(s),this.$resolution_selector.val(c))};var Zk=function(t,e){var n=this;this.browser=t;var r=e.find("div[id$='upper-hic-nav-bar-widget-container']");this.$container=sk("<div>",{class:"hic-resolution-selector-container",title:"Resolution"}),r.append(this.$container),this.$label_container=sk('<div id="hic-resolution-label-container">'),this.$container.append(this.$label_container),this.$label=sk("<div>"),this.$label_container.append(this.$label),this.$label.text("Resolution (kb)"),this.$label.hide(),this.$resolution_lock=sk('<i id="hic-resolution-lock" class="fa fa-unlock" aria-hidden="true">'),this.$label_container.append(this.$resolution_lock),this.$label_container.on("click",(function(){n.browser.resolutionLocked=!n.browser.resolutionLocked,n.setResolutionLock(n.browser.resolutionLocked)})),this.$resolution_selector=sk('<select name="select">'),this.$container.append(this.$resolution_selector),this.$resolution_selector.attr("name","resolution_selector"),this.$resolution_selector.on("change",(function(){var t=parseInt(n.$resolution_selector.val());n.browser.setZoom(t)})),this.browser.eventBus.subscribe("LocusChange",this),this.browser.eventBus.subscribe("MapLoad",this),this.browser.eventBus.subscribe("ControlMapLoad",this)};Zk.prototype.setResolutionLock=function(t){this.$resolution_lock.removeClass(!0===t?"fa-unlock":"fa-lock"),this.$resolution_lock.addClass(!0===t?"fa-lock":"fa-unlock")},Zk.prototype.receiveEvent=function(t){var e=this.browser;if("LocusChange"===t.type)if(!0===t.data.resolutionChanged&&(e.resolutionLocked=!1,this.setResolutionLock(e.resolutionLocked)),t.data.chrChanged){var n=e.dataset.isWholeGenome(t.data.state.chr1);this.$label.text(n?"Resolution (mb)":"Resolution (kb)"),i.call(this,e.state.zoom)}else{var r=e.state.zoom;this.$resolution_selector.find("option").filter((function(t){return t===r})).prop("selected",!0)}else"MapLoad"===t.type?(e.resolutionLocked=!1,this.setResolutionLock(!1),i.call(this,e.state.zoom)):"ControlMapLoad"===t.type&&i.call(this,e.state.zoom);function i(t){var n=e.getResolutions(),r="",i=!0,o=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var h=s.value,l=h.binSize,u=h.index,f=void 0,p=void 0;l>=1e6?(f=1e6,p="mb"):l>=1e3?(f=1e3,p="kb"):(f=1,p="bp");var d=ww(Math.round(l/f))+" "+p,g=t===h.index;r+="<option data-resolution="+l.toString()+" value="+u+(g?" selected":"")+">"+d+"</option>"}}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.$resolution_selector.empty(),this.$resolution_selector.append(r)}};var Kk=function(t,e){this.browser=t;var n=e.find("div[id$='lower-hic-nav-bar-widget-container']");this.$container=sk('<div class="hic-colorscale-widget-container">'),n.append(this.$container);var r=Xk(t,"-","blue");this.$minusButton=Qk(r),this.$container.append(this.$minusButton),this.$minusButton.hide();var i=this;this.minusColorPicker=Yk(t,this.$minusButton,"-",(function(){i.minusColorPicker.hide()})),this.minusColorPicker.hide(),r=Xk(t,"+","red"),this.$plusButton=Qk(r),this.$container.append(this.$plusButton),this.plusColorPicker=Yk(t,this.$plusButton,"+",(function(){i.plusColorPicker.hide()})),this.plusColorPicker.hide(),this.$minusButton.on("click",(function(t){i.presentColorPicker(sk(this),i.minusColorPicker)})),this.$plusButton.on("click",(function(t){i.presentColorPicker(sk(this),i.plusColorPicker)})),this.$high_colorscale_input=sk("<input>",{type:"text",placeholder:"",title:"color scale input"}),this.$container.append(this.$high_colorscale_input),this.$high_colorscale_input.on("change",(function(e){var n;n=sk(this).val().split(",").join().replace(",","","g"),isNaN(n)||t.setColorScaleThreshold(n)}));var o=sk("<i>",{class:"fa fa-minus","aria-hidden":"true",title:"negative threshold"});function a(e){var n,r;n=(r=t.getColorScale()).getThreshold()*e,t.setColorScaleThreshold(n),i.$high_colorscale_input.val(ww(r.getThreshold()))}o.on("click",(function(t){a(.5)})),this.$container.append(o),(o=sk("<i>",{class:"fa fa-plus","aria-hidden":"true",title:"positive threshold"})).on("click",(function(t){a(2)})),this.$container.append(o),this.browser.eventBus.subscribe("MapLoad",this),this.browser.eventBus.subscribe("ColorScale",this),this.browser.eventBus.subscribe("DisplayMode",this)};function Xk(t,e,n){var r,i;return(r=t.getColorScale())?(i=r.getColorComponents(e),pw.rgbColor(i.r,i.g,i.b)):n}function Yk(t,e,n,r){var i={parent:e[0],width:456,closeHandler:r},o=new aw(i);return iw(o.container,(function(r){var i;e.find(".fa-square").css({color:r}),i=pw.hexToRgb(r).split("(").pop().split(")").shift().split(",").map((function(t){return parseInt(t,10)})),t.getColorScale().setColorComponents({r:i[0],g:i[1],b:i[2]},n),t.repaintMatrix()})),o}function Qk(t,e){var n,r;return n=sk("<div>",{class:"igv-color-swatch"}),r=sk("<i>",{class:"fa fa-square fa-2x",title:"Present color swatches"}),n.append(r),r.css({color:t}),n}Kk.prototype.receiveEvent=function(t){"ColorScale"===t.type?(this.$high_colorscale_input.val(t.data.threshold),this.$plusButton.find(".fa-square").css({color:pw.rgbColor(t.data.r,t.data.g,t.data.b)})):"DisplayMode"===t.type&&("AOB"===t.data||"BOA"===t.data?this.$minusButton.show():this.$minusButton.hide())},Kk.prototype.presentColorPicker=function(t,e){this.$plusButton.find(".fa-square").css({"-webkit-text-stroke-color":"transparent"}),this.$minusButton.find(".fa-square").css({"-webkit-text-stroke-color":"transparent"}),this.$presentingButton=t,this.$presentingButton.find(".fa-square").css({"-webkit-text-stroke-color":"black"}),e.show()};var Jk={NONE:"None",VC:"Coverage",VC_SQRT:"Coverage - Sqrt",KR:"Balanced",INTER_VC:"Interchromosomal Coverage",INTER_VC_SQRT:"Interchromosomal Coverage - Sqrt",INTER_KR:"Interchromosomal Balanced",GW_VC:"Genome-wide Coverage",GW_VC_SQRT:"Genome-wide Coverage - Sqrt",GW_KR:"Genome-wide Balanced"},tS=function(t,e){var n=this;this.browser=t;var r=e.find("div[id$='lower-hic-nav-bar-widget-container']");this.$container=sk("<div>",{class:"hic-normalization-selector-container",title:"Normalization"}),r.append(this.$container);var i=sk("<div>");i.text("Norm"),this.$container.append(i),this.$normalization_selector=sk('<select name="select">'),this.$normalization_selector.attr("name","normalization_selector"),this.$normalization_selector.on("change",(function(){n.browser.setNormalization(n.$normalization_selector.val())})),this.$container.append(this.$normalization_selector),this.$spinner=sk("<div>"),this.$spinner.text("Loading ..."),this.$container.append(this.$spinner),this.$spinner.hide(),this.browser.eventBus.subscribe("MapLoad",this),this.browser.eventBus.subscribe("NormVectorIndexLoad",this),this.browser.eventBus.subscribe("NormalizationFileLoad",this),this.browser.eventBus.subscribe("NormalizationExternalChange",this)};tS.prototype.startNotReady=function(){this.$normalization_selector.hide(),this.$spinner.show()},tS.prototype.stopNotReady=function(){this.$spinner.hide(),this.$normalization_selector.show()},tS.prototype.receiveEvent=function(t){if("NormVectorIndexLoad"===t.type)(function(){return e.apply(this,arguments)}).call(this),this.stopNotReady();else if("NormalizationFileLoad"===t.type)"start"===t.data?this.startNotReady():this.stopNotReady();else if("NormalizationExternalChange"===t.type)this.$normalization_selector.find("option").filter((function(e){return this.value===t.data})).prop("selected",!0);function e(){return(e=hy(regeneratorRuntime.mark((function e(){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,o=this.browser.state.normalization,e.next=3,n.getNormalizationOptions();case 3:(r=e.sent)&&(i=r.map((function(t){var e;return"<option"+(void 0===(e=Jk[t]||t)?"":' title = "'+e+'" ')+(" value="+t+(o===t?" selected":""))+">"+("&nbsp &nbsp"+e+"&nbsp &nbsp")+"</option>"})),this.$normalization_selector.empty(),this.$normalization_selector.append(i.join("")));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}};var eS=function(){function t(e,n,r){ly(this,t),this.browser=e,this.axis=r,this.$axis=n.find("div[id$='-axis']"),this.$canvas=n.find("canvas"),this.ctx=this.$canvas.get(0).getContext("2d"),this.ctx.canvas.width=this.$axis.width(),this.ctx.canvas.height=this.$axis.height(),this.$wholeGenomeContainer=n.find("div[id$='-axis-whole-genome-container']"),this.yAxisTransformWithContext=function(t){t.scale(-1,1),t.rotate(Math.PI/2)},this.setAxisTransform(r),e.eventBus.subscribe("MapLoad",this),e.eventBus.subscribe("UpdateContactMapMousePosition",this)}return fy(t,[{key:"wholeGenomeLayout",value:function(t,e,n,r){var i,o,a,s,c,h,l,u,f=this;function p(t){var e=this;t.on("click",(function(t){var n;n=sk(this).first(),e.browser.parseGotoInput(n.text()),e.unhighlightWholeChromosome(),e.otherRuler.unhighlightWholeChromosome()})),t.hover((function(){d.call(e,sk(this),!0)}),(function(){d.call(e,sk(this),!1)}))}function d(t,e){var n,r;n=t.data("label"),this.otherRuler.$wholeGenomeContainer.children().each((function(t){n===sk(this).data("label")&&(r=sk(this))})),!0===e?(t.addClass("hic-whole-genome-chromosome-highlight"),r.addClass("hic-whole-genome-chromosome-highlight")):(t.removeClass("hic-whole-genome-chromosome-highlight"),r.removeClass("hic-whole-genome-chromosome-highlight"))}e.empty(),i=r.chromosomes.filter((function(t){return"all"!==t.name.toLowerCase()})),a=0,i.forEach((function(t){a+=t.size})),o="x"===n?t.width():t.height(),s=0,this.bboxes=[],h=void 0,i.forEach((function(t){var r,i;(i=t.bpLength/a)*o<1?s+=i:(u=f.axis+"-axis-whole-genome-chromosome-container",c=sk("<div>",{class:u}),e.append(c),c.data("label",t.name),h||(h=c),"x"===n?(r=Math.round(i*o)-2,c.width(r)):(r=Math.round(i*o)-2,c.height(r)),u=f.axis+"-axis-whole-genome-chromosome",l=sk("<div>",{class:u}),c.append(l),l.text(c.data("label")),p.call(f,c))})),s*=o,(s=Math.floor(s))>=1&&(u=f.axis+"-axis-whole-genome-chromosome-container",c=sk("<div>",{class:u}),e.append(c),c.data("label","-"),c.width(s),u=f.axis+"-axis-whole-genome-chromosome",l=sk("<div>",{class:u}),c.append(l),l.text(c.data("label")),p.call(f,c)),e.children().each((function(t){var e,r,i,o,a,s,c;f.bboxes.push((e=n,r=sk(this),i=h,s="x"===e?r.offset().left:r.offset().top,c="x"===e?i.offset().left:i.offset().top,o=s-c,a="x"===e?r.width():r.height(),{$e:r,a:o,b:o+a}))})),this.hideWholeGenome()}},{key:"hideWholeGenome",value:function(){this.$wholeGenomeContainer.hide(),this.$canvas.show()}},{key:"showWholeGenome",value:function(){this.$canvas.hide(),this.$wholeGenomeContainer.show()}},{key:"setAxisTransform",value:function(t){this.canvasTransform="y"===t?this.yAxisTransformWithContext:iS,this.labelReflectionTransform="y"===t?rS:function(t,e){}}},{key:"unhighlightWholeChromosome",value:function(){this.$wholeGenomeContainer.children().removeClass("hic-whole-genome-chromosome-highlight")}},{key:"receiveEvent",value:function(t){var e,n,r,i,o,a;"MapLoad"===t.type?this.wholeGenomeLayout(this.$axis,this.$wholeGenomeContainer,this.axis,t.data):"UpdateContactMapMousePosition"===t.type&&this.bboxes&&(this.unhighlightWholeChromosome(),e="x"===this.axis?t.data.x:t.data.y,r=this.bboxes,i=e,a=!1,o=void 0,r.forEach((function(t){!1===a&&(i<t.a||i>t.b||(o=t.$e,a=!0))})),(n=o)&&n.addClass("hic-whole-genome-chromosome-highlight"))}},{key:"locusChange",value:function(t){this.update()}},{key:"updateWidthWithCalculation",value:function(t){this.$axis.css("width",t),this.$canvas.width(this.$axis.width()),this.$canvas.attr("width",this.$axis.width()),this.wholeGenomeLayout(this.$axis,this.$wholeGenomeContainer,this.axis,this.browser.dataset),this.update()}},{key:"updateHeight",value:function(t){this.$canvas.height(t),this.$canvas.attr("height",t),this.wholeGenomeLayout(this.$axis,this.$wholeGenomeContainer,this.axis,this.browser.dataset),this.update()}},{key:"update",value:function(){var t,e,n,r={},i=this.browser;i.dataset.isWholeGenome(i.state.chr1)?this.showWholeGenome():(this.hideWholeGenome(),iS(this.ctx),ic.graphics.fillRect(this.ctx,0,0,this.$canvas.width(),this.$canvas.height(),{fillStyle:pw.rgbColor(255,255,255)}),this.canvasTransform(this.ctx),t="x"===this.axis?this.$canvas.width():this.$canvas.height(),e="x"===this.axis?this.$canvas.height():this.$canvas.width(),ic.graphics.fillRect(this.ctx,0,0,t,e,{fillStyle:pw.rgbColor(255,255,255)}),r.bpPerPixel=i.dataset.bpResolutions[i.state.zoom]/i.state.pixelSize,n="x"===this.axis?i.state.x:i.state.y,r.bpStart=n*i.dataset.bpResolutions[i.state.zoom],r.rulerTickMarkReferencePixels=Math.max(Math.max(this.$canvas.width(),this.$canvas.height()),Math.max(this.$otherRulerCanvas.width(),this.$otherRulerCanvas.height())),r.rulerLengthPixels=t,r.rulerHeightPixels=e,r.height=Math.min(this.$canvas.width(),this.$canvas.height()),this.draw(r))}},{key:"draw",value:function(t){var e,n,r,i,o,a,s,c,h,l,u=this.browser.dataset.chromosomes;if("x"===this.axis?u[this.browser.state.chr1].name:u[this.browser.state.chr2].name,l="x"===this.axis?u[this.browser.state.chr1].size:u[this.browser.state.chr2].size,"all"===t.chrName);else{for(ic.graphics.fillRect(this.ctx,0,0,t.rulerLengthPixels,t.rulerHeightPixels,{fillStyle:pw.rgbColor(255,255,255)}),e={textAlign:"center",font:"9px PT Sans",fillStyle:"rgba(64, 64, 64, 1)",strokeStyle:"rgba(64, 64, 64, 1)"},r=(n=function(t){if(t<10)return new nS(1,"",1);var e=Math.floor((i=t,o=Math.log(10),Math.log(i)/o)),n="",r=1;var i,o;e>9&&(n="gb",r=1e9);e>6?(n="mb",r=1e6):e>3&&(n="kb",r=1e3);return t/Math.pow(10,e-1)<25?new nS(Math.pow(10,e-1),n,r):new nS(Math.pow(10,e)/2,n,r)}(Math.floor(t.rulerTickMarkReferencePixels*t.bpPerPixel))).majorTick,i=Math.floor(t.bpStart/r)-1,a=o=0,ic.graphics.setProperties(this.ctx,e),this.ctx.lineWidth=1,1,8;a<t.rulerLengthPixels;)c=Math.floor(i*r),a=Math.round((c-1-t.bpStart+.5)/t.bpPerPixel),h=f(c/n.unitMultiplier,0)+" "+n.majorUnit,s=Math.abs(a-o),0==i%(this.ctx.measureText(h).width>s?s<32?4:2:1)&&Math.floor(a*t.bpPerPixel+t.bpStart)<l&&(this.ctx.save(),this.labelReflectionTransform(this.ctx,a),ic.graphics.fillText(this.ctx,h,a,t.height-8/.75),this.ctx.restore()),Math.floor(a*t.bpPerPixel+t.bpStart)<l&&ic.graphics.strokeLine(this.ctx,a,t.height-8,a,t.height-1),o=a,i++;ic.graphics.strokeLine(this.ctx,0,t.height-1,t.rulerLengthPixels,t.height-1)}function f(t,e){var n=10;switch(e){case 0:n=1;break;case 1:n=10;break;case 2:n=100;break;default:n=1e3}var r=""+Math.abs(Math.round(t*n)/n);-1===r.indexOf(".")&&(r+=".");for(var i=r.substr(0,r.indexOf(".")),o=i-0,a=r.substr(r.indexOf("."));a.length-1<e;)a+="0";if("."===a&&(a=""),o>=1e3){var s=i.length;i=parseInt(""+o/1e3)+","+i.substring(s-3,s)}o>=1e6&&(s=i.length,i=parseInt(""+o/1e6)+","+i.substring(s-7,s));var c=i+a;return t<0&&(c="("+c+")"),c}}}]),t}();function nS(t,e,n){this.majorTick=t,this.majorUnit=e,this.unitMultiplier=n}function rS(t,e){t.translate(e,0),t.scale(-1,1),t.translate(-e,0)}function iS(t){t.setTransform(1,0,0,1,0,0)}var oS=function(t,e,n,r,i,o,a){this.browser=t,this.trackRenderPair=r,this.track=i[o],this.id="trackRender_".concat(Gy()),this.axis=o,this.initializationHelper(n,e,a)};oS.prototype.initializationHelper=function(t,e,n){var r,i,o,a=this,s=this;if(this.$viewport="x"===this.axis?sk('<div class="x-track-canvas-container">'):sk('<div class="y-track-canvas-container">'),e.width&&this.$viewport.width(e.width),e.height&&this.$viewport.height(e.height),t.append(this.$viewport),this.$viewport.css({order:n}),this.$canvas=sk("<canvas>"),this.$viewport.append(this.$canvas),this.ctx=this.$canvas.get(0).getContext("2d"),"x"===this.axis){this.$label=sk('<div class="x-track-label">');var c=this.track.name||"untitled";this.$label.text(c),this.$viewport.append(this.$label),!0===s.browser.showTrackLabelAndGutter?this.$label.show():this.$label.hide()}this.$spinner="x"===this.axis?sk('<div class="x-track-spinner">'):sk('<div class="y-track-spinner">'),this.$viewport.append(this.$spinner),this.stopSpinner(),"x"===this.axis&&(this.colorPicker=(r=this.$viewport,i=function(t){a.setColor(t)},o={parent:r[0],width:456,height:void 0,colorHandler:i},new sw(o)),this.colorPicker.hide()),"x"===this.axis&&(this.track.trackView=this,this.track.trackView.trackDiv=this.$viewport.get(0),ic.appendRightHandGutter.call(this,this.$viewport),this.$viewport.on("click",(function(t){t.preventDefault(),t.stopPropagation(),s.browser.toggleTrackLabelAndGutterState(),!0===s.browser.showTrackLabelAndGutter?(sk(".x-track-label").show(),sk(".igv-right-hand-gutter").show()):(sk(".x-track-label").hide(),sk(".igv-right-hand-gutter").hide())}))),this.configTrackTransforms()},oS.prototype.configTrackTransforms=function(){this.canvasTransform="y"===this.axis?bk:kk,this.labelReflectionTransform="y"===this.axis?xk:function(t,e){}},oS.prototype.syncCanvas=function(){this.$canvas.width(this.$viewport.width()),this.$canvas.attr("width",this.$viewport.width()),this.$canvas.height(this.$viewport.height()),this.$canvas.attr("height",this.$viewport.height())},oS.prototype.presentColorPicker=function(){var t=this.trackDiv.getBoundingClientRect();this.colorPicker.origin={x:t.x,y:0},this.colorPicker.$container.offset({left:this.colorPicker.origin.x,top:this.colorPicker.origin.y}),this.colorPicker.$container.show()},oS.prototype.setTrackName=function(t){"x"===this.axis&&(this.track.name=t,this.$label.text(t))},oS.prototype.setColor=function(t){function e(e){e.tile=void 0,e.track.color=t}e(this.trackRenderPair.x),e(this.trackRenderPair.y),this.browser.renderTrackXY(this.trackRenderPair)},oS.prototype.setTrackHeight=function(t){console.error("setTrackHeight not implemented")},oS.prototype.dataRange=function(){return this.track.dataRange?this.track.dataRange:void 0},oS.prototype.setDataRange=function(t,e,n){void 0!==t&&(this.track.dataRange.min=t,this.track.config.min=t),void 0!==e&&(this.track.dataRange.max=e,this.track.config.max=e),this.track.autoscale=n,this.track.config.autoScale=n,this.repaintViews()},oS.prototype.readyToPaint=hy(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,c,h,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(e=this).browser.genomicState(e.axis),s=a.chromosome.name,c="all"===s.toLowerCase()?this.browser.genome.getGenomeLength()/Math.max(this.$canvas.height(),this.$canvas.width()):a.bpp,!e.tile||!e.tile.containsRange(s,a.startBP,a.endBP,c)){t.next=8;break}return t.abrupt("return");case 8:if(!(c*Math.max(e.$canvas.width(),e.$canvas.height())>e.track.visibilityWindow)){t.next=12;break}return t.abrupt("return");case 12:return n=3*Math.max(e.$canvas.width(),e.$canvas.height()),r=Math.round(c*n),i=Math.max(0,Math.round(a.startBP-r/3)),o=i+r,t.next=18,e.track.getFeatures(a.chromosome.name,i,o,c);case 18:return h=t.sent,(l=document.createElement("canvas")).width="x"===e.axis?n:e.$canvas.width(),l.height="x"===e.axis?e.$canvas.height():n,u=l.getContext("2d"),h?(!this.track.autoscale&&this.track.dataRange||("function"==typeof e.track.doAutoscale?this.track.doAutoscale(h):this.track.dataRange=vw(h)),e.canvasTransform(u),e.drawConfiguration={features:h,context:u,pixelWidth:n,pixelHeight:Math.min(l.width,l.height),bpStart:i,bpEnd:o,bpPerPixel:c,genomicState:a,viewportContainerX:(a.startBP-i)/c,viewportContainerWidth:Math.max(e.$canvas.width(),e.$canvas.height()),labelTransform:e.labelReflectionTransform},e.track.draw(e.drawConfiguration)):u.clearRect(0,0,e.$canvas.width(),e.$canvas.height()),e.tile=new aS(s,i,o,c,l),t.abrupt("return",e.tile);case 26:case"end":return t.stop()}}),t,this)}))),oS.prototype.repaint=function(){var t=hy(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.browser.genomicState(this.axis),this.checkZoomIn()||(this.tile=void 0,this.ctx.clearRect(0,0,this.$canvas.width(),this.$canvas.height())),r=n.chromosome.name,i="all"===r.toLowerCase()?this.browser.genome.getGenomeLength()/Math.max(this.$canvas.height(),this.$canvas.width()):n.bpp,e&&(this.tile=void 0),this.tile&&this.tile.containsRange(r,n.startBP,n.endBP,i)){t.next=8;break}return t.next=8,this.readyToPaint();case 8:this.drawTileWithGenomicState(this.tile,n);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),oS.prototype.checkZoomIn=function(){return!(this.track.visibilityWindow&&this.track.visibilityWindow>0&&genomicState.bpp*Math.max(this.$canvas.width(),this.$canvas.height())>this.track.visibilityWindow)},oS.prototype.drawTileWithGenomicState=function(t,e){t&&(this.ctx.clearRect(0,0,this.$canvas.width(),this.$canvas.height()),this.offsetPixel=Math.round((t.startBP-e.startBP)/e.bpp),"x"===this.axis?this.ctx.drawImage(t.buffer,this.offsetPixel,0):this.ctx.drawImage(t.buffer,0,this.offsetPixel))},oS.prototype.startSpinner=function(){this.browser.startSpinner()},oS.prototype.stopSpinner=function(){this.browser.stopSpinner()},oS.prototype.isLoading=function(){return!(void 0===this.loading)},oS.prototype.checkContentHeight=function(){},oS.prototype.repaintViews=function(){this.browser.renderTrackXY(this.trackRenderPair,!0)};var aS=function(t,e,n,r,i){this.chr=t,this.startBP=e,this.endBP=n,this.bpp=r,this.buffer=i};aS.prototype.containsRange=function(t,e,n,r){return t===this.chr&&this.bpp===r&&this.startBP<=e&&this.endBP>=n};var sS=function(t,e,n,r){var i=n.title,o=n.alertMessage;this.browser=t,this.trackListRetrievalCallback=r,cS.call(this,e,o),hS.call(this,this.browser.$root,i)};function cS(t,e){var n=this;t.find("button").on("click",(function(){n.trackListRetrievalCallback().length>0?(n.updateBody(n.trackListRetrievalCallback()),n.$annotationPanel.toggle()):lw.presentAlert(e),n.browser.hideMenu()}))}function hS(t,e){var n,r,i,o=this;this.$annotationPanel=sk("<div>",{class:"hic-annotation-panel-container"}),t.append(this.$annotationPanel),n=sk("<div>",{class:"hic-annotation-panel-header"}),this.$annotationPanel.append(n),(r=sk("<div>")).text(e),n.append(r),r=sk("<div>",{class:"hic-menu-close-button"}),n.append(r),i=sk("<i>",{class:"fa fa-times"}),r.append(i),i.on("click",(function(t){o.$annotationPanel.toggle()})),Xy(this.$annotationPanel.get(0),n.get(0)),this.$annotationPanel.hide()}function lS(t,e){var n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b,x,k,S=this;if(f=e instanceof Rk,p=this.trackListRetrievalCallback(),!1===f&&(m=(d=e).x.track,g=d.x.track.trackView),i=sk("<div>",{class:"hic-annotation-row-container"}),t.append(i),o=sk("<div>",{class:"hic-annotation-modal-row"}),i.append(o),(l=sk("<div>")).text(f?e.config.name:m.config.name),o.append(l),f&&(u=!0===e.isVisible?"fa fa-eye fa-lg":"fa fa-eye-slash fa-lg",a=sk("<i>",{class:u,"aria-hidden":"true"}),o.append(a),a.on("click",(function(t){a.hasClass("fa-eye")?(a.addClass("fa-eye-slash"),a.removeClass("fa-eye"),e.isVisible=!1):(a.addClass("fa-eye"),a.removeClass("fa-eye-slash"),e.isVisible=!0),S.browser.contactMatrixView.clearImageCaches(),S.browser.contactMatrixView.update()}))),f){var C=sk("<div>",{class:"matrix-diagonal-widget-container matrix-diagonal-widget-all"});o.append(C),C.on("click.matrix_diagonal_div",(function(t){var n,r;t.preventDefault(),r=e,(n=C).hasClass("matrix-diagonal-widget-all")?(n.removeClass("matrix-diagonal-widget-all"),n.addClass("matrix-diagonal-widget-lower"),r.displayMode=zp):n.hasClass("matrix-diagonal-widget-lower")?(n.removeClass("matrix-diagonal-widget-lower"),n.addClass("matrix-diagonal-widget-upper"),r.displayMode=$p):n.hasClass("matrix-diagonal-widget-upper")?(n.removeClass("matrix-diagonal-widget-upper"),n.addClass("matrix-diagonal-widget-all"),r.displayMode=Pp):(n.addClass("matrix-diagonal-widget-all"),r.displayMode=Pp)}))}b=f?e.getColor():m.color,x=sk("<div>",{class:"igv-color-swatch"}),k=sk("<i>",{class:"fa fa-square fa-lg","aria-hidden":"true"}),x.append(k),k.css({color:b}),r=x,o.append(r),n=function(t,e,n){var r,i,o;r=sk("<div>",{class:"hic-color-swatch-container"}),t.append(r),e&&e.width&&r.width(e.width);e&&e.height&&r.height(e.height);return i=sk("<div>"),r.append(i),o=sk("<i>",{class:"fa fa-times"}),i.append(o),o.on("click",(function(t){n()})),r}(i,{width:698},(function(){o.next(".hic-color-swatch-container").toggle()})),r.on("click",(function(t){o.next(".hic-color-swatch-container").toggle()})),n.hide(),iw(n.get(0),(function(t){o.find(".fa-square").css({color:t}),f?(e.color=t,S.browser.eventBus.post(hk("TrackState2D",e))):g.setColor(t)})),l=sk("<div>",{class:"up-down-arrow-container"}),o.append(l),c=sk("<i>",{class:"fa fa-arrow-up","aria-hidden":"true"}),l.append(c),h=sk("<i>",{class:"fa fa-arrow-down","aria-hidden":"true"}),l.append(h),1===p.length?(c.css("color","#f7f7f7"),h.css("color","#f7f7f7")):e===p[0]?(f?h:c).css("color","#f7f7f7"):e===p[p.length-1]&&(f?c:h).css("color","#f7f7f7"),v=p.indexOf(e),y=function(t){e=p[v+1],p[v+1]=p[v],p[v]=e,f?(S.browser.eventBus.post(hk("TrackState2D",p)),S.updateBody(p)):(S.browser.updateLayout(),S.updateBody(p))},w=function(t){e=p[v-1],p[v-1]=p[v],p[v]=e,f?(S.browser.eventBus.post(hk("TrackState2D",p)),S.updateBody(p)):(S.browser.updateLayout(),S.updateBody(p))},c.on("click",f?y:w),h.on("click",f?w:y),s=sk("<i>",{class:"fa fa-trash-o fa-lg","aria-hidden":"true"}),o.append(s),s.on("click",(function(t){var n;f?(n=p.indexOf(e),p.splice(n,1),S.browser.contactMatrixView.clearImageCaches(),S.browser.contactMatrixView.update(),S.browser.eventBus.post(hk("TrackLoad2D",p))):S.browser.layoutController.removeTrackRendererPair(g.trackRenderPair),S.updateBody(p)}))}sS.prototype.updateBody=function(t){var e,n;if(this.$annotationPanel.find(".hic-annotation-row-container").remove(),t[0]instanceof Rk)for(n=t.length-1;n>=0;n--)lS.call(this,this.$annotationPanel,t[n]);else{e=t;var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;lS.call(this,this.$annotationPanel,c)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}};var uS=function(t,e,n){this.browser=t,this.isDragging=!1,this.$x_axis_scrollbar_container=e,this.$x_axis_scrollbar=this.$x_axis_scrollbar_container.find("div[id$='-x-axis-scrollbar']"),this.$x_label=this.$x_axis_scrollbar.find("div"),this.$x_label.text(""),this.$y_axis_scrollbar_container=n,this.$y_axis_scrollbar=this.$y_axis_scrollbar_container.find("div[id$='-y-axis-scrollbar']"),this.$y_label=this.$y_axis_scrollbar.find(".scrollbar-label-rotation-in-place"),this.$y_label.text(""),this.browser.eventBus.subscribe("LocusChange",this)};uS.prototype.css2Bin=function(t,e,n){var r,i;return r=e.css(n).slice(0,-2),i=e.parent().css("left"===n?"width":"height").slice(0,-2),parseInt(r,10)/parseInt(i,10)*t.size/this.browser.dataset.bpResolutions[this.browser.state.zoom]},uS.prototype.receiveEvent=function(t){var e,n,r,i,o;if(!this.isDragging&&"LocusChange"===t.type){var a=t.data.state,s=this.browser.dataset;if(0===a.chr1)this.$x_axis_scrollbar.hide(),this.$y_axis_scrollbar.hide();else{this.$x_axis_scrollbar.show(),this.$y_axis_scrollbar.show(),this.$x_axis_scrollbar_container.show(),this.$y_axis_scrollbar_container.show();var c=a.chr1,h=a.chr2,l=a.zoom,u=a.pixelSize,f=a.x,p=a.y;e=[c,h].map((function(t){return s.chromosomes[t].size/s.bpResolutions[l]})),n=e.map((function(t){return t*u})),o=[(r=[this.browser.contactMatrixView.getViewDimensions().width,this.browser.contactMatrixView.getViewDimensions().height])[0]/u,r[r.length-1]/u].map((function(t,i){var o=Math.min(t,e[i])/e[i],a=Math.min(n[i],r[i])/r[i];return Math.max(1,Math.round(100*o*a))})),this.$x_axis_scrollbar.css("width","".concat(o[0],"%")),this.$y_axis_scrollbar.css("height","".concat(o[o.length-1],"%")),i=Math.round(100*f/e[0]),this.$x_axis_scrollbar.css("left","".concat(i,"%")),i=Math.round(100*p/e[e.length-1]),this.$y_axis_scrollbar.css("top","".concat(i,"%")),this.$x_label.text(s.chromosomes[c].name),this.$y_label.text(s.chromosomes[h].name)}}};var fS=/"/g;Fh({target:"String",proto:!0,forced:function(t){return hc((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}("anchor")},{anchor:function(t){return e="a",n="name",r=t,i=String(wc(this)),o="<"+e,""!==n&&(o+=" "+n+'="'+String(r).replace(fS,"&quot;")+'"'),o+">"+i+"</"+e+">";var e,n,r,i,o}});var pS=function(t,e){this.browser=t,this.$target=e,this.$rulerSweeper=e.find("div[id$='-sweep-zoom-container']"),this.$rulerSweeper.hide(),this.sweepRect={}};pS.prototype.initialize=function(t){this.anchor=t,this.coordinateFrame=this.$rulerSweeper.parent().offset(),this.aspectRatio=this.$target.width()/this.$target.height(),this.sweepRect.x={x:t.x,y:t.y,width:1,height:1},this.clipped={value:!1}},pS.prototype.update=function(t){var e=this.anchor,n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);n/r>this.aspectRatio?r=n/this.aspectRatio:n=r*this.aspectRatio,this.sweepRect.width=n,this.sweepRect.height=r,this.sweepRect.x=e.x<t.x?e.x:e.x-n,this.sweepRect.y=e.y<t.y?e.y:e.y-r,this.$rulerSweeper.width(this.sweepRect.width),this.$rulerSweeper.height(this.sweepRect.height),this.$rulerSweeper.offset({left:this.sweepRect.x,top:this.sweepRect.y}),this.$rulerSweeper.show()},pS.prototype.commit=function(){var t,e,n,r,i,o,a,s,c;this.$rulerSweeper.hide(),t=this.browser.state,e=this.browser.resolution(),n=this.sweepRect.x-this.$target.offset().left,r=this.sweepRect.y-this.$target.offset().top,i=(t.x+n/t.pixelSize)*e,o=(t.y+r/t.pixelSize)*e,a=i+this.sweepRect.width/t.pixelSize*e,s=o+this.sweepRect.height/t.pixelSize*e,c=this.browser.dataset.bpResolutions[this.browser.dataset.bpResolutions.length-1],this.browser.goto(t.chr1,i,a,t.chr2,o,s,c)};var dS=20,gS=40,mS=function(t,e){this.browser=t,wS(t,e),this.createAllContainers(t,e)};mS.prototype.createAllContainers=function(t,e){var n='<div id="'.concat(t.id,'-x-track-container"><div id="').concat(t.id,'-track-shim"></div><div id="').concat(t.id,'-x-tracks"><div id="').concat(t.id,'-y-track-guide" style="display: none;"></div></div></div>');e.append(sk(n)),this.$x_track_container=e.find("div[id$='x-track-container']"),this.$track_shim=this.$x_track_container.find("div[id$='track-shim']"),this.$x_tracks=this.$x_track_container.find("div[id$='x-tracks']"),this.$y_track_guide=this.$x_track_container.find("div[id$='y-track-guide']");var r='<div id="'.concat(t.id,'-content-container"></div>');this.$content_container=sk(r),e.append(this.$content_container);var i='<div id="'.concat(t.id,'-x-axis-container">\n            <div id="').concat(t.id,'-x-axis">\n                <canvas></canvas>\n                <div id="').concat(t.id,'-x-axis-whole-genome-container"></div>\n            </div>\n\t    </div>');this.$content_container.append(sk(i));var o=this.$content_container.find("div[id$='x-axis-container']");this.xAxisRuler=new eS(t,o,"x");var a='<div id="'.concat(t.id,'-y-tracks-y-axis-viewport-y-scrollbar">\n\n            <div id="').concat(t.id,'-y-tracks">\n                <div id="').concat(t.id,'-x-track-guide" style="display: none;"></div>\n            </div>\n            \n            <div id="').concat(t.id,'-y-axis">\n    \t\t\t<canvas></canvas>\n\t\t\t    <div id="').concat(t.id,'-y-axis-whole-genome-container"></div>\n\t\t    </div>\n\t\t    \n        </div>');this.$content_container.append(sk(a));var s=this.$content_container.find("div[id$='-y-tracks-y-axis-viewport-y-scrollbar']");this.$y_tracks=s.find("div[id$='-y-tracks']"),this.$x_track_guide=this.$y_tracks.find("div[id$='-x-track-guide']"),this.yAxisRuler=new eS(t,s,"y"),this.xAxisRuler.$otherRulerCanvas=this.yAxisRuler.$canvas,this.xAxisRuler.otherRuler=this.yAxisRuler,this.yAxisRuler.$otherRulerCanvas=this.xAxisRuler.$canvas,this.yAxisRuler.otherRuler=this.xAxisRuler;var c='<div id="'.concat(t.id,'-viewport">\n\t\t\t<canvas></canvas>\n\t\t\t<i class="fa fa-spinner fa-spin" style="font-size: 48px; position: absolute; left: 40%; top: 40%; display: none;"></i>\n\t\t\t<div id="').concat(t.id,'-sweep-zoom-container" style="display: none;"></div>\n\t\t\t<div id="').concat(t.id,'-x-guide" style="display: none;"></div>\n\t\t\t<div id="').concat(t.id,'-y-guide" style="display: none;"></div>\n\t\t</div>');s.append(sk(c));var h='<div id="'.concat(t.id,'-y-axis-scrollbar-container">\n\t\t\t<div id="').concat(t.id,'-y-axis-scrollbar">\n\t\t\t\t<div class="scrollbar-label-rotation-in-place"></div>\n\t\t\t</div>\n\t\t</div>');s.append(sk(h));var l='<div id="'.concat(t.id,'-x-scrollbar-container">\n            <div id="').concat(t.id,'-x-axis-scrollbar-container">\n                <div id="').concat(t.id,'-x-axis-scrollbar">\n                    <div></div>\n                </div>\n            </div>\n\t    </div>');this.$content_container.append(sk(l))},mS.prototype.getContactMatrixViewport=function(){return this.$content_container.find("div[id$='-y-tracks-y-axis-viewport-y-scrollbar']").find("div[id$='-viewport']")},mS.prototype.getYAxisScrollbarContainer=function(){return this.$content_container.find("div[id$='-y-tracks-y-axis-viewport-y-scrollbar']").find("div[id$='-y-axis-scrollbar-container']")},mS.prototype.getXAxisScrollbarContainer=function(){return this.$content_container.find("div[id$='-x-axis-scrollbar-container']")},mS.prototype.tracksLoaded=function(t){var e=this;this.doLayoutTrackXYPairCount(t.length+this.browser.trackRenderers.length),t.forEach((function(t,n){var r={};r.x=new oS(e.browser,{width:void 0,height:40},e.$x_tracks,r,t,"x",n),r.y=new oS(e.browser,{width:40,height:void 0},e.$y_tracks,r,t,"y",n),e.browser.trackRenderers.push(r)}))},mS.prototype.removeAllTrackXYPairs=function(){var t=this;0!==py(Array(this.browser.trackRenderers.length).keys()).length&&py(Array(this.browser.trackRenderers.length).keys()).forEach((function(){var e=t.browser.trackRenderers[t.browser.trackRenderers.length-1];e.x.$viewport.remove(),e.y.$viewport.remove();var n=t.browser.trackRenderers.indexOf(e);t.browser.trackRenderers.splice(n,1),e=void 0,t.doLayoutTrackXYPairCount(t.browser.trackRenderers.length)}))},mS.prototype.removeLastTrackXYPair=function(){if(this.browser.trackRenderers.length>0){var t=this.browser.trackRenderers[this.browser.trackRenderers.length-1];t.x.$viewport.remove(),t.y.$viewport.remove();var e=this.browser.trackRenderers.indexOf(t);this.browser.trackRenderers.splice(e,1),t=void 0,this.doLayoutTrackXYPairCount(this.browser.trackRenderers.length),this.browser.updateLayout()}},mS.prototype.removeTrackRendererPair=function(t){var e,n;this.browser.trackRenderers.length>0&&((n=t).x.$viewport.remove(),n.y.$viewport.remove(),e=this.browser.trackRenderers.indexOf(n),this.browser.trackRenderers.splice(e,1),this.doLayoutTrackXYPairCount(this.browser.trackRenderers.length),this.browser.updateLayout())},mS.prototype.doLayoutTrackXYPairCount=function(t){var e,n,r;e=0===t?0:42*t,r="calc(100% - ("+[vS(),e].map((function(t){return"".concat(t,"px")})).join(" + ")+"))",n="calc(100% - ("+[e,gS,dS].map((function(t){return"".concat(t,"px")})).join(" + ")+"))",this.$x_track_container.height(e),this.$track_shim.width(e),this.$x_tracks.css("width",n),this.$content_container.css("height",r),this.xAxisRuler.updateWidthWithCalculation(n),this.$y_tracks.width(e),this.yAxisRuler.updateHeight(this.yAxisRuler.$axis.height()),this.browser.contactMatrixView.$viewport.css("width",n),this.browser.contactMatrixView.scrollbarWidget.$x_axis_scrollbar_container.css("width",n)},mS.prototype.doLayoutWithRootContainerSize=function(t){var e;this.browser.$root.width(t.width),this.browser.$root.height(t.height+vS()),e=this.browser.trackRenderers.length>0?this.browser.trackRenderers.length:0,this.doLayoutTrackXYPairCount(e),this.browser.updateLayout()};var vS=function(){return 160},yS=function(t){return t.$root.find(".hic-navbar-container")},wS=function(t,e){var n=sk("<div>",{class:"hic-navbar-container"});e.append(n),n.on("click",(function(e){e.stopPropagation(),e.preventDefault(),NS.setCurrentBrowser(t)}));var r='<div id="'.concat(t.id,'-contact-map-hic-nav-bar-map-container">\n            <div id="').concat(t.id,'-contact-map-hic-nav-bar-map-label">\n            </div>\n             <div class="hic-nav-bar-button-container">\n                <i class="fa fa-bars fa-lg" title="Present menu"></i>\n                <i class="fa fa-minus-circle fa-lg" title="Delete browser panel" style="display: none;"></i>\n             </div>\n        </div>');n.append(sk(r)),t.$contactMaplabel=n.find("div[id$='contact-map-hic-nav-bar-map-label']"),t.$menuPresentDismiss=n.find(".fa-bars"),t.$menuPresentDismiss.on("click",(function(e){return t.toggleMenu()})),t.$browser_panel_delete_button=n.find(".fa-minus-circle"),t.$browser_panel_delete_button.on("click",(function(e){return function(t){t===NS.getCurrentBrowser()&&NS.setCurrentBrowser(void 0),pk.splice(pk.indexOf(t),1),t.$root.remove(),t=void 0,1===pk.length&&(NS.setCurrentBrowser(pk[0]),NS.getCurrentBrowser().$browser_panel_delete_button.hide())}(t)})),t.$browser_panel_delete_button.hide();var i='<div id="'.concat(t.id,'-control-map-hic-nav-bar-map-container">\n            <div id="').concat(t.id,'-control-map-hic-nav-bar-map-label"></div>\n        </div>');n.append(sk(i)),t.$controlMaplabel=n.find("div[id$='control-map-hic-nav-bar-map-label']");var o='<div id="'.concat(t.id,'-upper-hic-nav-bar-widget-container"></div>');n.append(sk(o));var a='<div id="'.concat(t.id,'-lower-hic-nav-bar-widget-container"></div>');n.append(sk(a))},bS=function(t,e,n,r,i){var o,a=hic.Math.mean(i);if(a>0)for(o=0;o<i.length;o++)i[o]/=a;this.type=t,this.chrIdx=e,this.unit=n,this.resolution=r,this.data=i};bS.getNormalizationVectorKey=function(t,e,n,r){return t+"_"+e+"_"+n+"_"+r},bS.prototype.getKey=function(){return bS.getKey(this.type,this.chrIdx,this.unit,this.resolution)};var xS={hg19:[249250621,243199373,198022430],hg38:[248956422,242193529,198295559],mm10:[195471971,182113224,160039680],mm9:[197195432,181748087,159599783],dm6:[23513712,25286936,28110227]},kS=function(t){if(this.hicFile=t,this.matrixCache={},this.blockCache={},this.blockCacheKeys=[],this.normVectorCache={},this.normalizationTypes=["NONE"],this.blockCacheLimit=yk()?4:10,this.genomeId=t.genomeId,this.chromosomes=t.chromosomes,this.bpResolutions=t.bpResolutions,this.wholeGenomeChromosome=t.wholeGenomeChromosome,this.wholeGenomeResolution=t.wholeGenomeResolution,!Object.keys(xS).includes(this.genomeId)){var e=function(t){var e,n,r=Object.keys(xS);if(t.length<4)return;for(e=0;e<r.length;e++)if(n=xS[r[e]],t[1].size===n[0]&&t[2].size===n[1]&&t[3].size===n[2])return r[e];return}(this.chromosomes);e&&(this.genomeId=e)}};kS.prototype.clearCaches=function(){this.matrixCache={},this.blockCache={},this.normVectorCache={},this.colorScaleCache={}},kS.prototype.getMatrix=function(){var t=hy(regeneratorRuntime.mark((function t(e,n){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e>n&&(r=e,e=n,n=r),i="".concat(e,"_").concat(n),!this.matrixCache.hasOwnProperty(i)){t.next=6;break}return t.abrupt("return",this.matrixCache[i]);case 6:return t.next=8,this.hicFile.readMatrix(e,n);case 8:return o=t.sent,this.matrixCache[i]=o,t.abrupt("return",o);case 11:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),kS.prototype.getNormalizedBlock=function(){var t=hy(regeneratorRuntime.mark((function t(e,n,r,i){var o,a,s,c,h,l,u,f,p,d,g,m,v,y,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBlock(e,n);case 2:if(o=t.sent,void 0!==r&&"NONE"!==r&&null!=o){t.next=7;break}return t.abrupt("return",o);case 7:return t.next=9,this.getNormalizationVector(r,e.chr1.index,e.zoom.unit,e.zoom.binSize);case 9:if(a=t.sent,e.chr1!==e.chr2){t.next=14;break}t.t0=a,t.next=17;break;case 14:return t.next=16,this.getNormalizationVector(r,e.chr2.index,e.zoom.unit,e.zoom.binSize);case 16:t.t0=t.sent;case 17:if(s=t.t0,c=[],void 0!==a&&void 0!==s){t.next=25;break}return lw.presentAlert("Normalization option "+r+" unavailable at this resolution."),i&&i.post(new hk("NormalizationExternalChange","NONE")),t.abrupt("return",o);case 25:for(l=!0,u=!1,f=void 0,t.prev=28,p=o.records[Symbol.iterator]();!(l=(d=p.next()).done);l=!0)g=d.value,m=g.bin1,v=g.bin2,0===(y=a.data[m]*s.data[v])[m]||isNaN(y)||(w=g.counts/y,c.push(new CS(m,v,w)));t.next=36;break;case 32:t.prev=32,t.t1=t.catch(28),u=!0,f=t.t1;case 36:t.prev=36,t.prev=37,l||null==p.return||p.return();case 39:if(t.prev=39,!u){t.next=42;break}throw f;case 42:return t.finish(39);case 43:return t.finish(36);case 44:return h=new SS(n,e,c),t.abrupt("return",h);case 46:case"end":return t.stop()}}),t,this,[[28,32,36,44],[37,,39,43]])})));return function(e,n,r,i){return t.apply(this,arguments)}}(),kS.prototype.getBlock=function(){var t=hy(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.chr1.name+"_"+e.chr2.name+"_"+e.zoom.binSize+"_"+e.zoom.unit+"_"+n,!this.blockCache.hasOwnProperty(r)){t.next=5;break}return t.abrupt("return",this.blockCache[r]);case 5:return t.next=7,this.hicFile.readBlock(n,e);case 7:return i=t.sent,this.blockCacheKeys.length>this.blockCacheLimit&&(delete this.blockCache[this.blockCacheKeys[0]],this.blockCacheKeys.shift()),this.blockCacheKeys.push(r),this.blockCache[r]=i,t.abrupt("return",i);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),kS.prototype.getNormalizationVector=function(){var t=hy(regeneratorRuntime.mark((function t(e,n,r,i){var o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=bS.getNormalizationVectorKey(e,n,r,i),!this.normVectorCache.hasOwnProperty(o)){t.next=5;break}return t.abrupt("return",this.normVectorCache[o]);case 5:return t.next=7,this.hicFile.getNormalizationVector(e,n,r,i);case 7:return a=t.sent,this.normVectorCache[o]=a,t.abrupt("return",a);case 10:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),kS.prototype.getZoomIndexForBinSize=function(t,e){var n,r;if("BP"===(e=e||"BP"))r=this.bpResolutions;else{if("FRAG"!==e)throw new Error("Invalid unit: "+e);r=this.fragResolutions}for(n=0;n<r.length;n++)if(r[n]===t)return n;return-1},kS.prototype.getBinSizeForZoomIndex=function(t,e){var n;if("BP"===(e=e||"BP"))n=this.bpResolutions;else{if("FRAG"!==e)throw new Error("Invalid unit: "+e);n=this.fragResolutions}return n[t]},kS.prototype.getChrIndexFromName=function(t){var e;for(e=0;e<this.chromosomes.length;e++)if(t===this.chromosomes[e].name)return e},kS.prototype.compareChromosomes=function(t){var e=this.chromosomes,n=t.chromosomes;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].size!==n[r].size)return!1;return!0},kS.prototype.getNormVectorIndex=hy(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.hicFile.getNormVectorIndex());case 1:case"end":return t.stop()}}),t,this)}))),kS.prototype.getNormalizationOptions=hy(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.hicFile.getNormalizationOptions());case 1:case"end":return t.stop()}}),t,this)}))),kS.prototype.isWholeGenome=function(t){return null!=this.wholeGenomeChromosome&&this.wholeGenomeChromosome.index===t};var SS=function(t,e,n){this.blockNumber=t,this.zoomData=e,this.records=n},CS=function(t,e,n){this.bin1=t,this.bin2=e,this.counts=n};CS.prototype.getKey=function(){return this.bin1+"_"+this.bin2};var _S=function(t,e){this.id=t,this.chromosomes=e,this.wgChromosomeNames=[],this.chromosomeLookupTable={},this.genomeLength=0;var n=!0,r=!1,i=void 0;try{for(var o,a=this.chromosomes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.bpLength=s.size,"all"!==s.name.toLowerCase()&&(this.genomeLength+=s.size,this.wgChromosomeNames.push(s.name))}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var c={},h=!0,l=!1,u=void 0;try{for(var f,p=e[Symbol.iterator]();!(h=(f=p.next()).done);h=!0){var d=f.value,g=d.name;if(g.startsWith("arm_")){var m=g.substring(4);c[m]=g,c["chr"+m]=g}else{c[g.startsWith("chr")?g.substring(3):"chr"+g]=g,"chrM"===g&&(c.MT="chrM"),"MT"===g&&(c.chrmM="MT")}this.chromosomeLookupTable[g.toLowerCase()]=d}}catch(t){l=!0,u=t}finally{try{h||null==p.return||p.return()}finally{if(l)throw u}}this.chrAliasTable=c};function RS(){var t,e,n,r;for(t={},e=0,n=1;n<this.chromosomes.length;n++)t[(r=this.chromosomes[n]).name]=Math.floor(e),e+=r.size;this.cumulativeOffsets=t}_S.prototype.getChromosomeName=function(t){var e=this.chrAliasTable[t];return e||t},_S.prototype.getChromosome=function(t){var e=this.getChromosomeName(t).toLowerCase();return this.chromosomeLookupTable[e]},_S.prototype.getGenomeCoordinate=function(t,e){return this.getCumulativeOffset(t.name)+e},_S.prototype.getChromsosomeForCoordinate=function(t){var e,n=0,r=0;for(n=1;n<this.chromosomes.length;n++){if(r+(e=this.chromosomes[n].size)>t)return this.chromosomes[n];r+=e}return this.chromosomes[this.chromosomes.length-1]},_S.prototype.getCumulativeOffset=function(t){var e;return e=this.getChromosomeName(t),void 0===this.cumulativeOffsets&&RS.call(this),this.cumulativeOffsets[e]},_S.prototype.getGenomeLength=function(){return this.genomeLength};var TS=function(t,e){return new Promise((function(n,r){var i="https://portals.broadinstitute.org/webservices/igv/locus?genome="+t+"&name="+e;ic.xhr.loadString(i).then((function(t){var e=function(t){var e=bw(t),n=[],r=[];return e.forEach((function(t){""===t||n.push(t)})),n.forEach((function(t){var e=t.split("\t");e.length>=3&&r.push(e[1])})),r}(t);0===e.length?n(void 0):n(e[0])})).catch(r)}))};var ES,AS=ic.google,LS=ic.oauth,IS=function(){function t(e){ly(this,t),this.config=e,this.url=e.path||e.url}var e;return fy(t,[{key:"read",value:(e=hy(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,h,l,u,f,p,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=function(){return(d=hy(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof e){t.next=6;break}return t.next=3,Promise.resolve(e());case 3:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)},p=function(t){return d.apply(this,arguments)},i=this.config.headers||{},o="bytes="+e+"-"+(e+n-1),i.Range=o,a=this.url.slice(),t.t0=this.config.oauthToken,t.t0){t.next=11;break}return t.next=10,DS();case 10:t.t0=t.sent;case 11:if(!(s=t.t0)){t.next=17;break}return t.next=15,p(s);case 15:c=t.sent,i.Authorization="Bearer ".concat(c);case 17:return AS.apiKey&&(a=MS(a,"key",AS.apiKey)),t.next=20,fetch(a,{method:"GET",headers:i,redirect:"follow",mode:"cors"});case 20:if(h=t.sent,!((l=h.status)>=200&&l<300)){t.next=27;break}if(!(e>0&&206!==l)){t.next=25;break}throw Error("ERROR: range-byte header was ignored for url: "+a);case 25:t.next=47;break;case 27:if(404!==l&&401!==l||"undefined"==typeof gapi||r){t.next=35;break}return t.next=30,DS();case 30:return u=t.sent,this.config.oauthToken=u,t.abrupt("return",this.read(e,n,!0));case 35:if(403!==l){t.next=39;break}throw Error("Access forbidden");case 39:if(416!==l){t.next=43;break}throw Error("Unsatisfiable range");case 43:if(!(l>=400)){t.next=47;break}throw(f=Error(h.statusText)).code=l,f;case 47:return t.abrupt("return",h.arrayBuffer());case 48:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})}]),t}();function MS(t,e,n){var r=t.includes("?")?"&":"?";return t+r+e+"="+n}function DS(){return BS.apply(this,arguments)}function BS(){return(BS=hy(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!LS.google.access_token){t.next=2;break}return t.abrupt("return",Promise.resolve(LS.google.access_token));case 2:if(!ES){t.next=4;break}return t.abrupt("return",ES);case 4:if(gapi.auth2.getAuthInstance()){t.next=8;break}return lw.presentAlert("Authorization is required, but Google oAuth has not been initalized.  Contact your site administrator for assistance."),t.abrupt("return",void 0);case 8:return"https://www.googleapis.com/auth/devstorage.read_only https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/drive.readonly",(e=new gapi.auth2.SigninOptionsBuilder).setPrompt("select_account"),e.setScope("https://www.googleapis.com/auth/devstorage.read_only https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/drive.readonly"),ES=new Promise((function(t,n){lw.presentAlert("Google Login required",(function(){gapi.auth2.getAuthInstance().signIn(e).then((function(e){var n=e.getAuthResponse();LS.google.setToken(n.access_token),t(n.access_token),ES=void 0})).catch((function(t){ES=void 0,n(t)}))}))})),t.abrupt("return",ES);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var FS=new Ip(0,0,0,0,0,1,"NONE"),NS=function(t,e){var n=this;this.config=e,this.figureMode=e.figureMode||e.miniMode,this.resolutionLocked=!1,this.eventBus=new ck,this.showTrackLabelAndGutter=!0,this.id="browser_".concat(Gy()),this.trackRenderers=[],this.tracks2D=[],this.normVectorFiles=[],this.synchedBrowsers=[],this.isMobile=yk(),this.$root=sk('<div class="hic-root unselect">'),e.width&&this.$root.css("width",String(e.width)),e.height&&this.$root.css("height",String(e.height+vS())),t.append(this.$root),this.layoutController=new mS(this,this.$root),this.locusGoto=new Wk(this,yS(this)),this.resolutionSelector=new Zk(this,yS(this)),this.resolutionSelector.setResolutionLock(this.resolutionLocked),this.colorscaleWidget=new Kk(this,yS(this)),this.controlMapWidget=new Vk(this,yS(this)),this.normalizationSelector=new tS(this,yS(this));var r=new pS(this,this.layoutController.getContactMatrixViewport()),i=new uS(this,this.layoutController.getXAxisScrollbarContainer(),this.layoutController.getYAxisScrollbarContainer()),o=new Np({threshold:2e3,r:255,g:0,b:0}),a=new Fp(5);this.contactMatrixView=new Dk(this,this.layoutController.getContactMatrixViewport(),r,i,o,a),this.$menu=this.createMenu(this.$root),this.$menu.hide(),this.chromosomeSelector=new jk(this,this.$menu.find(".hic-chromosome-selector-widget-container"));this.annotation2DWidget=new sS(this,this.$menu.find(".hic-annotation-presentation-button-container"),{title:"2D Annotations",alertMessage:"No 2D annotations currently loaded for this map"},(function(){return n.tracks2D})),this.$user_interaction_shield=sk("<div>",{class:"hic-root-prevent-interaction"}),this.$root.append(this.$user_interaction_shield),this.$user_interaction_shield.hide(),this.hideCrosshairs(),this.state=e.state?e.state:FS.clone(),this.eventBus.subscribe("LocusChange",this)};function OS(t){return PS.apply(this,arguments)}function PS(){return(PS=hy(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.name||"string"!=typeof e.url||!e.url.includes("drive.google.com")){t.next=7;break}return t.next=3,ic.google.getDriveFileInfo(e.url);case 3:return n=t.sent,t.abrupt("return",n.name);case 7:if(void 0!==e.name){t.next=11;break}return t.abrupt("return",wk(e.url));case 11:return t.abrupt("return",e.name);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zS(t,e){return $S.apply(this,arguments)}function $S(){return($S=hy(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.contactMatrixView.getViewDimensions(),i=this.dataset.chromosomes[e].size,o=this.dataset.chromosomes[n].size,a=Math.max(i/r.width,o/r.height),t.next=6,this.dataset.getMatrix(e,n);case 6:return s=t.sent,t.abrupt("return",s.findZoomForResolution(a));case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function US(t,e,n){return HS.apply(this,arguments)}function HS(){return(HS=hy(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,h,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.contactMatrixView.getViewDimensions(),o=this.dataset.chromosomes[e].size,a=this.dataset.chromosomes[n].size,t.next=5,this.dataset.getMatrix(e,n);case 5:return s=t.sent,c=s.getZoomDataByIndex(r,"BP"),h=c.zoom.binSize,l=o/h,u=a/h,t.abrupt("return",Math.min(i.width/l,i.height/u));case 11:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function jS(t){return t.hicFile.config.nvi}function VS(t,e,n){return t.split(e).join(n)}function qS(t){return GS.apply(this,arguments)}function GS(){return(GS=hy(regeneratorRuntime.mark((function t(e){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.url instanceof File?(e.blob=e.url,delete e.url):ic.google.isGoogleURL(e.url)&&(ic.google.isGoogleDrive(e.url)&&(e.url=ic.google.driveDownloadURL(e.url)),n=Object.assign({},e),e.file=new IS(n),e.apiKey=ic.google.apiKey),r=new zy(e),i=r.hicFile,t.next=5,i.init();case 5:return(o=new kS(i)).url=e.url,t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function WS(t,e){var n={401:"Access unauthorized",403:"Access forbidden",404:"Not found"},r=e.message;n.hasOwnProperty(r)&&(r=n[r]),lw.presentAlert(t+": "+r)}NS.getCurrentBrowser=function(){return 1===pk.length?pk[0]:NS.currentBrowser},NS.setCurrentBrowser=function(t){if(void 0===t)return NS.currentBrowser&&NS.currentBrowser.$root.removeClass("hic-root-selected"),void(NS.currentBrowser=t);t!==NS.currentBrowser&&(NS.currentBrowser&&NS.currentBrowser.$root.removeClass("hic-root-selected"),t.$root.addClass("hic-root-selected"),NS.currentBrowser=t,fk.post(hk("BrowserSelect",t)))},NS.prototype.createMenu=function(t){var e=this;t.append(sk('<div class="hic-menu" style="display: none;">\n            <div class="hic-menu-close-button">\n                <i class="fa fa-times"></i>\n            </div>\n\t        <div class="hic-chromosome-selector-widget-container">\n\t\t        <div>Chromosomes</div>\n                <div>\n                    <select name="x-axis-selector"></select>\n                    <select name="y-axis-selector"></select>\n                    <div></div>\n                </div>\n\t        </div>\n\t        <div class="hic-annotation-presentation-button-container">\n\t\t        <button type="button">2D Annotations</button>\n\t        </div>\n        </div>'));var n=t.find(".hic-menu");return t.find(".fa-times").on("click",(function(){return e.toggleMenu()})),n},NS.prototype.toggleTrackLabelAndGutterState=function(){this.showTrackLabelAndGutter=!this.showTrackLabelAndGutter},NS.prototype.toggleMenu=function(){this.$menu.is(":visible")?this.hideMenu():this.showMenu()},NS.prototype.showMenu=function(){this.$menu.show()},NS.prototype.hideMenu=function(){this.$menu.hide()},NS.prototype.startSpinner=function(){this.contactMatrixView.startSpinner()},NS.prototype.stopSpinner=function(){this.contactMatrixView.stopSpinner()},NS.prototype.setDisplayMode=function(){var t=hy(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contactMatrixView.setDisplayMode(e);case 2:this.eventBus.post(hk("DisplayMode",e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),NS.prototype.getDisplayMode=function(){return this.contactMatrixView?this.contactMatrixView.displayMode:void 0},NS.prototype.toggleDisplayMode=function(){this.controlMapWidget.toggleDisplayMode()},NS.prototype.getResolutions=function(){if(!this.dataset)return[];var t=this.dataset.bpResolutions.map((function(t,e){return{index:e,binSize:t}}));if(this.controlDataset){var e=new Set(this.controlDataset.bpResolutions);return t.filter((function(t){return e.has(t.binSize)}))}return t},NS.prototype.getColorScale=function(){if(this.contactMatrixView)switch(this.getDisplayMode()){case"AOB":case"BOA":return this.contactMatrixView.ratioColorScale;case"AMB":return this.contactMatrixView.diffColorScale;default:return this.contactMatrixView.colorScale}},NS.prototype.setColorScaleThreshold=function(t){this.contactMatrixView.setColorScaleThreshold(t)},NS.prototype.updateCrosshairs=function(t){var e=t.x,n=t.y,r=t.xNormalized,i=t.yNormalized,o=n<0?{left:0}:{top:n,left:0};this.contactMatrixView.$x_guide.css(o),this.layoutController.$x_track_guide.css(o);var a=e<0?{top:0}:{top:0,left:e};if(this.contactMatrixView.$y_guide.css(a),this.layoutController.$y_track_guide.css(a),this.customCrosshairsHandler){var s=this.state,c=s.x,h=s.y,l=s.pixelSize,u=this.resolution(),f=(c+e/l)*u,p=(h+n/l)*u,d=this.genomicState("x"),g=d.startBP,m=d.endBP,v=this.genomicState("y"),y=v.startBP,w=v.endBP;this.customCrosshairsHandler({xBP:f,yBP:p,startXBP:g,startYBP:y,endXBP:m,endYBP:w,interpolantX:r,interpolantY:i})}},NS.prototype.setCustomCrosshairsHandler=function(t){this.customCrosshairsHandler=t},NS.prototype.hideCrosshairs=function(){this.contactMatrixView.$x_guide.hide(),this.layoutController.$x_track_guide.hide(),this.contactMatrixView.$y_guide.hide(),this.layoutController.$y_track_guide.hide()},NS.prototype.showCrosshairs=function(){this.contactMatrixView.$x_guide.show(),this.layoutController.$x_track_guide.show(),this.contactMatrixView.$y_guide.show(),this.layoutController.$y_track_guide.show()},NS.prototype.genomicState=function(t){var e,n;return e={bpp:(n=this.dataset.bpResolutions[this.state.zoom])/this.state.pixelSize},"x"===t?(e.chromosome=this.dataset.chromosomes[this.state.chr1],e.startBP=this.state.x*n,e.endBP=e.startBP+e.bpp*this.contactMatrixView.getViewDimensions().width):(e.chromosome=this.dataset.chromosomes[this.state.chr2],e.startBP=this.state.y*n,e.endBP=e.startBP+e.bpp*this.contactMatrixView.getViewDimensions().height),e},NS.prototype.loadTracks=function(){var t=hy(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,c,h,l,u,f,p,d,g,m,v,y,w,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b=function(t){var e=[];return t.forEach((function(t){var n=t.url;n&&"string"==typeof n&&n.includes("drive.google.com")?e.push(ic.google.getDriveFileInfo(t.url).then((function(e){return t.url=e.originalFilename,mw(t),void 0===t.name&&(t.name=e.originalFilename),t.url=n,t}))):(mw(t),t.name||(t.name=wk(t.url)),e.push(Promise.resolve(t)))})),e},n=this,r=1===e.length?"Error loading track "+e[0].name:"Error loading tracks",t.prev=3,this.contactMatrixView.startSpinner(),i=b(e),t.next=8,Promise.all(i);case 8:for(o=t.sent,a=[],s=[],c=[],h=!0,l=!1,u=void 0,t.prev=15,f=o[Symbol.iterator]();!(h=(p=f.next()).done);h=!0)(d=p.value)&&(g=d.url instanceof File,m=g?d.url.name:d.url,"annotation"===d.type&&void 0===d.color&&(d.color="rgb(22, 129, 198)",d.displayMode="COLLAPSED"),void 0===d.max&&(d.autoscale=!0),d.height=(d.type,40),(m.endsWith(".juicerformat")||m.endsWith("nv")||m.endsWith(".juicerformat.gz")||m.endsWith("nv.gz"))&&c.push(this.loadNormalizationFile(d.url)),void 0===d.type||"interaction"===d.type?s.push(Rk.loadTrack2D(d)):(v=ic.createTrack(d,this),a.push({x:v,y:v})));t.next=23;break;case 19:t.prev=19,t.t0=t.catch(15),l=!0,u=t.t0;case 23:t.prev=23,t.prev=24,h||null==f.return||f.return();case 26:if(t.prev=26,!l){t.next=29;break}throw u;case 29:return t.finish(26);case 30:return t.finish(23);case 31:if(!(a.length>0)){t.next=37;break}return this.layoutController.tracksLoaded(a),y=sk(".igv-right-hand-gutter"),!0===this.showTrackLabelAndGutter?y.show():y.hide(),t.next=37,this.updateLayout();case 37:return t.next=39,Promise.all(s);case 39:return(w=t.sent)&&w.length>0&&(this.tracks2D=n.tracks2D.concat(w),this.eventBus.post(hk("TrackLoad2D",this.tracks2D))),t.next=43,Promise.all(c);case 43:t.sent,t.next=50;break;case 46:t.prev=46,t.t1=t.catch(3),WS(r,t.t1),console.error(t.t1);case 50:return t.prev=50,this.contactMatrixView.stopSpinner(),t.finish(50);case 53:case"end":return t.stop()}}),t,this,[[3,46,50,53],[15,19,23,31],[24,,26,30]])})));return function(e){return t.apply(this,arguments)}}(),NS.prototype.loadNormalizationFile=function(t){var e=this;if(this.dataset)return e.eventBus.post(hk("NormalizationFileLoad","start")),this.dataset.hicFile.readNormalizationVectorFile(t,this.dataset.chromosomes).then((function(t){Object.assign(e.dataset.normVectorCache,t);var n=!0,r=!1,i=void 0;try{for(var o,a=t.types[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.dataset.normalizationTypes||(e.dataset.normalizationTypes=[]),e.dataset.normalizationTypes.includes(s)||e.dataset.normalizationTypes.push(s),e.eventBus.post(hk("NormVectorIndexLoad",e.dataset))}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}))},NS.prototype.renderTracks=function(){var t=this;this.trackRenderers.forEach((function(e,n){t.renderTrackXY(e)}))},NS.prototype.renderTrackXY=function(){var t=hy(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.startSpinner(),t.next=4,e.x.repaint(n);case 4:return t.next=6,e.y.repaint(n);case 6:return t.prev=6,this.stopSpinner(),t.finish(6);case 9:case"end":return t.stop()}}),t,this,[[0,,6,9]])})));return function(e,n){return t.apply(this,arguments)}}(),NS.prototype.reset=function(){this.layoutController.removeAllTrackXYPairs(),this.contactMatrixView.clearImageCaches(),this.tracks2D=[],this.tracks=[],this.$contactMaplabel.text(""),this.$contactMaplabel.attr("title",""),this.$controlMaplabel.text(""),this.$controlMaplabel.attr("title",""),this.dataset=void 0,this.controlDataset=void 0},NS.prototype.clearSession=function(){this.dataset=void 0,this.controlDataset=void 0,this.setDisplayMode("A")},NS.prototype.loadHicFile=function(){var t=hy(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,c,h,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url){t.next=2;break}return t.abrupt("return",void 0);case 2:return this.clearSession(),t.prev=3,n||(this.contactMatrixView.startSpinner(),this.$user_interaction_shield.show()),t.next=7,OS(e);case 7:return r=t.sent,i=this.controlDataset?"A: ":"",this.$contactMaplabel.text(i+r),this.$contactMaplabel.attr("title",r),e.name=r,t.next=14,qS(e);case 14:this.dataset=t.sent,this.dataset.name=r,o=this.genome?this.genome.id:void 0,this.genome=new _S(this.dataset.genomeId,this.dataset.chromosomes),ic.browser.genome=this.genome,this.genome.id!==o&&ck.globalBus.post(hk("GenomeChange",this.genome.id)),this.eventBus.post(hk("MapLoad",this.dataset)),e.state?this.setState(e.state):e.synchState&&this.canBeSynched(e.synchState)?this.syncState(e.synchState):this.setState(FS.clone());case 22:return t.prev=22,n||(this.$user_interaction_shield.hide(),this.stopSpinner()),t.finish(22);case 25:if(a=this.eventBus,e.nvi||"string"!=typeof e.url){t.next=37;break}return s=new URL(e.url),c=encodeURIComponent(s.hostname+s.pathname),t.next=31,fetch("https://t5dvc6kn3f.execute-api.us-east-1.amazonaws.com/dev/nvi/"+c);case 31:if(200!==(h=t.sent).status){t.next=37;break}return t.next=35,h.text();case 35:(l=t.sent)&&(e.nvi=l);case 37:if(!e.nvi){t.next=43;break}return t.next=40,this.dataset.getNormVectorIndex(e);case 40:a.post(hk("NormVectorIndexLoad",this.dataset)),t.next=45;break;case 43:(u=this.dataset).getNormVectorIndex(e).then((function(t){e.isControl||a.post(hk("NormVectorIndexLoad",u))}));case 45:case"end":return t.stop()}}),t,this,[[3,,22,25]])})));return function(e,n){return t.apply(this,arguments)}}(),NS.prototype.loadHicControlFile=function(){var t=hy(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.$user_interaction_shield.show(),this.contactMatrixView.startSpinner(),this.controlUrl=e.url,t.next=6,OS(e);case 6:return r=t.sent,e.name=r,t.next=10,qS(e);case 10:if((i=t.sent).name=r,this.dataset&&!vk(this.dataset,i)){t.next=23;break}return this.controlDataset=i,this.dataset&&this.$contactMaplabel.text("A: "+this.dataset.name),this.$controlMaplabel.text("B: "+i.name),this.$controlMaplabel.attr("title",i.name),t.next=19,i.getNormVectorIndex(e);case 19:this.eventBus.post(hk("ControlMapLoad",this.controlDataset)),n||this.update(),t.next=24;break;case 23:lw.presentAlert('"B" map genome ('+i.genomeId+') does not match "A" map genome ('+this.genome.id+")");case 24:return t.prev=24,this.$user_interaction_shield.hide(),this.stopSpinner(),t.finish(24);case 28:case"end":return t.stop()}}),t,this,[[0,,24,28]])})));return function(e,n){return t.apply(this,arguments)}}(),NS.prototype.parseGotoInput=function(){var t=hy(regeneratorRuntime.mark((function t(e){var n,r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,1===(r=e.split(" ")).length?(i=n.parseLocusString(r[0]),o=i):(i=n.parseLocusString(r[0]),void 0===(o=n.parseLocusString(r[1]))&&(o=i)),void 0!==i){t.next=9;break}return t.next=5,TS(this.genome.id,r[0].trim());case 5:(a=t.sent)?(Op.selectedGene=r[0].trim(),i=n.parseLocusString(a),o=i,n.state.selectedGene=Op.selectedGene,n.goto(i.chr,i.start,i.end,o.chr,o.start,o.end,5e3)):alert('No feature found with name "'+r[0]+'"'),t.next=15;break;case 9:if(!i.wholeChr||!o.wholeChr){t.next=14;break}return t.next=12,n.setChromosomes(i.chr,o.chr);case 12:t.next=15;break;case 14:n.goto(i.chr,i.start,i.end,o.chr,o.start,o.end);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),NS.prototype.findMatchingZoomIndex=function(t,e){var n;for(n=e.length-1;n>0;n--)if(e[n]>=t)return n;return 0},NS.prototype.parseLocusString=function(t){var e,n,r,i,o={};if(e=t.trim().split(":"),n=this.genome.getChromosome(e[0].toLowerCase())){if(o.chr=n.index,1===e.length)o.start=0,o.end=this.dataset.chromosomes[o.chr].size,o.wholeChr=!0;else{if(2!==(r=e[1].split("-")).length)return;i=r[0].replace(/\,/g,""),o.start=isNaN(i)?void 0:parseInt(i,10)-1,i=r[1].replace(/\,/g,""),o.end=isNaN(i)?void 0:parseInt(i,10)}return o}},NS.prototype.pinchZoom=function(){var t=hy(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,h,l,u,f,p,d,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.state.chr1){t.next=5;break}return t.next=3,this.zoomAndCenter(1,e,n);case 3:t.next=34;break;case 5:return t.prev=5,this.startSpinner(),i=this.dataset.bpResolutions,o=i[this.state.zoom],this.resolutionLocked||this.state.zoom===i.length-1&&r>1||0===this.state.zoom&&r<1?(a=o,c=Math.min(12,this.state.pixelSize*r),s=this.state.zoom,h=!1):(l=o/this.state.pixelSize/r,s=this.findMatchingZoomIndex(l,i),a=i[s],h=s!==this.state.zoom,c=Math.min(12,a/l)),t.next=12,zS.call(this,this.state.chr1,this.state.chr2);case 12:if(u=t.sent,!(!this.resolutionLocked&&r<1&&s<u)){t.next=17;break}this.setChromosomes(0,0),t.next=31;break;case 17:return t.next=19,US.call(this,this.state.chr1,this.state.chr2,s);case 19:f=t.sent,p=this.state,c=Math.max(c,f),d=(p.x+e/p.pixelSize)*o,g=(p.y+n/p.pixelSize)*o,p.x=d/a-e/c,p.y=g/a-n/c,p.zoom=s,p.pixelSize=c,this.clamp(),this.contactMatrixView.zoomIn(e,n,1/r),this.eventBus.post(hk("LocusChange",{state:p,resolutionChanged:h}));case 31:return t.prev=31,this.stopSpinner(),t.finish(31);case 34:case"end":return t.stop()}}),t,this,[[5,,31,34]])})));return function(e,n,r){return t.apply(this,arguments)}}(),NS.prototype.wheelClickZoom=function(){var t=hy(regeneratorRuntime.mark((function t(e,n,r){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.resolutionLocked&&0!==this.state.chr1){t.next=4;break}this.zoomAndCenter(e,n,r),t.next=9;break;case 4:return t.next=6,zS.call(this,this.state.chr1,this.state.chr2);case 6:i=t.sent,o=this.state.zoom+e,e<0&&o<i?this.setChromosomes(0,0):this.zoomAndCenter(e,n,r);case 9:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),NS.prototype.zoomAndCenter=function(){var t=hy(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,h,l,u,f,p,d,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dataset){t.next=2;break}return t.abrupt("return");case 2:if(!(this.dataset.isWholeGenome(this.state.chr1)&&e>0)){t.next=7;break}i=n*this.dataset.wholeGenomeResolution/this.state.pixelSize,o=r*this.dataset.wholeGenomeResolution/this.state.pixelSize,a=this.genome.getChromsosomeForCoordinate(i),s=this.genome.getChromsosomeForCoordinate(o),this.setChromosomes(a.index,s.index),t.next=28;break;case 7:if(c=this.dataset.bpResolutions,h=this.contactMatrixView.getViewDimensions(),l=void 0===n?0:n-h.width/2,u=void 0===r?0:r-h.height/2,this.state.x+=l/this.state.pixelSize,this.state.y+=u/this.state.pixelSize,!(this.resolutionLocked||e>0&&this.state.zoom===c.length-1||e<0&&0===this.state.zoom)){t.next=27;break}return t.next=16,US.call(this,this.state.chr1,this.state.chr2,this.state.zoom);case 16:f=t.sent,p=this.state,d=Math.max(Math.min(12,p.pixelSize*(e>0?2:.5)),f),g=(d-p.pixelSize)/d,p.pixelSize=d,p.x+=g*(h.width/p.pixelSize),p.y+=g*(h.height/p.pixelSize),this.clamp(),this.eventBus.post(hk("LocusChange",{state:p,resolutionChanged:!1})),t.next=28;break;case 27:this.setZoom(this.state.zoom+e,r,r);case 28:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),NS.prototype.setZoom=function(){var t=hy(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,h,l,u,f,p,d,g,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d=this,i=this.dataset.bpResolutions,o=i[this.state.zoom],a=this.contactMatrixView.getViewDimensions(),s=this.state.x+a.width/(2*this.state.pixelSize),c=this.state.y+a.height/(2*this.state.pixelSize),h=i[e],l=s*(o/h),u=c*(o/h),t.next=12,US.call(this,this.state.chr1,this.state.chr2,e);case 12:return g=t.sent,m=d.state,f=Math.max(1,g),p=m.zoom!==e,m.zoom=e,m.x=Math.max(0,l-a.width/(2*f)),m.y=Math.max(0,u-a.height/(2*f)),m.pixelSize=f,d.clamp(),t.next=23,d.contactMatrixView.zoomIn();case 23:d.eventBus.post(hk("LocusChange",{state:m,resolutionChanged:p}));case 24:return t.prev=24,t.finish(24);case 26:case"end":return t.stop()}}),t,this,[[0,,24,26]])})));return function(e,n,r){return t.apply(this,arguments)}}(),NS.prototype.setChromosomes=function(){var t=hy(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.startSpinner(),this.state.chr1=Math.min(e,n),this.state.chr2=Math.max(e,n),this.state.x=0,this.state.y=0,t.next=8,zS.call(this,e,n);case 8:return r=t.sent,this.state.zoom=r,t.next=12,US.call(this,this.state.chr1,this.state.chr2,this.state.zoom);case 12:i=t.sent,this.state.pixelSize=Math.min(100,Math.max(1,i)),this.eventBus.post(hk("LocusChange",{state:this.state,resolutionChanged:!0,chrChanged:!0}));case 15:return t.prev=15,this.stopSpinner(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[0,,15,18]])})));return function(e,n){return t.apply(this,arguments)}}(),NS.prototype.updateLayout=hy(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t,e){t.$viewport.css({order:e}),t.syncCanvas()},this.clamp(),this.trackRenderers.forEach((function(t,n){e(t.x,n),e(t.y,n)})),this.layoutController.xAxisRuler.update(),this.layoutController.yAxisRuler.update(),t.next=8,this.update();case 8:case"end":return t.stop()}}),t,this)}))),NS.prototype.setState=function(){var t=hy(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.state=e,t.next=3,US.call(this,this.state.chr1,this.state.chr2,this.state.zoom);case 3:n=t.sent,this.state.pixelSize=Math.max(e.pixelSize,n),this.eventBus.post(new hk("LocusChange",{state:this.state,resolutionChanged:!0}));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),NS.prototype.getSyncState=function(){return{chr1Name:this.dataset.chromosomes[this.state.chr1].name,chr2Name:this.dataset.chromosomes[this.state.chr2].name,binSize:this.dataset.bpResolutions[this.state.zoom],binX:this.state.x,binY:this.state.y,pixelSize:this.state.pixelSize}},NS.prototype.canBeSynched=function(t){return this.dataset&&void 0!==this.dataset.getChrIndexFromName(t.chr1Name)&&void 0!==this.dataset.getChrIndexFromName(t.chr2Name)},NS.prototype.syncState=function(t){if(this.dataset){var e=this.genome.getChromosome(t.chr1Name),n=this.genome.getChromosome(t.chr2Name),r=this.dataset.getZoomIndexForBinSize(t.binSize,"BP"),i=t.binX,o=t.binY,a=t.pixelSize;if(e&&n&&!(void 0===r&&(r=this.findMatchingZoomIndex(t.binSize,this.dataset.bpResolutions),a=t.pixelSize/t.binSize*this.dataset.bpResolutions[r],i=t.binX/t.pixelSize*a,o=t.binY/t.pixelSize*a,a>12))){var s=this.state.zoom!==r;this.state.chr1=e.index,this.state.chr2=n.index,this.state.zoom=r,this.state.x=i,this.state.y=o,this.state.pixelSize=a,this.eventBus.post(hk("LocusChange",{state:this.state,resolutionChanged:s},!1))}}},NS.prototype.setNormalization=function(t){this.state.normalization=t,this.eventBus.post(hk("NormalizationChange",this.state.normalization))},NS.prototype.shiftPixels=function(t,e){if(this.dataset){this.state.x+=t/this.state.pixelSize,this.state.y+=e/this.state.pixelSize,this.clamp();var n=hk("LocusChange",{state:this.state,resolutionChanged:!1,dragging:!0});n.dragging=!0,this.eventBus.post(n)}},NS.prototype.goto=function(t,e,n,r,i,o,a){var s,c,h,l,u,f,p,d,g,m,v=this.contactMatrixView.getViewDimensions(),y=this.dataset.bpResolutions,w=v.width;h=Math.max((n-e)/v.width,(o-i)/v.height),a&&h<a&&(u=w*a,s=(e+n)/2,c=(i+o)/2,e=Math.max(s-u/2),i=Math.max(0,c-u/2),h=a),!0===this.resolutionLocked&&void 0===a?(m=!1,f=this.state.zoom):m=(f=this.findMatchingZoomIndex(h,y))!==this.state.zoom,l=y[f],p=Math.min(12,Math.max(1,l/h)),d=e/l,g=i/l,this.state.chr1=t,this.state.chr2=r,this.state.zoom=f,this.state.x=d,this.state.y=g,this.state.pixelSize=p,this.contactMatrixView.clearImageCaches(),this.eventBus.post(hk("LocusChange",{state:this.state,resolutionChanged:m}))},NS.prototype.clamp=function(){var t=this.contactMatrixView.getViewDimensions(),e=this.dataset.chromosomes[this.state.chr1].size,n=this.dataset.chromosomes[this.state.chr2].size,r=this.dataset.bpResolutions[this.state.zoom],i=e/r-t.width/this.state.pixelSize,o=n/r-t.height/this.state.pixelSize;i=Math.max(0,i),o=Math.max(0,o),this.state.x=Math.min(Math.max(0,this.state.x),i),this.state.y=Math.min(Math.max(0,this.state.y),o)},NS.prototype.receiveEvent=function(t){var e=this;"LocusChange"===t.type&&(t.propogate&&e.synchedBrowsers.forEach((function(t){t.syncState(e.getSyncState())})),this.update(t))},NS.prototype.update=function(){var t=hy(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.startSpinner(),void 0!==e&&"LocusChange"===e.type&&(this.layoutController.xAxisRuler.locusChange(e),this.layoutController.yAxisRuler.locusChange(e)),this.renderTracks()}finally{this.stopSpinner()}case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),NS.prototype.repaintMatrix=function(){this.contactMatrixView.imageTileCache={},this.contactMatrixView.initialImage=void 0,this.contactMatrixView.update()},NS.prototype.resolution=function(){return this.dataset.bpResolutions[this.state.zoom]},NS.prototype.toJSON=function(){if(!this.dataset||!this.dataset.url)return"{}";var t={};t.url=this.dataset.url,this.dataset.name&&(t.name=this.dataset.name),t.state=this.state.stringify(),t.colorScale=this.contactMatrixView.getColorScale().stringify(),Op.selectedGene&&(t.selectedGene=Op.selectedGene);var e=jS(this.dataset);(e&&(t.nvi=e),this.controlDataset)&&(t.controlUrl=this.controlUrl,this.controlDataset.name&&(t.controlName=this.controlDataset.name),this.getDisplayMode()&&(t.displayMode=this.getDisplayMode()),(e=jS(this.controlDataset))&&(t.controlNvi=e),void 0!==this.controlMapWidget.getDisplayModeCycle()&&(t.cycle=!0));if(this.trackRenderers.length>0||this.tracks2D.length>0){var n=[];t.tracks=n;var r=!0,i=!1,o=void 0;try{for(var a,s=this.trackRenderers[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value.x.track,h=c.config;if("string"==typeof h.url){var l={url:h.url};c.name&&(l.name=c.name),c.dataRange&&(l.min=c.dataRange.min,l.max=c.dataRange.max),c.color&&(l.color=c.color),n.push(l)}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var u=!0,f=!1,p=void 0;try{for(var d,g=this.tracks2D[Symbol.iterator]();!(u=(d=g.next()).done);u=!0){var m=d.value,v=m.config;if("string"==typeof v.url){var y={url:v.url};m.name&&(y.name=m.name),m.color&&(y.color=m.color),n.push(y)}}}catch(t){f=!0,p=t}finally{try{u||null==g.return||g.return()}finally{if(f)throw p}}}return t},NS.prototype.getQueryString=function(){if(!this.dataset||!this.dataset.url)return"";var t=[];t.push(o("hicUrl",this.dataset.url)),this.dataset.name&&t.push(o("name",this.dataset.name)),t.push(o("state",this.state.stringify())),t.push(o("colorScale",this.contactMatrixView.getColorScale().stringify())),Op.selectedGene&&t.push(o("selectedGene",Op.selectedGene));var e=jS(this.dataset);(e&&t.push(o("nvi",e)),this.controlDataset)&&(t.push(o("controlUrl",this.controlUrl)),this.controlDataset.name&&t.push(o("controlName",this.controlDataset.name)),this.getDisplayMode()&&t.push(o("displayMode",this.getDisplayMode())),(e=jS(this.controlDataset))&&t.push(o("controlNvi",e)),void 0!==this.controlMapWidget.getDisplayModeCycle()&&t.push(o("cycle","true")));if(this.trackRenderers.length>0||this.tracks2D.length>0){var n="";this.trackRenderers.forEach((function(t){var e=t.x.track,r=e.config.url,i=e.dataRange;"string"==typeof r&&(n.length>0&&(n+="|||"),n+=r,n+="|"+(e.name?VS(e.name,"|","$"):""),n+="|"+(i?i.min+"-"+i.max:""),n+="|"+e.color)})),this.tracks2D.forEach((function(t){var e=t.config.url;"string"==typeof e&&(n.length>0&&(n+="|||"),n+=e,n+="|"+(t.name?VS(t.name,"|","$"):""),n+="|",n+="|"+t.color)})),n.length>0&&t.push(o("tracks",n))}var r=document.getElementById("hic-caption");if(r){var i=r.textContent;i&&(i=i.trim())&&t.push(o("caption",i))}return t.join("&");function o(t,e){return t+"="+(n=Vp(e,"&","%26"),n=Vp(n," ","+"),n=Vp(n,"#","%23"),n=Vp(n,"?","%3F"),n=Vp(n,"=","%3D"));var n}};var ZS=function(t){this.api="https://www.googleapis.com/urlshortener/v1/url",this.apiKey=t.apiKey,this.hostname=t.hostname||"goo.gl"};function KS(){return XS.apply(this,arguments)}function XS(){return(XS=hy(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof(e=this).apiKey){t.next=5;break}return t.abrupt("return",e.apiKey);case 5:if("function"!=typeof e.apiKey){t.next=11;break}return t.next=8,e.apiKey();case 8:return t.abrupt("return",t.sent);case 11:throw new Error("Unknown apiKey type: "+this.apiKey);case 12:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}ZS.prototype.shortenURL=function(t){var e=this;return KS.call(this).then((function(n){var r=e.api+"?key="+n;return igv.xhr.loadJson(r,{sendData:JSON.stringify({longUrl:t}),contentType:"application/json"})})).then((function(t){return t.id}))},ZS.prototype.expandURL=function(t){var e=this;return KS.call(this).then((function(n){var r;return t.includes("goo.gl")?(r=e.api+"?shortUrl="+t+"&key="+n,igv.xhr.loadJson(r,{contentType:"application/json"}).then((function(t){return t.longUrl}))):Promise.resolve(t)}))};var YS=function(t){this.api="https://api-ssl.bitly.com",this.apiKey=t.apiKey,this.hostname=t.hostname?t.hostname:"bit.ly",this.devIP="192.168.1.11"};function QS(){return JS.apply(this,arguments)}function JS(){return(JS=hy(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof(e=this).apiKey){t.next=5;break}return t.abrupt("return",e.apiKey);case 5:if("function"!=typeof e.apiKey){t.next=11;break}return t.next=8,e.apiKey();case 8:return t.abrupt("return",t.sent);case 11:throw new Error("Unknown apiKey type: "+this.apiKey);case 12:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}YS.prototype.shortenURL=function(){var t=hy(regeneratorRuntime.mark((function t(e){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,!(e.length>2048)){t.next=3;break}return t.abrupt("return",e);case 3:return e.startsWith("http://localhost")&&(e=e.replace("localhost",this.devIP)),t.prev=4,t.next=7,QS.call(this);case 7:return r=t.sent,i=n.api+"/v3/shorten?access_token="+r+"&longUrl="+encodeURIComponent(e),t.next=11,igv.xhr.loadJson(i,{});case 11:if(500!==(o=t.sent).status_code){t.next=17;break}return alert("Error shortening URL: "+o.status_txt),t.abrupt("return",e);case 17:return t.abrupt("return",o.data.url);case 18:t.next=24;break;case 20:return t.prev=20,t.t0=t.catch(4),alert("Error shortening URL: "+t.t0),t.abrupt("return",e);case 24:case"end":return t.stop()}}),t,this,[[4,20]])})));return function(e){return t.apply(this,arguments)}}(),YS.prototype.expandURL=function(t){var e=this;return QS.call(this).then((function(n){var r=e.api+"/v3/expand?access_token="+n+"&shortUrl="+encodeURIComponent(t);return igv.xhr.loadJson(r,{})})).then((function(t){var e=t.data.expand[0].long_url;return e=e.replace("{","%7B").replace("}","%7D")}))};var tC,eC=function(){function t(e){var n=e.endpoint;ly(this,t),this.endpoint=n||"https://2et6uxfezb.execute-api.us-east-1.amazonaws.com/dev/tinyurl/"}var e;return fy(t,[{key:"shortenURL",value:(e=hy(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURIComponent(e),t.next=3,fetch("".concat(this.endpoint).concat(n));case 3:if(!(r=t.sent).ok){t.next=8;break}return t.abrupt("return",r.text());case 8:throw new Error(r.statusText);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),nC=function(t){var e=function(){var e=hy(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apiKey,r=t.clientId,i=t.scope,e.next=3,gapi.client.init({apiKey:n,clientId:r,scope:i.join(" ")});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();gapi.load("client:auth2",e)},rC=[];function iC(){return(iC=hy(regeneratorRuntime.mark((function t(e,n){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(tC=e,lw.init(e),(r=n.google?n.google.apiKey:void 0)&&"ABCD"!==r&&ic.google.setApiKey(r),"undefined"==typeof gapi||!n.google){t.next=7;break}return t.next=7,nC(n.google);case 7:if(n.urlShortener&&pC(n.urlShortener),i={},n.queryParametersSupported=void 0===n.queryParametersSupported||n.queryParametersSupported,!1!==n.queryParametersSupported){t.next=13;break}t.next=17;break;case 13:return i=qp(window.location.href),t.next=16,uC(i);case 16:i=t.sent;case 17:if(!i.hasOwnProperty("session")){t.next=29;break}if(!i.session.startsWith("blob:")){t.next=25;break}return(o=JSON.parse(yC(i.session.substr(5)))).initFromUrl=!1,t.next=23,aC(e,o);case 23:t.next=27;break;case 25:return t.next=27,cC(e,i);case 27:t.next=31;break;case 29:return t.next=31,cC(e,i);case 31:lC(pk);case 32:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oC(){return(oC=hy(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",aC(tC,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function aC(t,e){return sC.apply(this,arguments)}function sC(){return(sC=hy(regeneratorRuntime.mark((function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return dk(),n.hasOwnProperty("selectedGene")&&(Op.selectedGene=n.selectedGene),n.hasOwnProperty("caption")&&(r=n.caption,(i=document.getElementById("hic-caption"))&&(i.textContent=r)),t.next=5,gk(e,n.browsers[0]);case 5:for(o=[],a=1;a<n.browsers.length;a++)o.push(gk(e,n.browsers[a]));return t.next=9,Promise.all(o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function cC(t,e){return hC.apply(this,arguments)}function hC(){return(hC=hy(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,c,h,l,u,f,p,d,g,m,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&(n.hasOwnProperty("juicebox")?(r=n.juicebox).startsWith("%7B")&&(r=decodeURIComponent(r)):n.hasOwnProperty("juiceboxData")&&(r=yC(n.juiceboxData))),i=[],!r){t.next=37;break}return r=r.substr(1,r.length-2),o=r.split("},{"),a=decodeURIComponent(o[0]),t.next=8,gk(e,{queryString:a});case 8:if(s=t.sent,i.push(s),!(o&&o.length>1)){t.next=35;break}for(c=[],h=1;h<o.length;h++)c.push(gk(e,{queryString:decodeURIComponent(o[h])}));return t.next=15,Promise.all(c);case 15:for(l=t.sent,u=!0,f=!1,p=void 0,t.prev=19,d=l[Symbol.iterator]();!(u=(g=d.next()).done);u=!0)m=g.value,i.push(m);t.next=27;break;case 23:t.prev=23,t.t0=t.catch(19),f=!0,p=t.t0;case 27:t.prev=27,t.prev=28,u||null==d.return||d.return();case 30:if(t.prev=30,!f){t.next=33;break}throw p;case 33:return t.finish(30);case 34:return t.finish(27);case 35:t.next=41;break;case 37:return t.next=39,gk(e,{});case 39:v=t.sent,i.push(v);case 41:return t.abrupt("return",i);case 42:case"end":return t.stop()}}),t,null,[[19,23,27,35],[28,,30,34]])})))).apply(this,arguments)}function lC(t){var e,n;function r(t){switch(t){case"GRCh38":return"hg38";case"GRCh37":return"hg19";case"GRCm38":return"mm10";default:return t}}(e=t.filter((function(t){return void 0!==t.dataset}))).length<2||(r(t[0].dataset.genomeId),n=[],e.forEach((function(e){r(e.dataset.genomeId),vk(t[0].dataset,e.dataset)?t.forEach((function(t){e===t||e.synchedBrowsers.includes(t)||e.synchedBrowsers.push(t)})):n.push(e.dataset.genomeId)})),n.length>0&&lw.presentAlert("Not all maps could be synchronized.  Incompatible assemblies: "+t[0].dataset.genomeId+" vs "+n.join()))}function uC(t){return fC.apply(this,arguments)}function fC(){return(fC=hy(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.hasOwnProperty("juiceboxURL")){t.next=7;break}return t.next=3,vC(e.juiceboxURL);case 3:return n=t.sent,t.abrupt("return",qp(n));case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pC(t){t&&"none"!==t&&t.forEach((function(t){rC.push(function(t){if(t.provider){if("tinyURL"===t.provider)return new eC(t);if("google"===t.provider)return new ZS(t);if("bitly"===t.provider)return new YS(t);lw.presentAlert("Unknown url shortener provider: "+t.provider)}else{if("function"==typeof t.shortenURL)return t;lw.presentAlert("URL shortener object must define functions 'shortenURL'")}}(t))}))}function dC(){return(dC=hy(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="".concat(e,"?").concat(gC()),!(rC&&rC.length>0)){t.next=5;break}return t.abrupt("return",rC[0].shortenURL(n));case 5:return t.abrupt("return",Promise.resolve(n));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gC(){var t=JSON.stringify(mC());return"session=blob:".concat(function(t){var e,n,r;e=[];for(var i=0;i<t.length;i++)e.push(t.charCodeAt(i));return n=new xw.RawDeflate(e).compress(),r=String.fromCharCode.apply(null,n),btoa(r).replace(/\+/g,".").replace(/\//g,"_").replace(/\=/g,"-")}(t))}function mC(){var t={},e=[],n=!0,r=!1,i=void 0;try{for(var o,a=pk[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push(s.toJSON())}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t.browsers=e;var c=document.getElementById("hic-caption");if(c){var h=c.textContent;h&&(h=h.trim())&&(t.caption=h)}return Op.selectedGene&&(t.selectedGene=Op.selectedGene),t}function vC(t){var e,n,r=new URL(t).hostname;if(rC)for(e=0;e<rC.length;e++)if(r===(n=rC[e]).hostname)return n.expandURL(t);return lw.presentAlert("No expanders for URL: "+t),Promise.resolve(t)}function yC(t){t=t.replace(/\./g,"+").replace(/_/g,"/").replace(/-/g,"=");for(var e=atob(t),n=[],r=0;r<e.length;r++)n.push(e.charCodeAt(r));var i=new xw.RawInflate(n).decompress(),o="",a=!0,s=!1,c=void 0;try{for(var h,l=i[Symbol.iterator]();!(a=(h=l.next()).done);a=!0){var u=h.value;o+=String.fromCharCode(u)}}catch(t){s=!0,c=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw c}}return o}var wC=new Set(["fai","bai","crai","tbi","idx"]),bC=function(t){var e=new Set(["fa","fasta"]);return new Set([].concat(py(ic.knownFileExtensions),py(e))).has(t)},xC=function(t){return ic.getExtension({url:t.google_url?t.name:t})},kC=function(t){var e={fa:{index:"fai",isOptional:!1},fasta:{index:"fai",isOptional:!1},bam:{index:"bai",isOptional:!1},cram:{index:"crai",isOptional:!1},gz:{index:"tbi",isOptional:!0},bgz:{index:"tbi",isOptional:!0}};return e[t]?e[t]:{index:"idx",isOptional:!0}};return{loadSession:function(t){return oC.apply(this,arguments)},createBrowser:gk,decodeQuery:Hp,extractQuery:qp,HICBrowser:NS,allBrowsers:pk,eventBus:fk,initApp:function(t,e){return iC.apply(this,arguments)},syncBrowsers:lC,shortJuiceboxURL:function(t){return dC.apply(this,arguments)},getCompressedDataString:gC,decompressQueryParameter:yC,toJSON:mC,utils:Object.freeze({__proto__:null,validIndexExtensionSet:wC,isValidIndexExtension:function(t){return wC.has(xC(t))},getIndexObjectWithDataName:function(t){var e,n,r,i,o;if(e=xC(t),!1!==bC(e)){var a,s;if(n=t.split(".").pop(),(i={})[o=t+"."+(r=kC(n)).index]={},i[o].data=t,i[o].isOptional=r.isOptional,"bam"===e||"cram"===e)(s=t.split(".")).pop(),i[a=s.join(".")+"."+r.index]={},i[a].data=t,i[a].isOptional=r.isOptional;return i}},isKnownFileExtension:bC,getFilename:function(t){return t.google_url?t.name:ic.getFilename(t)},getExtension:xC,configureModal:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e.find(".modal-header button:nth-child(1)").on("click",(function(){t.dismiss(),e.modal("hide")})),e.find(".modal-footer button:nth-child(1)").on("click",(function(){t.dismiss(),e.modal("hide")})),e.find(".modal-footer button:nth-child(2)").on("click",(function(){!0===(n?n(t.fileLoadManager):t.fileLoadManager.okHandler())&&(t.dismiss(),e.modal("hide"))}))}}),igv:ic}}));
//# sourceMappingURL=juicebox.min.js.map
